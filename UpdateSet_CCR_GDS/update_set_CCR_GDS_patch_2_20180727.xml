<?xml version="1.0" encoding="UTF-8"?>
<unload unload_date="2018-07-27 20:45:11">
<sys_remote_update_set action="INSERT_OR_UPDATE">
<application display_value="Global">global</application>
<application_name>Global</application_name>
<application_scope>global</application_scope>
<application_version/>
<collisions/>
<commit_date/>
<deleted/>
<description/>
<inserted/>
<name>CCR_GDS_Patch_2_20180717</name>
<origin_sys_id/>
<parent display_value=""/>
<release_date/>
<remote_base_update_set display_value=""/>
<remote_parent_id/>
<remote_sys_id>a428d72adb1f130054d8ff621f96195f</remote_sys_id>
<state>loaded</state>
<summary/>
<sys_class_name>sys_remote_update_set</sys_class_name>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>bc576a31db2b5b00b86770c08c961913</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<update_set display_value=""/>
<update_source display_value=""/>
<updated/>
</sys_remote_update_set>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_18061ff8dbe7570054d8ff621f961913</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Submitted Table">d5c0724edb12360054d8ff621f96193b</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:35:12</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>18061ff8dbe7570054d8ff621f961913</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Submitted Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_18061ff8dbe7570054d8ff621f961913</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:35:12</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>1649433490</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>30576a31db2b5b00b86770c08c961916</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce4069b40000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Submitted Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>9838d3bc5ae75700ce1301f66e915278</update_guid>
<update_guid_history>9838d3bc5ae75700ce1301f66e915278:1649433490,10061ff8dfe75700120caa4d2f075c15:-34831330</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_6f34d3b8dbe7570054d8ff621f96194a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS IC Form Widget">2a1d6b2edb2f360054d8ff621f961976</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:27:30</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>6f34d3b8dbe7570054d8ff621f96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS IC Form Widget</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_6f34d3b8dbe7570054d8ff621f96194a</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:27:30</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>549933922</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>30576a31db2b5b00b86770c08c961919</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce30a08f0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS IC Form Widget</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>6734d3b8c2e757003f10e4f25502a54c</update_guid>
<update_guid_history>6734d3b8c2e757003f10e4f25502a54c:549933922</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_e7731b78dbe7570054d8ff621f9619ae</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS Data Display Section">15bc7770dba6ba0054d8ff621f961932</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:24:14</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>e7731b78dbe7570054d8ff621f9619ae</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS Data Display Section</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_e7731b78dbe7570054d8ff621f9619ae</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:24:14</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-2039956966</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>30576a31db2b5b00b86770c08c96191c</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2da0e40000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS Data Display Section</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>ef731b78f9e75700fc8d3fb3ae273caf</update_guid>
<update_guid_history>ef731b78f9e75700fc8d3fb3ae273caf:-2039956966</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_63fc8cdcdb284340f59974131f9619d3</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http, spUtil, $window) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	}; 
	c.state = $window.state;
	c.columns = [
		{
			key: 'ic_id',
			label: 'IC ID',
			sort: 'asc'
		},
		{
			key: 'study_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.approvalICTasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.approvalTasks = c.data.approvalTasks.sort(compareRows);
		}
	};
	//for reviewed table
	c.pagination1 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns1 = [
		{
			key: 'ic_id',
			label: 'IC ID',
			sort: 'asc'
		},
		{
			key: 'study_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'project_title',
			label: 'Project Title',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange1 = function() {
		var currentSize = c.pagination1.currentSize;
		var currentPage = c.pagination1.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.reviewedICTasks.length / currentSize));
	};
	
	c.setPage1 = function(index) {
		c.pagination1.currentPage = index;
	};
	
	c.toggleSort1 = function(index) {
		var column = c.columns1[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.reviewedTasks = c.data.reviewedTasks.sort(compareRows);
		}
	};
	//start client JS 
  $('.collapse').on('shown.bs.collapse', function() {
      $(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
  }).on('hidden.bs.collapse', function() {
      $(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
  });		
	var names = ['certification_date','institution_name', 'certification_to', 'certification_from', 'gpa_organization', 'sd_organization', 'study_name', 'project_title', 'sampleTime', 'sampleConsent'];
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;
	var gpa = c.data.info.gpa;
	var sd = c.data.info.sd;
	
	c.viewSDIC = function(doc_id, sys_id, state, stage, ticket_id){
		//alert(doc_id + ":" + sys_id +":" + stage + ":" + stage);
		fetchDetails(doc_id, sys_id, state, stage, ticket_id);
	}
	
	var initialTime = null;
	var documentTimeout = 60 * 1000;
	var documentInterval = null;
	
	c.reportSDIC = function(sys_id, ic_id, flag){
			$('#refresh').val('0');
			$('#loading').show();
		  var req_id = sys_id;
		  var fileName = '';
		  if(flag == 'pi'){
				fileName = ic_id+"_pi.pdf";
			}
			if(flag == 'sd'){
				fileName = ic_id+"_sd.pdf";
			}
			initialTime = new Date();
			documentInterval = setInterval(function() {
			 getDocument(req_id, fileName);
			}, 5000);		
	}
	function getDocument(req_id, fileName){
		  var req = {
					method: 'GET',
					url: '/api/naci/gds/getAttachmentFileID',
					beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				  params: {request_id: req_id, file_name: fileName}
			};
		  $http(req).then(handleResponse, handleError);
		  function handleResponse(response) {
					  if (new Date() - initialTime &gt; documentTimeout) {
							 window.clearInterval(documentInterval);
							 $('#messageInfo').html('Application fails to generate PDF document, please contact System Administrator');
               $('#infoModal').modal('show');
               $('#btnOkConfirm').off('click').click(function() {
                   $('#infoModal').modal('hide');
               });
							return;
						}				
					var result = response.data.result;
					//hightlight right record
				  var id = result.file_id;
		      if(id != null &amp;&amp; id.trim().length &gt; 0){
						window.clearInterval(documentInterval);
				    window.location.href = '/sys_attachment.do?sys_id=' + id;
						setTimeout(function(){}, 3000);
						$('#loading').hide();
					}
			}
			function handleError(response) {
			  window.clearInterval(documentInterval);
			  $('#loading').hide();
				console.error(response);
					alert('ERROR');
			}
	}
	
function fetchDetails(number, approvalId, state, stage, ticket_id){
		var variables= {};
		data = {
			requestedid : number	
		};
    var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
				var result = response.data.result;
			  var variables = result.variables;
			  var comments = "";
				comments = result.comments;
			  var comment_str = parse(comments);
			  $('#displayICId').html(ticket_id);
			  resetRequestValue();
			  loadApprovalData(variables);
			  clearDiv();
				$('#commentReviewICId1').empty();
				$('#commentReviewICId1').append(comment_str);

				$('#commentICId1').show();
				$('#commentICId1Lable').show();

				if(comment_str .length &lt; 137){
							 $('#pre_comments_ic_div').hide();
				 }else{
							 $('#pre_comments_ic_div').show();
				 }
				$('#hiddenRequestId').val(approvalId);
				$('#hiddenRequestItemId').val(number);
			  $('#roleId').val('SD');
				$('#comments_ic_div').show();
				if(state == 'approved' || state.indexOf('not_required') &gt;=0){
					 $('#comments_ic_div').hide();
					 $('#submitButton1').hide();
					 $('#closeButton1').show();
				}else if(state == 'requested' || state == 'rejected'){
					 if((stage == 'Waiting for GPA Review' || stage == 'SD Rejected - Waiting for GPA Review') &amp;&amp; gpa){
							$('#comments_ic_div').show();
							$('#sd_ic_div').show();
							$('#submitButton1').show();
							$('#closeButton1').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; !sd){
							$('#comments_ic_div').show();
							$('#sd_ic_div').hide();
							$('#submitButton1').show();
							$('#closeButton1').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; sd){
							$('#comments_ic_div').show();
							$('#sd_ic_div').hide();
							$('#submitButton1').show();
							$('#closeButton1').hide();
					 }else if(stage == 'SD Approved'){
								$('#comments_ic_div').hide();
								$('#sd_ic_div').hide();
								$('#submitButton1').hide();
								$('#closeButton1').show();
					 }else{
								$('#comments_ic_div').hide();
								$('#sd_ic_div').hide();
								$('#submitButton1').hide();
								$('#closeButton1').show();
					 }
				}else{
					 $('#comments_ic_div').show();
					 $('#submitButton1').show();
					 $('#closeButton1').hide();
				}
				var ticketN = $('#'+number+'_ticket').val();
				$('#displayICId').html(ticketN);		
			  $('#ic_modal_content').attr('style', 'height:800px; overflow-y:auto; overflow-x: hidden;');
			  loadConsentGroupData();
				if(variables.sampleTime == 'yes' &amp;&amp; variables.sampleConsent == 'no'){
					$('#insDiv').show();
				}else{
					$('#insDiv').hide();
				}			
			  $('#displayICRequests').modal('show').on('shown.bs.modal', function(){$('#displayICRequests .modal-content').scrollTop(0);}); 
		}
		function handleError(response){
			console.error(response);
			alert('ERROR');
		}
		$('#hiddenStage').val(stage);
 }	
	
	function loadConsentGroupData(){
		var consentStr = $('#consent_group1').val();
	  if(consentStr == null || typeof consentStr === 'undefined' || consentStr.trim().length == 0){
			$('#consentGrpDiv').hide();
		}else{
      getConsentGroups(consentStr);
		}
	}
	
	function getConsentGroups(consentStr){
		var request = {
				method: 'POST',
				url: '/api/naci/gds/fetchConsentGroupDataFromRequest',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: {consentGrp: consentStr}
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			var strTable = "&lt;table class='table table-bordered table-condensed table-hover' width='100%'&gt;&lt;tr bgcolor='lightgrey'&gt;&lt;th&gt;Collaborating Site Name&lt;/th&gt;&lt;th&gt;Data Use Limitation&lt;/th&gt;&lt;th&gt;Data Use Limitations Modifier&lt;/th&gt;&lt;/tr&gt;";
		  for(var i = 0; i &lt; result.length; i++){
				var use_limit = result[i].use_limit;
				if(result[i].data_field != null &amp;&amp; result[i].data_field.trim().length &gt; 0){
					use_limit = use_limit + " ["+ result[i].data_field +"] ";
				}			  
				strTable = strTable + "&lt;tr&gt;&lt;td&gt;"+result[i].site_name + "&lt;/td&gt;&lt;td&gt;" + use_limit + "&lt;/td&gt;&lt;td&gt;" + result[i].data_modifier +"&lt;/td&gt;&lt;/tr&gt;";
			}
			strTable = strTable + "&lt;/table&gt;";
			  
			$('#consentContentDiv').html(strTable);
			$('#consentGrpDiv').show();
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	
    function clearDiv(){
		$('#comments_ic_div').hide();
		$('#sd_ic_div').hide();
		$('#submitButton1').hide();
		$('#closeButton1').hide();
	}
	
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
	 }
	 commentsblock = commentsblock + "&lt;/table&gt;";

	return commentsblock;
	}	
	
	function loadApprovalData(data){
	  for(key in data){
		  if(key == 'consent_group'){
			$('#'+key+"1").val(data[key]);   
		  }else{
			$('#'+key+"1").html(data[key]);
		  }
		}
	}

 function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
        $('#'+names[i] + "1").html('');
    }
  }	

spUtil.recordWatch($scope, "sysapproval_approver", "", function(name, data) {  
			spUtil.update($scope);
	});	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.highlight {&amp;#13;
  background-color: yellow !important;&amp;#13;
}&amp;#13;
&amp;#13;
.form-control1 {&amp;#13;
    display: block;&amp;#13;
    width: 20%;&amp;#13;
    height: 30px;&amp;#13;
    padding: 6px 12px;&amp;#13;
    font-size: 14px;&amp;#13;
    line-height: 1.42857;&amp;#13;
    color: #555555;&amp;#13;
    background-color: #fff;&amp;#13;
    background-image: none;&amp;#13;
    border: 1px solid #ccc;&amp;#13;
    border-radius: 4px;&amp;#13;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
.overlay {&amp;#13;
  position: fixed; &amp;#13;
  width: 100%; &amp;#13;
  height: 100vh; &amp;#13;
  background-color: white; &amp;#13;
  opacity: 0.9; &amp;#13;
  z-index: 9999; &amp;#13;
  top: 0; &amp;#13;
  left: 0;&amp;#13;
  &amp;#13;
  display: flex;&amp;#13;
  align-items: center;&amp;#13;
  justify-content: center;&amp;#13;
  flex-direction: column;&amp;#13;
}&amp;#13;
&amp;#13;
.spinner {&amp;#13;
  animation: spin 2s infinite linear;&amp;#13;
}&amp;#13;
&amp;#13;
/** spin animation */&amp;#13;
@keyframes spin {&amp;#13;
  from {&amp;#13;
    transform: rotate(0deg);&amp;#13;
  }&amp;#13;
&amp;#13;
  to {&amp;#13;
    transform: rotate(359deg);&amp;#13;
  }&amp;#13;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gsiat&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS SD IC Approval Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.approvalICTasks = [];
	data.reviewedICTasks = [];
	data.info = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	var gr = gs.getUser(); 
	var gpa = gr.isMemberOf('CCR_GPA');
	var sd = gr.isMemberOf('CCR_SD');
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		gpa: gpa,
		sd: sd
	};
	if(sd){
		var gr1 = new GlideRecord("sc_cat_item");
				gr1.addQuery("short_description", "CCR GDSP Intramural Certification");
				gr1.query();	
				gr1.next();
				var cat_item_id = gr1.getValue('sys_id');


			 var gr_approval_items = GlideRecord('sysapproval_approver');
			 var req_item = gr_approval_items.addJoinQuery('sc_req_item','document_id','sys_id');
			 req_item.addCondition('cat_item', cat_item_id);

			 gr_approval_items.addQuery('approver', my_sys_id); 
			 gr_approval_items.addQuery('source_table','sc_req_item');
			 gr_approval_items.orderByDesc('sys_updated_on');  
			 gr_approval_items.query();
			 while (gr_approval_items.next()){
				 var orginId = '';
				 var tickerNum = '';
				 var org_ticket_num = '';
				 var version = '';
				 var hasParent = '';
				 var selectedOrginId = '';

				 var docId = gr_approval_items.document_id;

				 selectedOrginId = gr_approval_items.document_id.contact_type;
				 if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web' ){
							orginId = gr_approval_items.document_id.sys_id;
							org_ticket_num = gr_approval_items.document_id.number;
							hasParent = 'false';
					}else{
						 var orgIds = selectedOrginId.split("=");
						 var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
						 gr_tracking_item.addQuery('u_orgid',orgIds[0]);
						 gr_tracking_item.query();

						 if(gr_tracking_item.getRowCount() &gt; 0){
									gr_tracking_item.next();
									orginId = gr_tracking_item.u_orgid;
									org_ticket_num = gr_tracking_item.u_ticket_number;
									version = orgIds[1];
									hasParent = 'true';
						 }else {
									orginId = gr_approval_items.document_id.sys_id;
									org_ticket_num = gr_approval_items.document_id.number;
									hasParent = 'false';
						 }
					}

					var ticket_number = '';
					if(hasParent == 'true'){
							ticket_number = 'CCR_IC' + org_ticket_num.substring(8) + '-' + version;
					}else{
							ticket_number = "CCR_IC" + gr_approval_items.sysapproval.number.substring(8);
					}

					var stage_v = gr_approval_items.document_id.context.stage.name;		
					//if(stage_v == 'Waiting for PI Resubmit'|| stage_v == 'Completed'|| (stage_v == 'Waiting for SD Review' &amp;&amp; gpa) || (stage_v == 'SD Rejected - Waiting for GPA Review' &amp;&amp; sd )){
						//	if (!((stage_v == 'SD Rejected - Waiting for PI Resubmit' || stage_v == 'SD Rejected - Waiting for GPA Review') &amp;&amp; gr_approval_items.state == 'approved')) {
							//	 if ((gr_approval_items.document_id.sys_created_by == gr_approval_items.sys_created_by)||(gr.isMemberOf('CCR_SD'))) {
									
								if(!((stage_v == 'Waiting for GPA Review' ) || (stage_v == 'Waiting for SD Review')) &amp;&amp; gr_approval_items.state == 'approved'){	
									 if(stage_v != 'Completed' || (stage_v == 'Completed' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for SD Review')){
											 var item = {};
											item.ic_id = ticket_number;
											item.study_name = gr_approval_items.document_id.variables.study_name.toString();
											item.project_title = gr_approval_items.document_id.variables.project_title.toString();
											item.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
											item.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
											item.status = gr_approval_items.document_id.context.stage.name.toString(); 
											item.last_update_date = gr_approval_items.sys_updated_on.toString();
											item.stage = stage_v.toString();
											item.sys_id = gr_approval_items.sys_id.toString();
											item.doc_id = gr_approval_items.document_id.toString();
											item.state = gr_approval_items.state.toString();
											data.reviewedICTasks.push(item);
									}
							}
							if (stage_v == 'Waiting for SD Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for SD Review' ) {
									var items = {};
									items.ic_id = ticket_number;
									items.study_name = gr_approval_items.document_id.variables.study_name.toString();
									items.project_title = gr_approval_items.document_id.variables.project_title.toString();
									items.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
									items.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
									items.status = gr_approval_items.document_id.context.stage.name.toString();
									items.last_update_date = gr_approval_items.sys_updated_on.toString();
									items.stage = stage_v.toString();
									items.sys_id = gr_approval_items.sys_id.toString();
									items.doc_id = gr_approval_items.document_id.toString();
									items.state = gr_approval_items.state.toString();						
									data.approvalICTasks.push(items);
							}

					//}
			 }
	}
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-08 18:20:59&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;63fc8cdcdb284340f59974131f9619d3&lt;/sys_id&gt;&lt;sys_mod_count&gt;95&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS SD IC Approval Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_63fc8cdcdb284340f59974131f9619d3&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:24:12&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  &lt;div class="panel panel-success panel-area" ng-show="c.data.approvalICTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_sdApprovalICItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsesdApprovalICItems" aria-expanded="true" data-target="#collapsesdApprovalICItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Institutional Certifications Waiting for SD Approval &lt;span class="badge" id="ritm_count"&gt;{{ c.data.approvalICTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_sdApprovalICItems" class="panel-collapse collapse in" id="collapsesdApprovalICItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
          		&lt;label for="search_savedIC_SD" class="label-hidden"&gt;Search:&lt;/label&gt;
            	&lt;input id="search_savedIC_SD" type="text" class="form-control1" ng-model="searchSavedIC" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns track by $index" 
              ng-click="c.toggleSort($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.approvalICTasks | filter:searchSavedIC"
            ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                     $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"
            				 ng-class="{highlight: row.doc_id == c.state.id }"
          					 id="{{row.doc_id}}"&gt;
          &lt;td class="ritm_number"&gt;{{ row.ic_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted"  title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.viewSDIC(row.doc_id, row.sys_id, row.state, row.stage, row.ic_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.reportSDIC(row.doc_id, row.ic_id, 'pi')"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt; 
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize6"&gt;
                Items per page
              &lt;/label&gt;

              &lt;select 
                id="pageSize6" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                ng-model="c.pagination.currentSize"
                ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
          &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
        &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.approvalICTasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange() track by $index"
          ng-click="c.setPage($index)"
          &gt;
          &lt;a href=""&gt;
            {{ $index + 1 }}
          &lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
 
  &lt;div class="panel panel-success panel-area" ng-show="c.data.reviewedICTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_sdReviewedICItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsesdReviewedICItems" aria-expanded="true" data-target="#collapsesdReviewedICItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Institutional Certifications reviewed by SD &lt;span class="badge" id="ritm_count"&gt;{{ c.data.reviewedICTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_sdReviewedICItems" class="panel-collapse collapse" id="collapsesdReviewedICItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_submittedIC_SD" class="label-hidden"&gt;Search:&lt;/label&gt;
          		&lt;input id="search_submittedIC_SD" type="text" class="form-control1" ng-model="searchSubmittedIC" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns1 track by $index" 
              ng-click="c.toggleSort1($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.reviewedICTasks | filter: searchSubmittedIC"
            ng-show="$index &gt;= c.pagination1.currentPage * c.pagination1.currentSize &amp;&amp;
                     $index &lt; (c.pagination1.currentPage + 1) * c.pagination1.currentSize"
            				 ng-class="{highlight: row.doc_id == c.state.id }"&gt;
          &lt;td class="ritm_number"&gt;{{ row.ic_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review - SD Rejected'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.viewSDIC(row.doc_id, row.sys_id, row.state, row.stage,row.ic_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-show="row.status == 'Completed'" ng-click="c.reportSDIC(row.doc_id, row.ic_id, 'sd')"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-show="row.status != 'Completed'" ng-click="c.reportSDIC(row.doc_id, row.ic_id, 'pi')"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;            
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
      &lt;form class="form-inline"&gt;
        &lt;div class="pagination form-group"&gt;
          &lt;label for="pageSize7"&gt;
            Items per page
          &lt;/label&gt;

          &lt;select 
            id="pageSize7" 
            class="form-control"
            style="display: inline"
            ng-init="c.pagination1.currentSize = c.pagination1.pageSizes[1]"
            ng-model="c.pagination1.currentSize"
            ng-options="sizes for sizes in c.pagination1.pageSizes"&gt;
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/form&gt;  
        &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
      &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination1.currentSize &lt; c.data.reviewedICTasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange1() track by $index"
          ng-click="c.setPage1($index)"
          &gt;
          &lt;a href=""&gt;
            {{ $index + 1 }}
          &lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;  
&lt;/div&gt;

&lt;div id="loading" class="overlay" style="display:none;"&gt;
  &lt;div class="spinner" style="width: 25px; height: 25px"&gt;
  	&lt;svg version="2.0" class="spinner" width="25" height="25"&gt;
      &lt;circle cx="12.5" cy="12.5" r="10" fill="transparent" stroke="#ccc" stroke-width="2.5" /&gt;
      &lt;path fill="transparent" stroke="#666" stroke-width="2.5" d="M 12.5 2.5 a 10 10 0 0 1 10 10" /&gt;
    &lt;/svg&gt;
  &lt;/div&gt;
  &lt;span&gt;Processing&lt;/span&gt;
&lt;/div&gt;

&lt;div id="infoModal" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmOk" class="modal-title"&gt;Information&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageInfo"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnOkConfirm" type="button" class="btn btn-primary" style="width: 70px; text-align: center;"&gt;OK&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1907054144</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>30576a31db2b5b00b86770c08c961984</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d2af2b580000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS SD IC Approval Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>58e37fc111a79700cd67042d0285068f</update_guid>
<update_guid_history>58e37fc111a79700cd67042d0285068f:1907054144,dd70f3cd5367970011d0c9d20be446f9:-2101581983,11f6ab09c26797001eeaf18ca646cc04:2124592297,4445d3f823e757009d7a088fe029748d:-1630630453,89eccb7043e757004a35e9170cdad9a8:-976875387,0adc47b062e757009b8f8e27ee9c8a02:1978395481,bdcc4b7015e757002029826076345308:311614267,9fbc4f70e7e7570079fc2e77f068f3ec:952196069,92bc47b03fe757002180ecefa6335e23:-1686398268,8114e6b011675700d7f91df209192b7d:2092839182,e7c2ee7c53275700c564b1ecb7173c9e:-1147478354,d3a2e270e1675700952c8499074d3de0:1647432560,f2279da39d1f5300c2b1cfdffec8c33f:-199545519,88275923bf1f53005f7094ff79297d68:371444761,12071c43015b5300b26ebbcf9194ea52:339229141,19071c43085b5300c51b35d7c8dfd029:-294864586,98b89ccf26ea1f00d8378dba2a00e2c5:1635686445,8147d73eab859b0077d5b4ca20038f02:891342023,98b89ccf26ea1f00d8378dba2a00e2c5:1635686445,98b89ccf26ea1f00d8378dba2a00e2c5:1635686445,8147d73eab859b0077d5b4ca20038f02:891342023,659c1d43987413008b9d2ac5cea36ecd:1798134664,79bad1c381741300c414e90e275a8669:-534043511,18bad1c326741300728cdef979ccd91d:1122978377,d8aad18fd03413005cef114d2bccaaa7:-798316830,c84a9d83547413000b8173209e00019a:-1334678776,0a02514fec341300ab1f25f8d9a342c5:-1129077577,65f1110f9c341300828ac239fc0dfbc4:1612957457,7cf1d14b04341300895ba95653053d0f:-819112523,1ec159cb42341300aec8cfde35d6786c:812287296,3ab1110fb534130037337669b6c92ffa:1376939676,66d9c9b5d6a7cf0064061a2467183cf7:-2010104314,d3c985b5e8a7cf00e431c6ef66937078:-124716817,00c9c9b530a7cf0014b166441c88fef1:147888110,a68bf70dccf24f0075772290f23d307e:1335602904,412d31ce81624700baea51a7d8d582f5:-785936265,af0db54e0062470096a1e043f1bce69a:488789085,c3cc7dce2a6247004c54d1d5e9c5b9f0:-1863850069,86bc754eab6247006667a73470b2e17f:-1417211621,b47c798e776247009a33184872c86515:-185185855,1a2bb54e906247009126dd6d5c5dc6a5:-323011231,26ca314edd6247001774ed80957b9ed8:-1256888217,b6d8b50e9d6247005c462b3725d70484:-323011231,17c8390eb16247009ea684be65f7e37e:-614030579,bec8390e04624700cc7e1c2ce5c1a274:811611070,ad48f1cadb624700095d4eddfeaab1af:-346647644,47f7f9ca2a6247006803c4b98b38f4ba:525214081,76e731cab8624700ab237fbb9916f39c:-1064940939,c4c77d4aa5624700ab0bddf57957e77b:-1979305186,f6a7398a91624700380cda5e371b981f:730356318,32577d8abc6247009e5973275ac8dbe1:-245806116,2b27f94a646247008dd422439ac55f00:1339499676,d218979fd4de8300c5ff05df59fe5e08:2013508854,d218979fd4de8300c5ff05df59fe5e08:2013508854,d218979fd4de8300c5ff05df59fe5e08:2013508854,d218979fd4de8300c5ff05df59fe5e08:2013508854,d218979fd4de8300c5ff05df59fe5e08:2013508854</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_dependency_css_include_1e4117b4dbe7570054d8ff621f9619b9</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_dependency_css_include"><m2m_sp_dependency_css_include action="INSERT_OR_UPDATE"><order>100</order><sp_css_include display_value="CCRGDS_CSS">96d0db74dbe7570054d8ff621f9619c5</sp_css_include><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sys_class_name>m2m_sp_dependency_css_include</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:14:35</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>1e4117b4dbe7570054d8ff621f9619b9</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS.CCRGDS_CSS_DEPEN</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_dependency_css_include_1e4117b4dbe7570054d8ff621f9619b9</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:14:35</sys_updated_on></m2m_sp_dependency_css_include></record_update>]]></payload>
<payload_hash>107757325</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>34576a31db2b5b00b86770c08c961914</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce24cb6a0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS.CCRGDS_CSS_DEPEN</target_name>
<type>Dependency CSS Includes</type>
<update_domain>global</update_domain>
<update_guid>124197f410e75700ac3a0b582da0bd77</update_guid>
<update_guid_history>124197f410e75700ac3a0b582da0bd77:107757325</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_01a55bf8dbe7570054d8ff621f961981</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Header">32d72669dbc63a00f59974131f96199d</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:33:37</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>01a55bf8dbe7570054d8ff621f961981</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Header</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_01a55bf8dbe7570054d8ff621f961981</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:33:37</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>1392045065</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>34576a31db2b5b00b86770c08c961915</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3f26630000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Header</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>c4e79f7cf3e75700726b7c167c816a35</update_guid>
<update_guid_history>c4e79f7cf3e75700726b7c167c816a35:1392045065,0da59bf8fae7570071bf3c0b5893e517:1925078933</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_61631b78dbe7570054d8ff621f9619ab</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS Banner">9f31baf9db2d720054d8ff621f961912</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:23:49</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>61631b78dbe7570054d8ff621f9619ab</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS Banner</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_61631b78dbe7570054d8ff621f9619ab</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:23:49</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>493133994</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>34576a31db2b5b00b86770c08c961918</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2d41440000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS Banner</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>69631b789ee7570094a56189c922ceac</update_guid>
<update_guid_history>69631b789ee7570094a56189c922ceac:493133994</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_d4c5dbf8dbe7570054d8ff621f96195c</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP PSO data table">0d37479adb9a360054d8ff621f961947</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:34:06</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>d4c5dbf8dbe7570054d8ff621f96195c</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP PSO data table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_d4c5dbf8dbe7570054d8ff621f96195c</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:34:06</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>1305263286</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>34576a31db2b5b00b86770c08c96191b</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3f8d290000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP PSO data table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>52f713bc1ee75700449ae5268250e886</update_guid>
<update_guid_history>52f713bc1ee75700449ae5268250e886:1305263286,dcc5dbf8b2e757002a5d172929980d5d:-1355704254</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_509b3370dba6ba0054d8ff621f961950</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, spUtil, $http) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};
	c.columns = [
		{
			key: 'gdsp_id',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'principal_investigator',
			label: 'Principal Investigator',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.tasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.tasks = c.data.tasks.sort(compareRows);
		}
	};
	//start client JS	 
  $('.collapse').on('shown.bs.collapse', function() {
      $(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
  }).on('hidden.bs.collapse', function() {
      $(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
  });		
	var names=['investigator','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther'];
	var textFields = ['investigator','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther']; 
	var my_sys_id = c.data.info.my_sys_id;
	var sessionId = c.data.info.session_id;
	$scope.viewItem = function(id, gdsp_id){
		$('#refresh').val('0');
		var data = {
			requestedid: id	
		};
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/fetchSubmittedRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			cleanDisplayDiv();
			$('#displayRequestId').html(gdsp_id);
			var variables = result.variables;
			var comments = result.comments;
			var comment_str = parse(comments);
			$('#commentReviewId1').empty();
			$('#commentReviewId1').append(comment_str);
			if(comment_str.length &lt; 137){
            $('#pre_comments_div').hide();
            $('#comments_div').hide();
      }else{
          $('#pre_comments_div').show();
          $('#comments_div').hide();
      }
			resetRequestValue();
			loadSubmittedData(variables);
			$('#displayRequests').modal('show').on('shown.bs.modal', function(){$('#displayRequests .modal-content').scrollTop(0);}); 
			$('#closeButton').show();
			$('#sd_div').hide();
			$('#submitButton').hide();
		}
		function handleError(response) {
			console.error(response);
			$confirm.modal('hide');
			alert('ERROR');
		}			
	};
	$scope.report = function(id, gdsp_id){
		$('#refresh').val('0');
		window.open('$sp.do?id=gdsp_report_page&amp;itemId='+id+'&amp;ticket='+gdsp_id, '_BLANK');
	};
	function cleanDisplayDiv(){
		$('#pre_comments_div').hide();
		$('#closeButton').hide();
		$('#comments_div').hide();
		$('#submitButton').hide();
	}
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
		}
		commentsblock = commentsblock + "&lt;/table&gt;";
		return commentsblock;
	}	
	
	function loadSubmittedData(data){
	  for(key in data){
			var value = getValue(key, data[key]);
			$('#'+key+"1").html(value);
		}
	}
	
  function getValue(name, value){
     if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           return getConvertedValue(value, '1');
        }else{
           return value;
        }
     }else{
        if(value == "true"){
           return '&lt;input type="checkbox" id="'+ name +'1" checked="true" disabled="true"/&gt;';
        }else{
           return '&lt;input type="checkbox" id="' + name+ '1" disabled="true"/&gt;';
        }
        return value; 
     }
  }	
	
	function getConvertedValue(value, flag){
		 if(flag == '0'){
				var values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				var values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}		
	
 function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
      if(textFields.indexOf(names[i]) != -1 ){ 
            $('#'+names[i] + "1").html('');
      }else{
				   $('#'+names[i] +"1").html('&lt;input type="checkbox" id="'+ names[i] +"1" + '" disabled="true"/&gt;');
           $('#'+names[i] + "1").prop('checked', false); 
		       $('#'+names[i] + "1").removeAttr("disabled");
      }
    }
  }	
	
	spUtil.recordWatch($scope, "sc_req_item", "", function(name, data) {  
			spUtil.update($scope);
	});
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.form-control1 {
    display: block;
    width: 20%;
    height: 30px;
    padding: 6px 12px;
    font-size: 14px;
    line-height: 1.42857;
    color: #555555;
    background-color: #fff;
    background-image: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-pso-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS PSO table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.info = []; 
	data.tasks = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	data.info.session_id = session_id;
	data.info.my_sys_id = my_sys_id;
	var gr = gs.getUser();
	var isPSO = gr.isMemberOf('CCR_PSO');
	
	var gr1 = new GlideRecord("sc_cat_item");
			gr1.addQuery("short_description", "CCR Genomic Data Sharing Plan");
			gr1.query();	
			gr1.next();
	var cat_item_id = gr1.getValue('sys_id');
	
	if(isPSO){
	   var gr_requested_items = new GlideRecord('sc_req_item');
     var gd_requested_items = gr_requested_items.addQuery('context.stage.name', 'Completed');
     var gc_requested_items = gr_requested_items.addQuery('cat_item', cat_item_id);
         gr_requested_items.addActiveQuery();
         gr_requested_items.orderByDesc('number');
         gr_requested_items.query();		
		
		 while (gr_requested_items.next()){
         var orginId = '';
         var tickerNum = '';
         var org_ticket_num = '';
         var version = '';
         var hasParent = '';
         var selectedOrginId = '';
                      
         selectedOrginId = gr_requested_items.contact_type;
                      
         if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web'){
              orginId = gr_requested_items.sys_id;
              org_ticket_num = gr_requested_items.number;
              hasParent = 'false';
          }else{
              var orgIds = selectedOrginId.split("=");
              var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
              gr_tracking_item.addQuery('u_orgid',orgIds[0]);
              gr_tracking_item.query();

              if(gr_tracking_item.getRowCount() &gt; 0){
                  gr_tracking_item.next();
                  orginId = gr_tracking_item.u_orgid;
                  org_ticket_num = gr_tracking_item.u_ticket_number;
                  version = orgIds[1];
                  hasParent = 'true';
               }else {
                  orginId = gr_requested_items.sys_id;
                  org_ticket_num = gr_requested_items.number;
                  hasParent = 'false';
						   }
          }		
          if(hasParent == 'true'){
               ticketNum = 'CCR_GDSP' + org_ticket_num.substring(8) + '-' + version;
          }else{
               ticketNum = 'CCR_GDSP' + org_ticket_num.substring(8);
          } 
			
					var items = {};
			    items.sys_id = gr_requested_items.sys_id.toString();
					items.gdsp_id = ticketNum;
					items.principal_investigator = gr_requested_items.u_investigator.toString();		 
					items.project_name = gr_requested_items.u_project_name.toString();
					items.status = gr_requested_items.context.stage.name.toString();
					items.approval = gr_requested_items.context.stage.name.toString();
					items.submitted_date = gr_requested_items.sys_created_on.toString();
					data.tasks.push(items);
		 }
		
	}

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-03 14:54:30&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;509b3370dba6ba0054d8ff621f961950&lt;/sys_id&gt;&lt;sys_mod_count&gt;26&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS PSO table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_509b3370dba6ba0054d8ff621f961950&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:24:40&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  &lt;div class="panel panel-success panel-area" ng-show="c.data.tasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_psoItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsepsoItems" aria-expanded="true" data-target="#collapsepsoItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Approved Genomic Data Sharing Plan &lt;span class="badge" id="ritm_count"&gt;{{ c.data.tasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_psoItems" class="panel-collapse collapse in table-responsive" id="collapsepsoItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
         &lt;tr&gt;
          &lt;td colspan="6"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_completedGDSP" class="label-hidden"&gt;Search:&lt;/label&gt;
          		&lt;input id="search_completedGDSP" type="text" class="form-control1" ng-model="searchCompletedGDSP" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;          
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns track by $index" 
              ng-click="c.toggleSort($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt; 
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.tasks | filter:searchCompletedGDSP"
            ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                     $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize" id="{{row.sys_id}}"&gt;
          &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.principal_investigator }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted"  title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="viewItem(row.sys_id, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="report(row.sys_id, row.gdsp_id)"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize11"&gt;
                Items per page
              &lt;/label&gt;

              &lt;select 
                id="pageSize11" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                ng-model="c.pagination.currentSize"
                ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
          &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
       &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.tasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange() track by $index"
          ng-click="c.setPage($index)"
          &gt;
          &lt;a href=""&gt;
            {{ $index + 1 }}
          &lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-954632112</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>34576a31db2b5b00b86770c08c961983</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d2af97a00000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS PSO table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>83f377c1daa7970026640bc2c131f46c</update_guid>
<update_guid_history>83f377c1daa7970026640bc2c131f46c:-954632112,e8b0f7cd6e6797004ea44a95c865cc46:1602276031,5517a349f167970041c9cc9756c88ea5:332103527,1cc2df389be75700e0e1339cd9bc25a3:1615114757,951d4bb098e757002e94edda50599adc:-2067907137,970d83b078e75700ced7229b7accaf00:2039143981,b50d47b015e757007419003d8a9f6508:-1671576082,f6036a70036757001fc56435ab1cbb77:1894690898,73f26a7079675700484f8f68886fb510:-1047982505,0477dda3991f5300f58c65d247a90e62:-1390189977,a3398975b9a7cf00b552da448b09c5b8:-1547177683,a3398975b9a7cf00b552da448b09c5b8:-1547177683,a3398975b9a7cf00b552da448b09c5b8:-1547177683,723941b518a7cf0002b53d281c6fea8a:1130436326,1457984720:1457984720,-1559011093:-1559011093,-1455112276:-1455112276,-1034589124:-1034589124</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_4815a700db9abe0054d8ff621f9619c5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri/&gt;&lt;enforce_acl/&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;fetchSubmittedRequestData&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	var jsonArr = {}; 
	 
	var requestedId = request.body.data.requestedid;
    var items = {};
	
	var gr_requested_item = new GlideRecord('sc_req_item');
	gr_requested_item.addQuery('sys_id',requestedId );
	gr_requested_item.query();
	gr_requested_item.next();
	var variables = gr_requested_item.variables;
	for (key in variables) {
		items[variables[key].getGlideObject().getQuestion().getName()] = variables[key].getDisplayValue();
	}
	var comments = '';

	comments =  gr_requested_item.comments.getJournalEntry(-1);
    if(comments == null || comments.trim().length == 0){
		comments = '';
	}
	jsonArr.variables = items;
	jsonArr.comments = comments;
	jsonArr.request_for = gr_requested_item.request.requested_for;
	jsonArr.opened_by = gr_requested_item.opened_by;
	
	return jsonArr;
})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/naci/gdspapi/fetchSubmittedRequestData&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/fetchSubmittedRequestData&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;false&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-04-18 19:11:30&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;4815a700db9abe0054d8ff621f9619c5&lt;/sys_id&gt;&lt;sys_mod_count&gt;14&lt;/sys_mod_count&gt;&lt;sys_name&gt;fetchSubmittedRequestData&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_4815a700db9abe0054d8ff621f9619c5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-18 21:09:27&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="gdspAPI"&gt;212601dedb4e7a00f59974131f961986&lt;/web_service_definition&gt;&lt;web_service_version/&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-506905247</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>34576a31db2b5b00b86770c08c961986</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164af39f2430000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>fetchSubmittedRequestData</target_name>
<type>Scripted REST Resource</type>
<update_domain>global</update_domain>
<update_guid>b496dc4f381b53005dc2c351aa4562a1</update_guid>
<update_guid_history>b496dc4f381b53005dc2c351aa4562a1:-506905247,-310140038:-310140038,-868860428:-868860428</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_46155fb8dbe7570054d8ff621f9619f6</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS SD Approval Table">fac5b724dbe2ba00f59974131f9619bd</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:31:13</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>46155fb8dbe7570054d8ff621f9619f6</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS SD Approval Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_46155fb8dbe7570054d8ff621f9619f6</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:31:13</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1899769246</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>38576a31db2b5b00b86770c08c961917</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce34059a0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS SD Approval Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>4e155fb8a0e75700c58003d7bcc66ff7</update_guid>
<update_guid_history>4e155fb8a0e75700c58003d7bcc66ff7:-1899769246</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_a8cb891fdb9f130054d8ff621f96195f</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="dirPagination">e4fbe5d2dbb3cb0054d8ff621f961957</sp_dependency><sp_widget display_value="GDS IC Report Page content">59422b3fdbd0c34054d8ff621f9619d1</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 19:40:18</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>a8cb891fdb9f130054d8ff621f96195f</sys_id><sys_mod_count>0</sys_mod_count><sys_name>dirPagination.GDS IC Report Page content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_a8cb891fdb9f130054d8ff621f96195f</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 19:40:18</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>1477852726</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>38576a31db2b5b00b86770c08c96191a</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b40eb0630000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>dirPagination.GDS IC Report Page content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>a8cb891ff59f13004faa5b141bd99861</update_guid>
<update_guid_history>a8cb891ff59f13004faa5b141bd99861:1477852726</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_css_include_da3e8ff0dbe7570054d8ff621f961973</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_css_include"><sp_css_include action="DELETE"><name>Global CSS</name><source>local</source><sp_css display_value="">279e8334dbe7570054d8ff621f96196f</sp_css><sys_class_name>sp_css_include</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:01:56</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>da3e8ff0dbe7570054d8ff621f961973</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Global CSS</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_css_include_da3e8ff0dbe7570054d8ff621f961973</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:04:19</sys_updated_on><url/></sp_css_include></record_update>]]></payload>
<payload_hash>-2100834978</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>38576a31db2b5b00b86770c08c96191d</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce20c5cb0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>Global CSS</target_name>
<type>CSS Include</type>
<update_domain>global</update_domain>
<update_guid>c64017b40ae7570047137826175140b2</update_guid>
<update_guid_history>c64017b40ae7570047137826175140b2:-2100834978,08fe833474e75700526c6905e519a76d:1757126498,8d6e033430e7570098d0af70878f2f00:-707519410</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_1a0e411ddbf64f00f59974131f96194e</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($rootScope, $scope, spUtil, $http, $window) {
  /* widget controller */
  var c = this;

	c.pagination0 = {
        //pageDisplayLimit: 4,
        numPages: 0,
        //pageIndexes: ['first', 'previous', 'next', 'last'],
        pageSizes: [5, 10, 15, 20, 25],
        currentSize: 1,
        currentPage: 0
    };

    c.columns0 = [{
			key: 'ic_id',
			label: 'IC ID',
			sort: 'asc'
		},
		{
			key: 'study_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'project_title',
			label: 'Project Title',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
    ];

    c.getRange0 = function() {
        var currentSize = c.pagination0.currentSize;
        var currentPage = c.pagination0.currentPage;

        var offset = currentSize * currentPage;

        return new Array(Math.ceil(c.data.icSignTasks.length / currentSize));
    };

    c.setPage0 = function(index) {
        c.pagination0.currentPage = index;
    };

    c.toggleSort0 = function(index) {
        var column = c.columns0[index];
        var key = column.key;

        // if sorting is defined, then we can toggle this column
        if (column.sort !== null) {

            var sortAscending = column.sort === 'asc';

            column.sort = sortAscending ? 'desc' : 'asc';
            sortAscending = !sortAscending;

            var compareRows = function(a, b) {
                var keyA = a[key];
                var keyB = b[key];

                // use local-compare for strings
                if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
                    return sortAscending ? keyA.localeCompare(keyB) :
                        keyB.localeCompare(keyA);
                }

                // use normal comparison for numbers
                return sortAscending ? +keyA - +keyB : +keyB - +keyA;
            };

            c.data.icSignTasks = c.data.icSignTasks.sort(compareRows);
        }
    };

    var icNames = ['certification_date', 'institution_name', 'certification_to', 'certification_from', 'gpa_organization', 'sd_organization', 'study_name', 'project_title', 'data_access', 'display', 'frequency', 'sampleTime', 'sampleConsent', 'consent_group'];
	
	  $scope.viewSignIC = function(approval_id, request_id, ic_id){
			 $('#refresh').val('0');
       loadICDisplay(approval_id,request_id, ic_id, 'sign');
		};	

		function loadICDisplay(approval_id, request_id, ic_id, indicator){
			 $('#displayICId').html(ic_id);
        var data = {
            requestedid: request_id
        };
        var request = {
            method: 'POST',
            url: '/api/naci/gds/getSubmittedICRequestData',
            beforeSend: function(xhr) {
                xhr.setRequestHeader('X-UserToken', sessionId);
            },
            headers: {
                'Content-Type': 'application/json'
            },
            data: data
        };
        $http(request).then(handleResp, handleErr);

        function handleResp(response) {
            var result = response.data.result;
            var comments = parse(result.comments);
            var variables = result.variables;
            var i = 0;
            for (i = 0; i &lt; icNames.length; i++) {
                if (icNames[i] == 'data_access') {
                    if (variables[icNames[i]] == 'unrestricted') {
                        $("input[name=dataAccessBox1][value='unrestricted']").prop("checked", true);
                    } else {
                        $("input[name=dataAccessBox1][value='controlled-access']").prop("checked", true);
                    }
                } else if (icNames[i] == 'display') {
                    if (variables[icNames[i]] == 'yes') {
                        $('#displayBox1').prop('checked', true);
                    } else {
                        $('#displayBox1').prop('checked', false);
                    }
                } else if (icNames[i] == 'frequency') {
                    if (variables[icNames[i]] == 'yes') {
                        $('#frequenceBox1').prop('checked', true);
                    } else {
                        $('#frequenceBox1').prop('checked', false);
                    }
                } else if (icNames[i] == 'consent_group') {
                    $('#' + icNames[i] + '1').val(variables[icNames[i]]);
                } else {
                    $('#' + icNames[i] + '1').html(variables[icNames[i]]);
                }
            }
            $('#sample_time').val(variables.sampleTime);
            $('#sample_consent').val(variables.sampleConsent);
						$('#hiddenRequestId').val(request_id);
						$('#hiddenApprovalId').val(approval_id);
            if (comments.length &gt; 137) {
                $('#commentReviewICId1').html('');
                $('#commentReviewICId1').html(comments);
                $('#pre_comments_ic_div').show();
                $('#ic_modal_content').attr('style', 'height:800px; overflow-y:auto; overflow-x: hidden;')
            }
            $('#submitButton1').hide();
					  if(indicator == 'sign'){
							$('#signButton1').show();
							$('#closeButton1').hide();
							$('#comments_ic_div').show();
						}else{
							$('#signButton1').hide();
							$('#closeButton1').show();
							$('#comments_ic_div').hide();
						}
            loadConsentGroupData();
					  if(variables.sampleTime == 'yes' &amp;&amp; variables.sampleConsent == 'no'){
							$('#insDiv').show();
						}else{
							$('#insDiv').hide();
						}
						$('#displayICRequests').modal('show').on('shown.bs.modal', function() {
								$('#displayICRequests .modal-content').scrollTop(0);
						});
				}

        function handleErr(response) {
            console.error(response);
            alert('ERROR');
        }
		}

    function parse(allcomments) {
        var comments = allcomments.split("ENDCOMMENTS");
        var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
        for (i = 0; i &lt; comments.length; i++) {
            if (comments[i].length &gt; 40) {
                if (comments[i][0] == '\n') {
                    var lastI = 0;
                    while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n')
                        lastI++;
                    comments[i] = comments[i].substring(lastI, comments[i].length);
                }
                var t = comments[i].substring(0, 22);
                var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)') + 9, comments[i].length);
                var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57, comments[i].indexOf('(Additional comments)') + 65);
                var comm = comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
                var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)'));
                commentsblock = commentsblock + "&lt;tr&gt;";
                commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
                commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
                commentsblock = commentsblock + "&lt;td&gt;" + results + "&lt;/td&gt;";
                commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
                commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
                commentsblock = commentsblock + "&lt;/tr&gt;";
            }
        }
        commentsblock = commentsblock + "&lt;/table&gt;";
        return commentsblock;
    }	
	
	    function loadConsentGroupData() {
        var consentStr = $('#consent_group1').val();
        if (consentStr == null || typeof consentStr === 'undefined' || consentStr.trim().length == 0) {
            $('#consentGrpDiv').hide();
        } else {
            getConsentGroups(consentStr);
        }
    }

    function getConsentGroups(consentStr) {
        var request = {
            method: 'POST',
            url: '/api/naci/gds/fetchConsentGroupDataFromRequest',
            beforeSend: function(xhr) {
                xhr.setRequestHeader('X-UserToken', sessionId);
            },
            headers: {
                'Content-Type': 'application/json'
            },
            data: {
                consentGrp: consentStr
            }
        };
        $http(request).then(handleResponse, handleError);

     function handleResponse(response) {
            var result = response.data.result;
            var strTable = "&lt;table class='table table-bordered table-condensed table-hover' width='100%'&gt;&lt;tr bgcolor='lightgrey'&gt;&lt;th&gt;Collaborating Site Name&lt;/th&gt;&lt;th&gt;Data Use Limitation&lt;/th&gt;&lt;th&gt;Data Use Limitations Modifier&lt;/th&gt;&lt;/tr&gt;";
            for (var i = 0; i &lt; result.length; i++) {
                strTable = strTable + "&lt;tr&gt;&lt;td&gt;" + result[i].site_name + "&lt;/td&gt;&lt;td&gt;" + result[i].use_limit + "&lt;/td&gt;&lt;td&gt;" + result[i].data_modifier + "&lt;/td&gt;&lt;/tr&gt;";
            }
            strTable = strTable + "&lt;/table&gt;";

            $('#consentContentDiv').html(strTable);
            $('#consentGrpDiv').show();
        }

        function handleError(response) {
            console.error(response);
            alert('ERROR');
        }
    }
	
    //watch dog
		spUtil.recordWatch($scope, "sysapproval_approver", "", function(name, data) {  
					spUtil.update($scope);
		});	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;/*disable bk logo */&amp;#13;
.bk-logo-small {&amp;#13;
   display:none;&amp;#13;
}&amp;#13;
&amp;#13;
.nav-tabs {&amp;#13;
    width: 100%;&amp;#13;
    float: left;&amp;#13;
    border-bottom-color: #d9d9d9;&amp;#13;
}&amp;#13;
&amp;#13;
.nav-tabs&amp;gt;li a {&amp;#13;
    text-align: center;&amp;#13;
    border-width: 1px 1px 0 1px;&amp;#13;
    border-style: solid;&amp;#13;
    border-color: #e0e0e0;&amp;#13;
    background: #f2f2f2;&amp;#13;
    color: #444444;&amp;#13;
}&amp;#13;
&amp;#13;
.nav-tabs&amp;gt;li a:hover {&amp;#13;
    background: #F9F9F9;&amp;#13;
    border-color: #d9d9d9;&amp;#13;
}&amp;#13;
&amp;#13;
.nav-tabs&amp;gt;li.active a, .nav-tabs&amp;gt;li.active:hover a {&amp;#13;
    background: white;&amp;#13;
    border-color: #d9d9d9;&amp;#13;
    border-bottom-color: transparent;&amp;#13;
    font-weight: bold;&amp;#13;
    color: #444444;&amp;#13;
}&amp;#13;
&amp;#13;
.instructions {&amp;#13;
    text-align: center;&amp;#13;
    padding: 10px 0;&amp;#13;
}&amp;#13;
&amp;#13;
.tabs-dropdown .dropdown-toggle {&amp;#13;
    border-width: 1px 1px 0 1px;&amp;#13;
    border-style: solid;&amp;#13;
    border-color: #e0e0e0;&amp;#13;
    border-radius: 4px 4px 0 0;&amp;#13;
    color: #444444;&amp;#13;
    background: #f2f2f2;&amp;#13;
}&amp;#13;
&amp;#13;
.tab-content {&amp;#13;
    padding: 10px;&amp;#13;
    width: 100%;&amp;#13;
    min-height: 300px;&amp;#13;
    -webkit-overflow-scrolling: touch;&amp;#13;
    background: white;&amp;#13;
    border-width: 0 1px 1px 1px;&amp;#13;
    border-style: solid;&amp;#13;
    border-color: #d9d9d9;&amp;#13;
    border-radius: 0 0 4px 4px;&amp;#13;
    overflow: hidden;&amp;#13;
}&amp;#13;
&amp;#13;
.tab-content .tab-pane {&amp;#13;
    color: #566473;&amp;#13;
}&amp;#13;
&amp;#13;
@media ( max-width : 480px) {&amp;#13;
    .nav-tabs&amp;gt;li {&amp;#13;
        float: none;&amp;#13;
        border: 1px solid #dddddd;&amp;#13;
    }&amp;#13;
    .nav-tabs&amp;gt;li.active&amp;gt;a {&amp;#13;
        border: none;&amp;#13;
    }&amp;#13;
    .nav&amp;gt;li&amp;gt;a:hover, .nav&amp;gt;li&amp;gt;a:focus, .nav-tabs&amp;gt;li.active&amp;gt;a, .nav-tabs&amp;gt;li.active&amp;gt;a:hover,&amp;#13;
        .nav-tabs&amp;gt;li.active&amp;gt;a:focus {&amp;#13;
        background: none;&amp;#13;
        border: none;&amp;#13;
    }&amp;#13;
}&amp;#13;
&amp;#13;
/* Reset bootstrap table*/&amp;#13;
.table &amp;gt; thead &amp;gt; tr &amp;gt; th,&amp;#13;
.table &amp;gt; tbody &amp;gt; tr &amp;gt; td,&amp;#13;
.table &amp;gt; tfoot &amp;gt; tr &amp;gt; th {&amp;#13;
    border-top: 0px;&amp;#13;
    border-bottom: 0px;&amp;#13;
}&amp;#13;
}&amp;#13;
&amp;#13;
.left td {&amp;#13;
    text-align:left;&amp;#13;
}&amp;#13;
.right td {&amp;#13;
   text-align:right;&amp;#13;
}&amp;#13;
.ldpair-results {&amp;#13;
    text-align:center;&amp;#13;
    border: 1px solid #ddd;&amp;#13;
}&amp;#13;
&amp;#13;
.center-align {&amp;#13;
    margin: 0 auto !important;&amp;#13;
    float: none !important;&amp;#13;
}&amp;#13;
&amp;#13;
.spacer {&amp;#13;
    width:10%;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
td.cell-right {&amp;#13;
    text-align: right;&amp;#13;
}&amp;#13;
td.cell-left {&amp;#13;
    text-align: left;&amp;#13;
}&amp;#13;
&amp;#13;
td.cell-center {&amp;#13;
    text-align: center;&amp;#13;
}&amp;#13;
&amp;#13;
.cell-height-small {&amp;#13;
    height: 10px;&amp;#13;
    padding:0px;&amp;#13;
}&amp;#13;
&amp;#13;
.btn-file {&amp;#13;
  position: relative;&amp;#13;
  overflow: hidden;&amp;#13;
}&amp;#13;
&amp;#13;
.btn-file input[type=file] {&amp;#13;
  position: absolute;&amp;#13;
  top: 0;&amp;#13;
  right: 0;&amp;#13;
  min-width: 100%;&amp;#13;
  min-height: 100%;&amp;#13;
  font-size: 100px;&amp;#13;
  text-align: right;&amp;#13;
  filter: alpha(opacity=0);&amp;#13;
  opacity: 0;&amp;#13;
  background: red;&amp;#13;
  cursor: inherit;&amp;#13;
  display: block;&amp;#13;
}&amp;#13;
&amp;#13;
input[readonly] {&amp;#13;
  background-color: white !important;&amp;#13;
  cursor: text !important;&amp;#13;
}&amp;#13;
/*&amp;#13;
table.ldhap,table.ldhap tr, table.ldhap th {&amp;#13;
  background-color: white !important;&amp;#13;
}&amp;#13;
*/&amp;#13;
.container {&amp;#13;
  background-color: white;&amp;#13;
}&amp;#13;
.two-by-two {&amp;#13;
  margin-bottom:0px;&amp;#13;
  width:100%;&amp;#13;
}&amp;#13;
&amp;#13;
.jumbotron {&amp;#13;
  background-color:white;&amp;#13;
  padding:10px 15px;&amp;#13;
}&amp;#13;
&amp;#13;
table.fixed {&amp;#13;
    table-layout:fixed;&amp;#13;
    width:400px;&amp;#13;
    margin-bottom:15px;&amp;#13;
}&amp;#13;
table.fixed td {&amp;#13;
    overflow: hidden;&amp;#13;
}&amp;#13;
&amp;#13;
table thead td {&amp;#13;
  font-weight:bold;&amp;#13;
  text-align: center;&amp;#13;
}&amp;#13;
&amp;#13;
.font-weight-bold {&amp;#13;
  font-weight:bold;&amp;#13;
}&amp;#13;
&amp;#13;
img.logo {&amp;#13;
    max-height:150px;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
img.loading {&amp;#13;
    height:107px;&amp;#13;
    max-height:10%;&amp;#13;
    display: block;&amp;#13;
    margin-left: auto;&amp;#13;
    margin-right: auto;&amp;#13;
}&amp;#13;
&amp;#13;
img.graph-legend {&amp;#13;
  display:block;&amp;#13;
  margin-left: auto;&amp;#13;
  margin-right: auto;&amp;#13;
}&amp;#13;
&amp;#13;
.multiselect-container &amp;gt; li {&amp;#13;
    padding-left: 50px;&amp;#13;
}&amp;#13;
.multiselect-item.multiselect-all {&amp;#13;
    padding-left: 0px;&amp;#13;
    text-decoration: underline;&amp;#13;
}&amp;#13;
.multiselect-item.multiselect-group {&amp;#13;
    padding-left: 30px;&amp;#13;
}&amp;#13;
.has-feedback .form-control {&amp;#13;
    padding-right: 0px;&amp;#13;
}&amp;#13;
.multiselect-container &amp;gt; li.multiselect-group-clickable label {&amp;#13;
    text-decoration: underline;&amp;#13;
}&amp;#13;
/* Tighten up snpchip platform list only*/&amp;#13;
/*   .btn-ldlink-multiselec  */&amp;#13;
.multiselect-container &amp;gt; li &amp;gt; a &amp;gt; label {&amp;#13;
    padding: 0px 20px 0px 40px;&amp;#13;
}&amp;#13;
&amp;#13;
.form-control-feedback {&amp;#13;
    top: 0;&amp;#13;
    right: -15px;&amp;#13;
}&amp;#13;
&amp;#13;
/* Placeholder Style */&amp;#13;
::-webkit-input-placeholder {&amp;#13;
   font-size: 90%;&amp;#13;
}&amp;#13;
&amp;#13;
:-moz-placeholder { /* Firefox 18- */&amp;#13;
   font-size: 90%;&amp;#13;
}&amp;#13;
&amp;#13;
::-moz-placeholder {  /* Firefox 19+ */&amp;#13;
   font-size: 90%;&amp;#13;
}&amp;#13;
&amp;#13;
:-ms-input-placeholder {&amp;#13;
    font-size: 90%;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
.ffWarning {&amp;#13;
    display: none;&amp;#13;
}&amp;#13;
/*&amp;#13;
.bk-plot-canvas-wrapper {&amp;#13;
    max-width:900px;&amp;#13;
    overflow-x: scroll;&amp;#13;
}&amp;#13;
*/&amp;#13;
&amp;#13;
.haplotype {&amp;#13;
    color: black;&amp;#13;
    background:#C0C0C0; /* if a multiple grouped */ &amp;#13;
}&amp;#13;
&amp;#13;
/* LDhap Heat Map - Version 4 */&amp;#13;
/* Pastel Colors light red, light orage, light blue, and light green */&amp;#13;
/* Color Code: http://paletton.com/palette.php?uid=7000u0klLMWnHN3kBNFgZMYgZMY */&amp;#13;
&amp;#13;
.overflowx {&amp;#13;
    overflow-x:auto;&amp;#13;
}&amp;#13;
.overflowy {&amp;#13;
    overflow-y:auto;&amp;#13;
}&amp;#13;
&amp;#13;
.whats_new {&amp;#13;
    height:200px;&amp;#13;
    border:1px solid #566473;&amp;#13;
    overflow-y:auto;&amp;#13;
    margin-bottom:25px;&amp;#13;
}&amp;#13;
&amp;#13;
.table {&amp;#13;
    min-width: 0;&amp;#13;
    display: table;&amp;#13;
}&amp;#13;
.left-c {   width:auto;&amp;#13;
    display: inline-block;&amp;#13;
    vertical-align: top;&amp;#13;
}&amp;#13;
.right-c {&amp;#13;
    min-width:300px;&amp;#13;
    width:65%;&amp;#13;
    display: inline-block;&amp;#13;
    vertical-align: top;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
.left-c &amp;gt; table &amp;gt; tfoot &amp;gt; tr &amp;gt; td,&amp;#13;
.right-c &amp;gt; table &amp;gt; tfoot &amp;gt; tr &amp;gt; td {&amp;#13;
    font-weight:bold;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
/* New stuff */&amp;#13;
&amp;#13;
/* Header and Footer */&amp;#13;
.header img {&amp;#13;
    /*&amp;#13;
    width: 60%;&amp;#13;
    */&amp;#13;
}&amp;#13;
.header h4 {&amp;#13;
    color: #fff;&amp;#13;
    line-height: 0.5em;&amp;#13;
}&amp;#13;
.footer {&amp;#13;
    bottom: 0;&amp;#13;
    color: #444;&amp;#13;
    padding: 25px 0;&amp;#13;
}&amp;#13;
.footer ul {&amp;#13;
    text-align: center;&amp;#13;
}&amp;#13;
.footer ul li a {&amp;#13;
    color: #444;&amp;#13;
}&amp;#13;
hr.header {&amp;#13;
    border-top: 0.5em solid #bb0e3d;&amp;#13;
    margin: 0;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
caption {&amp;#13;
    font-weight:bold;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
/* Rotate the text on SNPchip table */&amp;#13;
th.rotate {&amp;#13;
  /* Something you can count on */&amp;#13;
  height: 142px;&amp;#13;
  white-space: nowrap;&amp;#13;
}&amp;#13;
&amp;#13;
th.rotate &amp;gt; div {&amp;#13;
  transform: &amp;#13;
    translate(0px, 51px)&amp;#13;
    rotate(270deg);&amp;#13;
  width: 20px;&amp;#13;
}&amp;#13;
th.rotate &amp;gt; div &amp;gt; span {&amp;#13;
  /*border-bottom: 1px solid #ccc;*/&amp;#13;
  /*padding: 5px 10px;*/&amp;#13;
}&amp;#13;
/* These aren't needed and will be weird if transforms don't work */&amp;#13;
.csstransforms &amp;amp; th.rotate {&amp;#13;
  height: 142px;&amp;#13;
  white-space: nowrap;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
span.formw &amp;gt; label {&amp;#13;
    margin-bottom: 0px;&amp;#13;
    font-family: "Lucida Grande",Verdana,Arial,sans-serif;&amp;#13;
    font-size: normal;&amp;#13;
}&amp;#13;
&amp;#13;
.platform-checkbox {&amp;#13;
    padding: 0.2em 0.6em 0.3em;&amp;#13;
}&amp;#13;
&amp;#13;
/* From style.css&amp;#13;
https://www.broadinstitute.org/mpg/snap/ldsearch.php */&amp;#13;
&amp;#13;
.bolded {&amp;#13;
    font-weight: bold;&amp;#13;
}&amp;#13;
.underlined {&amp;#13;
    border-bottom: 1px dotted gray;&amp;#13;
}&amp;#13;
fieldset#columnAcheckbox {&amp;#13;
    min-width: 450px;&amp;#13;
}&amp;#13;
fieldset#columnAcheckbox div.row span.label, fieldset#columnBcheckbox div.row span.label, fieldset.fullwidthcheckbox div.row span.label {&amp;#13;
    padding-top: 1px;&amp;#13;
    width: 20px;&amp;#13;
}&amp;#13;
fieldset#columnBcheckbox {&amp;#13;
    min-width: 365px;&amp;#13;
}&amp;#13;
fieldset div.row span.formw select.yesno {&amp;#13;
    width: 80px;&amp;#13;
}&amp;#13;
/* Custom */&amp;#13;
&amp;#13;
fieldset#columnAcheckbox &amp;gt; div.row,&amp;#13;
fieldset#columnBcheckbox &amp;gt; div.row {&amp;#13;
    margin-left:15px;&amp;#13;
    margin-bottom:-12px;&amp;#13;
    font-weight:lighter;&amp;#13;
    color: #333;&amp;#13;
    font-family: "Lucida Grande",Verdana,Arial,sans-serif;&amp;#13;
    font-size: smaller;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
textarea:valid, .ok {&amp;#13;
    color: #555;&amp;#13;
}&amp;#13;
textarea:invalid, .error {&amp;#13;
    color: red;&amp;#13;
}&amp;#13;
.panel-body &amp;gt; h1 {&amp;#13;
    font-size: 1.7em;&amp;#13;
}&amp;#13;
/* Testing */&amp;#13;
@media screen and (max-width: 767px) {&amp;#13;
  .dataTables_wrapper .dataTables_info,&amp;#13;
  .dataTables_wrapper .dataTables_paginate {&amp;#13;
    float: none;&amp;#13;
    text-align: center; }&amp;#13;
  .dataTables_wrapper .dataTables_paginate {&amp;#13;
    margin-top: 0.5em; } &amp;#13;
}&amp;#13;
@media screen and (max-width: 640px) {&amp;#13;
  .dataTables_wrapper .dataTables_length,&amp;#13;
  .dataTables_wrapper .dataTables_filter {&amp;#13;
    float: none;&amp;#13;
    text-align: center; }&amp;#13;
  .dataTables_wrapper .dataTables_filter {&amp;#13;
    margin-top: 0.5em; } &amp;#13;
}&amp;#13;
.legend{&amp;#13;
/* css for agreement*/&amp;#13;
font-family: Arial, Helvetica, sans-serif;&amp;#13;
font-size:14px;&amp;#13;
color:#566473;&amp;#13;
font-weight: bold;&amp;#13;
}&amp;#13;
&amp;#13;
.overlay{&amp;#13;
  opacity:0.5;&amp;#13;
  background:white;&amp;#13;
  pointer-events: none&amp;#13;
}&amp;#13;
&amp;#13;
.tools-owner-title {&amp;#13;
    padding-top: 5px;&amp;#13;
    padding-bottom: 5px;&amp;#13;
    background-color: #F5FAFF;&amp;#13;
    color: #0C5C97;&amp;#13;
}&amp;#13;
&amp;#13;
.ui-dialog.ui-widget.ui-widget-content {&amp;#13;
	background:white; /* and no special background for the dialog */&amp;#13;
}&amp;#13;
.ui-widget-overlay.ui-front { /* you want this */&amp;#13;
	opacity:.10;&amp;#13;
}&amp;#13;
.modal-dialog1 {&amp;#13;
    width: 900px;&amp;#13;
    margin: 30px auto;&amp;#13;
    position: relative;&amp;#13;
}&amp;#13;
&amp;#13;
.form-control1 {&amp;#13;
    display: block;&amp;#13;
    width: 20%;&amp;#13;
    height: 30px;&amp;#13;
    padding: 6px 12px;&amp;#13;
    font-size: 14px;&amp;#13;
    line-height: 1.42857;&amp;#13;
    color: #555555;&amp;#13;
    background-color: #fff;&amp;#13;
    background-image: none;&amp;#13;
    border: 1px solid #ccc;&amp;#13;
    border-radius: 4px;&amp;#13;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
}&amp;#13;
&amp;#13;
.overlay {&amp;#13;
  position: fixed; &amp;#13;
  width: 100%; &amp;#13;
  height: 100vh; &amp;#13;
  background-color: white; &amp;#13;
  opacity: 0.9; &amp;#13;
  z-index: 9999; &amp;#13;
  top: 0; &amp;#13;
  left: 0;&amp;#13;
  &amp;#13;
  display: flex;&amp;#13;
  align-items: center;&amp;#13;
  justify-content: center;&amp;#13;
  flex-direction: column;&amp;#13;
}&amp;#13;
&amp;#13;
.spinner {&amp;#13;
  animation: spin 2s infinite linear;&amp;#13;
}&amp;#13;
&amp;#13;
/** spin animation */&amp;#13;
@keyframes spin {&amp;#13;
  from {&amp;#13;
    transform: rotate(0deg);&amp;#13;
  }&amp;#13;
&amp;#13;
  to {&amp;#13;
    transform: rotate(359deg);&amp;#13;
  }&amp;#13;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gpst&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS PI Sign Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
  var session_id = gs.getSessionToken();
  var my_sys_id = gs.getUserID();
	var userName = '';
	var user_item = new GlideRecord('sys_user');
        user_item.addQuery('sys_id', my_sys_id);
        user_item.query();
        user_item.next();
	if(user_item != null){
	   userName = user_item.last_name + ", " + user_item.first_name;
	}
	
  data.info = {
	 userId: my_sys_id,
	 sessionId: session_id,
	 userName: userName
  };
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		userName: userName
	};	
	
	data.icSignTasks = [];
	
	//get PI sign record
			var gr1 = new GlideRecord("sc_cat_item");
				gr1.addQuery("short_description", "CCR GDSP Intramural Certification");
				gr1.query();	
				gr1.next();
				var cat_item_id = gr1.getValue('sys_id');


			 var gr_approval_items = GlideRecord('sysapproval_approver');
			 var req_item = gr_approval_items.addJoinQuery('sc_req_item','document_id','sys_id');
			 req_item.addCondition('cat_item', cat_item_id);
       gr_approval_items.addQuery('approver', my_sys_id); 
			 //gr_approval_items.addQuery('document_id.request.requested_for', my_sys_id);
			 gr_approval_items.addQuery('source_table','sc_req_item'); 
			 gr_approval_items.orderByDesc('sys_updated_on');  
			 gr_approval_items.query();
			 while (gr_approval_items.next()){
				 var orginId = '';
				 var tickerNum = '';
				 var org_ticket_num = '';
				 var version = '';
				 var hasParent = '';
				 var selectedOrginId = '';

				 var docId = gr_approval_items.document_id;

				 selectedOrginId = gr_approval_items.document_id.contact_type;
				 if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web' ){
							orginId = gr_approval_items.document_id.sys_id;
							org_ticket_num = gr_approval_items.document_id.number;
							hasParent = 'false';
					}else{
						 var orgIds = selectedOrginId.split("=");
						 var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
						 gr_tracking_item.addQuery('u_orgid',orgIds[0]);
						 gr_tracking_item.query();

						 if(gr_tracking_item.getRowCount() &gt; 0){
									gr_tracking_item.next();
									orginId = gr_tracking_item.u_orgid;
									org_ticket_num = gr_tracking_item.u_ticket_number;
									version = orgIds[1];
									hasParent = 'true';
						 }else {
									orginId = gr_approval_items.document_id.sys_id;
									org_ticket_num = gr_approval_items.document_id.number;
									hasParent = 'false';
						 }
					}

					var ticket_number = '';
					if(hasParent == 'true'){
							ticket_number = 'CCR_IC' + org_ticket_num.substring(8) + '-' + version;
					}else{
							ticket_number = "CCR_IC" + gr_approval_items.sysapproval.number.substring(8);
					}

					var stage_v = gr_approval_items.document_id.context.stage.name;		
							
					if(stage_v == 'Wait for PI to Sign'){
					   var items = {};
									items.ic_id = ticket_number;
									items.study_name = gr_approval_items.document_id.variables.study_name.toString();
									items.project_title = gr_approval_items.document_id.variables.project_title.toString();
									items.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
									items.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
									items.status = gr_approval_items.document_id.context.stage.name.toString();
									items.last_update_date = gr_approval_items.sys_updated_on.toString();
									items.stage = stage_v.toString();
									items.sys_id = gr_approval_items.sys_id.toString();
									items.doc_id = gr_approval_items.document_id.toString();
									items.state = gr_approval_items.state.toString();					
						 data.icSignTasks.push(items);
					}
			}
	//end of PI sign Record 
	
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-12-01 22:00:04&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;1a0e411ddbf64f00f59974131f96194e&lt;/sys_id&gt;&lt;sys_mod_count&gt;23&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS PI Sign Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_1a0e411ddbf64f00f59974131f96194e&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:07:37&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  &lt;div class="panel panel-success panel-area" ng-show="c.data.icSignTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_icSignItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapseIcSignItems" aria-expanded="true" data-target="#collapseIcSignItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Waiting for PI to Sign &lt;span class="badge" id="ritm_count"&gt;{{ c.data.icSignTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;
    &lt;div aria-labelledby="heading_icSignItems" class="panel-collapse collapse in" id="collapseIcSignItems" role="tabpanel"&gt;
    &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;td colspan="9"&gt;
                    &lt;form class="form-inline"&gt;
                      	&lt;label for="search_PISignIC" class="label-hidden"&gt;Search:&lt;/label&gt;	
                        &lt;input id="search_PISignIC" type="text" class="form-control1" ng-model="searchPISignIC" placeholder="Search" /&gt;
                    &lt;/form&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;th ng-repeat="column in c.columns0 track by $index" ng-click="c.toggleSort0($index)" style="cursor: pointer"&gt;
                    {{ column.label }}
                    &lt;span class="glyphicon small" ng-class="{
                                                        'glyphicon-chevron-up': column.sort === 'asc',
                                                        'glyphicon-chevron-down': column.sort === 'desc'
                                                      }"&gt;
                                          &lt;/span&gt;
                &lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.icSignTasks | filter:searchPISignIC" ng-show="$index &gt;= c.pagination0.currentPage * c.pagination0.currentSize &amp;&amp;
                                                 $index &lt; (c.pagination0.currentPage + 1) * c.pagination0.currentSize"&gt;
            &lt;td class="ritm_number"&gt;{{ row.ic_id }}&lt;/td&gt;
            &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
            &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
            &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
            &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
            &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
            &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
            &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.status'&gt;
                                &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA review"  title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                &lt;span ng-switch-when='Wait for PI to Sign'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for PI to sign"  title="Waiting for PI to sign"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" title="Request Submitted" Alt="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
                &lt;/span&gt;
            &lt;/td&gt;
            &lt;td&gt;
                &lt;button class="btn btn-sm btn-primary active" ng-click="viewSignIC(row.sys_id, row.doc_id, row.ic_id)" style="width: 70px; text-align: center;"&gt;
                 View
                &lt;/button&gt;
                &lt;input type="hidden" id="{{ row.sys_id }}_orginId_ic" value="{{ row.orginId}}" /&gt;
                &lt;input type="hidden" id="{{ row.sys_id }}_ticket_num_ic" value="{{ row.org_ticket_num }}" /&gt;
                &lt;input type="hidden" id="{{ row.sys_id }}_ticket_ic" value="{{row.ic_id}}" /&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;

    &lt;!-- select the page size --&gt;
    &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
        &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group" ng-show="c.data.icSignTasks.length &gt; 0"&gt;
                &lt;label for="pageSize15"&gt;
                                          Items per page
                                        &lt;/label&gt;

                &lt;select id="pageSize15" class="form-control" style="display: inline" ng-init="c.pagination0.currentSize = c.pagination0.pageSizes[1]" ng-model="c.pagination0.currentSize" ng-options="sizes for sizes in c.pagination0.pageSizes"&gt;
                                        &lt;/select&gt;
            &lt;/div&gt;
        &lt;/form&gt;
        &lt;/div&gt;
    &lt;!-- select the page index (offset) --&gt;
      &lt;div class="paging-content"&gt;
        &lt;ul class="pagination" ng-show="c.pagination0.currentSize &lt; c.data.icSignTasks.length"&gt;
            &lt;li ng-repeat="index in c.getRange0() track by $index" ng-click="c.setPage0($index)"&gt;
                &lt;a href=""&gt;
                                          {{ $index + 1 }}
                                        &lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;  ]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1375932460</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>38576a31db2b5b00b86770c08c961982</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d29ffd090000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS PI Sign Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>5910b78d6467970089f793978e868c54</update_guid>
<update_guid_history>5910b78d6467970089f793978e868c54:1375932460,23cfa78da6679700853ff4ec78353317:1822953330,4a96ab09f9679700a8dc8a39cc5cffbc:-652559004,16b49bb858e757006106c1aa43dde02b:1871357984,ea1ccf7081e75700e1511f5805dd410f:152092162,5c1c8f70a6e75700f42baaeb9f370ac7:150938986,9e0c8bfcf2a75700c9930f5868bfa45d:-150886583,e19e1e3c682757006d74a6fab4724024:938789023,341859e3941f53003c622368ab42ed3a:-281295037,65dfd8da467e0300dba3ab0e7e9125de:1320607553,f6d6dd15653a4f00c5322f93e075cc19:1203167921,24265dd1723a4f00637b5106ae607e0e:-159609405,cb169591a33a4f00d9bf7b4063a160f8:1050683224,95d259dd9cf64f00587450ae751a81fa:-2019635674,d1829dddb1f64f0047a07f377679a860:2035121475,251259dd83f64f00c82775134896f743:-1174835346,e680d59d4bf64f00d69312fc0ae548ba:21388517,711fc11d14f64f0072a066715685d4ca:1208683491,1dee091d75f64f0035449cfe072d510f:-1810715744,fe9e811d1af64f00f0a4fc1f6bed227f:130117337,7f8ecdd925f64f00c679922c193f6643:-1115966115,698e811d67f64f00861b79c0104d517b:-567113851,c74e051d56f64f00bb35fba1791ad0a4:946649894,911e411d8ef64f00d91d307429568912:111933152</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_d79f1816dbd84f00f59974131f96190a</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http) {
	$('[data-toggle="popover"]').popover();   
  var c = this;
	var sessionId = c.data.info.sessionId;
	c.data.info.sdList.unshift({
		value: 'NONE',
		label: 'Please select a scientific director'
	});
  /* widget controller */
  $scope.closeICModal = function(){
	  $('#displayICRequests').modal('hide');
  }
	
	$scope.loadICApprovalConfirm = function(){
		$('#messageGPAICApproval').html('Are you sure you want to approve this request?');
		$('#confirmGPAApprovalICDiv').modal('show'); 
		$('#btnYesGPAApprovalICConfirm').off('click').click(function() {
			$('#confirmGPAApprovalICDiv').modal('hide');
			var role = $('#roleId').val();
			if( role == 'GPA'){
				if(!approvalValidation()){
					$('#gpaICErrorMessage').html('');
					$('#gpaICErrorMessage').hide();
					submitRequestApproval('approved', 'GPA');	
				}
			}else if(role == 'SD'){
				submitRequestApproval('approved', 'SD');
			}
	});
		$('#btnNoGPAApprovalICConfirm').off('click').click(function() {
			$('#confirmGPAApprovalICDiv').modal('hide');
		});		
	}
	
	$scope.loadICRejectConfirm = function(){
		$('#messageGPAICReject').html('Are you sure you want to reject this request?');
		$('#confirmGPARejectICDiv').modal('show');	
		$('#btnYesGPARejectICConfirm').off('click').click(function() {
			var role = $('#roleId').val();
			if(role == 'GPA'){
					submitRequestApproval('rejected', 'GPA');	
			}else if(role == 'SD' ){
				  submitRequestApproval('rejected', 'SD');	
			}
			$('#confirmGPARejectICDiv').modal('hide');
		});
		$('#btnNoGPARejectICConfirm').off('click').click(function() {
			$('#confirmGPARejectICDiv').modal('hide');
		});			
	}
	function approvalValidation(){
		var sdSelected = $('#selectICSD').val();
		if(sdSelected == 'NONE'){
			$('#gpaICErrorMessage').html('&lt;font size="2" color="red"&gt;&lt;ul&gt;&lt;li&gt;Please select a Scientific Director&lt;/li&gt;&lt;/ul&gt;&lt;/font&gt;');
			$('#gpaICErrorMessage').show();
			return true;
		}else{
			return false;
		}
	}
	function submitRequestApproval(action, role){
  //validate SD when approve the request
   var sdSelected = $('#selectICSD').val();	
   var request_id = $('#hiddenRequestId').val();
   var comments = $('#commentICId1').val();
   var stage = $('#hiddenStage').val();
   var variables= {};
   variables.requested_id = request_id;
   variables.requestedItem_id = $('#hiddenRequestItemId').val();
   variables.approval_comment = comments;
   variables.action = action;
   variables.role = role;
   variables.sd_id = sdSelected;
   var request = {
		 url: '/api/naci/gdspapi/updateGDSPRequest',
		 method : "POST",
		 beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
		 headers: {
				'Content-Type': 'application/json'
			},
		 data : variables
	 }
	 $http(request).then(handleResponse, handleError);
	 function handleResponse(response){
			var result = response.data.result;
		  console.log(result.status);
		}
	  function handleError(){
			console.error(response);
			alert('ERROR');
		}
    $('#displayICRequests').modal('hide');		
	}
	
	$scope.rejectICConfirm = function (){
		$('#messageSignICReject').html('Are you sure you want to Reject this request?');
		$('#confirmSignRejectICDiv').modal('show'); 
		$('#btnYesSignRejectICConfirm').off('click').click(function() {
			$('#confirmSignRejectICDiv').modal('hide');
      submitSignApproval("rejected", "PI");     
	});
		$('#btnNoSignRejectICConfirm').off('click').click(function() {
			$('#confirmSignRejectICDiv').modal('hide');
		});				
	}
	
	$scope.signICConfirm = function (){
		$('#messageSignIC').html('Are you sure you want to Approve this request?');
		$('#confirmSignICDiv').modal('show'); 
		$('#btnYesSignICConfirm').off('click').click(function() {
			$('#confirmSignICDiv').modal('hide');
	    var comments = $('#commentICId1').val();
      submitSignApproval("approved", "PI");			
	});
		$('#btnNoSignICConfirm').off('click').click(function() {
			$('#confirmSignICDiv').modal('hide');
		});				
	}

	function submitSignApproval(action, role){
  //validate SD when approve the request
   var comments = $('#commentICId1').val();
   //var stage = $('#hiddenStage').val();
   var variables= {};
   variables.requested_id =  $('#hiddenApprovalId').val();
   variables.requestedItem_id = $('#hiddenRequestId').val();
   variables.approval_comment = comments;
   variables.action = action;
   variables.role = role;
   variables.sd_id = 'signed';
   var request = {
		 url: '/api/naci/gdspapi/updateGDSPRequest',
		 method : "POST",
		 beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
		 headers: {
				'Content-Type': 'application/json'
			},
		 data : variables
	 }
	 $http(request).then(handleResponse, handleError);
	 function handleResponse(response){
			var result = response.data.result;
		  console.log(result.status);
		}
	  function handleError(){
			console.error(response);
			alert('ERROR');
		}
    $('#displayICRequests').modal('hide');		
	}	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.control-label {&amp;#13;
    text-align: right;&amp;#13;
    margin-bottom: 0;&amp;#13;
    padding-top: 0;&amp;#13;
}&amp;#13;
.modal-dialog1 {&amp;#13;
    width: 1000px;&amp;#13;
    margin: 30px auto;&amp;#13;
}&amp;#13;
&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gfdd&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS  IC Form Data Display&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	var sd_list = [];
	var getMembers = new GlideRecord('sys_user_grmember');
      getMembers.addQuery('group.name','CCR_SD');
      getMembers.query();
  while(getMembers.next())
  {
		 sd_list.push({
			 value: getMembers.user.toString(),
			 label: [getMembers.user.first_name, getMembers.user.last_name].join(' ')
		 });
  }	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		sdList: sd_list
	};

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-02 14:40:39&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;d79f1816dbd84f00f59974131f96190a&lt;/sys_id&gt;&lt;sys_mod_count&gt;117&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS  IC Form Data Display&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_d79f1816dbd84f00f59974131f96190a&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-24 21:22:43&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
&lt;div id="displayICRequests" class="modal fade" data-keyboard="false" data-backdrop="static" style="overflow-y:auto; overflow-x: auto;"&gt;
  &lt;div class="modal-dialog1 modal-lg"&gt;
    &lt;div class="modal-content" id="ic_modal_content" style="height:900px; overflow-y:auto; overflow-x: hidden;"&gt;
      &lt;div class="modal-header"&gt;
		  &lt;button type="button" class="close btn btn-xs" data-dismiss="modal" aria-label="Close"&gt;&lt;span aria-hidden="true"&gt;x&lt;/span&gt;&lt;/button&gt;
           &lt;div&gt;
                 &lt;font size="5"&gt;&lt;b&gt;Institutional Certification Submission&lt;/b&gt;&lt;/font&gt; &lt;br/&gt;
                  &lt;b&gt;IC Number - &lt;span id="displayICId"&gt;&lt;/span&gt;&lt;/b&gt;
           &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="modal-body"&gt;
         &lt;div id="gpaICErrorMessage" style="display:none;"&gt;&lt;/div&gt;
         &lt;div class="col-md-12"&gt;
  &lt;!-- start table --&gt;
         &lt;fieldset class="scheduler-border"&gt;
            &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;IC Information&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
           	&lt;form class="form-horizontal"&gt;
                &lt;div class="form-group"&gt;
                  &lt;label class="control-label col-md-5" for="certification_date1"&gt;Certification Date&lt;/label&gt;
                  &lt;div class="col-md-7" &gt;&lt;div id="certification_date1"&gt;&lt;/div&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="form-group" id="insDiv"&gt;
                  &lt;label class="control-label col-md-5" for="institution_name1"&gt;Institution Name&lt;/label&gt;
                  &lt;div class="col-md-6" &gt;&lt;div id="institution_name1"&gt;&lt;/div&gt;&lt;/div&gt;
                &lt;/div&gt;    				
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="certification_to1"&gt;GPA &lt;br/&gt;(Genomic Program Administrator)&lt;/label&gt;
                &lt;div class="col-md-6"&gt;&lt;div id="certification_to1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;  
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="certification_from1"&gt;Signing Authority&lt;br/&gt;(Scientific Director)&lt;/label&gt;
                &lt;div class="col-md-6"&gt;&lt;div id="certification_from1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;           
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="gpa_organization1"&gt;Organization of GPA&lt;/label&gt;
                &lt;div class="col-md-6"&gt;&lt;div id="gpa_organization1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;           
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="sd_organization1"&gt;Organization of SD&lt;/label&gt;
                &lt;div class="col-md-6"&gt;&lt;div id="sd_organization1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="study_name1"&gt;Original Study Name&lt;/label&gt;
                &lt;div class="col-md-6"&gt;&lt;div id="study_name1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;              
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="project_title1"&gt;Project Title for Data to be submitted&lt;/label&gt;
                &lt;div class="col-md-6"&gt;&lt;div id="project_title1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;              
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="dataAccessBox1"&gt;Data are made available through&lt;/label&gt;
                &lt;div class="col-md-3"&gt;
                  &lt;input type="radio" id="dataAccessBox1" name="dataAccessBox1" value="unrestricted" disabled&gt;&amp;nbsp;Unrestricted
                &lt;/div&gt;
                &lt;div class="col-md-3"&gt;
                	&lt;input type="radio" id="dataAccessBox1" name="dataAccessBox1" value="controlled-access" disabled&gt;&amp;nbsp;Controlled-access  
                &lt;/div&gt; 
              &lt;/div&gt;   
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="displayBox1"&gt;Data is to upload&lt;/label&gt;
                &lt;div class="col-md-7"&gt;
                 &lt;input type="checkbox" id="displayBox1" disabled&gt;&amp;nbsp;The display of variant alleles  &lt;br&gt;
                 &lt;label class="label-hidden" for="frequenceBox1"&gt;Frequencies&lt;/label&gt;
                  &lt;input type="checkbox" id="frequenceBox1" disabled&gt;&amp;nbsp;Frequencies from this study in public variation archives (dbSNP and dbVar) 
                &lt;/div&gt;
              &lt;/div&gt;
           &lt;/form&gt;
       	&lt;/fieldset&gt;           
         &lt;!-- GUI for Consent Group --&gt;
         &lt;input type="hidden" id="consent_group1"/&gt;
         &lt;div id='consentGrpDiv'&gt;  
           &lt;fieldset class="scheduler-border" &gt;
              &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Consent Group&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
              &lt;div id="consentContentDiv"&gt;&lt;/div&gt;
           &lt;/fieldset&gt;  
         &lt;/div&gt;  
           
        &lt;div id="pre_comments_ic_div" class="col-md-12" style="display:none;"&gt;
             &lt;fieldset class="scheduler-border"&gt;
                &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Approval Status&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                &lt;div id="commentReviewICId1"&gt;&lt;/div&gt;
             &lt;/fieldset&gt;
        &lt;/div&gt;
        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
        &lt;div class="row form-group" id="sd_ic_div" style="display:none;"&gt;
             &lt;div class="col-md-3"&gt;
               	&lt;label for="selectICSD" class="form-label"&gt;Scientific Director&lt;/label&gt;
             &lt;/div&gt;
             &lt;div class="col-md-9"&gt;
               &lt;select class="form-control" id="selectICSD" width="100px"&gt;
                   &lt;option ng-repeat="sd in c.data.info.sdList" value="{{sd.value}}"&gt;{{sd.label}}&lt;/option&gt;
               &lt;/select&gt;
             &lt;/div&gt;
           &lt;/div&gt; 
           
           &lt;div id="comments_ic_div" class="row form-group" style="display:none;"&gt;
           		&lt;br&gt;
         	 	  &lt;div class="col-md-3" id="commentId1ICLable"&gt;
                &lt;label for="commentICId1" class="form-label"&gt;Comments&lt;/label&gt;
             &lt;/div&gt;
              &lt;div class="col-md-9" style="valign:top; align:left;"&gt;
                	&lt;textarea id="commentICId1" rows="5" class="form-control"&gt;&lt;/textarea&gt;
             &lt;/div&gt;
           &lt;/div&gt;
           &lt;div class="clearfix"&gt;  
              &lt;div id="closeButton1" class="pull-right"&gt;&lt;input type="button" class="btn btn-primary btn-sm btn-form" style="width: 70px; text-align: center;" ng-click="closeICModal()" value="CLOSE"/&gt; &lt;/div&gt;
          	  &lt;div class="col-md-7 align-checkboxes"&gt;
                &lt;div id="signButton1" class="pull-right" style="display:none"&gt;
                    &lt;input type="button" class="btn btn-primary btn-sm btn-form" style="width: 70px; text-align: center;" ng-click="rejectICConfirm()" value="REJECT"/&gt; &amp;#160; &amp;#160; &amp;#160;&amp;#160; &amp;#160; &amp;#160; 
                    &lt;input type="button" class="btn btn-primary btn-sm btn-form" style="width: 70px; text-align: center;" ng-click="signICConfirm()" value="SIGN"/&gt; &amp;#160; &amp;#160; &amp;#160;&amp;#160; &amp;#160; &amp;#160; 
                    &lt;input type="button" class="btn btn-primary btn-sm btn-form" style="width: 70px; text-align: center;" ng-click="closeICModal()" value="CLOSE"/&gt;
                &lt;/div&gt;
              &lt;/div&gt;
               &lt;div class="col-md-7 align-checkboxes"&gt;
                 &lt;div id="submitButton1" class="pull-right"&gt; &lt;input type="button" class="btn btn-primary btn-sm btn-form" style="width: 70px; text-align: center;" ng-click="loadICApprovalConfirm()" value="APPROVE"/&gt; &amp;#160; &amp;#160; &amp;#160;&amp;#160; &amp;#160; &amp;#160; &lt;input type="button" class="btn btn-primary btn-sm btn-form" ng-click="loadICRejectConfirm()" value="REJECT"/&gt;&amp;#160; &amp;#160; &amp;#160;&amp;#160; &amp;#160; &amp;#160; &lt;input type="button" class="btn btn-primary btn-sm btn-form" ng-click="closeICModal()" value="CLOSE"/&gt;&lt;/div&gt;          
              &lt;/div&gt;
             &lt;br/&gt; &lt;br/&gt; &lt;br/&gt;
       &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
  
  &lt;div id="confirmGPAApprovalICDiv" class="modal fade"&gt;
      &lt;div class="modal-dialog"&gt;
          &lt;div class="modal-content"&gt;
              &lt;div class="modal-header"&gt;
                  &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                      &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                  &lt;/button&gt;
                  &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
              &lt;/div&gt;
              &lt;div class="modal-body"&gt;
                  &lt;p align="center" id="messageGPAICApproval"&gt;&lt;/p&gt;
              &lt;/div&gt;
              &lt;div class="modal-footer"&gt;
                  &lt;button id="btnYesGPAApprovalICConfirm" 
                  type="button" class="btn btn-primary" 
                  style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                  &lt;button id="btnNoGPAApprovalICConfirm" 
                  type="button" class="btn btn-default" 
                  style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;

  &lt;div id="confirmGPARejectICDiv" class="modal fade"&gt;
      &lt;div class="modal-dialog"&gt;
          &lt;div class="modal-content"&gt;
              &lt;div class="modal-header"&gt;
                  &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                      &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                  &lt;/button&gt;
                  &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
              &lt;/div&gt;
              &lt;div class="modal-body"&gt;
                  &lt;p align="center" id="messageGPAICReject"&gt;&lt;/p&gt;
              &lt;/div&gt;
              &lt;div class="modal-footer"&gt;
                  &lt;button id="btnYesGPARejectICConfirm" 
                  type="button" class="btn btn-primary" 
                  style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                  &lt;button id="btnNoGPARejectICConfirm" 
                  type="button" class="btn btn-default" 
                  style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;
  &lt;div id="confirmSignRejectICDiv" class="modal fade"&gt;
      &lt;div class="modal-dialog"&gt;
          &lt;div class="modal-content"&gt;
              &lt;div class="modal-header"&gt;
                  &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                      &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                  &lt;/button&gt;
                  &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
              &lt;/div&gt;
              &lt;div class="modal-body"&gt;
                  &lt;p align="center" id="messageSignICReject"&gt;&lt;/p&gt;
              &lt;/div&gt;
              &lt;div class="modal-footer"&gt;
                  &lt;button id="btnYesSignRejectICConfirm" 
                  type="button" class="btn btn-primary" 
                  style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                  &lt;button id="btnNoSignRejectICConfirm" 
                  type="button" class="btn btn-default" 
                  style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;
  &lt;div id="confirmSignICDiv" class="modal fade"&gt;
      &lt;div class="modal-dialog"&gt;
          &lt;div class="modal-content"&gt;
              &lt;div class="modal-header"&gt;
                  &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                      &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                  &lt;/button&gt;
                  &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
              &lt;/div&gt;
              &lt;div class="modal-body"&gt;
                  &lt;p align="center" id="messageSignIC"&gt;&lt;/p&gt;
              &lt;/div&gt;
              &lt;div class="modal-footer"&gt;
                  &lt;button id="btnYesSignICConfirm" 
                  type="button" class="btn btn-primary" 
                  style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                  &lt;button id="btnNoSignICConfirm" 
                  type="button" class="btn btn-default" 
                  style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;    
&lt;input type="hidden" id="hiddenRequestId" /&gt;
&lt;input type="hidden" id="hiddenRequestItemId" /&gt;
&lt;input type="hidden" id="hiddenStage"/&gt;
&lt;input type="hidden" id="resubmitCommentsId"/&gt;
&lt;input type="hidden" id="withdrawCommentsId"/&gt;
&lt;input type="hidden" id="withdrawSubmitId"/&gt;
&lt;input type="hidden" id="roleId"/&gt;  
&lt;input type="hidden" id="hiddenApprovalId"/&gt;    
&lt;/div&gt;  
  
  ]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-588230034</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>38576a31db2b5b00b86770c08c961985</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2c3fff0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS  IC Form Data Display</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>692357383ce75700f40a2740d1d84977</update_guid>
<update_guid_history>692357383ce75700f40a2740d1d84977:-588230034,aba6aa34c66757001630ed6f746f4923:803871233,de66e63423675700ccbaeaa7258490b3:1820711426,4e56a634fe675700e131b7e5126f14fb:1216914933,a406a6b0ec675700f77e13faafb908a5:958720346,a1091c83702e1f00ffe0eaa6658ddc8e:1798596655,5fc95332adc59b0004c91650d89ee257:1225245883,a1091c83702e1f00ffe0eaa6658ddc8e:1798596655,a1091c83702e1f00ffe0eaa6658ddc8e:1798596655,5fc95332adc59b0004c91650d89ee257:1225245883,9ab993fe31859b00d2a8d9d28c929aef:-1337939485,c5b9dbbe53859b00e8ecd905155aa9ef:1853186553,f8991ffeb9859b003dbc9d85dada937a:1225245883,70691bbe28859b00a8285ceb24bd6c28:208544285,0e295fbebd859b0045f3f610e9822af7:1378988797,d40993fe5c859b002f5d9b231e99f5a7:1234021451,38e8dbbef3859b0083d573f39195b22e:-1763037115,b5da9ca6afa74300feabf6683f9c2653:1225245883,001c417901a7cf00b162fe36b60d53af:827359211,b32fedc259624700ee597ae2722aeb50:102245687,5bd3618a1e224700489cb95ad0eea0df:-916173605,d0ee498a1eee07005b88901928ee95d8:-787399717,81ae0d4e66ee070090284ef2294abee1:101296947,9ced054e53ee0700aa5cfc2d1849c118:1280827072,fa9dc18a79ee07009e6b1a55cb02c43e:-1368412740,88bb458aebee07002a36677e8aa3ecab:-1477270643,131b498a1eee0700def14080ed1f1acf:-665896098,321ac94a93ee07000af9962d792c0d8a:-1325465134,dd39814a96ee0700a2ca79412f23bf98:545120390,57e84d0ae6ee070011571e78594c1899:1378755556,b27841c666ee070006b87b8317232f8b:-1350107323,be6885026dee070008ce00cc25bfcc4d:694693761,ca48c10a63ee0700d82ac3474ac11494:505267075,a538810a72ee0700d78db2d15498f2e5:-1040084958,f718010a1eee07007f282d99036ffce0:-1468894567,d4f70dc274ee07006608bf1bbd212b32:1510324797,d9d789c648ee0700935c23efe4d15e11:695888984,a3b749cee9ae0700e8fea43c7ca78ec7:984165625,0597c5c622ee070005cd9b61ccb90161:695888984,b76545ce95ae07009fde53515cfdfc03:-1956103988,3d4589061cee0700494030b1e2a457bb:209351098,49354d027cee07003eddfbf2f13f728a:1371507783,3984c106ffee07006f3b807dd0eef4a5:-1568288083,4314494ec4ae07007085e5192798eb6e:-1913841779,1bc8e08265ae07006297243a3d8a0772:-2074400507,a8b8204282ae07008257c5115fec5e3a:-566258784,0198640219ae0700b8d0864ddaebfca1:1921299215,ccb4a4caff6e07005fd6c11b9221aa38:760426410,91f3608a6f6e07009e5183def7422cba:100419701,9c609cc6232e070033f4fb14b62850af:-1449334031,d720100a6d2e07008cbcba73cc280edb:606406134,e3ade879c4e20700f571906047cac301:-978272376,83caa87d5de20700b3c725164459cbff:-2049602818,2a18979f13de8300cb27c7d731fcf615:-2111036135,2a18979f13de8300cb27c7d731fcf615:-2111036135,2a18979f13de8300cb27c7d731fcf615:-2111036135</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_298597f8dbe7570054d8ff621f96196e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Footer">4dbfd13bdb027e00f59974131f961916</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:33:06</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>298597f8dbe7570054d8ff621f96196e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Footer</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_298597f8dbe7570054d8ff621f96196e</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:33:06</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>1916447369</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>3c576a31db2b5b00b86770c08c961916</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3ecd620000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Footer</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>6ac71f7c12e757007674523568f4309e</update_guid>
<update_guid_history>6ac71f7c12e757007674523568f4309e:1916447369,218597f8d7e75700ae0d109a96f7cc70:-1845486059</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_8df5dbf8dbe7570054d8ff621f96194a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP SD Approval Table">084ccac5dbde7200f59974131f9619da</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:34:58</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>8df5dbf8dbe7570054d8ff621f96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP SD Approval Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_8df5dbf8dbe7570054d8ff621f96194a</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:34:58</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>633163938</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>3c576a31db2b5b00b86770c08c961919</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce4038e60000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP SD Approval Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>0928d3bc2be75700e0ff04d9a258a457</update_guid>
<update_guid_history>0928d3bc2be75700e0ff04d9a258a457:633163938,85f5dbf872e75700a8778ed75b962f4c:-826649810</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_css_6eb0d7b4dbe7570054d8ff621f96197e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_css"><sp_css action="INSERT_OR_UPDATE"><css>.label-hidden{&#13;
	display:none !important;&#13;
}&#13;
&#13;
.panel-area{&#13;
	border:0px !important;&#13;
  	margin-bottom:0px;&#13;
}&#13;
.panel-header{&#13;
	background-color: #3071a9 !important;&#13;
  	border:0px !important;&#13;
  	border-radius:5px;&#13;
  	margin-top:2px;&#13;
  	color: #ffffff !important;&#13;
}&#13;
.panel-collapse .tab-content{&#13;
	border-radius:5px !important;&#13;
}&#13;
.help-link{&#13;
	color:#0C5C97 !important;&#13;
}&#13;
.badge{&#13;
	color: #3071a9 !important;&#13;
    background-color: white !important;&#13;
}&#13;
.section-title{&#13;
	color:#000000;&#13;
}&#13;
&#13;
.pagination li a{&#13;
	color:#3071a9 !important;&#13;
}&#13;
&#13;
.pagination li a:focus, .pagination li a:hover{&#13;
	color: white !important;&#13;
    background-color: #3071a9 !important;&#13;
    border-color: #3071a9 !important;&#13;
}&#13;
&#13;
.panel-box{&#13;
	width: 98%;&#13;
    margin-left: 1%;&#13;
    border: 1px solid lightgray;&#13;
    border-radius: 5px;&#13;
    padding-top: 5px;&#13;
    padding-bottom: 5px;&#13;
}&#13;
&#13;
.paging-bar{&#13;
	height: 74px;&#13;
}&#13;
.paging-option{&#13;
	float:right;&#13;
}&#13;
.paging-content{&#13;
	float:left;&#13;
}&#13;
.btn-primary{&#13;
	color: #3071a9 !important;&#13;
    background-color: #e2f8f5 !important;&#13;
    border-color: #e2f8f5 !important;&#13;
    box-shadow: 0 4px 4px rgba(0, 0, 0, .125) !important;&#13;
}&#13;
.btn-primary:hover{&#13;
	color: #3071a9 !important;&#13;
    background-color: #cffbf6 !important;&#13;
    border-color: #cffbf6 !important;&#13;
}</css><name>CCRGDS_CSS</name><sys_class_name>sp_css</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:12:40</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>6eb0d7b4dbe7570054d8ff621f96197e</sys_id><sys_mod_count>26</sys_mod_count><sys_name>CCRGDS_CSS</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_css_6eb0d7b4dbe7570054d8ff621f96197e</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-26 22:16:11</sys_updated_on></sp_css></record_update>]]></payload>
<payload_hash>1583805946</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>3c576a31db2b5b00b86770c08c96191c</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d8a9e8560000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS</target_name>
<type>Style Sheet</type>
<update_domain>global</update_domain>
<update_guid>c492f12169ab1b002ccf450df2cd0b53</update_guid>
<update_guid_history>c492f12169ab1b002ccf450df2cd0b53:1583805946,d612f565596b1b00a1f7aa3b3b0d0b94:-304016863,012035619767d700fe0c91356f01844a:-1936501043,d55f29a9f227d7008906450c6b1b8399:878692483,08cee52d6427d700fb9865b051af1dae:13816197,ddcd292d2d27d700291f0256903b84bb:1422920813,a45de56df1e3d700f95d9d76cf1fb942:-46040473,ee0f3bc951a797004c573de103599c4f:123651463,8fdeffc955a79700ab149f96ff1dba65:580630664,b9aa3385d1a797008da0dc3dc7909507:629220206,5fddab4d04679700dad9cb02581006de:-505211946,366cefc9286797003038b026ba08a1c2:535949425,a9a1e7814567970090bdd77ec03c6f1f:-15781507,bf71eb855c2797009c506707c9e0d1b7:1426606930,1931ab01b9679700ae16b3f70e00503b:-464750075,edc02fc5df279700c9dfb7117e0a7a93:-455649831,e5e257053f279700059b496711db044b:326511041,792e8b01e9279700e8253ee1fdb36fa1:1485413273,2299cb4d51e39700b2b2764e0a1cf667:-865039515,ec584349a0e39700f755da83e9e61e69:1656785227,7a57c3c5b4e39700f2bf68d253eb0ac6:-1267332673,66f40785dfe39700b1db4658686935cc:-1492192894,d1d95fbcebe75700c9cea8751f785756:-1831254752,9bd89f7c0ae757006b923163352d0b6e:375512842,8853977858e757002d444ad186ebddd2:-699405448,0d9217383ce75700e2ecb4a9da612e79:-664563039,56d0db742be75700bc8330c09afd8dc7:-2078270199</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_theme_f6147a7ddb2d720054d8ff621f96194f</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_theme"><sp_theme action="INSERT_OR_UPDATE"><css_variables/><footer/><footer_fixed>true</footer_fixed><header/><name>Software Solution Theme</name><navbar_fixed>true</navbar_fixed><sys_class_name>sp_theme</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2017-03-17 19:13:21</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>f6147a7ddb2d720054d8ff621f96194f</sys_id><sys_mod_count>2</sys_mod_count><sys_name>Software Solution Theme</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_theme_f6147a7ddb2d720054d8ff621f96194f</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:04:38</sys_updated_on></sp_theme></record_update>]]></payload>
<payload_hash>-1237361908</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>3c576a31db2b5b00b86770c08c961981</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce1baeb50000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>Software Solution Theme</target_name>
<type>Theme</type>
<update_domain>global</update_domain>
<update_guid>e00fc73405e7570091b3bc50e1fc5273</update_guid>
<update_guid_history>e00fc73405e7570091b3bc50e1fc5273:-1237361908,93fdcfb04ce757001b1774894633e447:-350368073,0a18579f19de830080417e440c3bc9de:-1237361908,0a18579f19de830080417e440c3bc9de:-1237361908</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_9f31baf9db2d720054d8ff621f961912</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope) {
  /* widget controller */
  var c = this;
  $scope.logout = function(){
		window.location.href="/logout.do";
  }
	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css/&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description&gt;This is Banner for GDS Application&lt;/description&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-banner&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS Banner&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
function logout(){
	window.location.href="/logout.do";
}
	
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-03-17 19:07:04&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;9f31baf9db2d720054d8ff621f961912&lt;/sys_id&gt;&lt;sys_mod_count&gt;9&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS Banner&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_9f31baf9db2d720054d8ff621f961912&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-24 21:23:16&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
 	&lt;img src="NCI-logo-full.jpg" height="70" Alt="NCI LOGO"/&gt; &lt;span style="float:right;"&gt;&lt;input type="button" class="btn btn-default active" value="Logout"  ng-click="logout();"/&gt;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&amp;#160;&lt;/span&gt; &lt;br/&gt;
&lt;/div&gt;
&lt;br/&gt;
&lt;div class="col-md-12 tools-owner-title" style="white-space:nowrap; display:inline;"&gt; 
	&lt;font size="4"&gt;CCR Genomic Data Sharing Portal&lt;/font&gt; &amp;#160; &amp;#160; &lt;a class="help-link" href="https://ccrod.cancer.gov/confluence/x/DIiyBw" target="_BLANK"&gt;&lt;img   src="contextual_help.png" width="20px" height="20px" Alt="Help" Title="Help"/&gt;Help&lt;/a&gt;
&lt;/div&gt;







]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-2127476828</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>3c576a31db2b5b00b86770c08c961984</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2cbf7f0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS Banner</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>a5431b382de757002603e311e3eb78de</update_guid>
<update_guid_history>a5431b382de757002603e311e3eb78de:-2127476828,9a2102b41ae3570065ce6d3f3e873551:1727904074,da18979fd1de830075d55e4ea924270e:439990531,da18979fd1de830075d55e4ea924270e:439990531</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_theme_css_include_c96e0334dbe7570054d8ff621f961901</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_theme_css_include"><m2m_sp_theme_css_include action="DELETE"><order>5</order><sp_css_include display_value="">da3e8ff0dbe7570054d8ff621f961973</sp_css_include><sp_theme display_value="Software Solution Theme">f6147a7ddb2d720054d8ff621f96194f</sp_theme><sys_class_name>m2m_sp_theme_css_include</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:01:56</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>c96e0334dbe7570054d8ff621f961901</sys_id><sys_mod_count>1</sys_mod_count><sys_name>Global CSS.Software Solution Theme</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_theme_css_include_c96e0334dbe7570054d8ff621f961901</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:04:29</sys_updated_on></m2m_sp_theme_css_include></record_update>]]></payload>
<payload_hash>-653579543</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>70576a31db2b5b00b86770c08c961915</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce20c5a70000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<table/>
<target_name>Global CSS.Software Solution Theme</target_name>
<type>Stylesheets</type>
<update_domain>global</update_domain>
<update_guid>0e4017b4b7e7570055cd4ca51bbb67af</update_guid>
<update_guid_history>0e4017b4b7e7570055cd4ca51bbb67af:-653579543,22fec734bbe7570087ce489b6e908868:1350451195,816e03344de757005df171582f526b03:921777798</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_5f92995fdbdf130054d8ff621f96197b</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="dirPagination dependency">61c476cedb12360054d8ff621f961957</sp_dependency><sp_widget display_value="GDS Data Entry Section">b6f188c5dba6ba0054d8ff621f96198c</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 20:10:15</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>5f92995fdbdf130054d8ff621f96197b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>dirPagination dependency.GDS Data Entry Section</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_5f92995fdbdf130054d8ff621f96197b</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 20:10:15</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>241952416</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>70576a31db2b5b00b86770c08c961918</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b42a19a50000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>dirPagination dependency.GDS Data Entry Section</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>1b92995fc8df1300c428b2f74550387d</update_guid>
<update_guid_history>1b92995fc8df1300c428b2f74550387d:241952416</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_ca75d3f8dbe7570054d8ff621f96197a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Display Data Section">2d52c810dbdabe0054d8ff621f961908</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:32:52</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>ca75d3f8dbe7570054d8ff621f96197a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Display Data Section</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_ca75d3f8dbe7570054d8ff621f96197a</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:32:52</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>992835376</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>70576a31db2b5b00b86770c08c96191b</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3ea0980000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Display Data Section</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>63b71f7cc5e757007b9bfdaf31668899</update_guid>
<update_guid_history>63b71f7cc5e757007b9bfdaf31668899:992835376,ca75d7f84ae75700cec4329f7d2f92c2:751395004</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_47a5f364dbe2ba00f59974131f96197a</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http, spUtil) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns = [
		{
			key: 'gdsp_id',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'principal_investigator',
			label: 'Principal Investigator',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.approvalTasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.approvalTasks = c.data.approvalTasks.sort(compareRows);
		}
	};
	//for reviewed table
	c.pagination1 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns1 = [
		{
			key: 'gdsp_id',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'principal_investigator',
			label: 'Principal Investigator',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange1 = function() {
		var currentSize = c.pagination1.currentSize;
		var currentPage = c.pagination1.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.reviewedTasks.length / currentSize));
	};
	
	c.setPage1 = function(index) {
		c.pagination1.currentPage = index;
	};
	
	c.toggleSort1 = function(index) {
		var column = c.columns1[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.reviewedTasks = c.data.reviewedTasks.sort(compareRows);
		}
	};

	//start client JS
  $('.collapse').on('shown.bs.collapse', function() {
      $(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
  }).on('hidden.bs.collapse', function() {
      $(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
  });	
	
	var names=['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var textFields = ['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna']; 
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;
	var gpa = c.data.info.gpa;
	var sd = c.data.info.sd;
	var gpa_asst = c.data.info.gpa_asst;
	
	c.view = function(doc_id, sys_id, state, stage, ticket_id){
		$('#refresh').val('0');
		fetchDetails(doc_id, sys_id, state, stage, ticket_id);
	}
	c.report = function(sys_id, gdsp_id){
		$('#refresh').val('0');
		window.open('$sp.do?id=gdsp_report_page&amp;itemId='+sys_id+'&amp;ticket='+gdsp_id, '_BLANK');
	}
	

function fetchDetails(number, approvalId, state, stage, ticket_id){
		var variables= {};
		data = {
			requestedid : number	
		};
    var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			  var variables = result.variables;
			  var comments = "";
			  comments = result.comments;
			  var comment_str = parse(comments);
			  $('#displayRequestId').html(ticket_id);
			  //reset SD selection and comments
			  $('#selectSD').val('NONE');
			  $('#commentId1').val('');
			  resetRequestValue();
			  loadApprovalData(variables);
			  clearDiv();
				$('#commentReviewId1').empty();
				$('#commentReviewId1').append(comment_str);

				$('#commentId1').show();
				$('#commentId1Lable').show();

				if(comment_str .length &lt; 137){
							 $('#pre_comments_div').hide();
				 }else{
							 $('#pre_comments_div').show();
				 }
				$('#hiddenRequestId').val(approvalId);
				$('#hiddenRequestItemId').val(number);
			  $('#roleId').val('GPA');
				$('#comments_div').show();
			  if(stage == 'Waiting for PI Resubmit'){
					 $('#comments_div').hide();
					 $('#submitButton').hide();
					 $('#closeButton').show();
				}else if(state == 'approved' || state.indexOf('not_required') &gt;=0 || gpa_asst){
					 $('#comments_div').hide();
					 $('#submitButton').hide();
					 $('#closeButton').show();
				}else if(state == 'requested' || state == 'rejected'){
					 if((stage == 'Waiting for GPA Review' || stage == 'SD Rejected - Waiting for GPA Review') &amp;&amp; gpa){
							$('#comments_div').show();
							$('#sd_div').show();
							$('#submitButton').show();
							$('#closeButton').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; !sd){
							$('#comments_div').show();
							$('#sd_div').hide();
							$('#submitButton').show();
							$('#closeButton').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; sd){
							$('#comments_div').show();
							$('#sd_div').hide();
							$('#submitButton').show();
							$('#closeButton').hide();
					 }else if(stage == 'SD Approved'){
								$('#comments_div').hide();
								$('#sd_div').hide();
								$('#submitButton').hide();
								$('#closeButton').show();
					 }else{
								$('#comments_div').hide();
								$('#sd_div').hide();
								$('#submitButton').hide();
								$('#closeButton').show();
					 }
				}else{
					 $('#comments_div').show();
					 $('#submitButton').show();
					 $('#closeButton').hide();
				}
				var ticketN = $('#'+number+'_ticket').val();
        $('#displayRequestId').html(ticketN);		
			  $('#displayRequests').modal('show').on('shown.bs.modal', function(){$('#displayRequests .modal-content').scrollTop(0);}); 
		}
		function handleError(response){
			console.error(response);
			alert('ERROR');
		}
		$('#hiddenStage').val(stage);
 }	
    function clearDiv(){
		$('#comments_div').hide();
		$('#sd_div').hide();
		$('#submitButton').hide();
		$('#closeButton').hide();
	}
	
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
	 }
	 commentsblock = commentsblock + "&lt;/table&gt;";

	return commentsblock;
	}	
	
	function loadApprovalData(data){
	  for(key in data){
			var value = getValue(key, data[key]);
			$('#'+key+"1").html(value);
		}
	}
	
  function getValue(name, value){
		 if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           return getConvertedValue(value, '1');
        }else{
           return value;
        }
     }else{
        if(value == "true"){
           return '&lt;input type="checkbox" id="'+ name +'1" checked="true" disabled="true"/&gt;';
        }else{
           return '&lt;input type="checkbox" id="' + name+ '1" disabled="true"/&gt;';
        }
        return value; 
     }
  }	
	
	function getConvertedValue(value, flag){
		 if(flag == '0'){
				var values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				var values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}	
	
	  function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
      if(textFields.indexOf(names[i]) != -1 ){ 
            $('#'+names[i] + "1").html('');
      }else{
				   $('#'+names[i] +"1").html('&lt;input type="checkbox" id="'+ names[i] +"1" + '" disabled="true"/&gt;');
           $('#'+names[i] + "1").prop('checked', false); 
		       $('#'+names[i] + "1").removeAttr("disabled");
      }
    }
  }	
	
spUtil.recordWatch($scope, "sysapproval_approver", "", function(name, data) {  
			spUtil.update($scope);
	});	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.form-control1 {&amp;#13;
    display: block;&amp;#13;
    width: 20%;&amp;#13;
    height: 30px;&amp;#13;
    padding: 6px 12px;&amp;#13;
    font-size: 14px;&amp;#13;
    line-height: 1.42857;&amp;#13;
    color: #555555;&amp;#13;
    background-color: #fff;&amp;#13;
    background-image: none;&amp;#13;
    border: 1px solid #ccc;&amp;#13;
    border-radius: 4px;&amp;#13;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-gps-approval-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS GPA Approval Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.approvalTasks = [];
	data.reviewedTasks = [];
	data.info = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	var gr = gs.getUser(); 
	var gpa = gr.isMemberOf('CCR_GPA');
	var gpa_asst = gr.isMemberOf('CCR_GPA_ASST');
	var sd = gr.isMemberOf('CCR_SD');
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		gpa: gpa,
		gpa_asst: gpa_asst,
		sd: sd
	};
	if(gpa || gpa_asst){
		var gr1 = new GlideRecord("sc_cat_item");
				gr1.addQuery("short_description", "CCR Genomic Data Sharing Plan");
				gr1.query();	
				gr1.next();
				var cat_item_id = gr1.getValue('sys_id');

			 var gr_approval_items = GlideRecord('sysapproval_approver');
			 var req_item = gr_approval_items.addJoinQuery('sc_req_item','document_id','sys_id');
			 req_item.addCondition('cat_item', cat_item_id);
       if(!gpa_asst){
					gr_approval_items.addQuery('approver', my_sys_id); 
			 }
			 gr_approval_items.addQuery('source_table','sc_req_item'); 
			 gr_approval_items.orderByDesc('sys_updated_on');  
			 gr_approval_items.query();
			 while (gr_approval_items.next()){
				 var orginId = '';
				 var tickerNum = '';
				 var org_ticket_num = '';
				 var version = '';
				 var hasParent = '';
				 var selectedOrginId = '';

				 var docId = gr_approval_items.document_id;

				 selectedOrginId = gr_approval_items.document_id.contact_type;
				 if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web' ){
							orginId = gr_approval_items.document_id.sys_id;
							org_ticket_num = gr_approval_items.document_id.number;
							hasParent = 'false';
					}else{
						 var orgIds = selectedOrginId.split("=");
						 var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
						 gr_tracking_item.addQuery('u_orgid',orgIds[0]);
						 gr_tracking_item.query();

						 if(gr_tracking_item.getRowCount() &gt; 0){
									gr_tracking_item.next();
									orginId = gr_tracking_item.u_orgid;
									org_ticket_num = gr_tracking_item.u_ticket_number;
									version = orgIds[1];
									hasParent = 'true';
						 }else {
									orginId = gr_approval_items.document_id.sys_id;
									org_ticket_num = gr_approval_items.document_id.number;
									hasParent = 'false';
						 }
					}

					var ticket_number = '';
					if(hasParent == 'true'){
							ticket_number = 'CCR_GDSP' + org_ticket_num.substring(8) + '-' + version;
					}else{
							ticket_number = "CCR_GDSP" + gr_approval_items.sysapproval.number.substring(8);
					}

					var stage_v = gr_approval_items.document_id.context.stage.name;		
							
					if(!((stage_v == 'Waiting for GPA Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review') || (stage_v == 'SD Rejected - Waiting for GPA Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'SD Rejected - Waiting for GPA Review')) &amp;&amp;  (gr_approval_items.state == 'approved' || (gr_approval_items.state = 'rejected' &amp;&amp; stage_v == 'Waiting for PI Resubmit' &amp;&amp;  gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review'))){
							if(stage_v != 'Completed' || (stage_v == 'Completed' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review')){			
										var item = {};
										item.gdsp_id = ticket_number;
										item.principal_investigator = gr_approval_items.document_id.u_investigator.toString();
										item.project_name = gr_approval_items.document_id.u_project_name.toString();
										item.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
										item.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
										item.status = gr_approval_items.document_id.context.stage.name.toString();
										item.last_update_date = gr_approval_items.sys_updated_on.toString();
										item.stage = stage_v.toString();
										item.sys_id = gr_approval_items.sys_id.toString();
										item.doc_id = gr_approval_items.document_id.toString();
										item.state = gr_approval_items.state.toString();
										data.reviewedTasks.push(item);
							}
						}
							if((stage_v == 'Waiting for GPA Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review') || (stage_v == 'SD Rejected - Waiting for GPA Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'SD Rejected - Waiting for GPA Review')){
								  var items = {};
									items.gdsp_id = ticket_number;
									items.principal_investigator = gr_approval_items.document_id.u_investigator.toString();
									items.project_name = gr_approval_items.document_id.u_project_name.toString();
									items.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
									items.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
									items.status = gr_approval_items.document_id.context.stage.name.toString();
									items.last_update_date = gr_approval_items.sys_updated_on.toString();
									items.stage = stage_v.toString();
									items.sys_id = gr_approval_items.sys_id.toString();
									items.doc_id = gr_approval_items.document_id.toString();
									items.state = gr_approval_items.state.toString();						
									data.approvalTasks.push(items);
							}
			}
	}	
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-02 19:50:24&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;47a5f364dbe2ba00f59974131f96197a&lt;/sys_id&gt;&lt;sys_mod_count&gt;113&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS GPA Approval Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_47a5f364dbe2ba00f59974131f96197a&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:18:54&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  &lt;div class="panel panel-success panel-area" ng-show="c.data.approvalTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_gpaApprovalItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsegpaApprovalItems" aria-expanded="true" data-target="#collapsegpaApprovalItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Genomic Data Sharing Plans Waiting for GPA Approval &lt;span class="badge" id="ritm_count"&gt;{{ c.data.approvalTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_gpaApprovalItems" class="panel-collapse collapse in" id="collapsegpaApprovalItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_savedGDSP" class="label-hidden"&gt;Search:&lt;/label&gt;
          		&lt;input id="search_savedGDSP"  type="text" class="form-control1" ng-model="searchSavedGDSP" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns track by $index" 
              ng-click="c.toggleSort($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.approvalTasks | filter: searchSavedGDSP "
            ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                     $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize" id="{{row.doc_id}}"&gt;
          &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.principal_investigator }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted"  title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.view(row.doc_id, row.sys_id, row.state, row.stage, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.report(row.doc_id, row.gdsp_id)"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize2"&gt;
                Items per page
              &lt;/label&gt;

              &lt;select 
                id="pageSize2" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                ng-model="c.pagination.currentSize"
                ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
        &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
        &lt;div class="paging-content"&gt;
          &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.approvalTasks.length"&gt;
            &lt;li
              ng-repeat="index in c.getRange() track by $index"
              ng-click="c.setPage($index)"
              &gt;
              &lt;a href=""&gt;
                {{ $index + 1 }}
              &lt;/a&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class="panel panel-success panel-area" ng-show="c.data.reviewedTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_gpaReviewedItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsegpaReviewedItems" aria-expanded="true" data-target="#collapsegpaReviewedItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Genomic Data Sharing Plans reviewed by GPA &lt;span class="badge" id="ritm_count"&gt;{{ c.data.reviewedTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_gpaReviewedItems" class="panel-collapse collapse" id="collapsegpaReviewedItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
          	&lt;label for="search_submittedGDSP" class="label-hidden"&gt;Search:&lt;/label&gt;	
            &lt;input id="search_submittedGDSP" type="text" class="form-control1" ng-model="searchSubmittedGDSP" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt; 
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns1 track by $index" 
              ng-click="c.toggleSort1($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.reviewedTasks  | filter:searchSubmittedGDSP"
            ng-show="$index &gt;= c.pagination1.currentPage * c.pagination1.currentSize &amp;&amp;
                     $index &lt; (c.pagination1.currentPage + 1) * c.pagination1.currentSize"&gt;
          &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.principal_investigator }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.view(row.doc_id, row.sys_id, row.state, row.stage,row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.report(row.doc_id, row.gdsp_id)"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize3"&gt;
                Items per page
              &lt;/label&gt;

              &lt;select 
                id="pageSize3" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination1.currentSize = c.pagination1.pageSizes[1]"
                ng-model="c.pagination1.currentSize"
                ng-options="sizes for sizes in c.pagination1.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
        &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
        &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination1.currentSize &lt; c.data.reviewedTasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange1() track by $index"
          ng-click="c.setPage1($index)"
        &gt;
          &lt;a href=""&gt;{{ $index + 1 }}&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;  
&lt;/div&gt;
]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1050388061</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>70576a31db2b5b00b86770c08c961983</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d2aa52700000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS GPA Approval Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>f2a2bfcdf3679700ef430c16ae4097c8</update_guid>
<update_guid_history>f2a2bfcdf3679700ef430c16ae4097c8:1050388061,260ce70da667970014e8ac58a227091b:321502134,30766b090e679700389195e043108c54:2122138466,27c35f78efe75700f4002fbde59065a3:-2011739132,11eb0f702be75700848e80635a57b1d6:-1616057106,6adb0f702ae75700239314d68415f773:-1614639982,6acbcb703ee7570050e91c48dae8fb31:1323660392,4dbbc370efe757001e7e5249398bc2d1:-1756641956,99cd9af8d627570066f6928172c8ed57:-307254211,fd6d9af8a4275700a07993aaea725d63:1590143822,273dd63ca72757000dee64e79f7f8666:1287419710,a52dd23c4227570031688dddf13f8ddd:1590143822,bb9c1ef83b27570054bd16ccd41cdeb4:-1465455292,38e615a3cb1f53002eb55b756c6007be:-1544744763,95d61963781f5300fa7cc98da35961d9:-1757530827,341650430f5b530040743f26d9fa1adb:-128674531,dfa982528dd75700ed3d9845855b0210:917402376,aeee5a80233c1300b2fbcca6362bacae:-212706499,dfa982528dd75700ed3d9845855b0210:917402376,dfa982528dd75700ed3d9845855b0210:917402376,33898ede0c97570012ed9494a0599565:-777717217,7028d1921f575700b5b65956695c5ff3:-1039173601,48975d1a88175700a55160fbdd6afd37:-2057389495,cc775912b7575700139e8e11c73e9f4d:-393100306,563ea695b11b9300d9b053f3ab72851e:-2025349379,c82e2e19b01b9300bc7df1fc3e75f4b4:993046061,aeee5a80233c1300b2fbcca6362bacae:-212706499,78fd1a404e3c13007e062f1ab1c2a70d:-240609239,05edd640333c13009e50e3552ab7ce12:854694992,b2cdd640463c13005bafdb8ffc2a1681:-1445478983,e7fc128c8ff81300b4bcfbd24d7e15f4:-796383314,73ec1a40323c130072dececd35e85306:1897852082,fe855580d9374700ab51c788b1b5e821:-447323702,c97091cc0ef347004b64416ebed8272b:-1694591112,317f858cb2f3470067a370a34a06830f:135399208,cf2f018c16f347003573ce875a8c34a4:209501476,60fe4d4c0ff347007a03bae6d4cc83d9:-973584284,85878584a2f3470028f3aa08b337df7f:209501476,be96858419f34700f6d6171a0957921c:-2078174090,2466858440f3470088a3b4169269cf29:209501476,5d56c108a6f347001edbc73c9911d46f:1134750660,704ac5f509a7cf0028b76c441c9d6864:209501476,7df88975a3a7cf008a1ef630ba6749b1:-1420212036,11e8cdf1b4a7cf0020d0c065d35557e5:-2058132418,9dfbaa9a982a870095cdaafbcafc4943:-376626880,5e4baad63f2a87004a99b343fa031a2e:1258925794,a3f63f6854a28300d882924fa4f1b9b3:-567254,0218579f77de830022ed883779dc86eb:637767122,0218579f77de830022ed883779dc86eb:637767122,0218579f77de830022ed883779dc86eb:637767122</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_ui_script_97deafe26ff61200bbc002e6eb3ee42d</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ui_script"&gt;&lt;sys_ui_script action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;description/&gt;&lt;global&gt;false&lt;/global&gt;&lt;name&gt;autoTableCDN&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/**
 * jsPDF AutoTable plugin v2.0.16
 * Copyright (c) 2014 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 *
 * @preserve
 */
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}(function(API){"use strict";var FONT_ROW_RATIO=1.15;var doc,cursor,settings,pageCount,table;var defaultStyles={cellPadding:5,fontSize:10,font:"helvetica",lineColor:200,lineWidth:.1,fontStyle:"normal",overflow:"ellipsize",fillColor:255,textColor:20,halign:"left",valign:"top",fillStyle:"F",rowHeight:20,columnWidth:"auto"};var themes={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal",fillStyle:"F"},header:{textColor:255,fillColor:[41,128,185],rowHeight:23,fontStyle:"bold"},body:{},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1,fillStyle:"DF"},header:{textColor:255,fillColor:[26,188,156],rowHeight:23,fillStyle:"F",fontStyle:"bold"},body:{},alternateRow:{}},plain:{header:{fontStyle:"bold"}}};var defaultOptions=function defaultOptions(){return{theme:"striped",styles:{},headerStyles:{},bodyStyles:{},alternateRowStyles:{},columnStyles:{},startY:false,margin:40,pageBreak:"auto",tableWidth:"auto",createdHeaderCell:function createdHeaderCell(cell,data){},createdCell:function createdCell(cell,data){},drawHeaderRow:function drawHeaderRow(row,data){},drawRow:function drawRow(row,data){},drawHeaderCell:function drawHeaderCell(cell,data){},drawCell:function drawCell(cell,data){},beforePageContent:function beforePageContent(data){},afterPageContent:function afterPageContent(data){}}};API.autoTable=function(headers,data,options){validateInput(headers,data,options);doc=this;settings=initOptions(options||{});pageCount=1;cursor={y:settings.startY===false?settings.margin.top:settings.startY};var userStyles={textColor:30,fontSize:doc.internal.getFontSize(),fontStyle:doc.internal.getFont().fontStyle};createModels(headers,data);calculateWidths();var firstRowHeight=table.rows[0]&amp;&amp;settings.pageBreak==="auto"?table.rows[0].height:0;var minTableBottomPos=settings.startY+settings.margin.bottom+table.headerRow.height+firstRowHeight;if(settings.pageBreak==="avoid"){minTableBottomPos+=table.height}if(settings.pageBreak==="always"&amp;&amp;settings.startY!==false||settings.startY!==false&amp;&amp;minTableBottomPos&gt;doc.internal.pageSize.height){doc.addPage();cursor.y=settings.margin.top}applyStyles(userStyles);settings.beforePageContent(hooksData());if(settings.drawHeaderRow(table.headerRow,hooksData({row:table.headerRow}))!==false){printRow(table.headerRow,settings.drawHeaderCell)}applyStyles(userStyles);printRows();settings.afterPageContent(hooksData());applyStyles(userStyles);return this};API.autoTableEndPosY=function(){if(typeof cursor==="undefined"||typeof cursor.y==="undefined"){return 0}return cursor.y};API.autoTableHtmlToJson=function(tableElem,includeHiddenRows){includeHiddenRows=includeHiddenRows||false;var header=tableElem.rows[0];var result={columns:[],rows:[]};for(var k=0;k&lt;header.cells.length;k++){var cell=header.cells[k];result.columns.push(typeof cell!=="undefined"?cell.textContent:"")}for(var i=1;i&lt;tableElem.rows.length;i++){var tableRow=tableElem.rows[i];var style=window.getComputedStyle(tableRow);if(includeHiddenRows||style.display!=="none"){var rowData=[];for(var j=0;j&lt;header.cells.length;j++){rowData.push(typeof tableRow.cells[j]!=="undefined"?tableRow.cells[j].textContent:"")}result.rows.push(rowData)}}result.data=result.rows;return result};API.autoTableText=function(text,x,y,styles){if(typeof x!=="number"||typeof y!=="number"){console.error("The x and y parameters are required. Missing for the text: ",text)}var fontSize=doc.internal.getFontSize()/doc.internal.scaleFactor;var lineHeightProportion=FONT_ROW_RATIO;var splitRegex=/\r\n|\r|\n/g;var splittedText=null;var lineCount=1;if(styles.valign==="middle"||styles.valign==="bottom"||styles.halign==="center"||styles.halign==="right"){splittedText=typeof text==="string"?text.split(splitRegex):text;lineCount=splittedText.length||1}y+=fontSize*(2-lineHeightProportion);if(styles.valign==="middle")y-=lineCount/2*fontSize;else if(styles.valign==="bottom")y-=lineCount*fontSize;if(styles.halign==="center"||styles.halign==="right"){var alignSize=fontSize;if(styles.halign==="center")alignSize*=.5;if(lineCount&gt;=1){for(var iLine=0;iLine&lt;splittedText.length;iLine++){doc.text(splittedText[iLine],x-doc.getStringUnitWidth(splittedText[iLine])*alignSize,y);y+=fontSize}return doc}x-=doc.getStringUnitWidth(text)*alignSize}doc.text(text,x,y);return doc};function validateInput(headers,data,options){if(!headers||typeof headers!=="object"){console.error("The headers should be an object or array, is: "+typeof headers)}if(!data||typeof data!=="object"){console.error("The data should be an object or array, is: "+typeof data)}if(!!options&amp;&amp;typeof options!=="object"){console.error("The data should be an object or array, is: "+typeof data)}if(!Array.prototype.forEach){console.error("The current browser does not support Array.prototype.forEach which is required for "+"jsPDF-AutoTable. You can try polyfilling it by including this script "+"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Polyfill")}}function initOptions(userOptions){var settings=extend(defaultOptions(),userOptions);if(typeof settings.extendWidth!=="undefined"){settings.tableWidth=settings.extendWidth?"auto":"wrap";console.error("Use of deprecated option: extendWidth, use tableWidth instead.")}if(typeof settings.margins!=="undefined"){if(typeof settings.margin==="undefined")settings.margin=settings.margins;console.error("Use of deprecated option: margins, use margin instead.")}[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(o){var deprecatedOption=typeof o==="string"?o:o[0];var style=typeof o==="string"?o:o[1];if(typeof settings[deprecatedOption]!=="undefined"){if(typeof settings.styles[style]==="undefined"){settings.styles[style]=settings[deprecatedOption]}console.error("Use of deprecated option: "+deprecatedOption+", use the style "+style+" instead.")}});var marginSetting=settings.margin;settings.margin={};if(typeof marginSetting.horizontal==="number"){marginSetting.right=marginSetting.horizontal;marginSetting.left=marginSetting.horizontal}if(typeof marginSetting.vertical==="number"){marginSetting.top=marginSetting.vertical;marginSetting.bottom=marginSetting.vertical}["top","right","bottom","left"].forEach(function(side,i){if(typeof marginSetting==="number"){settings.margin[side]=marginSetting}else{var key=Array.isArray(marginSetting)?i:side;settings.margin[side]=typeof marginSetting[key]==="number"?marginSetting[key]:40}});return settings}function createModels(inputHeaders,inputData){table=new Table;table.x=settings.margin.left;var splitRegex=/\r\n|\r|\n/g;var headerRow=new Row(inputHeaders);headerRow.index=-1;var themeStyles=extend(defaultStyles,themes[settings.theme].table,themes[settings.theme].header);headerRow.styles=extend(themeStyles,settings.styles,settings.headerStyles);inputHeaders.forEach(function(rawColumn,dataKey){if(typeof rawColumn==="object"){dataKey=typeof rawColumn.dataKey!=="undefined"?rawColumn.dataKey:rawColumn.key}if(typeof rawColumn.width!=="undefined"){console.error("Use of deprecated option: column.width, use column.styles.columnWidth instead.")}var col=new Column(dataKey);col.styles=settings.columnStyles[col.dataKey]||{};table.columns.push(col);var cell=new Cell;cell.raw=typeof rawColumn==="object"?rawColumn.title:rawColumn;cell.styles=headerRow.styles;cell.text=""+cell.raw;cell.contentWidth=cell.styles.cellPadding*2+getStringWidth(cell.text,cell.styles);cell.text=cell.text.split(splitRegex);headerRow.cells[dataKey]=cell;settings.createdHeaderCell(cell,{column:col,row:headerRow,settings:settings})});table.headerRow=headerRow;inputData.forEach(function(rawRow,i){var row=new Row(rawRow);var isAlternate=i%2===0;var themeStyles=extend(defaultStyles,themes[settings.theme].table,isAlternate?themes[settings.theme].alternateRow:{});var userStyles=extend(settings.styles,settings.bodyStyles,isAlternate?settings.alternateRowStyles:{});row.styles=extend(themeStyles,userStyles);row.index=i;table.columns.forEach(function(column){var cell=new Cell;cell.raw=rawRow[column.dataKey];cell.styles=extend(row.styles,column.styles);cell.text=typeof cell.raw!=="undefined"?""+cell.raw:"";row.cells[column.dataKey]=cell;settings.createdCell(cell,hooksData({column:column,row:row}));cell.contentWidth=cell.styles.cellPadding*2+getStringWidth(cell.text,cell.styles);cell.text=cell.text.split(splitRegex)});table.rows.push(row)})}function calculateWidths(){var tableContentWidth=0;table.columns.forEach(function(column){column.contentWidth=table.headerRow.cells[column.dataKey].contentWidth;table.rows.forEach(function(row){var cellWidth=row.cells[column.dataKey].contentWidth;if(cellWidth&gt;column.contentWidth){column.contentWidth=cellWidth}});column.width=column.contentWidth;tableContentWidth+=column.contentWidth});table.contentWidth=tableContentWidth;var maxTableWidth=doc.internal.pageSize.width-settings.margin.left-settings.margin.right;var preferredTableWidth=maxTableWidth;if(typeof settings.tableWidth==="number"){preferredTableWidth=settings.tableWidth}else if(settings.tableWidth==="wrap"){preferredTableWidth=table.contentWidth}table.width=preferredTableWidth&lt;maxTableWidth?preferredTableWidth:maxTableWidth;var dynamicColumns=[];var dynamicColumnsContentWidth=0;var fairWidth=table.width/table.columns.length;var staticWidth=0;table.columns.forEach(function(column){var colStyles=extend(defaultStyles,themes[settings.theme].table,settings.styles,column.styles);if(colStyles.columnWidth==="wrap"){column.width=column.contentWidth}else if(typeof colStyles.columnWidth==="number"){column.width=colStyles.columnWidth}else if(colStyles.columnWidth==="auto"||true){if(column.contentWidth&lt;=fairWidth&amp;&amp;table.contentWidth&gt;table.width){column.width=column.contentWidth}else{dynamicColumns.push(column);dynamicColumnsContentWidth+=column.contentWidth;column.width=0}}staticWidth+=column.width});distributeWidth(dynamicColumns,staticWidth,dynamicColumnsContentWidth,fairWidth);table.height=0;var all=table.rows.concat(table.headerRow);all.forEach(function(row,i){var lineBreakCount=0;var cursorX=table.x;table.columns.forEach(function(col){var cell=row.cells[col.dataKey];col.x=cursorX;applyStyles(cell.styles);var textSpace=col.width-cell.styles.cellPadding*2;if(cell.styles.overflow==="linebreak"){cell.text=doc.splitTextToSize(cell.text,textSpace+1,{fontSize:cell.styles.fontSize})}else if(cell.styles.overflow==="ellipsize"){cell.text=ellipsize(cell.text,textSpace,cell.styles)}else if(cell.styles.overflow==="visible"){}else if(cell.styles.overflow==="hidden"){cell.text=ellipsize(cell.text,textSpace,cell.styles,"")}else if(typeof cell.styles.overflow==="function"){cell.text=cell.styles.overflow(cell.text,textSpace)}else{console.error("Unrecognized overflow type: "+cell.styles.overflow)}var count=Array.isArray(cell.text)?cell.text.length-1:0;if(count&gt;lineBreakCount){lineBreakCount=count}cursorX+=col.width});row.heightStyle=row.styles.rowHeight;row.height=row.heightStyle+lineBreakCount*row.styles.fontSize*FONT_ROW_RATIO;table.height+=row.height})}function distributeWidth(dynamicColumns,staticWidth,dynamicColumnsContentWidth,fairWidth){var extraWidth=table.width-staticWidth-dynamicColumnsContentWidth;for(var i=0;i&lt;dynamicColumns.length;i++){var col=dynamicColumns[i];var ratio=col.contentWidth/dynamicColumnsContentWidth;var isNoneDynamic=col.contentWidth+extraWidth*ratio&lt;fairWidth;if(extraWidth&lt;0&amp;&amp;isNoneDynamic){dynamicColumns.splice(i,1);dynamicColumnsContentWidth-=col.contentWidth;col.width=fairWidth;staticWidth+=col.width;distributeWidth(dynamicColumns,staticWidth,dynamicColumnsContentWidth,fairWidth);break}else{col.width=col.contentWidth+extraWidth*ratio}}}function printRows(){table.rows.forEach(function(row,i){if(isNewPage(row.height)){var samePageThreshold=3;addPage()}row.y=cursor.y;if(settings.drawRow(row,hooksData({row:row}))!==false){printRow(row,settings.drawCell)}})}function addPage(){settings.afterPageContent(hooksData());doc.addPage();pageCount++;cursor={x:settings.margin.left,y:settings.margin.top};settings.beforePageContent(hooksData());if(settings.drawHeaderRow(table.headerRow,hooksData({row:table.headerRow}))!==false){printRow(table.headerRow,settings.drawHeaderCell)}}function isNewPage(rowHeight){var afterRowPos=cursor.y+rowHeight+settings.margin.bottom;return afterRowPos&gt;=doc.internal.pageSize.height}function printRow(row,hookHandler){for(var i=0;i&lt;table.columns.length;i++){var column=table.columns[i];var cell=row.cells[column.dataKey];if(!cell){continue}applyStyles(cell.styles);cell.x=column.x;cell.y=cursor.y;cell.height=row.height;cell.width=column.width;if(cell.styles.valign==="top"){cell.textPos.y=cursor.y+cell.styles.cellPadding}else if(cell.styles.valign==="bottom"){cell.textPos.y=cursor.y+row.height-cell.styles.cellPadding}else{cell.textPos.y=cursor.y+row.height/2}if(cell.styles.halign==="right"){cell.textPos.x=cell.x+cell.width-cell.styles.cellPadding}else if(cell.styles.halign==="center"){cell.textPos.x=cell.x+cell.width/2}else{cell.textPos.x=cell.x+cell.styles.cellPadding}var data=hooksData({column:column,row:row});if(hookHandler(cell,data)!==false){doc.rect(cell.x,cell.y,cell.width,cell.height,cell.styles.fillStyle);doc.autoTableText(cell.text,cell.textPos.x,cell.textPos.y,{halign:cell.styles.halign,valign:cell.styles.valign})}}cursor.y+=row.height}function applyStyles(styles){var arr=[{func:doc.setFillColor,value:styles.fillColor},{func:doc.setTextColor,value:styles.textColor},{func:doc.setFontStyle,value:styles.fontStyle},{func:doc.setDrawColor,value:styles.lineColor},{func:doc.setLineWidth,value:styles.lineWidth},{func:doc.setFont,value:styles.font},{func:doc.setFontSize,value:styles.fontSize}];arr.forEach(function(obj){if(typeof obj.value!=="undefined"){if(obj.value.constructor===Array){obj.func.apply(this,obj.value)}else{obj.func(obj.value)}}})}function hooksData(additionalData){additionalData=additionalData||{};var data={pageCount:pageCount,settings:settings,table:table,cursor:cursor};for(var prop in additionalData){if(additionalData.hasOwnProperty(prop)){data[prop]=additionalData[prop]}}return data}function ellipsize(text,width,styles,ellipsizeStr){ellipsizeStr=typeof ellipsizeStr!=="undefined"?ellipsizeStr:"...";if(Array.isArray(text)){text.forEach(function(str,i){text[i]=ellipsize(str,width,styles,ellipsizeStr)});return text}if(width&gt;=getStringWidth(text,styles)){return text}while(width&lt;getStringWidth(text+ellipsizeStr,styles)){if(text.length&lt;2){break}text=text.substring(0,text.length-1)}return text.trim()+ellipsizeStr}function getStringWidth(text,styles){applyStyles(styles);var w=doc.getStringUnitWidth(text);return w*styles.fontSize}function extend(defaults){var extended={};var prop;for(prop in defaults){if(defaults.hasOwnProperty(prop)){extended[prop]=defaults[prop]}}for(var i=1;i&lt;arguments.length;i++){var options=arguments[i];for(prop in options){if(options.hasOwnProperty(prop)){if(typeof options[prop]==="object"&amp;&amp;!Array.isArray(options[prop])){extended[prop]=options[prop]}else{extended[prop]=options[prop]}}}}return extended}})(jsPDF.API);var Table=function Table(){_classCallCheck(this,Table);this.height=0;this.width=0;this.x=0;this.y=0;this.contentWidth=0;this.rows=[];this.columns=[];this.headerRow=null;this.settings={}};var Row=function Row(raw){_classCallCheck(this,Row);this.raw=raw||{};this.index=0;this.styles={};this.cells={};this.height=0;this.y=0};var Cell=function Cell(raw){_classCallCheck(this,Cell);this.raw=raw;this.styles={};this.text="";this.contentWidth=0;this.textPos={};this.height=0;this.width=0;this.x=0;this.y=0};var Column=function Column(dataKey){_classCallCheck(this,Column);this.dataKey=dataKey;this.options={};this.styles={};this.contentWidth=0;this.width=0;this.x=0};]]&gt;&lt;/script&gt;&lt;script_name/&gt;&lt;sys_class_name&gt;sys_ui_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-04-18 18:21:42&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;97deafe26ff61200bbc002e6eb3ee42d&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;autoTableCDN&lt;/sys_name&gt;&lt;sys_package/&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_script_97deafe26ff61200bbc002e6eb3ee42d&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-19 19:57:11&lt;/sys_updated_on&gt;&lt;use_scoped_format&gt;false&lt;/use_scoped_format&gt;&lt;/sys_ui_script&gt;&lt;/record_update&gt;</payload>
<payload_hash>1817267478</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>70576a31db2b5b00b86770c08c961986</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b41e23090000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>autoTableCDN</target_name>
<type>UI Script</type>
<update_domain>global</update_domain>
<update_guid>339f415724df1300a5772cdbf5e10bbf</update_guid>
<update_guid_history>339f415724df1300a5772cdbf5e10bbf:1817267478,-1006955480:-1006955480</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_42d59bf8dbe7570054d8ff621f961973</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Report Page Content">01160574db12720054d8ff621f96192a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:34:30</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>42d59bf8dbe7570054d8ff621f961973</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Report Page Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_42d59bf8dbe7570054d8ff621f961973</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:34:30</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>20389862</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>74576a31db2b5b00b86770c08c961917</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3fcd120000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Report Page Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>1a0853bc8be75700aea81db0a1c53dbe</update_guid>
<update_guid_history>1a0853bc8be75700aea81db0a1c53dbe:20389862,4ad59bf8d0e757000a955092a971b374:127401074</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_a74593f8dbe7570054d8ff621f9619c5</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS Search User Widget">7d1ee2f1dbfffa0054d8ff621f96195e</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:32:08</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>a74593f8dbe7570054d8ff621f9619c5</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS Search User Widget</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_a74593f8dbe7570054d8ff621f9619c5</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:32:08</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>144676967</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>74576a31db2b5b00b86770c08c96191a</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce34ddf60000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS Search User Widget</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>af4593f83ce7570004ecd0e9902960c6</update_guid>
<update_guid_history>af4593f83ce7570004ecd0e9902960c6:144676967</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_css_include_96d0db74dbe7570054d8ff621f9619c5</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_css_include"><sp_css_include action="INSERT_OR_UPDATE"><name>CCRGDS_CSS</name><source>local</source><sp_css display_value="CCRGDS_CSS">6eb0d7b4dbe7570054d8ff621f96197e</sp_css><sys_class_name>sp_css_include</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:12:40</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>96d0db74dbe7570054d8ff621f9619c5</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_css_include_96d0db74dbe7570054d8ff621f9619c5</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:12:40</sys_updated_on><url/></sp_css_include></record_update>]]></payload>
<payload_hash>1136095147</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>74576a31db2b5b00b86770c08c96191d</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce230d2c0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS</target_name>
<type>CSS Include</type>
<update_domain>global</update_domain>
<update_guid>56d0db74b4e75700c1ca84901ca9cbc6</update_guid>
<update_guid_history>56d0db74b4e75700c1ca84901ca9cbc6:1136095147</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_15bc7770dba6ba0054d8ff621f961932</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http) {
  /* widget controller */
	$('[data-toggle="popover"]').popover();   
  var c = this;
	var sessionId = c.data.info.sessionId;
	c.data.info.sdList.unshift({
		value: 'NONE',
		label: 'Please select a scientific director'
	});

	$scope.closeDisplayModal = function(){
		$('#displayRequests').modal('hide');
	}
	
	$scope.loadApprovalConfirm = function(){
		$('#messageGPAApproval').html('Are you sure you want to approve this request?');
		$('#confirmGPAApprovalDiv').modal('show'); 
		$('#btnYesGPAApprovalConfirm').off('click').click(function() {
			var role = $('#roleId').val();
			if( role == 'GPA'){
				if(!approvalValidation()){
					$('#gpaErrorMessage').html('');
					$('#gpaErrorMessage').hide();
					submitRequestApproval('approved', 'GPA');	
				}
			}else if(role == 'SD'){
				submitRequestApproval('approved', 'SD');
			}
			$('#confirmGPAApprovalDiv').modal('hide');
	});
		$('#btnNoGPAApprovalConfirm').off('click').click(function() {
			$('#confirmGPAApprovalDiv').modal('hide');
		});		
	}
	
	$scope.loadRejectConfirm = function(){
		$('#messageGPAReject').html('Are you sure you want to reject this request?');
		$('#confirmGPARejectDiv').modal('show');	
		$('#btnYesGPARejectConfirm').off('click').click(function() {
			var role = $('#roleId').val();
			if(role == 'GPA'){
					submitRequestApproval('rejected', 'GPA');	
			}else if(role == 'SD' ){
				  submitRequestApproval('rejected', 'SD');	
			}
			$('#confirmGPARejectDiv').modal('hide');
		});
		$('#btnNoGPARejectConfirm').off('click').click(function() {
			$('#confirmGPARejectDiv').modal('hide');
		});			
	}
	function approvalValidation(){
		var sdSelected = $('#selectSD').val();
		if(sdSelected == 'NONE'){
			$('#gpaErrorMessage').html('&lt;font size="2" color="red"&gt;&lt;ul&gt;&lt;li&gt;Please select a Scientific Director&lt;/li&gt;&lt;/ul&gt;&lt;/font&gt;');
			$('#gpaErrorMessage').show();
			return true;
		}else{
			return false;
		}
	}
	function submitRequestApproval(action, role){
  //validate SD when approve the request
   var sdSelected = $('#selectSD').val();	
   var request_id = $('#hiddenRequestId').val();
   var comments = $('#commentId1').val();
   var stage = $('#hiddenStage').val();
   var variables= {};
   variables.requested_id = request_id;
   variables.requestedItem_id = $('#hiddenRequestItemId').val();
   variables.approval_comment = comments;
   variables.action = action;
   variables.role = role;
   variables.sd_id = sdSelected;
   var request = {
		 url: '/api/naci/gdspapi/updateGDSPRequest',
		 method : "POST",
		 beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
		 headers: {
				'Content-Type': 'application/json'
			},
		 data : variables
	 }
	 $http(request).then(handleResponse, handleError);
	 function handleResponse(response){
			var result = response.data.result;
		  console.log(result.status);
		}
	  function handleError(){
			console.error(response);
			alert('ERROR');
		}
   $('#displayRequests').modal('hide');		
	}
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.btn-form {
  width: 100px;
  margin-left: 50px;
}

.form-label {
  font-weight: normal
}

.full-width {
  width: 100%;
}

label.control-label {
  font-size: 14px;
  white-space: nowrap;
}

legend.scheduler-border {
  font-size: 16px;
  font-weight: bold;
}

.align-checkboxes {
  margin-top: 8px;
}

.inline-form-input {
  width: 160px;
  max-width: 160px;
  display: inline-block;
  margin-left: 8px;
}

input[type=checkbox], input[type=radio] {
  vertical-align: middle;
  position: relative;
  bottom: 3px !important;
}

input[type=radio] {
  bottom: 2px;
}

.input-xs {
  height: 24px;
  padding: 4px;
  font-size: 12px;
  line-height: 1.2;
  border-radius: 3px;
}
&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-data-display-section&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS Data Display Section&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	var sd_list = [];
	var getMembers = new GlideRecord('sys_user_grmember');
      getMembers.addQuery('group.name','CCR_SD');
      getMembers.query();
  while(getMembers.next())
  {
		 sd_list.push({
			 value: getMembers.user.toString(),
			 label: [getMembers.user.first_name, getMembers.user.last_name].join(' ')
		 });
  }	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		sdList: sd_list
	};

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-03 14:59:49&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;15bc7770dba6ba0054d8ff621f961932&lt;/sys_id&gt;&lt;sys_mod_count&gt;17&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS Data Display Section&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_15bc7770dba6ba0054d8ff621f961932&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-24 22:51:49&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
&lt;div id="displayRequests" class="modal fade" data-keyboard="false" data-backdrop="static" style="overflow-y:auto; overflow-x: auto;"&gt;
  &lt;div class="modal-dialog modal-lg"&gt;
    &lt;div class="modal-content" style="height:900px; overflow-y:auto; overflow-x: hidden;"&gt;
      &lt;div class="modal-header"&gt;
		  &lt;button type="button" class="close btn btn-xs" data-dismiss="modal" aria-label="Close"&gt;&lt;span aria-hidden="true"&gt;x&lt;/span&gt;&lt;/button&gt;
           &lt;div&gt;
                 &lt;font size="5"&gt;&lt;b&gt;Genomic Data Sharing Plan&lt;/b&gt;&lt;/font&gt; &lt;br/&gt;
                  &lt;b&gt;GDSP Number - &lt;span id="displayRequestId"&gt;&lt;/span&gt;&lt;/b&gt;
           &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="modal-body"&gt;
         &lt;div id="gpaErrorMessage" style="display:none;"&gt;&lt;/div&gt;
         &lt;div class="col-md-12"&gt;
  &lt;!-- start table --&gt;
         &lt;fieldset class="scheduler-border"&gt;
            &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Principal Investigator&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
           	&lt;form class="form-horizontal"&gt;
                &lt;div class="form-group"&gt;
                  &lt;label class="control-label col-md-5 " for="investigator1"&gt;Principal Investigator&lt;/label&gt;
                  &lt;div class="col-md-7 align-checkboxes"&gt;&lt;div id="investigator1"&gt;&lt;/div&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="form-group"&gt;
                  &lt;label class="control-label col-md-5 " for="pTitle1"&gt;Principal Investigator Title&lt;/label&gt;
                  &lt;div class="col-md-7 align-checkboxes"&gt;&lt;div id="pTitle1"&gt;&lt;/div&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="form-group"&gt;
                  &lt;label class="control-label col-md-5 " for="pBranch1"&gt;Branch&lt;/label&gt;
                  &lt;div class="col-md-7 align-checkboxes"&gt;&lt;div id="pBranch1"&gt;&lt;/div&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="form-group"&gt;
                  &lt;label class="control-label col-md-5" for="email1"&gt;Email&lt;/label&gt;
                  &lt;div class="col-md-6 align-checkboxes" &gt;&lt;div id="email1"&gt;&lt;/div&gt;&lt;/div&gt;
                &lt;/div&gt;    				
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="phone1"&gt;Phone&lt;/label&gt;
                &lt;div class="col-md-6 align-checkboxes"&gt;&lt;div id="phone1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;  
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="date1"&gt;Plan Submission Date&lt;/label&gt;
                &lt;div class="col-md-6 align-checkboxes"&gt;&lt;div id="date1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;           
           &lt;/form&gt;
       	&lt;/fieldset&gt;           
        &lt;fieldset class="scheduler-border"&gt;
            &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Project Information&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
  					&lt;form class="form-horizontal"&gt;
            &lt;!-- project number --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="valign-top col-md-5 align-right" for="projectName"&gt;Intramural Project (Z01), Grant, or Contract number (if available) &lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;div id="projectNumber1"&gt;&lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;              
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="projectName1"&gt;Study Name&lt;/label&gt;
                &lt;div class="col-md-6 align-checkboxes"&gt;&lt;div id="projectName1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;        
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="sampleSize1"&gt;Plan enrollment/Sample Size&lt;/label&gt;
                &lt;div class="col-md-6 align-checkboxes"&gt;&lt;div id="simpleSize1"&gt;&lt;/div&gt;&lt;/div&gt;
              &lt;/div&gt;              
              &lt;div class="form-group" &gt;
                &lt;label class="control-label col-md-5" for="prospective1"&gt;Collection Type [Check all that apply]&lt;/label&gt;
                &lt;div class="col-md-7 align-checkboxes"&gt;
                  &lt;span id="prospective1"&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Prospective
                  &lt;br&gt;
                  &lt;span id="restrospective1"&gt;&lt;/span&gt;&amp;#160;&amp;#160;Retrospective
                &lt;/div&gt;
              &lt;/div&gt;    
          	&lt;/form&gt;  
         &lt;/fieldset&gt;
         &lt;fieldset class="scheduler-border"&gt;
            &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Data&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
  					&lt;form class="form-horizontal"&gt;
            	&lt;div class="form-group"&gt;           
                 &lt;label class="control-label col-md-5" id="dataId"&gt;Source [Check all that apply]&lt;/label&gt;
 									&lt;div class="col-md-7 align-checkboxes"&gt;
                    &lt;span id="human1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Human
                    &lt;br&gt;
                    &lt;span id="rat1"&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Rat
                    &lt;br&gt;
                    &lt;span id="mouse1"&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Mouse
                    &lt;br&gt;
                    &lt;span id="celegans1"&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;C. elegans
                    &lt;br&gt;  
                    &lt;span id="drosophila1"&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Drosophila
                    &lt;br&gt;
                    &lt;span id="yeast1"&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Yeast
                     &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;  (Species: &lt;span id="yeastSpecies1"&gt;&lt;/span&gt; )
                    &lt;br&gt;
                    &lt;span id="bacteria1"&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;Bacteria
                     &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; (Species: &lt;span id="bacteriaSpecies1"&gt;&lt;/span&gt; )
                    &lt;br&gt;
                    &lt;span id="nonHuman1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other
                     &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;  (Species: &lt;span id="noHumanOther1"&gt;&lt;/span&gt; )
                	&lt;/div&gt;	
              &lt;/div&gt;
        			&lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;      
				    	&lt;div class="form-group"&gt;
                 &lt;label class="control-label col-md-5" id="data2Id"&gt;Sample Types [Check all that apply]&lt;/label&gt;
                 &lt;div class="col-md-6 align-checkboxes"&gt;
                      &lt;span id="germLine1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;GermLine
                      &lt;br&gt;
                      &lt;span id="dnaType1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;DNA
                      &lt;br&gt;
                      &lt;span id="rnaType1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;RNA
                      &lt;br&gt;
                      &lt;span id="microbiome1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Microbiome
                      &lt;br&gt;
                      &lt;span id="mitochrondria1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Mitochrondria 
                      &lt;br&gt;
                   		&lt;span id="otherType1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="specifyOtherType1"&gt;&lt;/span&gt;
                 &lt;/div&gt;                
              &lt;/div&gt;       
           	&lt;/form&gt;
           &lt;/fieldset&gt;  
           &lt;fieldset class="scheduler-border"&gt;
              &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Type&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
							&lt;form class="form-horizontal"&gt;
                &lt;div class="form-group"&gt;
                  &lt;label class="control-label col-md-5" id="arrayDataId"&gt;Array Data [Check all that apply]&lt;/label&gt;
                  &lt;div class="col-md-7 align-checkboxes"&gt;
                      &lt;label class="form-label full-width" &gt;
                        &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="snpArrayData1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;SNP Array 
                          &lt;/div&gt;
                          &lt;div class="col-md-5"&gt;
                             # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSNP1"&gt;&lt;/span&gt;                      
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/label&gt;            
                    &lt;br&gt;
                    &lt;label class="form-label full-width" &gt;
                        &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="expressionArray1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Expression Array 
                          &lt;/div&gt;
                          &lt;div class="col-md-5"&gt;
                             # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numExpression1"&gt;&lt;/span&gt;                      
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/label&gt;   
                    &lt;br&gt;
                     &lt;label class="form-label full-width" &gt;
                        &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="methylationArray1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Methylation Array
                          &lt;/div&gt;
                          &lt;div class="col-md-5"&gt;
                             # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numMethylation1"&gt;&lt;/span&gt;                      
                          &lt;/div&gt;
                        &lt;/div&gt;
                      &lt;/label&gt;  
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                &lt;div class="form-group"&gt;
                  &lt;label class="control-label col-md-5" id="genotypesId"&gt;Genotypes [Check all that apply]&lt;/label&gt;
                  &lt;div class="col-md-7 align-checkboxes"&gt;
                    &lt;label class="form-label full-width" for="arrayDerive1"&gt;
                    &lt;div class="row"&gt;
                      &lt;div class="col-md-7"&gt;
                         &lt;span id="arrayDerive1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Derived Genotypes
                      &lt;/div&gt;
                      &lt;div class="col-md-5"&gt;
                         # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numDerivedGenotype1"&gt;&lt;/span&gt;  
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;/label&gt;  
                    &lt;br&gt;
                    &lt;label class="form-label full-width" for="microarrayData1"&gt;
                    &lt;div class="row"&gt;
                      &lt;div class="col-md-7"&gt;
                  		   &lt;span id="microarrayData1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;CNV calls from Microarray               
                      &lt;/div&gt;
                      &lt;div class="col-md-5"&gt;
                         # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numMicroarrayData1"&gt;&lt;/span&gt;  
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;/label&gt;  
                    &lt;br&gt;
                    &lt;label class="form-label full-width" for="sequenceData1"&gt;
                    &lt;div class="row"&gt;
                      &lt;div class="col-md-7"&gt;
                         &lt;span id="sequenceData1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;CNV calls derived from Sequencing
                      &lt;/div&gt;
                      &lt;div class="col-md-5"&gt;
                         # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSquenceData1"&gt;&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;/label&gt;  
                    &lt;br&gt;
                    &lt;label class="form-label full-width" for="somaticSnv1"&gt;
                    &lt;div class="row"&gt;
                      &lt;div class="col-md-7"&gt;
                        &lt;span id="somaticSnv1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Somatic SNV (.MAF)
                      &lt;/div&gt;
                      &lt;div class="col-md-5"&gt;
                        # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSomaticSnv1"&gt;&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;/label&gt;  
                    &lt;br&gt;
                    &lt;label class="form-label full-width" for="arrayCgh1"&gt;
                    &lt;div class="row"&gt;
                      &lt;div class="col-md-7"&gt;
                        &lt;span id="arrayCgh1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array CGH CNVs
                      &lt;/div&gt;
                      &lt;div class="col-md-5"&gt;
                         # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numArrayCgh1"&gt;&lt;/span&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;/label&gt;  
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                &lt;div class="form-group"&gt;
             			&lt;label class="control-label col-md-5" id="sequenceId"&gt;Sequence [Check all that apply]&lt;/label&gt;
                     &lt;div class="col-md-7 align-checkboxes"&gt;
                        &lt;label class="form-label full-width" for="wholeGenome1"&gt;
                        &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                             &lt;span id="wholeGenome1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Whole Genome
                          &lt;/div&gt;
                          &lt;div class="col-md-5"&gt;
                             # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numWholeGenome1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt;   
                       &lt;br&gt;
                       &lt;label class="form-label full-width" for="wholeExome1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="wholeExome1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Whole Exome
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                            # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numWholeExome1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt; 
                        &lt;br&gt;
                       &lt;label class="form-label full-width" for="targetGenome1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="targetGenome1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Targeted Genome
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                            # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numTargetGenome1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt;
                        &lt;br&gt; 
                       &lt;label class="form-label full-width" for="targetExome1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                             &lt;span id="targetExome1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Targeted Exome
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                            # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numTargetedExome1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt;  
                        &lt;br&gt; 
                       &lt;label class="form-label full-width" for="wholeTranscriptome1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="wholeTranscriptome1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Whole Transcriptome
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                            # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numWholeTranscriptome1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt; 
                        &lt;br&gt; 
                       &lt;label class="form-label full-width" for="targetTrabscriptome1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="targetTrabscriptome1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Targeted Transcriptome
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                            # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numTargetedTranscriptome1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt;
                        &lt;br&gt; 
                       &lt;label class="form-label full-width" for="epigenomicMark1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="epigenomicMark1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Epigenomic Marks
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                          # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numEpigenomic1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt;  
                        &lt;br&gt; 
                       &lt;label class="form-label full-width" for="sanger1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="sanger1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Sanger
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                            # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSanger1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt;  
                        &lt;br&gt;
                       &lt;label class="form-label full-width" for="rrna1"&gt;
                       &lt;div class="row"&gt;
                          &lt;div class="col-md-7"&gt;
                            &lt;span id="rrna1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;16S rRNA
                          &lt;/div&gt;
                         &lt;div class="col-md-5"&gt;
                            # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numRrna1"&gt;&lt;/span&gt;
                          &lt;/div&gt;
                       &lt;/div&gt;
                       &lt;/label&gt;
                     &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                &lt;div class="form-group"&gt;
                    &lt;label class="control-label col-md-5" id="analysisId"&gt;Analysis [Check all that apply]&lt;/label&gt;
                    &lt;div class="col-md-6 align-checkboxes"&gt;
                        &lt;span id="association1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Association/Linkage
                        &lt;br&gt;
                        &lt;span id="arrayDerivedExpression1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Derived Expression
                        &lt;br&gt;
                        &lt;span id="rnaExpression1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;RNA Seq Derived Expression
                        &lt;br&gt;
                        &lt;span id="derivedMethylation1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Derived Methylation
                     &lt;/div&gt;  
                &lt;/div&gt;
                &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                &lt;div class="form-group"&gt;
             				&lt;label class="control-label col-md-5"&gt;Other&lt;/label&gt;
                    &lt;div class="col-md-6 align-checkboxes"&gt;
                      &lt;span id="otherAnalysis1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="spcifiedOtherAnalysis1"&gt;&lt;/span&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                &lt;div class="form-group"&gt;
             			 &lt;label class="control-label col-md-5" id="dataFormId"&gt;Data Form [Check all that apply]&lt;/label&gt;
                   &lt;div class="col-md-6 align-checkboxes"&gt;
                        &lt;span id="individual1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Individual
                        &lt;br&gt;
                        &lt;span id="aggregate1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Aggregate
                        &lt;br&gt;
                        &lt;span id="notApplicableDataForm1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Not Applicable
                  	&lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
								&lt;div class="form-group"&gt;
             				&lt;label class="control-label col-md-5" id="dataRepositoryId"&gt;Data Repository [Check all that apply]&lt;/label&gt;
                 		&lt;div class="col-md-6 align-checkboxes"&gt;
                          &lt;span id="arrayExpress1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Express
                          &lt;br&gt;
                          &lt;span id="cancerGenomics1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Cancer Genomics Hub
                          &lt;br&gt;
                          &lt;span id="clinVar1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;ClinVar 
                          &lt;br&gt;
                          &lt;span id="dbGap1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Database of Genotypes and Phenotypes (dbGaP)
                          &lt;br&gt;
                          &lt;span id="dbSnp1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Database of Short Generic Variants (dbSNP)
                          &lt;br&gt;
                          &lt;span id="dbVar1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Database of Genomic Structure Variation (dbVar)
                          &lt;br&gt;
                          &lt;span id="ena1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;European Nucleotide Archive (ENA)
                          &lt;br&gt;
                          &lt;span id="geo1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Gene Expression Omnibus (GEO)
                          &lt;br&gt;
                          &lt;span id="mgi1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Mouse Genome Informatics (MGI)
                          &lt;br&gt;
                          &lt;span id="genBank1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;GenBank
                          &lt;br&gt;
                          &lt;span id="traceArchive1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Trace Archive               
                          &lt;br&gt;
                          &lt;span id="wormbase1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;WormBase                    
                          &lt;br&gt;
                          &lt;span id="sra1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Sequence Read Archive (SRA)  
                          &lt;br&gt;
                          &lt;span id="zfin1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Zebrafish Model Organism Database (ZFIN)
                          &lt;br&gt;
                          &lt;span id="OtherRepository1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="specifiedRepository1"&gt;&lt;/span&gt;
                  	&lt;/div&gt;
                &lt;/div&gt;  
             		&lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                &lt;div class="form-group"&gt;
              			&lt;label class="control-label col-md-5" id="companionInfoId"&gt;Companion Information [Check all that apply]&lt;/label&gt;
             					&lt;div class="col-md-6 align-checkboxes"&gt;
                        &lt;span id="phenotype1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Phenotype&amp;nbsp;&amp;nbsp;&lt;a href="" data-toggle="popover"  data-trigger="focus"  data-content="Data pertinent to the interpretation of genomic data, including the minimal phenotype information needed to reproduce the primary analysis, such as associated phenotype data (e.g., clinical information), exposure data, relevant metadata, and descriptive information (e.g., protocols or methodologies used) will be shared. Individual-level Phenotype data will include."&gt;&lt;img src="contextual_help.png" width="20px" height="20px" Alt="Help" Title="Help"/&gt;&lt;/a&gt;
                        &lt;br&gt;
                        &lt;span id="exposure1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Exposure  
                        &lt;br&gt;
                        &lt;span id="surveyTool1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Survey Tool
                        &lt;br&gt;
                        &lt;span id="clinicalData1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Clinic Data&amp;#160; &amp;#160;&lt;span id="specifiedClinicalData1"&gt;&lt;/span&gt;
                        &lt;br&gt;
                        &lt;span id="protocol1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Study/Protocol&amp;#160; &amp;#160;&lt;span id="specifiedProtocol1"&gt;&lt;/span&gt;               
                        &lt;br&gt;
                        &lt;span id="instrument1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Data Collection instrument&amp;#160; &amp;#160;&lt;span id="specifiedInstrument1"&gt;&lt;/span&gt;
                        &lt;br&gt;
                        &lt;span id="otherCompanion1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="specifiedCompanion1"&gt;&lt;/span&gt;                                   
                  		&lt;/div&gt;	
                &lt;/div&gt; 
             &lt;/form&gt;  
           &lt;/fieldset&gt;
           &lt;fieldset class="scheduler-border"&gt;
               &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Submission Information&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
     					 &lt;form class="form-horizontal"&gt;
                  &lt;!-- dataCheck --&gt;
                  &lt;div class="form-group"&gt;
                    &lt;label class="control-label col-md-5" id="dataSubmissionId"&gt;Data Submission and Release Timeline &lt;div style="white-space: auto;"&gt;[Check all that apply]&lt;/div&gt;&lt;/label&gt;
                    &lt;div class="col-md-6 align-checkboxes"&gt;
                      &lt;span id="dataCheck1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Following data cleaning, analysis, and quality checks
                      &lt;br&gt;
                      &lt;span id="publication1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;At the time of publication
                      &lt;br&gt;
                      &lt;span id="otherSubmission1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160; &lt;span id="psecifiedOtherSubmission1"&gt;&lt;/span&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                 	&lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                  &lt;div class="form-group"&gt;
                    &lt;label class="control-label col-md-5" id="dataUseId"&gt;Data Use Limitation [Check all that apply]&lt;/label&gt;
                    &lt;div class="col-md-7 align-checkboxes"&gt;
                      &lt;span id="noHumanData1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Not Applicable, no human data
                      &lt;br&gt;
                      &lt;span id="noLimitation1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;No data use limitations
                      &lt;br&gt;
                      &lt;span id="limitedOnly1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Limited only by the terms of the Data Use Certification
                      &lt;br&gt;                
                      &lt;span id="limitedPurpose1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Limited to health/medical/biomedical purposes
                      &lt;br&gt;
                        &lt;span style="display: inline-block; margin-left: 28px"&gt;
                         doesn't include the study of population origins or ancestry
                        &lt;/span&gt;
                      &lt;br&gt;                      
                      &lt;span id="relateToDisease1"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Must be related to the specified disease
                    &lt;/div&gt;
                  &lt;/div&gt;                   
             &lt;/form&gt;
           &lt;/fieldset&gt;   
           &lt;div id="pre_comments_div" class="col-md-12" style="display:none;"&gt;
               &lt;fieldset class="scheduler-border"&gt;
                  &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Approval Status&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                  &lt;div id="commentReviewId1"&gt;&lt;/div&gt;
               &lt;/fieldset&gt;
           &lt;/div&gt;
           &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
           &lt;div class="row form-group" id="sd_div" style="display:none;"&gt;
             &lt;div class="col-md-3"&gt;
               	&lt;label for="selectSD" class="form-label"&gt;Scientific Director&lt;/label&gt;
             &lt;/div&gt;
             &lt;div class="col-md-9"&gt;
               &lt;select class="form-control" id="selectSD" width="100px"&gt;
                   &lt;option ng-repeat="sd in c.data.info.sdList" value="{{sd.value}}"&gt;{{sd.label}}&lt;/option&gt;
               &lt;/select&gt;
             &lt;/div&gt;
           &lt;/div&gt; 
           
           &lt;div id="comments_div" class="row form-group" style="display:none;"&gt;
           		&lt;br&gt;
         	 	  &lt;div class="col-md-3" id="commentId1Lable"&gt;
                &lt;label for="commentId1" class="form-label"&gt;Comments&lt;/label&gt;
             &lt;/div&gt;
              &lt;div class="col-md-9" style="valign:top; align:left;"&gt;
                	&lt;textarea id="commentId1" rows="5" class="form-control"&gt;&lt;/textarea&gt;
             &lt;/div&gt;
           &lt;/div&gt;
        	 &lt;div class="clearfix"&gt;  
              &lt;div id="closeButton" class="pull-right"&gt;&lt;input type="button" class="btn btn-primary btn-sm btn-form" ng-click="closeDisplayModal()" value="CLOSE"/&gt; &lt;/div&gt;
              &lt;div id="submitButton" class="pull-right"&gt; &lt;input type="button" class="btn btn-primary btn-sm btn-form" ng-click="loadApprovalConfirm()" value="APPROVE"/&gt; &amp;#160; &amp;#160; &amp;#160;&amp;#160; &amp;#160; &amp;#160; &lt;input type="button" class="btn btn-primary btn-sm btn-form" ng-click="loadRejectConfirm()" value="REJECT"/&gt;&amp;#160; &amp;#160; &amp;#160;&amp;#160; &amp;#160; &amp;#160; &lt;input type="button" class="btn btn-primary btn-sm btn-form" ng-click="closeDisplayModal()" value="CLOSE"/&gt;&lt;/div&gt;
           &lt;/div&gt;
           &lt;div class="col-md-7 align-checkboxes"&gt;
          &lt;/div&gt;
       &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
  
&lt;input type="hidden" id="hiddenRequestId" /&gt;
&lt;input type="hidden" id="hiddenRequestItemId" /&gt;
&lt;input type="hidden" id="hiddenStage"/&gt;
&lt;input type="hidden" id="resubmitCommentsId"/&gt;
&lt;input type="hidden" id="withdrawCommentsId"/&gt;
&lt;input type="hidden" id="withdrawSubmitId"/&gt;
&lt;input type="hidden" id="roleId"/&gt;

  &lt;div id="confirmGPAApprovalDiv" class="modal fade"&gt;
      &lt;div class="modal-dialog"&gt;
          &lt;div class="modal-content"&gt;
              &lt;div class="modal-header"&gt;
                  &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                      &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                  &lt;/button&gt;
                  &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
              &lt;/div&gt;
              &lt;div class="modal-body"&gt;
                  &lt;p align="center" id="messageGPAApproval"&gt;&lt;/p&gt;
              &lt;/div&gt;
              &lt;div class="modal-footer"&gt;
                  &lt;button id="btnYesGPAApprovalConfirm" 
                  type="button" class="btn btn-primary" 
                  style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                  &lt;button id="btnNoGPAApprovalConfirm" 
                  type="button" class="btn btn-default" 
                  style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;

  &lt;div id="confirmGPARejectDiv" class="modal fade"&gt;
      &lt;div class="modal-dialog"&gt;
          &lt;div class="modal-content"&gt;
              &lt;div class="modal-header"&gt;
                  &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                      &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                  &lt;/button&gt;
                  &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
              &lt;/div&gt;
              &lt;div class="modal-body"&gt;
                  &lt;p align="center" id="messageGPAReject"&gt;&lt;/p&gt;
              &lt;/div&gt;
              &lt;div class="modal-footer"&gt;
                  &lt;button id="btnYesGPARejectConfirm" 
                  type="button" class="btn btn-primary" 
                  style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                  &lt;button id="btnNoGPARejectConfirm" 
                  type="button" class="btn btn-default" 
                  style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;
  
&lt;/div&gt;  
  
  ]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1525501123</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>74576a31db2b5b00b86770c08c961982</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce7dd16f0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS Data Display Section</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>fa872b383d2b57007eab61d2d52e7c04</update_guid>
<update_guid_history>fa872b383d2b57007eab61d2d52e7c04:-1525501123,eca4a774742b570080ee0f268c2ae3b5:1452411566,6fd462f01d675700555535a73e19ddef:1841434228,6e3d2e15431b930028eab325180c15d6:-1974792633,6e3d2e15431b930028eab325180c15d6:-1974792633,6e3d2e15431b930028eab325180c15d6:-1974792633,6e3d2e15431b930028eab325180c15d6:-1974792633,c9976990a15b5340231b7c2a1b5cf743:732581495,c837a150ff5b5340459b644c4edfebc2:-1733127926,3e276550235b534093beb64cf922c0a1:-1385925502,-1062601951:-1062601951,732581495:732581495</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_d5c0724edb12360054d8ff621f96193b</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, spUtil, $http) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};
	c.columns = [
		{
			key: 'gdsp_id',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'principal_name',
			label: 'Principal Name',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.tasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.tasks = c.data.tasks.sort(compareRows);
		}
	};
	//start client js	
	var names=['investigator','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var textFields = ['investigator','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna']; 
	var my_sys_id = c.data.info.userId;
	var sessionId = c.data.info.sessionId;
  
	$scope.viewItem = function(id, gdsp_id){
		var data = {
			requestedid: id	
		};
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/fetchSubmittedRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			cleanDisplayDiv();
			resetRequestValue();
			$('#displayRequestId').html(gdsp_id);
			var variables = result.variables;
			var comments = result.comments;
			var comment_str = parse(comments);
			$('#commentReviewId1').empty();
			$('#commentReviewId1').append(comment_str);
			if(comment_str.length &lt; 137){
            $('#pre_comments_div').hide();
            $('#comments_div').hide();
      }else{
          $('#pre_comments_div').show();
          $('#comments_div').hide();
      }
			loadSubmittedData(variables);
			$('#displayRequests').modal('show').on('shown.bs.modal', function(){$('#displayRequests .modal-content').scrollTop(0);}); 
			$('#closeButton').show();
			$('#submitButton').hide();
			$('#sd_div').hide();
		}
		function handleError(response) {
			console.error(response);
			$confirm.modal('hide');
			alert('ERROR');
		}			
	};
	$scope.report = function(id, gdsp_id){
		window.open('$sp.do?id=gdsp_report_page&amp;itemId='+id+'&amp;ticket='+gdsp_id, '_BLANK');
	};
	$scope.withdraw = function(id){
		 $('#messageWithdraw').html('Are you sure you want to withdraw this request?');
		 $('#withdrawDiv').modal('show');
		 $('#btnYesWithdraw').off('click').click(function(){			
					withdrawRequest(id, my_sys_id);			     
					$('#withdrawDiv').modal('hide');
			});						
		 $('#btnNoWithdraw').off('click').click(function(){			
					 $('#withdrawDiv').modal('hide');
			});						

	};
	$scope.displayResubmit = function (request_id){
		  var variables= {};
      variables.requestedid = request_id;
			var request = {
				url: '/api/naci/gdspapi/fetchSubmittedRequestData',
				method: 'POST',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: variables
			};
			$http(request).then(handleResponse, handleError);
			function handleResponse(response) {
				var result = response.data.result;
				var variables = result.variables;
				var comments = result.comments;
				var comment_str = parse(comments);
				$('#commentReviewId1').empty();
				$('#commentReviewId1').append(comment_str);
				$('#resubmitCommentsId').val(comments);
				if(comment_str.length &lt; 137){
							$('#pre_comments_div').hide();
							$('#comments_div').hide();
				}else{
						$('#pre_comments_div').show();
						$('#comments_div').hide();
				}
				loadResubmittedData(variables);
				 
	       $('#ccr_id').val(request_id);
         $('#errorMessage').hide();
         $('#regularSubmit').hide();
         $('#resubmit').show();			
				 $('#loadedRequests').modal('show').on('shown.bs.modal', function(){$('#displayRequests .modal-content').scrollTop(0);});
			}
			function handleError(response) {
				console.error(response);
				$confirm.modal('hide');
				alert('ERROR');
			}				
		
		
	}
	function withdrawRequest(id){
		var variables = {};
		variables.requestedid = id;
	  var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			data: variables
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			var variables = result.variables;
			var comments = result.comments;
			var data = getGDSPData(variables, my_sys_id);
			data.comments = comments;
			var gdspData = JSON.stringify(data);
			saveWithdrawRequestData(gdspData, id);			
		}
		function handleError(response) {
			console.error(response);
			$confirm.modal('hide');
			alert('ERROR');
		}					
	}
	function saveWithdrawRequestData(data, id){
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			withdrawDeletion(id);
		}
		function handleError(){
			console.error(response);
			alert('ERROR');
		}
	}
	function withdrawDeletion(id){
		var variables= {};
		variables.id = id;
		variables.method = 'withdraw';
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/gsdspUtil',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: variables
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			console.log(result);
		}
		function handleError(){
			console.error(response);
			alert('ERROR');
		}		
	}
	function getGDSPData(data, id){
		var variables= {};
     variables.requested_for = my_sys_id;
     variables.value =''; 
	   variables.project_name ='';
		 variables.saved_id = '';		//id is for update?
     var index = 0;
		 for(key in data){
			  if (index != 0) variables.value += ',';
			  if (key == 'projectName'){
					 variables.project_name = data[key];
				}
			  variables.value  +=  key + '=' + data[key];
			 index++;
		 }
		
		return variables;
	}
	
	function cleanDisplayDiv(){
		$('#pre_comments_div').hide();
		$('#closeButton').hide();
		$('#comments_div').hide();
		$('#submitButton').hide();
	}
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
		}
		commentsblock = commentsblock + "&lt;/table&gt;";
		return commentsblock;
	}	
	
	function loadSubmittedData(data){
	  for(key in data){
			var value = getValue(key, data[key]);
			$('#'+key+"1").html(value);
		}
	}
	
	function loadResubmittedData(data){
	  for(key in data){
			setResubmitValue(key, data[key]);
		}
		
	}
	
  function getValue(name, value){
     if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           return getConvertedValue(value, '1');
        }else{
           return value;
        }
     }else{
        if(value == "true"){
           return '&lt;input type="checkbox" id="'+ name +'1" checked="true" disabled="true"/&gt;';
        }else{
           return '&lt;input type="checkbox" id="' + name+ '1" disabled="true"/&gt;';
        }
        return value; 
     }
  }	
	
	  function setResubmitValue(name, value){
     if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           $('#'+name).val(getConvertedValue(value, '1'));
        }else{
           $('#'+name).val(value);
        }
     }else{
        if(value == "true"){
            $('#'+name).prop('checked', true); 
        }else{
            $('#'+name).prop('checked', false); 
        }
			  otherFieldWatcher(name, value);	 
     }
  }
	
	function otherFieldWatcher(name, value){
		var otherCheckbox = ['otherType', 'otherAnalysis', 'OtherRepository', 'clinicalData', 'protocol', 'instrument', 'otherCompanion', 'otherSubmission', 'yeast',  'bacteria', 'nonHuman', 'snpArrayData', 'expressionArray', 'methylationArray', 'arrayDerive','microarrayData','sequenceData','somaticSnv','arrayCgh','wholeGenome','wholeExome','targetGenome','targetExome','wholeTranscriptome','targetTrabscriptome','epigenomicMark','sanger','rrna'];
		var otherField = ['specifyOtherType', 'spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument', 'specifiedCompanion', 'psecifiedOtherSubmission', 'yeastSpecies', 'bacteriaSpecies','noHumanOther', 'numSNP', 'numExpression', 'numMethylation', 'numDerivedGenotype', 'numMicroarrayData','numSquenceData','numSomaticSnv','numArrayCgh','numWholeGenome','numWholeExome','numTargetGenome','numTargetedExome','numWholeTranscriptome','numTargetedTranscriptome','numEpigenomic','numSanger','numRrna'];
	  
		var index = otherCheckbox.indexOf(name);

		if( index &gt;= 0){
			if(value == 'true'){
				$('#'+otherField[index]).prop('disabled', false);
			}else{
				$('#'+otherField[index]).prop('disabled', true);
			}
		}
	}
	
  function getConvertedValue(value, flag){
		 if(flag == '0'){
				var values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				var values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}	
	
  function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
      if(textFields.indexOf(names[i]) != -1 ){ 
            $('#'+names[i]).val('');
      }else{
		   $('#'+names[i] +"1").html('&lt;input type="checkbox" id="'+ names[i] +"1" + '" disabled="true"/&gt;');
           $('#'+names[i]).prop('checked', false); 
		   $('#'+names[i]).removeAttr("disabled");
		  
      }
    }
    $('#withdrawCommentsId').val('');
    $('#withdrawSubmitId').val('');
	$('#saved_id').val('');  
  }	
	spUtil.recordWatch($scope, "sc_req_item", "", function(name, data) {  
			spUtil.update($scope);
	});	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css/&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gdsp-submitted-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDSP Submitted Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
  data.tasks = [];
	data.info = [];

	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	data.info = {
		userId: my_sys_id,
		sessionId: session_id
	};
	
	var gr = new GlideRecord("sc_cat_item");
      gr.addQuery("short_description", "CCR Genomic Data Sharing Plan");
      gr.query();
      gr.next();
	var cat_item_id = gr.getValue('sys_id');
	
	var gr_requested_items = new GlideRecord('sc_req_item');
  var gd_requested_items = gr_requested_items.addQuery('request.opened_by', my_sys_id);
	gd_requested_items.addOrCondition('request.requested_for', my_sys_id);
  var gc_requested_items = gr_requested_items.addQuery('cat_item', cat_item_id);
  gr_requested_items.addActiveQuery();
  gr_requested_items.orderByDesc('number');
  gr_requested_items.query();
	while (gr_requested_items.next()){
			var orginId = '';
			var tickerNum = '';
			var org_ticket_num = '';
			var version = '';
			var hasParent = '';
			var selectedOrginId = '';	
		
			selectedOrginId = gr_requested_items.contact_type;
		 
      if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web' ){
            orginId = gr_requested_items.sys_id;
            org_ticket_num = gr_requested_items.number;
            hasParent = 'false';
       }else{
            var orgIds = selectedOrginId.split("=");
            var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
								gr_tracking_item.addQuery('u_orgid',orgIds[0]);
                gr_tracking_item.query();

                if(gr_tracking_item.getRowCount() &gt; 0){
                     gr_tracking_item.next();
                     orginId = gr_tracking_item.u_orgid;
                     org_ticket_num = gr_tracking_item.u_ticket_number;
                     version = orgIds[1];
                     hasParent = 'true';
                 }else {
                     orginId = gr_requested_items.sys_id;
                     org_ticket_num = gr_requested_items.number;
                     hasParent = 'false';
									}
       }		
       if(hasParent == 'true'){
            ticketNum = 'CCR_GDSP' + org_ticket_num.substring(8) + '-' + version;
       }else{
            ticketNum = 'CCR_GDSP' + org_ticket_num.substring(8);
       }		
		
			 var items= {};
		   items.sys_id = gr_requested_items.sys_id.toString();
		   items.gdsp_id = ticketNum;
		   items.principal_name = gr_requested_items.u_investigator.toString();
			 items.project_name = gr_requested_items.u_project_name.toString();
		   items.status = gr_requested_items.context.stage.name.toString(); 
		   items.approval = gr_requested_items.context.stage.name.toString();
		   items.submitted_date = gr_requested_items.sys_created_on.toString();
			 items.orginId = orginId.toString();
		   items.org_ticket_num = org_ticket_num.toString();
		   data.tasks.push(items);
	}
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-04-24 20:25:19&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;d5c0724edb12360054d8ff621f96193b&lt;/sys_id&gt;&lt;sys_mod_count&gt;196&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDSP Submitted Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_d5c0724edb12360054d8ff621f96193b&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-20 15:10:22&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
&lt;br/&gt;
&lt;div class="panel panel-success" ng-show="c.data.tasks.length &gt; 0"&gt;
  &lt;div class="panel-heading" id="heading_submittedItems" role="tab"&gt;
    &lt;h4 class="panel-title"&gt;
      &lt;a aria-controls="collapseSubmittedItems" aria-expanded="true" data-target="#collapseSubmittedItems" data-toggle="collapse" role="button"&gt;
        &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
        Submitted GDSPs &lt;span class="badge" id="ritm_count"&gt;{{ c.data.tasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
  &lt;/div&gt;
  
  &lt;div aria-labelledby="heading_submittedItems" class="panel-collapse collapse in table-responsive" id="collapseSubmittedItems" role="tabpanel"&gt;
    &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
			&lt;thead&gt;
      &lt;tr&gt;
        &lt;th 
            ng-repeat="column in c.columns track by $index" 
            ng-click="c.toggleSort($index)" 
            style="cursor: pointer"&gt;
        		{{ column.label }}
          	&lt;span 
            	class="glyphicon small" 
              ng-class="{
                        	'glyphicon-chevron-up': column.sort === 'asc',
                        	'glyphicon-chevron-down': column.sort === 'desc'
                        }"&gt;
          	&lt;/span&gt;
        &lt;/th&gt;
      &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tr ng-repeat="row in c.data.tasks track by $index"
          ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                   $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"&gt;
        &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.principal_name }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;
        	&lt;span ng-switch on='row.approval'&gt; 
            &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA review"  title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
            &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
            &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
            &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
            &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
            &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" title="Request Submitted" Alt="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
      		&lt;/span&gt;  
        &lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.submitted_date}}&lt;/td&gt;
        &lt;td&gt;
        	&lt;button class="btn btn-sm btn-primary" ng-click="viewItem(row.sys_id, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
          	View
         	&lt;/button&gt;
          &lt;button class="btn btn-sm btn-primary" ng-show="row.approval == 'Waiting for PI Resubmit' || row.approval == 'Completed'" ng-click="displayResubmit(row.sys_id)" style="width: 70px; text-align: center;"&gt;
            Resubmit
          &lt;/button&gt;
          &lt;button class="btn btn-sm btn-primary" ng-show="row.approval != 'Completed' " ng-click="withdraw(row.sys_id)" style="width: 70px; text-align: center;"&gt;
            Withdraw
          &lt;/button&gt;
          &lt;button class="btn btn-sm btn-primary" ng-click="report(row.sys_id, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
            Export
         	&lt;/button&gt;
             &lt;input type="hidden" id="{{ row.sys_id }}_orginId" value="{{ row.orginId}}"/&gt;
						 &lt;input type="hidden" id="{{ row.sys_id }}_ticket_num" value="{{ row.org_ticket_num }}"/&gt;
						 &lt;input type="hidden" id="{{ row.sys_id }}_ticket" value="{{row.gdsp_id}}"/&gt;
       	&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/div&gt;

	&lt;!-- select the page size --&gt;
	&lt;form class="form-inline pull-right"&gt;
    &lt;div class="pagination form-group"&gt;
      &lt;label for="pageSize12"&gt;
      	Items per page
      &lt;/label&gt;
      
      &lt;select 
      	id="pageSize12" 
        class="form-control"
				style="display: inline"
        ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
        ng-model="c.pagination.currentSize"
        ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  &lt;/form&gt;  
  
  &lt;!-- select the page index (offset) --&gt;
  &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.tasks.length"&gt;
    &lt;li
      ng-repeat="index in c.getRange() track by $index"
      ng-click="c.setPage($index)"
      &gt;
      &lt;a href=""&gt;
      	{{ $index + 1 }}
      &lt;/a&gt;
    &lt;/li&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;!-- confirm modal --&gt;
&lt;div id="withdrawDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageWithdraw"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesWithdraw" 
                type="button" class="btn btn-primary" 
                style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoWithdraw" 
                type="button" class="btn btn-default" 
                style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-586362010</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>74576a31db2b5b00b86770c08c961985</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b83de8df0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP Submitted Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>40979da3de1f53000af7162086a287da</update_guid>
<update_guid_history>40979da3de1f53000af7162086a287da:-586362010,-2103899844:-2103899844,1188542900:1188542900,-1158013311:-1158013311,1055748364:1055748364</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_273f4157dbdf130054d8ff621f9619d9</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="GDSP css dependencies">bf2a7130dbd2720054d8ff621f96195d</sp_dependency><sp_widget display_value="GDSP Report Page Content">01160574db12720054d8ff621f96192a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 19:55:31</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>273f4157dbdf130054d8ff621f9619d9</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GDSP css dependencies.GDSP Report Page Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_273f4157dbdf130054d8ff621f9619d9</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 19:55:31</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-52875344</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>78576a31db2b5b00b86770c08c961916</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b41c9dd60000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP css dependencies.GDSP Report Page Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>2f3f4157bfdf1300b63c3c038cec94da</update_guid>
<update_guid_history>2f3f4157bfdf1300b63c3c038cec94da:-52875344</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_8471d3b4dbe7570054d8ff621f961974</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS Home Content">43693e31db6d720054d8ff621f9619aa</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:15:14</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>8471d3b4dbe7570054d8ff621f961974</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS Home Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_8471d3b4dbe7570054d8ff621f961974</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:15:14</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-172065758</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>78576a31db2b5b00b86770c08c961919</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2566530000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS Home Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>c071d3b4cfe75700ab68bc082851f876</update_guid>
<update_guid_history>c071d3b4cfe75700ab68bc082851f876:-172065758</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_css_279e8334dbe7570054d8ff621f96196f</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_css"><sp_css action="DELETE"><css>.css-test{&#13;
	color:red;&#13;
}</css><name>CCRGDS_CSS</name><sys_class_name>sp_css</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:03:44</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>279e8334dbe7570054d8ff621f96196f</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_css_279e8334dbe7570054d8ff621f96196f</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:03:44</sys_updated_on></sp_css></record_update>]]></payload>
<payload_hash>-1256970219</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>78576a31db2b5b00b86770c08c96191c</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce20c5e70000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS</target_name>
<type>Style Sheet</type>
<update_domain>global</update_domain>
<update_guid>ca4017b439e75700c80870209ce4f1b4</update_guid>
<update_guid_history>ca4017b439e75700c80870209ce4f1b4:-1256970219,2fce0f703ae75700ca8610d414705391:-2078270199</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_portal_f4b2163ddbe9720054d8ff621f96197c</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_portal"><sp_portal action="INSERT_OR_UPDATE"><css_variables/><default>false</default><homepage display_value="gds_web_application">0f233af9db2d720054d8ff621f961929</homepage><icon/><kb_knowledge_base/><kb_knowledge_page/><login_page display_value="nci_landing">d656f227dba25f00f59974131f961902</login_page><logo/><notfound_page display_value="404">3c2c9063cb11020000f8d856634c9c1f</notfound_page><quick_start_config/><sc_catalog/><sc_catalog_page/><sc_category_page/><sp_chat_queue/><sp_rectangle_menu/><sqanda_knowledge_base/><sys_class_name>sp_portal</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2017-03-17 16:49:27</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>f4b2163ddbe9720054d8ff621f96197c</sys_id><sys_mod_count>5</sys_mod_count><sys_name>CCR GDS Portal</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_portal_f4b2163ddbe9720054d8ff621f96197c</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-23 13:48:31</sys_updated_on><theme display_value="Software Solution Theme">f6147a7ddb2d720054d8ff621f96194f</theme><title>CCR GDS Portal</title><url_suffix>ccrgds</url_suffix></sp_portal></record_update>]]></payload>
<payload_hash>-1429417008</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>78576a31db2b5b00b86770c08c961981</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164c7660d490000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCR GDS Portal</target_name>
<type>Service Portal</type>
<update_domain>global</update_domain>
<update_guid>d6916c68192717002ef27ffca8a549fb</update_guid>
<update_guid_history>d6916c68192717002ef27ffca8a549fb:-1429417008,3d18579f77de83006fb9ca89c9d3c19a:-377995990,3d18579f77de83006fb9ca89c9d3c19a:-377995990,3d18579f77de83006fb9ca89c9d3c19a:-377995990</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_91dc809cdb284340f59974131f961938</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http, spUtil) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns = [
		{
			key: 'ic_id',
			label: 'IC ID',
			sort: 'asc'
		},
		{
			key: 'study_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'project_title',
			label: 'Project Title',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.approvalTasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.approvalTasks = c.data.approvalTasks.sort(compareRows);
		}
	};
	//for reviewed table
	c.pagination1 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns1 = [
		{
			key: 'ic_id',
			label: 'IC ID',
			sort: 'asc'
		},
		{
			key: 'study_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'project_title',
			label: 'Project Title',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange1 = function() {
		var currentSize = c.pagination1.currentSize;
		var currentPage = c.pagination1.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.reviewedTasks.length / currentSize));
	};
	
	c.setPage1 = function(index) {
		c.pagination1.currentPage = index;
	};
	
	c.toggleSort1 = function(index) {
		var column = c.columns1[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.reviewedTasks = c.data.reviewedTasks.sort(compareRows);
		}
	};
	//start client JS
  $('.collapse').on('shown.bs.collapse', function() {
      $(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
  }).on('hidden.bs.collapse', function() {
      $(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
  });		
	
	var names = ['certification_date','institution_name', 'certification_to', 'certification_from', 'gpa_organization', 'sd_organization', 'study_name', 'project_title', 'sampleTime', 'sampleConsent', 'consent_group'];
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;
	var gpa = c.data.info.gpa;
	var gpa_asst = c.data.info.gpa_asst;
	var sd = c.data.info.sd;

	c.viewICData = function(doc_id, sys_id, state, stage, ticket_id){
		$('#refresh').val('0');
		fetchDetails(doc_id, sys_id, state, stage, ticket_id);
	}
	
	var initialTime = null;
	var documentTimeout = 60 * 1000;
	var documentInterval = null;
	
	c.report = function(sys_id, ic_id, flag){
		  var req_id = sys_id;
		  var fileName = '';
		 $('#refresh').val('0');
		 $('#loading').show();
		  if(flag == 'pi'){
				fileName = ic_id+"_pi.pdf";
			}else	if(flag == 'sd'){
			fileName = ic_id+"_sd.pdf";
		  }
			initialTime = new Date();
			documentInterval = setInterval(function() {
				 getDocument(req_id, fileName);
			}, 5000);		
	}
	
	function getDocument(req_id, fileName){
		  var req = {
					method: 'GET',
					url: '/api/naci/gds/getAttachmentFileID',
					beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				  params: {request_id: req_id, file_name: fileName}
			};
		  $http(req).then(handleResponse, handleError);
		  function handleResponse(response) {
					if (new Date() - initialTime &gt; documentTimeout) {
						 window.clearInterval(documentInterval);
						 $('#messageInfo').html('Application fails to generate PDF document, please contact System Administrator');
             $('#infoModal').modal('show');
             $('#btnOkConfirm').off('click').click(function() {
                 $('#infoModal').modal('hide');
             });
						 return;
					}				
					var result = response.data.result;
					//hightlight right record
				  var id = result.file_id;
		      if(id != null &amp;&amp; id.trim().length &gt; 0){
						window.clearInterval(documentInterval);
				    window.location.href = '/sys_attachment.do?sys_id=' + id;
						setTimeout(function(){}, 3000);
						$('#loading').hide();
					}
			}
		
			function handleError(response) {
				window.clearInterval(documentInterval);
					console.error(response);
					alert('ERROR');
			}	
	}
	
  function fetchDetails(number, approvalId, state, stage, ticket_id){
		var variables= {};
		data = {
			requestedid : number	
		};
    var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			  var variables = result.variables;
			  var comments = "";
			  comments = result.comments;
			  var comment_str = parse(comments);
			  $('#displayICId').html(ticket_id);
			  //reset SD selection and comments
			  $('#selectICSD').val('NONE');
			  $('#commentICId1').val('');
			  resetRequestValue();
			  loadApprovalData(variables);
			  clearDiv();
				$('#commentReviewICId1').empty();
				$('#commentReviewICId1').append(comment_str);

				$('#commentICId1').show();
				$('#commentId1ICLable').show();

				if(comment_str .length &lt; 137){
							 $('#pre_comments_ic_div').hide();
				 }else{
							 $('#pre_comments_ic_div').show();
				 }
				$('#hiddenRequestId').val(approvalId);
				$('#hiddenRequestItemId').val(number);
			  $('#roleId').val('GPA');
				$('#comments_ic_div').show();
				if(state == 'approved' || state.indexOf('not_required') &gt;=0 || gpa_asst){
					 $('#comments_ic_div').hide();
					 $('#submitButton1').hide();
					 $('#closeButton1').show();
				}else if(state == 'requested' || state == 'rejected'){
					 if((stage == 'Waiting for GPA Review' || stage == 'Waiting for GPA Review - SD Rejected') &amp;&amp; gpa){
							$('#comments_ic_div').show();
							$('#sd_ic_div').show();
							$('#submitButton1').show();
							$('#closeButton1').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; !sd){
							$('#comments_ic_div').show();
							$('#sd_ic_div').hide();
							$('#submitButton1').show();
							$('#closeButton1').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; sd){
							$('#comments_ic_div').show();
							$('#sd_ic_div').hide();
							$('#submitButton1').show();
							$('#closeButton1').hide();
					 }else if(stage == 'SD Approved'){
								$('#comments_ic_div').hide();
								$('#sd_ic_div').hide();
								$('#submitButton1').hide();
								$('#closeButton1').show();
					 }else{
								$('#comments_ic_div').hide();
								$('#sd_ic_div').hide();
								$('#submitButton1').hide();
								$('#closeButton1').show();
					 }
				}else{
					 $('#comments_ic_div').show();
					 $('#submitButton1').show();
					 $('#closeButton1').hide();
				}
				var ticketN = $('#'+number+'_ticket').val();
			     $('#gpaICErrorMessage').hide();
				$('#displayICId').html(ticketN);		
			  $('#ic_modal_content').attr('style', 'height:800px; overflow-y:auto; overflow-x: hidden;');
			  loadConsentGroupData();
				if(variables.sampleTime == 'yes' &amp;&amp; variables.sampleConsent == 'no'){
					$('#insDiv').show();
				}else{
					$('#insDiv').hide();
				}			 
			  $('#displayICRequests').modal('show').on('shown.bs.modal', function(){$('#displayRequests .modal-content').scrollTop(0);}); 
		}
		function handleError(response){
			alert("failed");
			console.error(response);
			alert('ERROR');
		}
		$('#hiddenStage').val(stage);
 }	
	
	function loadConsentGroupData(){
		var consentStr = $('#consent_group1').val();
	  if(consentStr == null || typeof consentStr === 'undefined' || consentStr.trim().length == 0){
			$('#consentGrpDiv').hide();
		}else{
      getConsentGroups(consentStr);
		}
	}
	
	function getConsentGroups(consentStr){
		var request = {
				method: 'POST',
				url: '/api/naci/gds/fetchConsentGroupDataFromRequest',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: {consentGrp: consentStr}
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			var strTable = "&lt;table class='table table-bordered table-condensed table-hover' width='100%'&gt;&lt;tr bgcolor='lightgrey'&gt;&lt;th&gt;Collaborating Site Name&lt;/th&gt;&lt;th&gt;Data Use Limitation&lt;/th&gt;&lt;th&gt;Data Use Limitations Modifier&lt;/th&gt;&lt;/tr&gt;";
		  for(var i = 0; i &lt; result.length; i++){
			    var use_limit = result[i].use_limit;
				if(result[i].data_field != null &amp;&amp; result[i].data_field.trim().length &gt; 0){
					use_limit = use_limit + " ["+ result[i].data_field +"] ";
				}
				strTable = strTable + "&lt;tr&gt;&lt;td&gt;"+result[i].site_name + "&lt;/td&gt;&lt;td&gt;" + use_limit + "&lt;/td&gt;&lt;td&gt;" + result[i].data_modifier +"&lt;/td&gt;&lt;/tr&gt;";
			}
			strTable = strTable + "&lt;/table&gt;";
			  
			$('#consentContentDiv').html(strTable);
			$('#consentGrpDiv').show();
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}
	
    function clearDiv(){
		$('#comments_ic_div').hide();
		$('#sd_ic_div').hide();
		$('#submitButton1').hide();
		$('#closeButton1').hide();
	}
	
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
	 }
	 commentsblock = commentsblock + "&lt;/table&gt;";

	return commentsblock;
	}	
	
	function loadApprovalData(data){
	  for(key in data){
			//var value = getValue(key, data[key]);
			if(key == 'data_access'){
				if(data[key] == 'unrestricted'){
					 $("input[name=dataAccessBox1][value='unrestricted']").prop("checked",true);
				}else{
					 $("input[name=dataAccessBox1][value='controlled-access']").prop("checked",true);
				}
			}else if(key == 'display'){
				if(data[key] == 'yes'){
					 $('#displayBox1').prop('checked', true);
				}else{
					 $('#displayBox1').prop('checked', false);
				}
			}else if(key == 'frequency') {
				if(data[key] == 'yes'){
					 $('#frequenceBox1').prop('checked', true);
				}else{
					 $('#frequenceBox1').prop('checked', false);
				}				
			}else if(key == 'consent_group'){
				$('#'+key+"1").val(data[key]);
			}else{
				$('#'+key+"1").html(data[key]);
			}
		}
	}
	
  function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
        $('#'+names[i] + "1").html('');
    }
  }	
	
spUtil.recordWatch($scope, "sysapproval_approver", "", function(name, data) {  
			spUtil.update($scope);
	});	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.form-control1 {&amp;#13;
    display: block;&amp;#13;
    width: 20%;&amp;#13;
    height: 30px;&amp;#13;
    padding: 6px 12px;&amp;#13;
    font-size: 14px;&amp;#13;
    line-height: 1.42857;&amp;#13;
    color: #555555;&amp;#13;
    background-color: #fff;&amp;#13;
    background-image: none;&amp;#13;
    border: 1px solid #ccc;&amp;#13;
    border-radius: 4px;&amp;#13;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
.overlay {&amp;#13;
  position: fixed; &amp;#13;
  width: 100%; &amp;#13;
  height: 100vh; &amp;#13;
  background-color: white; &amp;#13;
  opacity: 0.9; &amp;#13;
  z-index: 9999; &amp;#13;
  top: 0; &amp;#13;
  left: 0;&amp;#13;
  &amp;#13;
  display: flex;&amp;#13;
  align-items: center;&amp;#13;
  justify-content: center;&amp;#13;
  flex-direction: column;&amp;#13;
}&amp;#13;
&amp;#13;
.spinner {&amp;#13;
  animation: spin 2s infinite linear;&amp;#13;
}&amp;#13;
&amp;#13;
/** spin animation */&amp;#13;
@keyframes spin {&amp;#13;
  from {&amp;#13;
    transform: rotate(0deg);&amp;#13;
  }&amp;#13;
&amp;#13;
  to {&amp;#13;
    transform: rotate(359deg);&amp;#13;
  }&amp;#13;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;ggiat&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS GPA IC Approval Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.approvalTasks = [];
	data.reviewedTasks = [];
	data.info = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	var gr = gs.getUser(); 
	var gpa = gr.isMemberOf('CCR_GPA');
	var gpa_asst = gr.isMemberOf('CCR_GPA_ASST');
	var sd = gr.isMemberOf('CCR_SD');
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		gpa: gpa,
		gpa_asst: gpa_asst,
		sd: sd
	};
	if(gpa || gpa_asst){
		var gr1 = new GlideRecord("sc_cat_item");
				gr1.addQuery("short_description", "CCR GDSP Intramural Certification");
				gr1.query();	
				gr1.next();
				var cat_item_id = gr1.getValue('sys_id');


			 var gr_approval_items = new GlideRecord('sysapproval_approver');
			 var req_item = gr_approval_items.addJoinQuery('sc_req_item','document_id','sys_id');
			 req_item.addCondition('cat_item', cat_item_id);
		   if(!gpa_asst){
					gr_approval_items.addQuery('approver', my_sys_id); 
			 }
			 gr_approval_items.addQuery('source_table','sc_req_item'); 
			 gr_approval_items.orderByDesc('sys_updated_on');  
			 gr_approval_items.query();
			 while (gr_approval_items.next()){
				 var orginId = '';
				 var tickerNum = '';
				 var org_ticket_num = '';
				 var version = '';
				 var hasParent = '';
				 var selectedOrginId = '';

				 var docId = gr_approval_items.document_id;

				 selectedOrginId = gr_approval_items.document_id.contact_type;
				 if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web' ){
							orginId = gr_approval_items.document_id.sys_id;
							org_ticket_num = gr_approval_items.document_id.number;
							hasParent = 'false';
					}else{
						 var orgIds = selectedOrginId.split("=");
						 var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
						 gr_tracking_item.addQuery('u_orgid',orgIds[0]);
						 gr_tracking_item.query();

						 if(gr_tracking_item.getRowCount() &gt; 0){
									gr_tracking_item.next();
									orginId = gr_tracking_item.u_orgid;
									org_ticket_num = gr_tracking_item.u_ticket_number;
									version = orgIds[1];
									hasParent = 'true';
						 }else {
									orginId = gr_approval_items.document_id.sys_id;
									org_ticket_num = gr_approval_items.document_id.number;
									hasParent = 'false';
						 }
					}

					var ticket_number = '';
					if(hasParent == 'true'){
							ticket_number = 'CCR_IC' + org_ticket_num.substring(8) + '-' + version;
					}else{
							ticket_number = "CCR_IC" + gr_approval_items.sysapproval.number.substring(8);
					}

					var stage_v = gr_approval_items.document_id.context.stage.name;		
							
					if(!((stage_v == 'Waiting for GPA Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review') || (stage_v == 'Waiting for GPA Review - SD Rejected' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review - SD Rejected')) &amp;&amp; (gr_approval_items.state == 'approved' || (gr_approval_items.state = 'rejected' &amp;&amp; stage_v == 'Waiting for PI Resubmit' &amp;&amp;  gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review'))){	
					//if(!(stage_v == 'Waiting for GPA Review' || stage_v == 'Waiting for GPA Review - SD Rejected') &amp;&amp; gr_approval_items.state == 'approved'){	
						 if(stage_v != 'Completed' || (stage_v == 'Completed' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review')){			
										var item = {};
										item.ic_id = ticket_number;
										item.study_name = gr_approval_items.document_id.variables.study_name.toString();
										item.project_title = gr_approval_items.document_id.variables.project_title.toString();
										item.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
										item.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
										item.status = gr_approval_items.document_id.context.stage.name.toString();
										item.last_update_date = gr_approval_items.sys_updated_on.toString();
										item.stage = stage_v.toString();
										item.sys_id = gr_approval_items.sys_id.toString();
										item.doc_id = gr_approval_items.document_id.toString();
										item.state = gr_approval_items.state.toString();
								    data.reviewedTasks.push(item);
							}
						}
							if((stage_v == 'Waiting for GPA Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review') || (stage_v == 'Waiting for GPA Review - SD Rejected' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for GPA Review - SD Rejected')){
								  var items = {};
									items.ic_id = ticket_number;
									items.study_name = gr_approval_items.document_id.variables.study_name.toString();
									items.project_title = gr_approval_items.document_id.variables.project_title.toString();
									items.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
									items.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
									items.status = gr_approval_items.document_id.context.stage.name.toString();
									items.last_update_date = gr_approval_items.sys_updated_on.toString();
									items.stage = stage_v.toString();
									items.sys_id = gr_approval_items.sys_id.toString();
									items.doc_id = gr_approval_items.document_id.toString();
									items.state = gr_approval_items.state.toString();						
									data.approvalTasks.push(items);
							}
			}
	}	
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-08 18:20:19&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;91dc809cdb284340f59974131f961938&lt;/sys_id&gt;&lt;sys_mod_count&gt;135&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS GPA IC Approval Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_91dc809cdb284340f59974131f961938&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:20:07&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  
  &lt;div class="panel panel-success panel-area" ng-show="c.data.approvalTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_gpaApprovalICItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsegpaApprovalICItems" aria-expanded="true" data-target="#collapsegpaApprovalICItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Institutional Certifications Waiting for GPA Approval &lt;span class="badge" id="ritm_count"&gt;{{ c.data.approvalTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_gpaApprovalICItems" class="panel-collapse collapse in" id="collapsegpaApprovalICItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_savedIC" class="label-hidden"&gt;Search:&lt;/label&gt;	
          		&lt;input id="search_savedIC" type="text" class="form-control1" ng-model="searchSavedIC" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns track by $index" 
              ng-click="c.toggleSort($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.approvalTasks | filter:searchSavedIC"
            ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                     $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize" id='{{row.doc_id}}'&gt;
          &lt;td class="ritm_number"&gt;{{ row.ic_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review - SD Rejected'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted"  title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.viewICData(row.doc_id, row.sys_id, row.state, row.stage, row.ic_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.report(row.doc_id, row.ic_id, 'pi')"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize8"&gt;
                Items per page
              &lt;/label&gt;

              &lt;select 
                id="pageSize8" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                ng-model="c.pagination.currentSize"
                ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
        &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
        &lt;div class="paging-content"&gt;
          &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.approvalTasks.length"&gt;
            &lt;li
              ng-repeat="index in c.getRange() track by $index"
              ng-click="c.setPage($index)"
              &gt;
              &lt;a href=""&gt;
                {{ $index + 1 }}
              &lt;/a&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class="panel panel-success panel-area" ng-show="c.data.reviewedTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_gpaReviewedICItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsegpaReviewedICItems" aria-expanded="true" data-target="#collapsegpaReviewedICItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Institutional Certifications reviewed by GPA &lt;span class="badge" id="ritm_count"&gt;{{ c.data.reviewedTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_gpaReviewedICItems" class="panel-collapse collapse" id="collapsegpaReviewedICItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
         &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_submittedIC" class="label-hidden"&gt;Search:&lt;/label&gt;	
          		&lt;input id="search_submittedIC" type="text" class="form-control1" ng-model="searchSubmittedIC" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns1 track by $index" 
              ng-click="c.toggleSort1($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.reviewedTasks | filter:searchSubmittedIC"
            ng-show="$index &gt;= c.pagination1.currentPage * c.pagination1.currentSize &amp;&amp;
                     $index &lt; (c.pagination1.currentPage + 1) * c.pagination1.currentSize"&gt;
          &lt;td class="ritm_number"&gt;{{ row.ic_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review - SD Rejected'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.viewICData(row.doc_id, row.sys_id, row.state, row.stage,row.ic_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-show="row.status == 'Completed' " ng-click="c.report(row.doc_id, row.ic_id, 'sd')"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-show="row.status != 'Completed' " ng-click="c.report(row.doc_id, row.ic_id, 'pi')"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;            
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
      &lt;form class="form-inline"&gt;
        &lt;div class="pagination form-group"&gt;
          &lt;label for="pageSize9"&gt;
            Items per page
          &lt;/label&gt;

          &lt;select 
            id="pageSize9" 
            class="form-control"
            style="display: inline"
            ng-init="c.pagination1.currentSize = c.pagination1.pageSizes[1]"
            ng-model="c.pagination1.currentSize"
            ng-options="sizes for sizes in c.pagination1.pageSizes"&gt;
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/form&gt;  
        &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
      &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.approvalTasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange() track by $index"
          ng-click="c.setPage($index)"
          &gt;
          &lt;a href=""&gt;{{ $index + 1 }}&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;  
&lt;/div&gt;
&lt;div id="loading" class="overlay" style="display:none;"&gt;
  &lt;div class="spinner" style="width: 25px; height: 25px"&gt;
  	&lt;svg version="2.0" class="spinner" width="25" height="25"&gt;
      &lt;circle cx="12.5" cy="12.5" r="10" fill="transparent" stroke="#ccc" stroke-width="2.5" /&gt;
      &lt;path fill="transparent" stroke="#666" stroke-width="2.5" d="M 12.5 2.5 a 10 10 0 0 1 10 10" /&gt;
    &lt;/svg&gt;
  &lt;/div&gt;
  &lt;span&gt;Processing&lt;/span&gt;
&lt;/div&gt;
&lt;div id="infoModal" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmOk" class="modal-title"&gt;Information&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageInfo"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnOkConfirm" 
                type="button" class="btn btn-primary" 
                style="width: 70px; text-align: center;"&gt;OK&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-375386627</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>78576a31db2b5b00b86770c08c961984</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d2ab6e6a0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS GPA IC Approval Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>e0f27b81fda79700f9e42b71fad5abf6</update_guid>
<update_guid_history>e0f27b81fda79700f9e42b71fad5abf6:-375386627,713e6b4dad679700db9ad4dfd5835bdb:-2087089884,51b6eb09fc67970084fc70599d0d899b:891859928,752c7ac92fa39700a117639217979073:1079511226,412453b893e7570005675f0978ada8c4:-551602352,075c03b07fe7570039f025abb54a7c46:-419672486,424ccb70dde75700dbc2d71e830710a1:-1799539426,f3412230d9675700d770164ce52b2437:-1155226655,e211a6fc132757004c85857569f2be11:-1767268618,fe4711e3651f5300f544389f54042578:324650890,1737dda3831f530097e108307f03f25c:1645318470,d8d6dc4f441b5300d25de0f8c294752b:-1678998510,e4781083432e1f007225e5e2cf84c440:-1899071811,89d65bfabd859b0080a30cf03648c9ef:1727303449,e4781083432e1f007225e5e2cf84c440:-1899071811,e4781083432e1f007225e5e2cf84c440:-1899071811,393818431b2e1f001f1094bb145d3c99:-477489045,89d65bfabd859b0080a30cf03648c9ef:1727303449,6f4c514388741300fbe641d6f6f79404:881112756,50a0194fe4341300c2595b81734c5a29:-471161641,d84059cbd2341300189e9ec1d3efd660:-645755475,ec7f414b05341300250c8d8ebe3b83f1:-1312363377,9f3fc98b0e341300284c1fbab57a6036:1129243127,e80fc98b463413001d2e903ddd1f442f:1401949065,766ecd8b303413002e83bf58b8abf8eb:952307289,095e41cb263413005e3e5d531970e31a:39420012,5c3ecd8b2d341300e420fc02f5e919e4:993838879,371e094b2e341300da37cd2709a4d4ed:1275833981,221ecd8b2c341300f53c7a4aa9bf6428:-1904125987,8abd494bc934130031b0c92b97a49044:790470306,40bdc14ba73413003ad51b23e1553e03:1922160649,6bcc818bc4341300bfb94236531dd789:-1032080459,c9cf1ec0803c1300e8e8608794967dde:952307289,5caf5ec0f43c1300f77143eb8484e348:1096955891,6e9f16c06c3c13001330f7a63c01b490:159392996,819f1ec0873c13001ae1d96011c4999c:1386985284,c08fdac0cd3c130011c9b055a88c40ee:-2037939872,597fdac0f93c1300356ea6d49f9f4466:88614662,a9921a48fcf81300fd979f72b933f6f0:-260642230,68c19a0887f81300a420496c4d8736d4:1890581807,e6a1d608eaf8130024f9feaae63c9f94:323487812,99515ec488f813004c384b643158a54b:393089780,558c558422374700cf862adef0b28eda:1153128457,ed6c1d809337470046de47c2e314508a:-1511159079,20ba8df54ca7cf006134c4de6698c0f8:-630195112,2df6358a82624700933dfba1d2db5cf0:371154616,5683b5c6a3624700b2e634d54b9003b4:608034770,e743f1c632624700d6ef27511a03e4c1:-755655854,69a2f986d3624700b5f6b78453f8f1d5:-1874981445,089271c62c6247001161fc6c234eef24:-360569307,47f13d06d26247001bb5492a20afbfd6:-1874981445,dc1138f1cc2607008b786ff938e54b4f:-1462268999,cab07cb1e526070000136baceeb25dec:-1877438562,b0d67b6877a283003f4238a0de8f952a:-1462268999,d218979febde8300fb8d89e14dee490d:949971788,d218979febde8300fb8d89e14dee490d:949971788,d218979febde8300fb8d89e14dee490d:949971788,d218979febde8300fb8d89e14dee490d:949971788,d218979febde8300fb8d89e14dee490d:949971788</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_107417b8dbe7570054d8ff621f961999</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS IC Report Page content">59422b3fdbd0c34054d8ff621f9619d1</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:28:22</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>107417b8dbe7570054d8ff621f961999</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS IC Report Page content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_107417b8dbe7570054d8ff621f961999</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:28:22</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-958108793</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>7c576a31db2b5b00b86770c08c961915</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce316b4d0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS IC Report Page content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>187417b8f5e7570092b892d7971cbc9a</update_guid>
<update_guid_history>187417b8f5e7570092b892d7971cbc9a:-958108793</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_6ec41bb8dbe7570054d8ff621f96194e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS Project Table">5dd52f37dbfd3600f59974131f9619e7</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:29:54</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>6ec41bb8dbe7570054d8ff621f96194e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS Project Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_6ec41bb8dbe7570054d8ff621f96194e</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:29:54</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1922303717</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>7c576a31db2b5b00b86770c08c961918</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce32d0c60000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS Project Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>6ec45fb814e757006d175a5edc84815d</update_guid>
<update_guid_history>6ec45fb814e757006d175a5edc84815d:-1922303717</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_e5a31b78dbe7570054d8ff621f9619b3</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS Data Entry Section">b6f188c5dba6ba0054d8ff621f96198c</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:24:55</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>e5a31b78dbe7570054d8ff621f9619b3</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS Data Entry Section</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_e5a31b78dbe7570054d8ff621f9619b3</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:24:55</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>959727835</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>7c576a31db2b5b00b86770c08c96191b</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2e414d0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS Data Entry Section</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>eda31b78e8e75700a56826d5061bbeb4</update_guid>
<update_guid_history>eda31b78e8e75700a56826d5061bbeb4:959727835</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_613dc09cdb284340f59974131f96194d</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, spUtil, $http) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};
	c.columns = [
		{
			key: 'ic_id',
			label: 'IC ID',
			sort: 'asc'
		},
		{
			key: 'study_name',
			label: 'Study Name',
			sort: 'asc'
		},
		{
			key: 'project_title',
			label: 'Project Title',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.tasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.tasks = c.data.tasks.sort(compareRows);
		}
	};
	//start client JS	 
  $('.collapse').on('shown.bs.collapse', function() {
      $(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
  }).on('hidden.bs.collapse', function() {
      $(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
  });		
	var names = ['certification_date','institution_name', 'certification_to', 'certification_from', 'gpa_organization', 'sd_organization', 'study_name', 'project_title', 'sampleTime', 'sampleConsent', 'consent_group'];
	var my_sys_id = c.data.info.my_sys_id;
	var sessionId = c.data.info.session_id;
	$scope.viewICPsoItem = function(id, ic_id){
		$('#refresh').val('0');
		var data = {
			requestedid: id	
		};
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/fetchSubmittedRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			cleanDisplayDiv();
			$('#displayICId').html(ic_id);
			var variables = result.variables;
			var comments = result.comments;
			var comment_str = parse(comments);
			$('#commentReviewICId1').empty();
			$('#commentReviewICId1').append(comment_str);
			if(comment_str.length &lt; 137){
            $('#pre_comments_ic_div').hide();
            $('#comments_ic_div').hide();
      }else{
          $('#pre_comments_ic_div').show();
          $('#comments_ic_div').hide();
      }
			resetRequestValue();
			loadSubmittedData(variables);
			 $('#ic_modal_content').attr('style', 'height:800px; overflow-y:auto; overflow-x: hidden;');
			 loadConsentGroupData();
			 if(variables.sampleTime == 'yes' &amp;&amp; variables.sampleConsent == 'no'){
			  $('#insDiv').show();
			 }else{
					$('#insDiv').hide();
			 }				
			$('#displayICRequests').modal('show').on('shown.bs.modal', function(){$('#displayICRequests .modal-content').scrollTop(0);}); 
			$('#closeButton1').show();
			$('#sd_ic_div').hide();
			$('#submitButton1').hide();
		}
		function handleError(response) {
			console.error(response);
			$confirm.modal('hide');
			alert('ERROR');
		}			
	};
	
	function loadConsentGroupData(){
		var consentStr = $('#consent_group1').val();
	  if(consentStr == null || typeof consentStr === 'undefined' || consentStr.trim().length == 0){
			$('#consentGrpDiv').hide();
		}else{
      getConsentGroups(consentStr);
		}
	}
	
	function getConsentGroups(consentStr){
		var request = {
				method: 'POST',
				url: '/api/naci/gds/fetchConsentGroupDataFromRequest',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: {consentGrp: consentStr}
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			var strTable = "&lt;table class='table table-bordered table-condensed table-hover' width='100%'&gt;&lt;tr bgcolor='lightgrey'&gt;&lt;th&gt;Collaborating Site Name&lt;/th&gt;&lt;th&gt;Data Use Limitation&lt;/th&gt;&lt;th&gt;Data Use Limitations Modifier&lt;/th&gt;&lt;/tr&gt;";
		  for(var i = 0; i &lt; result.length; i++){
				var use_limit = result[i].use_limit;
				if(result[i].data_field != null &amp;&amp; result[i].data_field.trim().length &gt; 0){
					use_limit = use_limit + " ["+ result[i].data_field +"] ";
				}			  
				strTable = strTable + "&lt;tr&gt;&lt;td&gt;"+result[i].site_name + "&lt;/td&gt;&lt;td&gt;" + use_limit + "&lt;/td&gt;&lt;td&gt;" + result[i].data_modifier +"&lt;/td&gt;&lt;/tr&gt;";
			}
			strTable = strTable + "&lt;/table&gt;";
			  
			$('#consentContentDiv').html(strTable);
			$('#consentGrpDiv').show();
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}
	
	var initialTime = null;
	var documentTimeout = 60 * 1000;
	var documentInterval = null;
	
	$scope.reportICPso = function(sys_id, ic_id){
		  $('#refresh').val('0');
		  $('#loading').show();
		  var req_id = sys_id;
		  var fileName = ic_id+"_sd.pdf";
		
			initialTime = new Date();
			documentInterval = setInterval(function() {
				 getDocument(req_id, fileName);
			}, 5000);		
	};
	
	function getDocument(req_id, fileName){
		  var req = {
					method: 'GET',
					url: '/api/naci/gds/getAttachmentFileID',
					beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				  params: {request_id: req_id, file_name: fileName}
			};
		  $http(req).then(handleResponse, handleError);
		  function handleResponse(response) {
				  if (new Date() - initialTime &gt; documentTimeout) {
						 window.clearInterval(documentInterval);
						 $('#messageInfo').html('Application fails to generate PDF document, please contact System Administrator');
             $('#infoModal').modal('show');
             $('#btnOkConfirm').off('click').click(function() {
                 $('#infoModal').modal('hide');
             });
						return;
					}				
					var result = response.data.result;
					//hightlight right record
				  var id = result.file_id;
		      if(id != null &amp;&amp; id.trim().length &gt; 0){
							window.clearInterval(documentInterval);
				     window.location.href = '/sys_attachment.do?sys_id=' + id;
						 setTimeout(function(){}, 3000);
							  $('#loading').hide();
					}
			}
			function handleError(response) {
					window.clearInterval(documentInterval);
					console.error(response);
					alert('ERROR');
			}			
	}
	
	
	function cleanDisplayDiv(){
		$('#pre_comments_ic_div').hide();
		$('#closeButton1').hide();
		$('#comments_ic_div').hide();
		$('#submitButton1').hide();
	}
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
		}
		commentsblock = commentsblock + "&lt;/table&gt;";
		return commentsblock;
	}	
	
	function loadSubmittedData(data){
	  for(key in data){
		  if(key == 'consent_group'){
			$('#'+key+"1").val(data[key]);  
		  }else{
			$('#'+key+"1").html(data[key]);
		  }
		}
	}
	
 function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
         $('#'+names[i] + "1").html('');
    }
  }	
	
	spUtil.recordWatch($scope, "sc_req_item", "", function(name, data) {  
			spUtil.update($scope);
	});
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.form-control1 {&amp;#13;
    display: block;&amp;#13;
    width: 20%;&amp;#13;
    height: 30px;&amp;#13;
    padding: 6px 12px;&amp;#13;
    font-size: 14px;&amp;#13;
    line-height: 1.42857;&amp;#13;
    color: #555555;&amp;#13;
    background-color: #fff;&amp;#13;
    background-image: none;&amp;#13;
    border: 1px solid #ccc;&amp;#13;
    border-radius: 4px;&amp;#13;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
}&amp;#13;
&amp;#13;
.overlay {&amp;#13;
  position: fixed; &amp;#13;
  width: 100%; &amp;#13;
  height: 100vh; &amp;#13;
  background-color: white; &amp;#13;
  opacity: 0.9; &amp;#13;
  z-index: 9999; &amp;#13;
  top: 0; &amp;#13;
  left: 0;&amp;#13;
  &amp;#13;
  display: flex;&amp;#13;
  align-items: center;&amp;#13;
  justify-content: center;&amp;#13;
  flex-direction: column;&amp;#13;
}&amp;#13;
&amp;#13;
.spinner {&amp;#13;
  animation: spin 2s infinite linear;&amp;#13;
}&amp;#13;
&amp;#13;
/** spin animation */&amp;#13;
@keyframes spin {&amp;#13;
  from {&amp;#13;
    transform: rotate(0deg);&amp;#13;
  }&amp;#13;
&amp;#13;
  to {&amp;#13;
    transform: rotate(359deg);&amp;#13;
  }&amp;#13;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gpit&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS PSO IC table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.info = []; 
	data.tasks = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	data.info.session_id = session_id;
	data.info.my_sys_id = my_sys_id;
	var gr = gs.getUser();
	var isPSO = gr.isMemberOf('CCR_PSO');
	
	var gr1 = new GlideRecord("sc_cat_item");
			gr1.addQuery("short_description", "CCR GDSP Intramural Certification");
			gr1.query();	
			gr1.next();
	var cat_item_id = gr1.getValue('sys_id');
	
	if(isPSO){
	   var gr_requested_items = new GlideRecord('sc_req_item');
     var gd_requested_items = gr_requested_items.addQuery('context.stage.name', 'Completed');
     var gc_requested_items = gr_requested_items.addQuery('cat_item', cat_item_id);
         gr_requested_items.addActiveQuery();
         gr_requested_items.orderByDesc('number');
         gr_requested_items.query();		
		
		 while (gr_requested_items.next()){
         var orginId = '';
         var tickerNum = '';
         var org_ticket_num = '';
         var version = '';
         var hasParent = '';
         var selectedOrginId = '';
                      
         selectedOrginId = gr_requested_items.contact_type;
                      
         if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web'){
              orginId = gr_requested_items.sys_id;
              org_ticket_num = gr_requested_items.number;
              hasParent = 'false';
          }else{
              var orgIds = selectedOrginId.split("=");
              var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
              gr_tracking_item.addQuery('u_orgid',orgIds[0]);
              gr_tracking_item.query();

              if(gr_tracking_item.getRowCount() &gt; 0){
                  gr_tracking_item.next();
                  orginId = gr_tracking_item.u_orgid;
                  org_ticket_num = gr_tracking_item.u_ticket_number;
                  version = orgIds[1];
                  hasParent = 'true';
               }else {
                  orginId = gr_requested_items.sys_id;
                  org_ticket_num = gr_requested_items.number;
                  hasParent = 'false';
						   }
          }		
          if(hasParent == 'true'){
               ticketNum = 'CCR_IC' + org_ticket_num.substring(8) + '-' + version;
          }else{
               ticketNum = 'CCR_IC' + org_ticket_num.substring(8);
          } 
			
					var items = {};
			    items.sys_id = gr_requested_items.sys_id.toString();
					items.ic_id = ticketNum;
					items.study_name = gr_requested_items.variables.study_name.toString();		 
					items.project_title = gr_requested_items.variables.project_title.toString();
					items.status = gr_requested_items.context.stage.name.toString();
					items.approval = gr_requested_items.context.stage.name.toString();
					items.submitted_date = gr_requested_items.sys_created_on.toString();
					data.tasks.push(items);
		 }
		
	}

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-08 18:21:47&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;613dc09cdb284340f59974131f96194d&lt;/sys_id&gt;&lt;sys_mod_count&gt;59&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS PSO IC table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_613dc09cdb284340f59974131f96194d&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:24:59&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  &lt;div class="panel panel-success panel-area" ng-show="c.data.tasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_psoICItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsepsoICItems" aria-expanded="true" data-target="#collapsepsoICItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Approved Institutional Certifications &lt;span class="badge" id="ritm_count"&gt;{{ c.data.tasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_psoICItems" class="panel-collapse collapse in table-responsive" id="collapsepsoICItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="6"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_completedIC" class="label-hidden"&gt;Search:&lt;/label&gt;
          		&lt;input id="search_completedIC" type="text" class="form-control1" ng-model="searchCompletedIC" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns track by $index" 
              ng-click="c.toggleSort($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt; 
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.tasks | filter: searchCompletedIC"
            ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                     $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize" id="{{row.sys_id}}"&gt;
          &lt;td class="ritm_number"&gt;{{ row.ic_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review - SD Rejected'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted"  title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="viewICPsoItem(row.sys_id, row.ic_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="reportICPso(row.sys_id, row.ic_id)"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize13"&gt;
                Items per page
              &lt;/label&gt;

              &lt;select 
                id="pageSize13" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                ng-model="c.pagination.currentSize"
                ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
          &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
      &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.tasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange() track by $index"
          ng-click="c.setPage($index)"
          &gt;
          &lt;a href=""&gt;
            {{ $index + 1 }}
          &lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div id="infoModal" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmOk" class="modal-title"&gt;Information&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageInfo"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnOkConfirm" 
                type="button" class="btn btn-primary" 
                style="width: 70px; text-align: center;"&gt;OK&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;div id="loading" class="overlay" style="display:none;"&gt;
  &lt;div class="spinner" style="width: 25px; height: 25px"&gt;
  	&lt;svg version="2.0" class="spinner" width="25" height="25"&gt;
      &lt;circle cx="12.5" cy="12.5" r="10" fill="transparent" stroke="#ccc" stroke-width="2.5" /&gt;
      &lt;path fill="transparent" stroke="#666" stroke-width="2.5" d="M 12.5 2.5 a 10 10 0 0 1 10 10" /&gt;
    &lt;/svg&gt;
  &lt;/div&gt;
  &lt;span&gt;Processing&lt;/span&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1607160524</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>7c576a31db2b5b00b86770c08c961983</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d2afe4470000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS PSO IC table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>7704ffc10aa7970004a977ca8d27965d</update_guid>
<update_guid_history>7704ffc10aa7970004a977ca8d27965d:-1607160524,78e0f7cd0e679700a3493cbeb330a34b:-121775579,6227af09d0679700f999248b01e0220f:-253718555,d7e45fb833e75700bc2fe3ab14f3547f:346672007,fd3d07b08be757000221d9389fca573d:1770923849,083d8bb0b1e75700abfcc3a367d855de:-580518833,222dc3b03ae757001e7034bec6e69780:794038702,e883ea303b6757000140e71018253c18:1625985298,a7c755e30f1f530000decb14c6d9d9eb:2034289753,efc89883432e1f00ace0ed94b63e2283:-1125871981,6ac713bed0859b00090ca108e86760c6:-147772899,efc89883432e1f00ace0ed94b63e2283:-1125871981,efc89883432e1f00ace0ed94b63e2283:-1125871981,6ac713bed0859b00090ca108e86760c6:-147772899,a6dbddc3977413002aea15d9fd9a0fca:-257298550,99db5dc3ff74130074e3c77376e2ff15:-1707730583,e7cbddc3bd741300d6db094caafc2c5c:-721570836,0ecb11430a741300d073040aa9ab70ef:-1617660237,93ab9dc35f741300ea3638ab3996a916:400443409,e18b59c3ad7413006914e3d196498e83:2125225104,655bd9c36a74130039d5f9924b20a76c:2108779014,b53b99c399741300e3e02f19502a205a:151901875,271b59c3ca74130028983a2f4ffbb67b:1201251063,ce0a8dfddc67cf005704b51e44c6ac12:-1686389227,ac49fd0eeb624700f77ef3d0ab5401b1:492507980,9a18979f9ede8300c812c13f1ece7406:-1572824035,9a18979f9ede8300c812c13f1ece7406:-1572824035,9a18979f9ede8300c812c13f1ece7406:-1572824035,9a18979f9ede8300c812c13f1ece7406:-1572824035,9a18979f9ede8300c812c13f1ece7406:-1572824035</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_2db39778dbe7570054d8ff621f9619a8</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS ER Form Widget">5c99a62fdbbc070054d8ff621f9619a9</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:25:11</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>2db39778dbe7570054d8ff621f9619a8</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS ER Form Widget</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_2db39778dbe7570054d8ff621f9619a8</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:25:11</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>411675964</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b0576a31db2b5b00b86770c08c961917</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2e80a60000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS ER Form Widget</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>25b397782ce7570051920aa2e3d99aaa</update_guid>
<update_guid_history>25b397782ce7570051920aa2e3d99aaa:411675964</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_a52fc517dbdf130054d8ff621f9619df</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="GDSP JSPDF include">622706f8dbd2720054d8ff621f96194d</sp_dependency><sp_widget display_value="GDSP Report Page Content">01160574db12720054d8ff621f96192a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 19:55:07</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>a52fc517dbdf130054d8ff621f9619df</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GDSP JSPDF include.GDSP Report Page Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_a52fc517dbdf130054d8ff621f9619df</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 19:55:07</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>2043840076</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b0576a31db2b5b00b86770c08c96191a</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b4205d470000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP JSPDF include.GDSP Report Page Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>9720115bdadf1300657b92a4a6dfafb1</update_guid>
<update_guid_history>9720115bdadf1300657b92a4a6dfafb1:2043840076,612fc517a5df130035fc6334d195bbe1:1947876568</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_css_include_6fce0f70dbe7570054d8ff621f96198f</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_css_include"><sp_css_include action="DELETE"><name>CCRGDS_CSS</name><source>local</source><sp_css display_value="">279e8334dbe7570054d8ff621f96196f</sp_css><sys_class_name>sp_css_include</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:03:44</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>6fce0f70dbe7570054d8ff621f96198f</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_css_include_6fce0f70dbe7570054d8ff621f96198f</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:03:44</sys_updated_on><url/></sp_css_include></record_update>]]></payload>
<payload_hash>905418842</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b0576a31db2b5b00b86770c08c96191d</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce20c55d0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS</target_name>
<type>CSS Include</type>
<update_domain>global</update_domain>
<update_guid>8a4013b412e75700764bf9d283056ba2</update_guid>
<update_guid_history>8a4013b412e75700764bf9d283056ba2:905418842,2fce0f70d9e75700cf2d7bf1b6c1ea90:-1180969762</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_0d37479adb9a360054d8ff621f961947</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, spUtil, $http, $window) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};
  c.state = $window.state;
	c.columns = [
		{
			key: 'gdsp_id',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'principal_investigator',
			label: 'Principal Investigator',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.tasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.tasks = c.data.tasks.sort(compareRows);
		}
	};
	//start client JS	
	var names=['investigator','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var textFields = ['investigator','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna']; 
	var my_sys_id = c.data.info.my_sys_id;
	var sessionId = c.data.info.session_id;
	$scope.viewItem = function(id, gdsp_id){
		var data = {
			requestedid: id	
		};
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/fetchSubmittedRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			cleanDisplayDiv();
			$('#displayRequestId').html(gdsp_id);
			var variables = result.variables;
			var comments = result.comments;
			var comment_str = parse(comments);
			$('#commentReviewId1').empty();
			$('#commentReviewId1').append(comment_str);
			if(comment_str.length &lt; 137){
            $('#pre_comments_div').hide();
            $('#comments_div').hide();
      }else{
          $('#pre_comments_div').show();
          $('#comments_div').hide();
      }
			resetRequestValue();
			loadSubmittedData(variables);
			$('#displayRequests').modal('show').on('shown.bs.modal', function(){$('#displayRequests .modal-content').scrollTop(0);}); 
			$('#closeButton').show();
			$('#sd_div').hide();
			$('#submitButton').hide();
		}
		function handleError(response) {
			console.error(response);
			$confirm.modal('hide');
			alert('ERROR');
		}			
	};
	$scope.report = function(id, gdsp_id){
		window.open('$sp.do?id=gdsp_report_page&amp;itemId='+id+'&amp;ticket='+gdsp_id, '_BLANK');
	};
	function cleanDisplayDiv(){
		$('#pre_comments_div').hide();
		$('#closeButton').hide();
		$('#comments_div').hide();
		$('#submitButton').hide();
	}
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
		}
		commentsblock = commentsblock + "&lt;/table&gt;";
		return commentsblock;
	}	
	
	function loadSubmittedData(data){
	  for(key in data){
			var value = getValue(key, data[key]);
			$('#'+key+"1").html(value);
		}
	}   
	
  function getValue(name, value){
     if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           return getConvertedValue(value, '1');
        }else{
           return value;
        }
     }else{
        if(value == "true"){
           return '&lt;input type="checkbox" id="'+ name +'1" checked="true" disabled="true"/&gt;';
        }else{
           return '&lt;input type="checkbox" id="' + name+ '1" disabled="true"/&gt;';
        }
        return value; 
     }
  }	
	
	function getConvertedValue(value, flag){
		 if(flag == '0'){
				var values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				var values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}		
	
 function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
      if(textFields.indexOf(names[i]) != -1 ){ 
            $('#'+names[i] + "1").html('');
      }else{
				   $('#'+names[i] +"1").html('&lt;input type="checkbox" id="'+ names[i] +"1" + '" disabled="true"/&gt;');
           $('#'+names[i] + "1").prop('checked', false); 
		       $('#'+names[i] + "1").removeAttr("disabled");
      }
    }
  }	
	
	spUtil.recordWatch($scope, "sc_req_item", "", function(name, data) {  
			spUtil.update($scope);
	});
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.highlight {
  background-color: yellow !important;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gdsp-pso-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDSP PSO data table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.info = [];
	data.tasks = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	data.info.session_id = session_id;
	data.info.my_sys_id = my_sys_id;
	var gr = gs.getUser();
	var isPSO = gr.isMemberOf('CCR_PSO');
	
	var gr1 = new GlideRecord("sc_cat_item");
			gr1.addQuery("short_description", "CCR Genomic Data Sharing Plan");
			gr1.query();	
			gr1.next();
	var cat_item_id = gr1.getValue('sys_id');
	
	if(isPSO){
	   var gr_requested_items = new GlideRecord('sc_req_item');
     var gd_requested_items = gr_requested_items.addQuery('context.stage.name', 'Completed');
     var gc_requested_items = gr_requested_items.addQuery('cat_item', cat_item_id);
         gr_requested_items.addActiveQuery();
         gr_requested_items.orderByDesc('number');
         gr_requested_items.query();		
		
		 while (gr_requested_items.next()){
         var orginId = '';
         var tickerNum = '';
         var org_ticket_num = '';
         var version = '';
         var hasParent = '';
         var selectedOrginId = '';
                      
         selectedOrginId = gr_requested_items.contact_type;
                      
         if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web'){
              orginId = gr_requested_items.sys_id;
              org_ticket_num = gr_requested_items.number;
              hasParent = 'false';
          }else{
              var orgIds = selectedOrginId.split("=");
              var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
              gr_tracking_item.addQuery('u_orgid',orgIds[0]);
              gr_tracking_item.query();

              if(gr_tracking_item.getRowCount() &gt; 0){
                  gr_tracking_item.next();
                  orginId = gr_tracking_item.u_orgid;
                  org_ticket_num = gr_tracking_item.u_ticket_number;
                  version = orgIds[1];
                  hasParent = 'true';
               }else {
                  orginId = gr_requested_items.sys_id;
                  org_ticket_num = gr_requested_items.number;
                  hasParent = 'false';
						   }
          }		
          if(hasParent == 'true'){
               ticketNum = 'CCR_GDSP' + org_ticket_num.substring(8) + '-' + version;
          }else{
               ticketNum = 'CCR_GDSP' + org_ticket_num.substring(8);
          } 
			
					var items = {};
			    items.sys_id = gr_requested_items.sys_id.toString();
					items.gdsp_id = ticketNum;
					items.principal_investigator = gr_requested_items.u_investigator.toString();		 
					items.project_name = gr_requested_items.u_project_name.toString();
					items.status = gr_requested_items.context.stage.name.toString();
					items.approval = gr_requested_items.context.stage.name.toString();
					items.submitted_date = gr_requested_items.sys_created_on.toString();
					data.tasks.push(items);
		 }
		
	}

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-04-25 16:41:57&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;0d37479adb9a360054d8ff621f961947&lt;/sys_id&gt;&lt;sys_mod_count&gt;44&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDSP PSO data table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_0d37479adb9a360054d8ff621f961947&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-20 15:11:53&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  &lt;br/&gt;
  &lt;div class="panel panel-success" ng-show="c.data.tasks.length &gt; 0"&gt;
    &lt;div class="panel-heading" id="heading_psoItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsepsoItems" aria-expanded="true" data-target="#collapsepsoItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Approved GDSP &lt;span class="badge" id="ritm_count"&gt;{{ c.data.tasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_psoItems" class="panel-collapse collapse in table-responsive" id="collapsepsoItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns track by $index" 
              ng-click="c.toggleSort($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.tasks track by $index"
            ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                     $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"
            				 ng-class="{highlight: row.sys_id == c.state.id }"
          					 id="{{row.sys_id}}"&gt;
          &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.principal_investigator }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted"  title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td&gt;
            &lt;button class="btn btn-sm btn-primary" ng-click="viewItem(row.sys_id, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary" ng-click="report(row.sys_id, row.gdsp_id)"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/div&gt;

    &lt;!-- select the page size --&gt;
    &lt;form class="form-inline pull-right"&gt;
      &lt;div class="pagination form-group"&gt;
        &lt;label for="pageSize14"&gt;
          Items per page
        &lt;/label&gt;

        &lt;select 
          id="pageSize14" 
          class="form-control"
          style="display: inline"
          ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
          ng-model="c.pagination.currentSize"
          ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
        &lt;/select&gt;
      &lt;/div&gt;
    &lt;/form&gt;  

    &lt;!-- select the page index (offset) --&gt;
    &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.tasks.length"&gt;
      &lt;li
        ng-repeat="index in c.getRange() track by $index"
        ng-click="c.setPage($index)"
        &gt;
        &lt;a href=""&gt;
          {{ $index + 1 }}
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1757608745</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b0576a31db2b5b00b86770c08c961982</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b83f4dca0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP PSO data table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>aae711e3071f53008b5b735463c0eb7e</update_guid>
<update_guid_history>aae711e3071f53008b5b735463c0eb7e:1757608745,1391618894:1391618894,-1575332768:-1575332768</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_b6f188c5dba6ba0054d8ff621f96198c</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http, spUtil) {
	$("#datetimepicker").datetimepicker({format:'MM/DD/YYYY'}).on('dp.show', function() {
		$('.bootstrap-datetimepicker-widget li.accordion-toggle').hide();
	});
	$('[data-toggle="popover"]').popover(); 

	var c = this;
	var names=['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var textFields = ['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna']; 
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;

	var catItemId = '';
	var itemIdArray = {};
	//ajax call to fetch catItemId
	var req = {
				method: 'GET',
				url: '/api/naci/gdspapi/getCatItem',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				params: {name: 'CCR Genomic Data Sharing Plan'}	
	}
	$http(req).then(function(response){
		 console.log(response);
		 catItemId = response.data.result[0].cat_item_id;
	});
	//end of ajax call
	//get variable array
	var req1 = {
				method: 'GET',
				url: '/api/naci/gdspapi/getGDSPVariableIdArray',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				params: {email: 'zhoujim@nih.gov'}	
	}
	$http(req1).then(function(response){
		 console.log(response);
		 itemIdArray = response.data.result[0].itemId;
	});	
	//end of variable array
  
	//initialize autoComplete field
	  $( "#investigator" ).autocomplete({
		 delay: 500,
     source: function(request, response){
	       var term = $('#investigator').val();
				 var temp = '';
			   if(term.indexOf(',') &gt;= 0){
					 temp = term.split(',');
					 var length = temp.length;
					 if(length &gt; 1){
						 term = temp[1].trim() + " " + temp[0].trim();
					 }else{
						 term = temp[0];
					 }
				 }	 
	       var req = {
						method: 'GET',
						url: '/api/naci/gds/fetchUserList',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
	          headers: {
								'Content-Type': 'application/json'
						},
						params: {'term': term }
					};				
				   $http(req).then(handleResponse, handleError);
					function handleResponse(responseData) {
				      var result = responseData.data.result;
							response(result);
					}
					function handleError(response) {
					  console.error(response);
						alert('ERROR');
					}    
			},
      autoFocus:true,
      select: function( event, ui ) {
				console.log(event, ui);
				var id = ui.item.id;
		        var email = ui.item.email;
		        var phone = ui.item.phone;
				var title = ui.item.title;
				var name = (ui.item.value || '').split(' ');
				$('#inUserId').val(id);
			  if(name != null &amp;&amp; name.length &gt; 1){
					$('#inFirstName').val(name[0]);
					$('#inLastName').val(name[1]);
				    $('#email').val(email);
				    $('#phone').val(phone);
					  $('#pTitle').val(title);
				}else{
					$('#inFirstName').val('');
					$('#inLastName').val('');
				    $('#email').val('');
				    $('#phone').val('');
					  $('#pTitle').val('');
				}
			}
  });
	
	var requestModal = $('#loadedRequests');
	$scope.closeModal = function(){
		$('#refresh').val('0');
		requestModal.modal('hide');
	};

	$scope.processOtherValue = function(target1, target2){
		$('#refresh').val('0');
		 if($('#'+target1).is(':checked')){
			 $('#'+target2).prop('disabled', false);
		 }else{
			 $('#'+target2).val(''); 
			 $('#'+target2).prop('disabled', true);
		 }		
	};
	$scope.toggleNotApplicable = function(){
		$('#refresh').val('0');
			if($('#notApplicableDataForm').is(":checked")){
				$('#individual').attr("checked", false);
				$('#aggregate').attr("checked", false);
				$('#individual').attr("disabled", "disabled");
				$('#aggregate').attr("disabled","disabled");
			}else{
				$('#individual').removeAttr("disabled");
				$('#aggregate').removeAttr("disabled");
			}		
	};
	$scope.toggleNoHumanData = function(){
		$('#refresh').val('0');
    if($('#noHumanData').is(":checked")){
          $('#noLimitation').attr("checked", false);
          $('#noLimitation').attr("disabled", "disabled");
          $('#limitedOnly').attr("checked", false);
          $('#limitedOnly').attr("disabled", "disabled");
          $('#limitedPurpose').attr("checked", false);
          $('#limitedPurpose').attr("disabled", "disabled");
          $('#relateToDisease').attr("checked", false);
          $('#relateToDisease').attr("disabled", "disabled");
    }else{
          $('#noLimitation').removeAttr("disabled");
          $('#limitedOnly').removeAttr("disabled");
          $('#limitedPurpose').removeAttr("disabled");
          $('#relateToDisease').removeAttr("disabled");
    }		
	};
	$scope.submitSaveRequest = function(){
		$('#refresh').val('0');
			$('#errorMessage').hide();
			var variables = getGDSPData();
		  variables.gds_id = $('#hideGDSId').val();
			var gdspData = JSON.stringify(variables);
			var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: gdspData
			};
			$http(request).then(handleResponse, handleError);
		  function handleResponse(response){
				var result = response.data.result;
				$('#infoModal').modal('show');
				$('#messageInfo').html('The Genomic Data Sharing Plan has been saved successfully.');
			  $('#btnOkConfirm').off('click').click(function() {
            $('#infoModal').modal('hide');
        });
			}
		  function handleError(){
				console.error(response);
				alert('ERROR');
			}
      $('#loadedRequests').modal('hide');  
	}
	
	$scope.loadRequestConfirm = function(){
		$('#refresh').val('0');
		if(validation()){
			$('#loadedRequests .modal-content').scrollTop(0);
			$('#errorMessage').show();
			return;
		}else{
			var $confirm = $('#confirmSubmitDiv');
			$confirm.modal('show');
			$('#message1').html("Are you sure you want to submit this request?");		
			$('#btnYesConfirm').off('click').click(function() {
				//submit request
				$('#errorMessage').hide();
				submitRequest();	
				$confirm.modal('hide');
				requestModal.modal('hide');
				$('#loading').show();
			});
			$('#btnNoConfirm').off('click').click(function() {
				$confirm.modal('hide');
			});
			
		}
	}
	
	$scope.loadResubmitConfirm = function(){
		$('#refresh').val('0');
		if(validation()){
			$('#loadedRequests .modal-content').scrollTop(0);
			$('#errorMessage').show();
			return;
		}else{	
			var $confirm = $('#confirmResubmitDiv');
			$confirm.modal('show');
			$('#message2').html("Are you sure you want to resubmit this request?");	
			$('#btnYesResubmitConfirm').off('click').click(function() {
				//submit request
				$('#errorMessage').hide();
				$confirm.modal('hide');
				requestModal.modal('hide');
				$('#loading').show();
				resubmitRequest();	
			});
			$('#btnNoResubmitConfirm').off('click').click(function() {
				$confirm.modal('hide');
			});			
		}
	}
	
	$scope.searchUser = function(){
		$('#refresh').val('0');
		$('#first_name').val('');
		$('#last_name').val('');
		$('#userPageType').val('data');
		$('#userSelection').modal('show');
	}
	
	function resubmitRequest(){    
		var variables = {};
        var currentId = $('#ccr_id').val();
	
	 	variables.org_id = $('#'+currentId +'_orginId').val();
        variables.ticket_number = $('#'+currentId +'_ticket_num').val();
        if(currentId == $('#'+currentId +'_orginId').val()){
              variables.method = 'insert';
        }else{
              variables.method = 'update';
        }

		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/gsdspUtil',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: variables
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			var version = result.version;
			resubmit($('#'+currentId +'_orginId').val(), version, currentId);
		}
		function handleError(){
			console.error(response);
			alert('ERROR');
		}		
		
	}
	
	
	function formatHistoricComment(comment){
		if(comment.length&gt;= 50){
				 var index = comment.indexOf('Added comment to Approval record:');
				 return comment.substring(index);
		}else{
				 return  ' ';
		}
	}
	function resubmit(org_id, version, currentId){
     var variables= getGDSPEntryData();
		 variables.orginId = org_id;
		 variables.version = version;
		 var request_for_id = $('#inUserId').val();
		 if(request_for_id != null &amp;&amp; request_for_id.length &gt; 0){
			 variables.requested_for = request_for_id;	
		 }else{
			 variables.requested_for = userId ;
		 }
     variables.opened_by = userId;
     variables.contact_type = org_id +"="+version;
     variables.investigator = $('#investigator').val();
     variables.projectName = $('#projectName').val();	
     variables.cat_item = catItemId;
     variables.short_description = $('#hideGDSId').val();
		 var fixedComments = formatHistoricComment($('#resubmitCommentsId').val());
		variables.comments = fixedComments;
	
		variables.resubmit = 'true';
		 variables.variables= itemIdArray;
		 var gdspData = JSON.stringify(variables);
			var req = {
						method: 'POST',
						url: '/api/naci/gdspapi/submitRequest',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: gdspData
			}
			$http(req).then(function(response){
				 console.log(response);
				 var data = response.data.result[0];
				 var param ={
					 gds_id: $('#hideGDSId').val(),
					 gdsp_id: data.id,
					 gdsp_number: data.ticketNum,
					 type: 'gdsp',
					 method: 'add'
				 };
				var request ={
						method: 'POST',
						url: '/api/naci/gds/updateGDS',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: param				
				};
				$http(request).then(function(response){
					 console.log(response);
				});				
			});
	}
	
	function submitRequest(){
		var variables= getGDSPEntryData();
		
		if ($('#withdrawSubmitId').val() == 'true') {
				variables.comments = formatHistoricComment($('#withdrawCommentsId').val());
				variables.resubmit = 'true';
		}
    var request_for_id = $('#inUserId').val();

		if(request_for_id != null &amp;&amp; request_for_id.length &gt; 0){
			variables.requested_for = request_for_id;	
		}else{
			variables.requested_for = userId ;
		}
	   variables.opened_by = userId;
     variables.contact_type = 'Web';
		 variables.short_description = $('#hideGDSId').val();
     variables.investigator = $('#investigator').val();
     variables.projectName = $('#projectName').val();	
		 variables.cat_item = catItemId;
		 variables.variables = itemIdArray;
		 var gdspData = JSON.stringify(variables);
			var req = {
						method: 'POST',
						url: '/api/naci/gdspapi/submitRequest',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: gdspData
			};
			$http(req).then(function(response){
				 console.log(response);
				 //update GDS table with GDSP id and GDSP number
				 //from response, we can get gdsp id and gdsp number
				 var data = response.data.result[0];
				 var param ={
					 gds_id: $('#hideGDSId').val(),
					 gdsp_id: data.id,
					 gdsp_number: data.ticketNum,
					 type: 'gdsp',
					 method: 'add'
				 };
				var request ={
						method: 'POST',
						url: '/api/naci/gds/updateGDS',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: param				
				};
				$http(request).then(function(response){
					 //var data = response.data.result;
					 removeSavedRecordAfterSubmit();	
					 //add access to requested_for user
					 var gds_id = $('#hideGDSId').val();
					 var requested_for = $('#inUserId').val();
					 if(requested_for != userId){
						 var pi = $('#investigator').val();
						 var tmp = pi.trim().split(" ");
						 var userData = requested_for+"+"+tmp[0]+"+"+tmp[1];
						 saveUser(userData, gds_id, 'Read_and_Write');
					 }
					 var orgType = $('#organismType').val();
					 if(orgType == 'human' || orgType == 'both'){
								$('#message3').html('Reminder: Please be aware that projects working on human data will need an Institutional Certification to comply with Genomic Data Sharing policy.');
								$('#informationDiv').modal('show');
					 }
				});
			});	   
	}
	
	function saveUser(userData, gdsId, access){
		var data1 = {
			data: userData,
			gds_id: gdsId,
			access: access,
			action: 'add'
		};
		var request = {
				method: 'POST',
				url: '/api/naci/gds/saveUser',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data1
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
	 }
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}		
	}
	
	function validation(){
		var errorMessage = '&lt;font size="2" color="red"&gt; &lt;ul&gt;';
		var flag = "false";
		clearRequiredFieldBackColor();
		if($('#investigator').val().trim().length == 0 || $('#inUserId').val().trim().length == 0){
			 errorMessage = errorMessage + '&lt;li&gt;Principal Investigator is a required field. When using autocomplete field, you need to select(click) PI from List &lt;/li&gt;';
			 $('#investigator').css("background-color", "yellow");
			 flag = 'true';
		 }
		if($('#pTitle').val().trim().length == 0){
			 errorMessage = errorMessage + '&lt;li&gt;Principal Investigator Title is a required field. &lt;/li&gt;';
			 $('#pTitle').css("background-color", "yellow");
			 flag = 'true';
		}
		if($('#email').val().trim().length == 0){
			 errorMessage = errorMessage + '&lt;li&gt;Email is a required field. &lt;/li&gt;';
			 $('#email').css("background-color", "yellow");
			 flag = 'true';
		}
		if($('#email').val().indexOf('@') == -1){
			 errorMessage = errorMessage + '&lt;li&gt;Incorrect Email address. &lt;/li&gt;';
			 $('#email').css("background-color", "yellow");
			 flag = 'true';
		}
		if($('#phone').val().trim().length == 0){
			 errorMessage = errorMessage + '&lt;li&gt;Phone is a required field. &lt;/li&gt;';
			 $('#phone').css("background-color", "yellow");
			 flag = 'true';
		}
		if($('#date').val().trim().length == 0){
			 errorMessage = errorMessage + '&lt;li&gt;Date is a required field. &lt;/li&gt;';
			 $('#date').css("background-color", "yellow");
			 flag = 'true';
		}
		if($('#projectName').val().trim().length == 0){
			 errorMessage = errorMessage + '&lt;li&gt;project Name is a required field. &lt;/li&gt;';
			 $('#projectName').css("background-color", "yellow");
			 flag='true';
		} 
		if($('#simpleSize').val().trim().length == 0){
			 errorMessage = errorMessage + '&lt;li&gt;Plan Enrollment/Sample Size is a required field. &lt;/li&gt;';
			 $('#simpleSize').css("background-color", "yellow"); 
			 flag = 'true';
		} 
		if(!validateCollectionType()){
			 errorMessage = errorMessage + '&lt;li&gt;Collection Type at least one needs to be checked. &lt;/li&gt;';
			 $('#collectionTypeId').css("background-color", "yellow"); 
			 flag = 'true';
		}
		if(!validateDataSection()){
			 errorMessage = errorMessage + '&lt;li&gt;Data Section at least one needs to be checked.(if the other is chosen, please specify the data item) &lt;/li&gt;';
			 $('#dataId').css("background-color", "yellow"); 
			 $('#data2Id').css("background-color", "yellow");
			 flag = 'true';
		}
		if(!validateArrayGenoSequence()){
			 errorMessage = errorMessage + '&lt;li&gt;Array Data, GenoType, Sequence at least one needs to be checked.&lt;/li&gt;';
			 $('#arrayDataId').css("background-color", "yellow"); 
			 $('#genotypesId').css("background-color", "yellow"); 
			 $('#sequenceId').css("background-color", "yellow"); 
			 flag = 'true';
		}
		if(!validateAnalysisOther()){
			 errorMessage = errorMessage + '&lt;li&gt;Analysis, Other Analysis at least one needs to be checked.(if the other is chosen, please specify the other analysis)&lt;/li&gt;';
			 $('#analysisId').css("background-color", "yellow");
			 flag = 'true';
		}
		if(!validateDataForm()){
			 errorMessage = errorMessage + '&lt;li&gt;Data Form at least one needs to be checked.&lt;/li&gt;';
			 $('#dataFormId').css("background-color", "yellow");
			 flag = 'true';
		}
		if(!validateDataRepository()){
			 errorMessage = errorMessage + '&lt;li&gt;Data Repository at least one needs to be checked. (if Clinic Data/Study/Data Collection/Other is chosen, please specify the companion)&lt;/li&gt;';
			 $('#dataRepositoryId').css("background-color", "yellow");
			 flag = 'true';
		}
		if(!validateCompanion()){
			 errorMessage = errorMessage + '&lt;li&gt;Companion Information at least one needs to be checked. (if the other is chosen, please specify the other data repository)&lt;/li&gt;';
			 $('#companionInfoId').css("background-color", "yellow");
			 flag = 'true';
		}
		if(!validateDataSubmission()){
			 errorMessage = errorMessage + '&lt;li&gt;Data Submission and Release Timeline at least one needs to be checked. (if the other is chosen, please specify the other data)&lt;/li&gt;';
			 $('#dataSubmissionId').css("background-color", "yellow");
			 flag = 'true';
		}
		if(!validateDataUseLimitation()){
			 errorMessage = errorMessage + '&lt;li&gt;Data Use Limitation at least one needs to be checked.&lt;/li&gt;';
			 $('#dataUseId').css("background-color", "yellow");
			 flag = 'true';
		}

		 errorMessage = errorMessage + '&lt;/ul&gt;&lt;/font&gt;';

		 if(flag == 'true'){
				$('#errorMessage').html(errorMessage);
				return true;
		 }else{
				return false;
		 }
	}
	
	function getGDSPData(){
		var variables= {};
		var request_for_id = $('#selectedUserData').val();
		variables.application = 'GDSP';
		if(request_for_id != null &amp;&amp; request_for_id.length &gt; 0){
			variables.requested_for = request_for_id;	
		}else{
			variables.requested_for = userId ;
		}
		variables.opened_by = userId;
		 variables.value=''; 
	   variables.project_name='';
		 variables.saved_id=$('#saved_id').val();		
     var index = 0;
     for(index=0; index &lt; names.length; index++) {
          if (index != 0) variables.value += ',';
          if(textFields.indexOf(names[index]) &gt; -1 ){ 
             var value= $('#'+names[index]).val();
						 if (names[index] == 'projectName')
							 variables.project_name=value;
						 if (names[index] == 'date') {
								 value = getConvertedValue(value, '0');
						 }
						 variables.value +=  names[index] + '=' + value;
					}else {
							if($('#'+names[index]).is(':checked')){
									variables.value +=  names[index] + '=true';
							}else{
									variables.value +=  names[index] + '=false';
							} 
					}
      }
		variables.value += ',inFirstName=' + $('#inFirstName').val();
		variables.value += ',inLastName=' + $('#inLastName').val();
		variables.value += ',inUserId=' + $('#inUserId').val();
		
		return variables;
	}
	function getGDSPEntryData(){
		var variables = {};
     var index = 0;
     for(index=0; index &lt; names.length; index++) {
          if(textFields.indexOf(names[index]) &gt; -1 ){ 
             var value= $('#'+names[index]).val();
						 if (names[index] == 'date') {
								 value = getConvertedValue(value, '0');
						 }
						 variables[names[index]] = value;
					}else {
							if($('#'+names[index]).is(':checked')){
									variables[names[index]] = 'true';
							}else{
									variables[names[index]] = 'false';
							} 
					}
      }		
		//add gds_id to variables
		variables.gsd_id = $('#hideGDSId').val();
		return variables;
	}
	function clearRequiredFieldBackColor(){
		$('#investigator').css("background-color", "");
		$('#pTitle').css("background-color", "");
		$('#email').css("background-color", "");
		$('#phone').css("background-color", "");
		$('#date').css("background-color", "");
		$('#projectName').css("background-color", "");
		$('#simpleSize').css("background-color", ""); 
		$('#collectionTypeId').css("background-color", "");
		$('#dataId').css("background-color", "");  
		$('#specifyOtherType').css("background-color", "");
		$('#data2Id').css("background-color", "");  
		$('#arrayDataId').css("background-color", ""); 
		$('#genotypesId').css("background-color", ""); 
		$('#sequenceId').css("background-color", ""); 
		$('#analysisId').css("background-color", "");
		$('#spcifiedOtherAnalysis').css("background-color", "");
		$('#dataFormId').css("background-color", "");
		$('#dataRepositoryId').css("background-color", "");
		$('#specifiedRepository').css("background-color", "");
		$('#companionInfoId').css("background-color", "");
		$('#specifiedClinicalData').css("background-color", "");
		$('#specifiedProtocol').css("background-color", "");
		$('#specifiedInstrument').css("background-color", "");
		$('#specifiedCompanion').css("background-color", "");
		$('#dataSubmissionId').css("background-color", "");
		$('#psecifiedOtherSubmission').css("background-color", "");
		$('#dataUseId').css("background-color", "");
	}
	
	function validateCollectionType(){
		 if($('#prospective').is(":checked") || $('#restrospective').is(":checked")){
				 return true;
		 }else{
				return false;
		 }
	}	

	function validateDataSection(){
		 if($('#human').is(":checked") || $('#rat').is(":checked") || $('#mouse').is(":checked") || $('#celegans').is(":checked") || $('#drosophila').is(":checked")  || $('#yeast').is(":checked") || $('#bacteria').is(":checked") || $('#nonHuman').is(":checked") || $('#germLine').is(":checked") || $('#somatic').is(":checked") || $('#dnaType').is(":checked") || $('#rnaType').is(":checked") || $('#microbiome').is(":checked") || $('#mitochrondria').is(":checked") || $('#otherType').is(":checked")){
				 if($('#otherType').is(":checked")){
						 if($('#specifyOtherType').val().trim().length == 0){
								$('#specifyOtherType').css("background-color", "yellow");
								return false;
						 }
				 }
				 if($('#yeast').is(":checked")){
						 if($('#yeastSpecies').val().trim().length == 0){
								$('#yeastSpecies').css("background-color", "yellow");
								return false;
						 }
				 }
				 if($('#bacteria').is(":checked")){
						 if($('#bacteriaSpecies').val().trim().length == 0){
								$('#bacteriaSpecies').css("background-color", "yellow");
								return false;
						 }
				 }
				 if($('#nonHuman').is(":checked")){
						 if($('#noHumanOther').val().trim().length == 0){
								$('#noHumanOther').css("background-color", "yellow");
								return false;
						 }
				 }
			 
				 return true;
		 }else{
				return false;
		 }
	}

	function validateArrayGenoSequence(){
	 if($('#snpArrayData').is(":checked") || $('#expressionArray').is(":checked") || $('#methylationArray').is(":checked") || $('#arrayDerive').is(":checked") || $('#microarrayData').is(":checked") || $('#sequenceData').is(":checked") || $('#somaticSnv').is(":checked") || $('#arrayCgh').is(":checked") || $('#wholeGenome').is(":checked") || $('#wholeExome').is(":checked") || $('#targetGenome').is(":checked") || $('#targetExome').is(":checked") || $('#wholeTranscriptome').is(":checked") || $('#targetTrabscriptome').is(":checked") || $('#epigenomicMark').is(":checked") || $('#sanger').is(":checked") || $('#rrna').is(":checked") ){
			 return true;
		}else{
			return false;
		}
	}	

	function validateAnalysisOther(){
		 if($('#association').is(":checked") || $('#arrayDerivedExpression').is(":checked") || $('#rnaExpression').is(":checked") || $('#derivedMethylation').is(":checked") || $('#otherAnalysis').is(":checked")){
				if($('#otherAnalysis').is(":checked")){
						if( $('#spcifiedOtherAnalysis').val().trim().length == 0){
							 $('#spcifiedOtherAnalysis').css("background-color", "yellow");
							 return false;
						}
				}
				return true;
		 }else{
				return false;
		 }
	}

	function validateDataForm(){
		if($('#individual').is(":checked") || $('#aggregate').is(":checked") || $('#notApplicableDataForm').is(":checked")){
			return true;
		}else{
			return false;
		}
	}	

	function validateDataRepository(){
		 if($('#arrayExpress').is(":checked") || $('#cancerGenomics').is(":checked") || $('#clinVar').is(":checked") || $('#dbGap').is(":checked") || $('#dbSnp').is(":checked") || $('#dbVar').is(":checked") || $('#ena').is(":checked") || $('#geo').is(":checked") || $('#mgi').is(":checked") || $('#genBank').is(":checked") || $('#traceArchive').is(":checked") || $('#wormbase').is(":checked") || $('#sra').is(":checked") || $('#zfin').is(":checked") || $('#OtherRepository').is(":checked") ){
				if($('#OtherRepository').is(":checked")){
						if( $('#specifiedRepository').val().trim().length == 0){
								$('#specifiedRepository').css("background-color", "yellow");
							 return false;
						}
				}
				return true;
		 }else{
				return false;
		 }
	}	
	
	function validateCompanion(){
		 if($('#phenotype').is(":checked") || $('#exposure').is(":checked") || $('#surveyTool').is(":checked") || $('#clinicalData').is(":checked") || $('#protocol').is(":checked") || $('#instrument').is(":checked") || $('#otherCompanion').is(":checked")){
				if($('#clinicalData').is(":checked")){
						if( $('#specifiedClinicalData').val().trim().length == 0){
							 $('#specifiedClinicalData').css("background-color", "yellow");
							 return false;
						}
				}
				if($('#protocol').is(":checked")){
						if( $('#specifiedProtocol').val().trim().length == 0){
							 $('#specifiedProtocol').css("background-color", "yellow");
							 return false;
						}
				}
				if($('#instrument').is(":checked")){
					 if( $('#specifiedInstrument').val().trim().length == 0){
							 $('#specifiedInstrument').css("background-color", "yellow");
							 return false;
						}
				}
				if($('#otherCompanion').is(":checked")){
					 if( $('#specifiedCompanion').val().trim().length == 0){
							 $('#specifiedCompanion').css("background-color", "yellow");
							 return false;
						}
				}

				return true;
		 }else{
				return false;
		 }
	}	
	
	function validateDataSubmission(){
		 if($('#dataCheck').is(":checked") || $('#publication').is(":checked") || $('#otherSubmission').is(":checked")){
				if($('#otherSubmission').is(":checked")){
						if( $('#psecifiedOtherSubmission').val().trim().length == 0){
								$('#psecifiedOtherSubmission').css("background-color", "yellow");
							 return false;
						}
				}
				return true;
		 }else{
				return false;
		 }

	}	
	
	function validateDataUseLimitation(){
		if($('#noHumanData').is(":checked") || $('#noLimitation').is(":checked") || $('#limitedOnly').is(":checked") || $('#limitedPurpose').is(":checked") || $('#relateToDisease').is(":checked")){
			return true;
		}else{
			return false;
		}
	}	

	function getConvertedValue(value, flag){
		if(value == ''){
			return '';
		}
		var values = '';
		 if(flag == '0'){
				values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}
	
	function removeSavedRecordAfterSubmit(){
			var id = $('#saved_id').val();
			var data = {
				saved_id: id,
				action: 'DELETE'
			};
			var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
			};
			$http(request).then(handleResponse, handleError);
			function handleResponse(response) {
				var result = response.data.result;
				console.log(result);
			}
			
			function handleError(response) {
				console.error(response);
				//$confirm.modal('hide');
				alert('ERROR');
			}		
		  scope.checkPI = function(){
				alert('here');
			};
	}
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.btn-form {
  width: 100px;
  margin-left: 50px;
}

.form-label {
  font-weight: normal
}

.full-width {
  width: 100%;
}

label.control-label {
  font-size: 14px;
  white-space: nowrap;
}

legend.scheduler-border {
  font-size: 16px;
  font-weight: bold;
}

.align-checkboxes {
  margin-top: 8px;
}

.inline-form-input {
  width: 160px;
  max-width: 160px;
  display: inline-block;
  margin-left: 8px;
}

input[type=checkbox], input[type=radio] {
  vertical-align: middle;
  position: relative;
  bottom: 3px !important;
}

input[type=radio] {
  bottom: 2px;
}

.input-xs {
  height: 24px;
  padding: 4px;
  font-size: 12px;
  line-height: 1.2;
  border-radius: 3px;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-data-entry-section&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS Data Entry Section&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id
	};
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-03 15:22:37&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;b6f188c5dba6ba0054d8ff621f96198c&lt;/sys_id&gt;&lt;sys_mod_count&gt;244&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS Data Entry Section&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_b6f188c5dba6ba0054d8ff621f96198c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-27 20:44:14&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
&lt;div id="loadedRequests" class="modal fade" data-keyboard="false" data-backdrop="static" style="overflow-y:auto; overflow-x: auto;"&gt; 
  &lt;div class="modal-dialog modal-lg"&gt;
    &lt;div class="modal-content" style="height:900px; overflow-y:auto; overflow-x: hidden;"&gt;
      &lt;div class="modal-header"&gt;
      &lt;button type="button" class="close btn btn-xs" data-dismiss="modal" aria-label="Close"&gt;&lt;span aria-hidden="true"&gt;x&lt;/span&gt;&lt;/button&gt;
           &lt;div id="anchor"&gt;
                 &lt;font size="5"&gt;&lt;b&gt;Genomic Data Sharing Plan&lt;/b&gt;&lt;/font&gt;
           &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="modal-body"&gt;
        &lt;div id="errorMessage" style="display:none;"&gt;&lt;/div&gt;
        &lt;!-- Demographics --&gt;
        &lt;fieldset class="scheduler-border"&gt;
          &lt;legend class="scheduler-border"&gt;Principal Investigator&lt;/legend&gt;
          &lt;form class="form-horizontal"&gt;
            &lt;!-- investigator --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" for="investigator"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Principal Investigator&lt;/label&gt;
              &lt;div class="col-md-6 ui-front"&gt;
                &lt;input id="investigator" class="form-control"/&gt;
              &lt;/div&gt;
              &lt;input type="hidden" id="inFirstName"/&gt;
              &lt;input type="hidden" id="inLastName"/&gt;
              &lt;input type="hidden" id="inUserId"/&gt;
            &lt;/div&gt;
            &lt;!-- PI title --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" for="pTitle"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Principal Investigator Title&lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;input type="text" class="form-control" id="pTitle" name="pTitle"&gt;
              &lt;/div&gt; 
            &lt;/div&gt;  
              &lt;!-- PI Branch --&gt;
              &lt;div class="form-group"&gt;
                &lt;label class="control-label col-md-5" for="pBranch"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Branch&lt;/label&gt;
                &lt;div class="col-md-6"&gt;
                  &lt;select class="form-control" id="pBranch" name="pBranch"&gt;&lt;/select&gt;
                &lt;/div&gt; 
              &lt;/div&gt;  
            &lt;!-- email --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" for="email"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Email&lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;input type="text" class="form-control" id="email" name="email"&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- phone --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" for="phone"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Phone&lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;input type="text" class="form-control" id="phone" name="phone"&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- date --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" for="date"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Plan Submission Date&lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;div class='input-group date' id='datetimepicker'&gt;
                  &lt;input type="text" class="form-control" id="date" name="date" readonly='true'&gt;
                  &lt;span class="input-group-addon"&gt;
                          &lt;span class="glyphicon glyphicon-calendar"&gt;&lt;/span&gt;
                  &lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/form&gt;
        &lt;/fieldset&gt;
        &lt;!-- Project Information --&gt;
        &lt;fieldset class="scheduler-border"&gt;
          &lt;legend class="scheduler-border"&gt;Project Information&lt;/legend&gt;
          &lt;form class="form-horizontal"&gt;
            &lt;!-- project number --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="valign-top col-md-5 align-right" for="projectNumber"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Intramural Project (Z01), Grant, or Contract number (if available) &lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;input type="text" class="form-control" id="projectNumber" name="projectNumber"&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- projectName --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="projectName1"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Study Name&lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;input type="text" class="form-control" id="projectName" name="projectName"  maxlength="219" aria-labelledby="projectName1"&gt;
              &lt;/div&gt;
						&lt;/div&gt;
            &lt;!-- sampleSize --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" for="simpleSize"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Plan enrollment/Sample Size&lt;/label&gt;
              &lt;div class="col-md-6"&gt;
                &lt;input type="text" class="form-control" id="simpleSize" name="sampleSize"&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- collectionTypeId --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="collectionTypeId" for="collectionTypeId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Collection Type [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label" for="prospective"&gt;
                  &lt;input type="checkbox" name="prospective" id="prospective" value="prospective"&gt;
                  Prospective
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="restrospective"&gt;
                &lt;input type="checkbox" name="retrospective" id="restrospective" value="retrospective"&gt;
                  Retrospective
                &lt;/label&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/form&gt;
        &lt;/fieldset&gt;
        &lt;!-- Data --&gt;
        &lt;fieldset class="scheduler-border"&gt;
          &lt;legend class="scheduler-border"&gt;Data&lt;/legend&gt;
          &lt;form class="form-horizontal"&gt;
            &lt;!-- dataId --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="dataId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Source [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label" for="human"&gt;
                  &lt;input type="checkbox" name="human" id="human" value="human"&gt;
                  Human
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="rat"&gt;
                  &lt;input type="checkbox" name="rat" id="rat" value="rat"&gt;
                  Rat
                &lt;/label&gt;
	              &lt;br&gt;
                &lt;label class="form-label" for="mouse"&gt;
                  &lt;input type="checkbox" name="mouse" id="mouse" value="mouse"&gt;
                  Mouse
                &lt;/label&gt;                
      			     &lt;br&gt;
                &lt;label class="form-label" for="celegans"&gt;
                  &lt;input type="checkbox" name="celegans" id="celegans" value="celegans"&gt;
                  C. elegans
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="drosophila"&gt;
                  &lt;input type="checkbox" name="drosophila" id="drosophila" value="drosophila"&gt;
                  Drosophila
                &lt;/label&gt;				
                &lt;br&gt;
                &lt;label class="form-label" for="yeast"&gt;
                  &lt;input type="checkbox" name="yeast" id="yeast" value="yeast"  ng-click="processOtherValue('yeast', 'yeastSpecies');"&gt;
                  Yeast
                &lt;/label&gt;
                &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;  (&lt;label for="yeastSpecies"&gt;Species:&lt;/label&gt; 
                &lt;input placeholder="Please specify" type="text" class="form-control input-xs inline-form-input" 
                         id="yeastSpecies" name="yeastSpecies" style="width: 100px;" disabled="disabled"&gt;&amp;nbsp; )  
                &lt;br&gt;
                &lt;label class="form-label" for="bacteria"&gt;
                  &lt;input type="checkbox" name="bacteria" id="bacteria" value="bacteria" ng-click="processOtherValue('bacteria', 'bacteriaSpecies');"&gt;
                  Bacteria
                &lt;/label&gt;
                &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; (&lt;label for="bacteriaSpecies"&gt;Species: &lt;/label&gt;
                &lt;input placeholder="Please specify" type="text" class="form-control input-xs inline-form-input" 
                         id="bacteriaSpecies" name="bacteriaSpecies" style="width: 100px;" disabled="disabled"&gt;&amp;nbsp; ) 
                &lt;br&gt;
                &lt;label class="form-label" id="nonHuman"&gt;
                &lt;input type="checkbox" name="nonHuman" id="nonHuman" value="nonHuman" ng-click="processOtherValue('nonHuman', 'noHumanOther');" aria-labelledby="nonHuman"&gt;
                  Other
                &lt;/label&gt;
                &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;  (&lt;label for="noHumanOther"&gt;Species: &lt;/label&gt;
                &lt;input placeholder="Please specify" type="text" class="form-control input-xs inline-form-input" 
                         id="noHumanOther" name="noHumanOther" style="width: 100px;" disabled="disabled"&gt;&amp;nbsp; ) 
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- Sample Types --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="data2Id"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Sample Types [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-7 align-checkboxes"&gt;
                &lt;label class="form-label" for="germLine"&gt;
                  &lt;input type="checkbox" name="germLine" id="germLine" value="germLine"&gt;
                  GermLine
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="dnaType"&gt;
                  &lt;input type="checkbox" name="dnaType" id="dnaType" value="dnaType"&gt;
                  DNA
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="rnaType"&gt;
                &lt;input type="checkbox" name="rnaType" id="rnaType" value="rnaType"&gt;
                  RNA
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="microbiome"&gt;
                &lt;input type="checkbox" name="microbiome" id="microbiome" value="microbiome"&gt;
                  Microbiome
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="mitochrondria"&gt;
                &lt;input type="checkbox" name="mitochrondria" id="mitochrondria" value="mitochrondria"&gt;
                  Mitochrondria
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="otherType"&gt;Check:&lt;/label&gt;
                &lt;input type="checkbox" name="otherType" id="otherType" value="otherSampleType"  
                  ng-click="processOtherValue('otherType', 'specifyOtherType');"&gt;
                  &lt;label class="form-label" id="specifyOtherType" for="specifyOtherType"&gt;Other&lt;/label&gt;
                  &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                         id="specifyOtherType" name="otherSampleTypeText" disabled="disabled" aria-labelledby="specifyOtherType"&gt;
                
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/form&gt;
        &lt;/fieldset&gt;
        &lt;!-- Type --&gt;
        &lt;fieldset class="scheduler-border"&gt;
          &lt;legend class="scheduler-border"&gt;Type&lt;/legend&gt;
          &lt;form class="form-horizontal"&gt;
            &lt;!-- Array Data --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="arrayDataId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Array Data [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-7 align-checkboxes"&gt;
                &lt;label class="form-label full-width" for="snpArrayData"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                      &lt;input type="checkbox" name="snpArrayData" id="snpArrayData" value="snp"  ng-click="processOtherValue('snpArrayData', 'numSNP');" &gt;
											SNP Array
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                      # of Samples
                      &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numSNP" name="numSNP" style="width: 100px;" disabled="disabled" aria-labelledby="snpArrayData"&gt;                      
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="expressionArray"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                      &lt;input type="checkbox" name="expressionArray" id="expressionArray" value="expressArray" ng-click="processOtherValue('expressionArray', 'numExpression');" aria-labelledby="expressionArray"&gt;
                    		Expression Array  
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                      # of Samples
                      &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numExpression" name="numExpression" style="width: 100px;" disabled="disabled" aria-labelledby="expressionArray"&gt;                      
                    &lt;/div&gt;
                  &lt;/div&gt;                 
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="methylationArray"&gt;
                   &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
               				 &lt;input type="checkbox" name="methylationArray" id="methylationArray" value="methylationArray" ng-click="processOtherValue('methylationArray', 'numMethylation');" aria-labelledby="methylationArray"&gt;
                 			  Methylation Array
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                      # of Samples
                      &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numMethylation" name="numMethylation" style="width: 100px;" disabled="disabled" aria-labelledby="methylationArray"&gt;                      
                    &lt;/div&gt;
                  &lt;/div&gt;                                  
                &lt;/label&gt;
              &lt;/div&gt;
            &lt;/div&gt; 
              
           &lt;!-- Genotypes --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="genotypesId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Genotypes [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-7 align-checkboxes"&gt;
                &lt;label class="form-label full-width label-hidden" for="arrayDerive"&gt;Check:&lt;/label&gt;
                &lt;div class="row"&gt;
									&lt;div class="col-md-6"&gt;
                    &lt;input type="checkbox" name="arrayDerive" id="arrayDerive" value="arrayDerived" ng-click="processOtherValue('arrayDerive', 'numDerivedGenotype');" &gt;
                      Array Derived Genotypes
                  &lt;/div&gt;
									&lt;div class="col-md-6"&gt;
                        # of Samples
                                      &lt;label for="numDerivedGenotype" class="label-hidden"&gt;Input:&lt;/label&gt;
                      &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numDerivedGenotype" name="numDerivedGenotype" style="width: 100px;" disabled="disabled"&gt;                 
                  &lt;/div&gt;	
                &lt;/div&gt;  
                
                &lt;br&gt;
                &lt;label class="form-label full-width" for="microarrayData"&gt;
									&lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                         &lt;input type="checkbox" id="microarrayData" name="microarrayData" value="cnvFromMicroarray" ng-click="processOtherValue('microarrayData', 'numMicroarrayData');"&gt;
                        CNV cells from Microarray                     
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                       # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numMicroarrayData" name="numMicroarrayData" style="width: 100px;" disabled="disabled" aria-labelledby="microarrayData"&gt;                     
                    &lt;/div&gt;
                  &lt;/div&gt;                  
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="sequenceData"&gt;
                  &lt;div class="row"&gt;
                    	&lt;div class="col-md-6"&gt;
                        &lt;input type="checkbox" id="sequenceData" name="cnvFromSequence" value="cnvFromSequence" ng-click="processOtherValue('sequenceData', 'numSquenceData');"&gt;
                          CNV cells derived from Sequence                        
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                       # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numSquenceData" name="numSquenceData" style="width: 100px;" disabled="disabled"  aria-labelledby="sequenceData"&gt;                            
                    &lt;/div&gt;
                  &lt;/div&gt;

                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="somaticSnv"&gt;
                &lt;div class="row"&gt;
                	&lt;div class="col-md-6"&gt;
                      &lt;input type="checkbox" id="somaticSnv" name="maf" value="maf" ng-click="processOtherValue('somaticSnv', 'numSomaticSnv');"&gt;
                        Somatic SNV (.MAF)
                  &lt;/div&gt;
                  &lt;div class="col-md-6"&gt;
                      # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numSomaticSnv" name="numSomaticSnv" style="width: 100px;" disabled="disabled" aria-labelledby="somaticSnv"&gt;                         
                  &lt;/div&gt;
                &lt;/div&gt;  
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="arrayCgh"&gt;
                &lt;div class="row"&gt;
                	&lt;div class="col-md-6"&gt;
                    &lt;input type="checkbox" id="arrayCgh" name="arrayCGH" value="arrayCGH" ng-click="processOtherValue('arrayCgh', 'numArrayCgh');"&gt;
                      Array CGH CNVs
                  &lt;/div&gt;
                  &lt;div class="col-md-6"&gt;
                      # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numArrayCgh" name="numArrayCgh" style="width: 100px;" disabled="disabled" aria-labelledby="arrayCgh"&gt;                      
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;/label&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- Sequence --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="sequenceId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Sequence [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-7 align-checkboxes"&gt;
                &lt;label class="form-label full-width" for="wholeGenome"&gt;
                &lt;div class="row"&gt;
                  &lt;div class="col-md-6"&gt;
                     &lt;input type="checkbox" id="wholeGenome" name="wholeGenome" value="wholeGenome" ng-click="processOtherValue('wholeGenome', 'numWholeGenome');"&gt;
                      Whole Genome                      
                  &lt;/div&gt;
                  &lt;div class="col-md-6"&gt;
                      # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numWholeGenome" name="numWholeGenome" style="width: 100px;" disabled="disabled" aria-labelledby="wholeGenome"&gt;                     
                  &lt;/div&gt;
                &lt;/div&gt;

                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="wholeExome"&gt;
                &lt;div class="row"&gt;
                	&lt;div class="col-md-6"&gt;
                    &lt;input type="checkbox" id="wholeExome" name="wholeExome" value="wholeExome" ng-click="processOtherValue('wholeExome', 'numWholeExome');"&gt;
                      Whole Exome                    
                  &lt;/div&gt;
                  &lt;div class="col-md-6"&gt;
                       # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numWholeExome" name="numWholeExome" style="width: 100px;" disabled="disabled" aria-labelledby="wholeExome"&gt;                      
                  &lt;/div&gt;
                &lt;/div&gt;
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="targetGenome"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                      &lt;input type="checkbox" id="targetGenome" name="targetGenome" value="targetGenome" ng-click="processOtherValue('targetGenome', 'numTargetGenome');"&gt;
                        Targeted Genome
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                         # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numTargetGenome" name="numTargetGenome" style="width: 100px;" disabled="disabled" aria-labelledby="targetGenome"&gt;                      
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/label&gt;
                &lt;br&gt;                
                &lt;label class="form-label full-width" for="targetExome"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                      &lt;input type="checkbox" id="targetExome" name="targetExome" value="TargetExome" ng-click="processOtherValue('targetExome', 'numTargetedExome');"&gt;
                        Targeted Exome                      
                    &lt;/div&gt;
										&lt;div class="col-md-6"&gt;
                         # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numTargetedExome" name="numTargetedExome" style="width: 100px;" disabled="disabled" aria-labelledby="targetExome"&gt;                         
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/label&gt;
                &lt;br&gt;                
                &lt;label class="form-label full-width" for="wholeTranscriptome"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                      &lt;input type="checkbox" id="wholeTranscriptome" name="wholeTranscript" value="wholeTranscript" ng-click="processOtherValue('wholeTranscriptome', 'numWholeTranscriptome');"&gt;
                        Whole Transcriptome
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                         # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numWholeTranscriptome" name="numWholeTranscriptome" style="width: 100px;" disabled="disabled" aria-labelledby="wholeTranscriptome"&gt;                        
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/label&gt;
                &lt;br&gt;                
                &lt;label class="form-label full-width" for="targetTrabscriptome"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                       &lt;input type="checkbox" id="targetTrabscriptome" name="targetTranscript" value="targetTranscript" ng-click="processOtherValue('targetTrabscriptome', 'numTargetedTranscriptome');"&gt;
                        Targeted Transcriptome                     
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                         # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numTargetedTranscriptome" name="numTargetedTranscriptome" style="width: 100px;" disabled="disabled" aria-labelledby="targetTrabscriptome"&gt;                         
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/label&gt;
                &lt;br&gt;                
                &lt;label class="form-label full-width" for="epigenomicMark" ng-click="processOtherValue('', '');"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                        &lt;input type="checkbox" id="epigenomicMark" name="epigMarks" value="epigMarks" ng-click="processOtherValue('epigenomicMark', 'numEpigenomic');"&gt;
                        Epigenomic Marks                    
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                         # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numEpigenomic" name="numEpigenomic" style="width: 100px;" disabled="disabled" aria-labelledby="epigenomicMark"&gt;                        
                    &lt;/div&gt;
                  &lt;/div&gt;                  
                &lt;/label&gt;
                &lt;br&gt;                
                &lt;label class="form-label full-width" for="sanger"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                       &lt;input type="checkbox" id="sanger" name="sanger" value="sanger" ng-click="processOtherValue('sanger', 'numSanger');"&gt;
                        Sanger                     
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                         # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numSanger" name="numSanger" style="width: 100px;" disabled="disabled" aria-labelledby="sanger"&gt;                      
                    &lt;/div&gt;
                  &lt;/div&gt;                  
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label full-width" for="rrna"&gt;
                  &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                       &lt;input type="checkbox" id="rrna" name="rRna" value="rRna" ng-click="processOtherValue('rrna', 'numRrna');"&gt;
                        16S rRNA                     
                    &lt;/div&gt;
                    &lt;div class="col-md-6"&gt;
                          # of Samples
                       &lt;input placeholder="Specify Number" type="text" class="form-control input-xs inline-form-input" 
                         id="numRrna" name="numRrna" style="width: 100px;" disabled="disabled" aria-labelledby="rrna"&gt;                       
                    &lt;/div&gt;
                  &lt;/div&gt;                  

                &lt;/label&gt;                                
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- Analysis --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="analysisId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Analysis [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label" for="association"&gt;
                &lt;input type="checkbox" id="association" name="linkage" value="linkage"&gt; 
                  Association/Linkage
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="arrayDerivedExpression"&gt;
                &lt;input type="checkbox" id="arrayDerivedExpression" name="arrayDeriveExp" value="arrayDeriveExp"&gt;
                  Array Derived Expression
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="rnaExpression"&gt;
                &lt;input type="checkbox" id="rnaExpression" name="seqDeriveExp" value="seqDeriveExp"&gt;
                  RNA Seq Derived Expression
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="derivedMethylation"&gt;
                &lt;input type="checkbox" id="derivedMethylation" name="arrayDeriveMethyl" value="arrayDeriveMethyl"&gt;
                  Array Derived Methylation
                &lt;/label&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5"&gt;Other&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label label-hidden" for="otherAnalysis"&gt;Check:&lt;/label&gt;
                &lt;input type="checkbox" id="otherAnalysis" name="otherType" 
                  ng-click="processOtherValue('otherAnalysis', 'spcifiedOtherAnalysis');"&gt;
                
                  &lt;label class="form-label" for="spcifiedOtherAnalysis"&gt;Other&lt;/label&gt;
                  &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                         id="spcifiedOtherAnalysis" name="otherTypeText" disabled="disabled" aria-labelledby="otherAnalysis"&gt;
                
              &lt;/div&gt;
            &lt;/div&gt;          
            &lt;!-- Data Form --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="dataFormId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Data Form [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label" for="individual"&gt;
                &lt;input type="checkbox" id="individual" name="individual" value="individual"&gt;
                  Individual
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="aggregate"&gt;
                &lt;input type="checkbox" id="aggregate" name="aggregate" value="aggregate"&gt;
                  Aggregate
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="notApplicableDataForm"&gt;
                &lt;input type="checkbox" id="notApplicableDataForm" name="na" value="na" ng-click="toggleNotApplicable()"&gt;
                  Not Applicable
                &lt;/label&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- Data Form --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="dataRepositoryId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Data Repository [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label" for="arrayExpress"&gt;
                &lt;input type="checkbox" id="arrayExpress" name="arrayExpress" value="arrayExpress"&gt;
                  Array Express
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="cancerGenomics"&gt;
                &lt;input type="checkbox" id="cancerGenomics" name="cancerHub" value="cancerHub"&gt;
                  Cancer Genomics Hub
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="clinVar"&gt;
                &lt;input type="checkbox" id="clinVar" name="clinVar" value="clinVar"&gt;
                  ClinVar
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="dbGap"&gt;
                &lt;input type="checkbox" id="dbGap" name="dbGap" value="dbGap"&gt;
                  Database of Genotypes and Phenotypes (dbGaP)
                &lt;/label&gt;   
                &lt;br&gt;
                &lt;label class="form-label" for="dbSnp"&gt;
                &lt;input type="checkbox" id="dbSnp" name="dbSNP" value="dbSNP"&gt;
                  Database of Short Generic Variants (dbSNP)
                &lt;/label&gt; 
                &lt;br&gt;
                &lt;label class="form-label" for="dbVar"&gt;
                &lt;input type="checkbox" id="dbVar" name="dbVar" value="dbVar"&gt;
                  Database of Genomic Structure Variation
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="ena"&gt;
                &lt;input type="checkbox" id="ena" name="ena" value="ena"&gt;
                  European Nucleotide Archive (ENA)
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="geo"&gt;
                &lt;input type="checkbox" id="geo" name="geo" value="geo"&gt;
                  Gene Expression Omnibus (GEO)
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="mgi"&gt;
                &lt;input type="checkbox" id="mgi" name="mgi" value="mgi"&gt;
                  Mouse Genome Informatics (MGI)
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="genBank"&gt;
                &lt;input type="checkbox" id="genBank" name="genBank" value="genBank"&gt;
                  GenBank
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="traceArchive"&gt;
                &lt;input type="checkbox" id="traceArchive" name="traceArchive" value="traceArchive"&gt;
                  Trace Archive
                &lt;/label&gt;                
                &lt;br&gt;
                &lt;label class="form-label" for="wormbase"&gt;
                &lt;input type="checkbox" id="wormbase" name="wormBase" value="wormBase"&gt;
                  WormBase
                &lt;/label&gt;                     
                &lt;br&gt;
                &lt;label class="form-label" for="sra"&gt;
                &lt;input type="checkbox" id="sra" name="sra" value="sra"&gt;
                  Sequence Read Archive (SRA)
                &lt;/label&gt;  
                &lt;br&gt;
                &lt;label class="form-label" for="zfin"&gt;
                &lt;input type="checkbox" id="zfin" name="zfin" value="zfin"&gt;
                  Zebrafish Model Organism Database (ZFIN)
                &lt;/label&gt; 
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="OtherRepository"&gt;Check:&lt;/label&gt;
                &lt;input type="checkbox" id="OtherRepository" name="otherRepository" value="otherRepository"
                    ng-click="processOtherValue('OtherRepository', 'specifiedRepository');"&gt;
                
                &lt;label class="form-label" for="specifiedRepository"&gt;Other&lt;/label&gt;
                &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                       id="specifiedRepository" name="otherRepositoryText" disabled="disabled"&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- Companion Information --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="companionInfoId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Companion Information [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label label-hidden" for="phenotype"&gt;Check:&lt;/label&gt;
                &lt;input type="checkbox" id="phenotype" name="phenotype" value="phenotype"&gt;
                  Phenotype &amp;nbsp;&amp;nbsp;&lt;a href="" data-toggle="popover"  data-trigger="focus"  data-content="Data pertinent to the interpretation of genomic data, including the minimal phenotype information needed to reproduce the primary analysis, such as associated phenotype data (e.g., clinical information), exposure data, relevant metadata, and descriptive information (e.g., protocols or methodologies used) will be shared. Individual-level Phenotype data will include."&gt;&lt;img src="contextual_help.png" width="20px" height="20px" Alt="Help" Title="Help"/&gt;&lt;/a&gt;
                
                &lt;br&gt;
                &lt;label class="form-label" for="exposure"&gt;
                &lt;input type="checkbox" id="exposure" name="exposure" value="exposure"&gt;
                  Exposure
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="surveyTool"&gt;
                &lt;input type="checkbox" id="surveyTool" name="surveyTool" value="surveyTool"&gt;
                  Survey Tool
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="clinicalData"&gt;Check:&lt;/label&gt;
                  &lt;input type="checkbox" id="clinicalData" name="clinicData" value="clinicData"
                    ng-click="processOtherValue('clinicalData', 'specifiedClinicalData');"&gt;
                    &lt;label class="form-label" for="specifiedClinicalData"&gt;Clinical Data&lt;/label&gt;
                    &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                      id="specifiedClinicalData" name="clinicDataText" disabled="disabled"&gt;
                
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="protocol"&gt;Check:&lt;/label&gt;
                  &lt;input type="checkbox" id="protocol" name="protocol" value="protocol" 
                    ng-click="processOtherValue('protocol', 'specifiedProtocol');"&gt;
                    &lt;label class="form-label" for="specifiedProtocol"&gt;Study/Protocol&lt;/label&gt;
                    &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                       name="protocolText" id="specifiedProtocol" disabled="disabled"&gt;
                                
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="instrument"&gt;Check:&lt;/label&gt;
                  &lt;input type="checkbox" id="instrument" name="instrument" value="instrument" 
                    ng-click="processOtherValue('instrument', 'specifiedInstrument');"&gt;
                    &lt;label class="form-label" for="specifiedInstrument"&gt;Data Collection Instrument&lt;/label&gt;
                    &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                       name="instrumentText" id="specifiedInstrument" disabled="disabled"&gt;
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="otherCompanion"&gt;Check:&lt;/label&gt;
                  &lt;input type="checkbox" id="otherCompanion" name="otherCompanion" value="otherCompanion"
                    ng-click="processOtherValue('otherCompanion', 'specifiedCompanion');"&gt;
                    &lt;label class="form-label" for="specifiedCompanion"&gt;Other&lt;/label&gt;
                    &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                       id="specifiedCompanion" name="otherCompanionText" disabled="disabled"&gt;              
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/form&gt;
        &lt;/fieldset&gt;
        &lt;!-- Submission Information --&gt;
        &lt;fieldset class="scheduler-border"&gt;
          &lt;legend class="scheduler-border"&gt;Submission Information&lt;/legend&gt;
          &lt;form class="form-horizontal"&gt;
            &lt;!-- dataCheck --&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="dataSubmissionId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Data Submission and Release Timeline &lt;div style="white-space: auto;"&gt;[Check all that apply]&lt;/div&gt;&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label label-hidden" for="dataCheck"&gt;Check:&lt;/label&gt;
                &lt;input type="checkbox" id="dataCheck" name="cleanAnalysis" value="cleanAnalysis"&gt;
                  Following data cleaning, analysis, and quality checks
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="publication"&gt;Check:&lt;/label&gt;
                &lt;input type="checkbox" id="publication" name="publication" value="publication"&gt;
                  At the time of publication
                &lt;br&gt;
                &lt;label class="form-label label-hidden" for="otherSubmission"&gt;Check:&lt;/label&gt;
                  &lt;input type="checkbox" id="otherSubmission" name="otherSubmission"  value="otherSubmission"
                    ng-click="processOtherValue('otherSubmission', 'psecifiedOtherSubmission');"&gt;
                    &lt;label class="form-label" for="psecifiedOtherSubmission"&gt;Other&lt;/label&gt;
                    &lt;input placeholder="Please Specify" type="text" class="form-control input-xs inline-form-input" 
                       id="psecifiedOtherSubmission" name="otherSubmissionText" disabled="disabled"&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="form-group"&gt;
              &lt;label class="control-label col-md-5" id="dataUseId"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Data Use Limitation [Check all that apply]&lt;/label&gt;
              &lt;div class="col-md-6 align-checkboxes"&gt;
                &lt;label class="form-label label-hidden" for="noHumanData"&gt;Check:&lt;/label&gt;
                &lt;input type="checkbox" id="noHumanData" name="noHumanData" value="noHumanData"  ng-click="toggleNoHumanData()"&gt;
                  Not Applicable, no human data
                &lt;br&gt;
                &lt;label class="form-label" for="noLimitation"&gt;
                &lt;input type="checkbox" id="noLimitation" name="noUseLimitation" value="noUseLimitation"&gt;
                  No data use limitations
                &lt;/label&gt;
                &lt;br&gt;
                &lt;label class="form-label" for="limitedOnly"&gt;
                &lt;input type="checkbox" id="limitedOnly" name="limitedOnly" value="limitedOnly"&gt;
                  Limited only by the terms of the Data Use Certification
                &lt;/label&gt;
                &lt;br&gt;                
                &lt;label class="form-label" for="limitedPurpose"&gt;
                &lt;input type="checkbox" id="limitedPurpose" name="limitToHealth" value="limitToHealth"&gt;
                  Limited to health/medical/biomedical purposes 
                  &lt;br&gt;
                  &lt;span style="display: inline-block; margin-left: 16px"&gt;
                   (doesn't include the study of population origins or ancestry)
                  &lt;/span&gt;
                &lt;/label&gt;
                &lt;br&gt;                      
                &lt;label class="form-label" for="relateToDisease"&gt;
                &lt;input type="checkbox" id="relateToDisease" name="relateToDisease" value="relateToDisease"&gt;
                  Must be related to the specified disease
                &lt;/label&gt;
              &lt;/div&gt;
            &lt;/div&gt;            
          &lt;/form&gt;
        &lt;/fieldset&gt;
        &lt;fieldset class="scheduler-border" id="pre_comments_div1" style="display:none;"&gt;
            &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Approval Status&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
            &lt;div id="commentReviewId2"&gt;&lt;/div&gt;
        &lt;/fieldset&gt;
        &lt;div class="clearfix"&gt;
          &lt;div id="regularSubmit" class="pull-right"&gt;
            &lt;input type="button" class="btn btn-primary btn-sm btn-form" name="saveBt"   value="SAVE" ng-click="submitSaveRequest()"/&gt;
            &lt;input type="button" class="btn btn-primary btn-sm btn-form" name="submitBt" value="SUBMIT" ng-click="loadRequestConfirm();"/&gt;
            &lt;input type="button" class="btn btn-primary btn-sm btn-form" name="cancelBt" value="CANCEL" ng-click="closeModal()"/&gt;
          &lt;/div&gt;
          &lt;div id="resubmit" style="display:none;" class="pull-right"&gt;
            &lt;input type="button" class="btn btn-primary btn-sm btn-form" name="submitBt" value="SUBMIT" ng-click="loadResubmitConfirm()"/&gt; 
            &lt;input type="button" class="btn btn-primary btn-sm btn-form" name="cancelBt" value="CANCEL" ng-click="closeModal()"/&gt;
          &lt;/div&gt;          
        &lt;/div&gt;
             &lt;input type='hidden' id='ccr_id'/&gt;
             &lt;input type='hidden' id='saved_id'/&gt;
             &lt;input type='hidden' id='gds_id'/&gt;
          &lt;/div&gt;
       &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="confirmSubmitDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="message1"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesConfirm" 
                type="button" class="btn btn-primary" 
                style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoConfirm" 
                type="button" class="btn btn-default" 
                style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="confirmResubmitDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="message2"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesResubmitConfirm" 
                type="button" class="btn btn-primary active" 
                style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoResubmitConfirm" 
                type="button" class="btn btn-default active" 
                style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="informationDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="infoOk" class="modal-title"&gt;Information&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="message3"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnOkInfo" 
                type="button" class="btn btn-default active" 
                style="text-align: left;" data-dismiss="modal"&gt;OK&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-609293538</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b0576a31db2b5b00b86770c08c961985</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164dd7c15970000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS Data Entry Section</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>ba172abd2ee75b002cd8d5825d6aacce</update_guid>
<update_guid_history>ba172abd2ee75b002cd8d5825d6aacce:-609293538,3896eebd13e75b007cef99dfe13f17b9:1000042250,d51662bde8e75b008bdd3d4e5578f928:767342936,caf5aef141e75b0026384f929314081e:1063446621,44f526bdabe75b00bd4a6c05d2619da9:-689816502,118526bd65e75b00f2890478fbf377a2:-2002810223,5b2562bd89e75b0068882e4dbcc68d22:-1389337154,352422f5ebe75b00a2c386c84446e983:1208087378,17c3ee3d08e75b00dc852a6b4223a4fd:-2103767364,69fb9af525e75b005e180f9ea2f3796d:222689904,84fb1af5f5e75b00a5423e8fe03e98aa:-1410207825,2d2b12f5eee75b004ac7a922a85bc678:483322063,710bdeb58de75b00778fa8026355b141:1063212623,080b56b1cfe75b007fd3b59f137f9bb0:1332806612,a9cafa499ba39700cfecac3e7121a894:-1232289858,c01afac5dda397008ea7c0bda67b26bc:242287843,2dd8b685bda39700520d7148cb0bf033:-1289298332,8b38fe85faa397004b7f7773f711e4f2:1005474059,81b7360545a397005f44bf58577801a4:871791660,89f6fe05b0a397004d702c331f01bd83:788309330,782aab3cda2b57007ff842d32a279ab4:-398540179,0c8827f8d62b57000c95ec83c8262837:1998782636,6d3663b83b2b5700a532c8ffade3a2fd:103503850,3785ab384c2b57000b68a9688a86fe0d:892915106,7b352f38992b570034b4e084a4d724e2:-1902638799,b003e7f0622b57000c230e30921a4049:-16135549,0132ebb4c72b57005d138d70a984f3a1:-163356144,93f063b0582b5700cb8a2b866450cadd:-1742984851,00e9aaafccdf530076f9458d69583a41:648205813,3579e22712139300149458cae8cc46df:-1438615835,c6e8eea3c9139300a9687e48decc7d58:-239803667,b8e82aaf2adf53009a58d929c65030c2:1001113407,ffd866e3fb1393000a9bcb41aa3a0bca:1462884797,6288a6af29df5300ef37364ac66b2eb6:1750450441,128866e34f139300b6a2f7b30a81ccbc:-1010823324,9b2862effadf530095ff60baf1af408d:-1616497883,f128eea3a31393002c9d26e77c267250:1690659918,1a132aef58df5300658074a5f2cc4c80:737723741,cd13a6ef1bdf5300b500582e252cc92b:-780625756,87e2a6ef17df530061cb19c12d517024:737723741,01c262ef79df53001b8aa35944642084:-59064865,56a222ef5ddf53003301a503fef03450:2073932607,2732226f1bdf5300fd65d677e2e5b5cd:458404064,66126a6f50df530015d7d8c4b32bf595:773926114,58f16a6f2cdf53007d88c14fac490f8d:-540094193,02d12a6f62df5300157a4319dfff6de9:860054941,23616a6f90df530089b8646db1299e86:2076104443,c5612a6f8ddf5300838e4c8c00fd88e1:-1384431769,632126e7d8df530037eba5cf244db0f6:-1699953819,51d0ae2f36df5300180eaea3b67aba01:-1814984334,c8d02ae774df5300738af77673c4eafe:-1370709445,d9089e676bdf5300e14f12d653dfe8f5:-1222608847,a7b71e6760df5300a399cd233f02e4a9:1483428606,04b71663a2df5300c6b44bbd49707223:-549413137,a57792a301df5300e35b67324551884c:741867690,42679267d6df530016164419e7cef821:-549413137,2547dea360df530021b69441285ec612:-191868439,38c6d6a36ddf53000a4001fda6db922e:-1661116921,ec1652276edf5300aa1373a18c6dbd64:-1031397938,a795d6a345df5300b4c61f0390cd249e:-2065690512,f55596e35ddf5300941287a19cda6b45:193745330,a1f41a6372df5300ed77136f564b0c0b:-810848177,a3a41a6397df53003bfb7d072588abf2:-695582838,f5a41a639adf5300d4e879468b31ae05:1973248833,27749663d4df53002247abebaa13374b:2024130178,a324deab7a9f53002b4b2456810581b0:-1431330021,98b3d6eb209f5300243a7d6ad4604375:-466421861,4ba31a23ffdf53005f37d2bdbd2f3e59:795735163,9873d66f279f5300bc3d609c7c1ea8c4:-875598471,37f25623d7df5300da4d902b20c28724:-51627068,7de2562376df5300b8e4ae0dee502dc0:-2097943002,0b821a2371df53005c9d23b41920e851:-1109574234,0f62d623b4df53003af28bc391695825:-895904145,e032562316df53009f503102236b131c:-602934733,8fe1deab4b9f5300879ca58fe982b456:1640369573,ff71daa7d39f53004a36cd1eb04e7b46:1373912427,020d2695ad1b9300c91aedc0701d4220:2144170807,6218979fefde8300642f26ce1395ce12:-681045488,020d2695ad1b9300c91aedc0701d4220:2144170807,020d2695ad1b9300c91aedc0701d4220:2144170807,6218979fefde8300642f26ce1395ce12:-681045488,6218979fefde8300642f26ce1395ce12:-681045488,6218979fefde8300642f26ce1395ce12:-681045488,6218979fefde8300642f26ce1395ce12:-681045488,6218979fefde8300642f26ce1395ce12:-681045488</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_218ab530dbd2720054d8ff621f96194c</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="GDSP css dependencies">bf2a7130dbd2720054d8ff621f96195d</sp_dependency><sp_widget display_value="GDSP Report Page Content">01160574db12720054d8ff621f96192a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2017-04-20 19:14:43</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>218ab530dbd2720054d8ff621f96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GDSP css dependencies.GDSP Report Page Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_218ab530dbd2720054d8ff621f96194c</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2017-04-20 19:14:43</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>2009698852</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b4576a31db2b5b00b86770c08c961916</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b41c6b090000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP css dependencies.GDSP Report Page Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>103f415742df1300897d0d04505a4456</update_guid>
<update_guid_history>103f415742df1300897d0d04505a4456:2009698852,771920577:771920577</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_73d41fb8dbe7570054d8ff621f9619f0</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS PSO IC table">613dc09cdb284340f59974131f96194d</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:30:15</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>73d41fb8dbe7570054d8ff621f9619f0</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS PSO IC table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_73d41fb8dbe7570054d8ff621f9619f0</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:30:15</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-75961022</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b4576a31db2b5b00b86770c08c961919</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3323e00000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS PSO IC table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>7bd41fb879e757007ea27f6e4694eff1</update_guid>
<update_guid_history>7bd41fb879e757007ea27f6e4694eff1:-75961022</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_f8951bf8dbe7570054d8ff621f9619aa</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP GPA Approval Table">d87f513bdb027e00f59974131f96199c</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:33:20</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>f8951bf8dbe7570054d8ff621f9619aa</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP GPA Approval Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_f8951bf8dbe7570054d8ff621f9619aa</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:33:20</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1415155348</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b4576a31db2b5b00b86770c08c96191c</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3ef8b80000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP GPA Approval Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>01d79f7c74e757008da2b7c3410f7b31</update_guid>
<update_guid_history>01d79f7c74e757008da2b7c3410f7b31:-1415155348,f0951bf889e75700198f6ab03e8441ac:158138616</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_js_include_33d1d91fdbdf130054d8ff621f961920</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_js_include"><sp_js_include action="INSERT_OR_UPDATE"><display_name>JSPSF</display_name><source>local</source><sys_class_name>sp_js_include</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 20:07:27</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>33d1d91fdbdf130054d8ff621f961920</sys_id><sys_mod_count>0</sys_mod_count><sys_name>JSPSF</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_ui_script display_value="jspdfCDN">04b105016ff6d2000a09034abb3ee437</sys_ui_script><sys_update_name>sp_js_include_33d1d91fdbdf130054d8ff621f961920</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 20:07:27</sys_updated_on><url/></sp_js_include></record_update>]]></payload>
<payload_hash>610924888</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b4576a31db2b5b00b86770c08c961981</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b4278be00000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>JSPSF</target_name>
<type>JS Include</type>
<update_domain>global</update_domain>
<update_guid>12f1191f25df1300f86f4feb70eaf4e4</update_guid>
<update_guid_history>12f1191f25df1300f86f4feb70eaf4e4:610924888</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_7d1ee2f1dbfffa0054d8ff621f96195e</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, spUtil, $http) {
  /* widget controller */
  var c = this;
	var my_sys_id = c.data.info.userId;
	var sessionId = c.data.info.session_id;
  c.data.noResult = '0';
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns = [
	 {
			key: 'selection',
			label: 'Selection',
			sort: 'null'
		},
		{
			key: 'employ_id',
			label: 'Employ Number',
			sort: 'asc'
		},
		{
			key: 'first_name',
			label: 'First Name',
			sort: 'asc'
		},
		{
			key: 'last_name',
			label: 'Last Name',
			sort: 'asc'
		},		
		{
			key: 'email',
			label: 'Email',
			sort: 'asc'
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.users.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.users = c.data.users.sort(compareRows);
		}
	};
	
	c.resetPageNumber = function() {
		c.pagination.currentPage = 0;
	};
	
  // JS script for Search User Widget
	$scope.search = function (){
		$('#searchButton').attr('disabled', 'disabled');
		var firstName = $('#first_name').val();
		var lastName = $('#last_name').val();
		c.pagination.currentPage = 0;
    var data = {
			first_name:   firstName,
			last_name:   lastName
		};
		var request = {
			method: 'GET',
			url: '/api/naci/gds/searchUser',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			params: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;

			if(result == null || result.length &lt;= 0){
			  $('#noResult').show();
			}else{
				c.data.users = result;
	      $('#noResult').hide();
			}	
			$('#searchButton').removeAttr('disabled');
			//populate data into submission form
			console.log(result);
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}
  
	$scope.closeUserSelection = function(){
		c.data.users = [];
		$('#userSelection').modal('hide');
	}
	$scope.selectUser = function(){
		var selectedValue = $('input[name=selection]:checked').val();
		if(selectedValue == null || selectedValue.trim().length &lt;= 0){
				$('#userError').html("&lt;font color='red'&gt;Please select a user&lt;/font&gt;");
			  $('#userError').show();
		}else{
			 $('#userError').hide();
			var value = parseUserString(selectedValue);
			var type = $('#userPageType').val();
			if(type == 'user'){
				$('#userFirstName').val(value[1]);
				$('#userLastName').val(value[2]);
				$('#userName').val(value[1] + " " + value[2]);
				$('#selectedUserData').val(selectedValue);
			}else if(type == 'data'){
				$('#investigator').val(value[1] + " " + value[2]);		
				$('#email').val(value[3]);
				$('#phone').val(value[4]);
				$('#selectedUserData').val(value[0]);
			}else if(type == 'gdsInfo'){
				$('#piFirstName').val(value[1]);
				$('#piLastName').val(value[2]);
                $('#piName').val(value[1] + " " + value[2]);
				$('#piEmail').val(value[3]);
				$('#piPhone').val(value[4]);
				$('#selectedUserData').val(value[0]);
			}	
			
			$scope.closeUserSelection();
		}	
	}
	function parseUserString(str){
		var temp = str.split("+");
    return temp;
	}
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.modal-dialog1 {
    width: 900px;
    margin: 30px auto;
    position: relative;
}

.legend{
/* css for agreement*/
font-family: Arial, Helvetica, sans-serif;
font-size:14px;
color:#566473;
font-weight: bold;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gsuw&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS Search User Widget&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id
	};
  data.users = [];
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-07-07 15:08:39&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;7d1ee2f1dbfffa0054d8ff621f96195e&lt;/sys_id&gt;&lt;sys_mod_count&gt;167&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS Search User Widget&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_7d1ee2f1dbfffa0054d8ff621f96195e&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-24 22:08:37&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
 &lt;br/&gt;
&lt;div id='userSelection' class='modal fade' data-keyboard="false" data-backdrop="static"&gt;
	&lt;div class="modal-dialog1"&gt;
  	&lt;div class="modal-content"&gt;
       &lt;div class="modal-header"&gt;
               &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                   &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
               &lt;/button&gt;
               &lt;h4 class="modal-title"&gt;NIH Directory Search&lt;/h4&gt;
       &lt;/div&gt;      
       &lt;div class="modal-body"&gt;   
       &lt;div class="row"&gt;
         &lt;div class="col-md-2"&gt;
           &lt;label for="first_name"&gt;First Name&lt;/label&gt;
         &lt;/div&gt;  
         &lt;div class="col-md-3"&gt;
           &lt;input type="text" id="first_name" size="20"/&gt;
         &lt;/div&gt;
         &lt;div class="col-md-2"&gt;
           &lt;label for="last_name"&gt;Last Name&lt;/label&gt;
         &lt;/div&gt;
         &lt;div class="col-md-3"&gt;
           &lt;input type="text" id="last_name" size="20"/&gt;
         &lt;/div&gt;
         &lt;div class="col-md-2"&gt;
           &lt;button type="button" id="searchButton" class="btn btn-primary" style="width: 70px; text-align: center;" ng-click="search();"&gt;Search&lt;/button&gt;
         &lt;/div&gt;
       &lt;/div&gt;      
       &lt;div class="row"&gt;
          &amp;nbsp;    
        &lt;/div&gt;  
       &lt;div class="row"&gt;
           &lt;div class="col-md-11" id="userError" style="display:none;"&gt;&lt;/div&gt;  
       &lt;/div&gt;
       &lt;div id="noResult" style="display:none;"&gt;
           Name not Found
       &lt;/div&gt;  
       &lt;div class="panel panel-success" ng-show="c.data.users.length &gt; 0"&gt;
           &lt;div class="panel-heading" id="heading_userItems" role="tab"&gt;
              &lt;h4 class="panel-title"&gt;
               &lt;a aria-controls="collapseUserItems" aria-expanded="true" data-target="#collapseUserItems" data-toggle="collapse" role="button"&gt;
                &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
                 Users &lt;span class="badge" id="ritm_count"&gt;{{ c.data.users.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
           &lt;/div&gt;

           &lt;div aria-labelledby="heading_userItems" class="panel-collapse collapse in" id="collapseUserItems" role="tabpanel"&gt;
              &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
                  &lt;thead&gt;
                  &lt;tr&gt;
                      &lt;th 
                         ng-repeat="column in c.columns track by $index" 
                         ng-click="c.toggleSort($index)" 
                         style="cursor: pointer"&gt;
                         {{ column.label }}
                         &lt;span 
                           class="glyphicon small" 
                           ng-class="{
                                    'glyphicon-chevron-up': column.sort === 'asc',
                                    'glyphicon-chevron-down': column.sort === 'desc'
                                   }"&gt;
                         &lt;/span&gt;
                      &lt;/th&gt;
                  &lt;/tr&gt;
                  &lt;/thead&gt;
                  &lt;tr ng-repeat="row in c.data.users track by $index"
                          ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                                   $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"&gt;
                      &lt;td&gt;&lt;center&gt;&lt;input type="radio" name="selection" id="selection" value='{{row.id}}+{{row.first_name}}+{{row.last_name}}+{{row.email}}+{{row.phone}}'/&gt;&lt;/center&gt;&lt;/td&gt; 
                        &lt;td class="ritm_number"&gt;{{ row.employ_id }}&lt;/td&gt;
                        &lt;td class="ritm_number"&gt;{{ row.first_name }}&lt;/td&gt;
                        &lt;td class="ritm_number"&gt;{{ row.last_name }}&lt;/td&gt;
                        &lt;td class="ritm_number"&gt;{{ row.email }}&lt;/td&gt;
                 &lt;/tr&gt;
                &lt;/table&gt;
                &lt;/div&gt; 
       
               &lt;!-- select the page size --&gt;
                &lt;form class="form-inline pull-right"&gt;
                  &lt;div class="pagination form-group"&gt;
                    &lt;label for="pageSize"&gt;
                      Items per page
                    &lt;/label&gt;

                    &lt;select 
                      id="pageSize" 
                      class="form-control"
                      style="display: inline"
                      ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                      ng-model="c.pagination.currentSize"
                      ng-options="sizes for sizes in c.pagination.pageSizes"
                      ng-change="c.resetPageNumber()"&gt;
                    &lt;/select&gt;
                  &lt;/div&gt;
                &lt;/form&gt;  
                &lt;!-- select the page index (offset) --&gt;
                &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.users.length"&gt;
                  &lt;li
                    ng-repeat="index in c.getRange() track by $index"
                    ng-click="c.setPage($index)"
                    &gt;
                    &lt;a href=""&gt;
                      {{ $index + 1 }}
                    &lt;/a&gt;
                  &lt;/li&gt;
                &lt;/ul&gt;
                &lt;br&gt;&lt;br&gt;&lt;br&gt;
         		&lt;div class="row pull-right" &gt;
                	&lt;button type="button" class="btn btn-primary" style="width: 70px; text-align: center;" ng-click="selectUser();"&gt;Select&lt;/button&gt;
                  &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
                  &lt;button type="button" class="btn btn-primary" style="width: 70px; text-align: center;" ng-click="closeUserSelection();"&gt;Cancel&lt;/button&gt;
         				  &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
         					&lt;/div&gt;
                &lt;/div&gt;          
                &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
                &lt;input type='hidden' id='userPageType'/&gt;
      &lt;/div&gt;
      &lt;/div&gt;
  &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1624735160</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b4576a31db2b5b00b86770c08c961984</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce5644a40000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS Search User Widget</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>f5ad5bf0e52b5700fda5f0b2eb84c9b0</update_guid>
<update_guid_history>f5ad5bf0e52b5700fda5f0b2eb84c9b0:1624735160,9a18979f7dde8300f0d4b62eb55a7d0b:1931279254,9a18979f7dde8300f0d4b62eb55a7d0b:1931279254</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_086417b8dbe7570054d8ff621f96195a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS IC question Widget">df8ca36edb2f360054d8ff621f9619dc</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:28:04</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>086417b8dbe7570054d8ff621f96195a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS IC question Widget</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_086417b8dbe7570054d8ff621f96195a</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:28:04</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>1397569657</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>b8576a31db2b5b00b86770c08c961915</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3126900000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS IC question Widget</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>006417b884e757001516eedf11e6255c</update_guid>
<update_guid_history>006417b884e757001516eedf11e6255c:1397569657</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_6d945bb8dbe7570054d8ff621f9619e9</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS PI Sign Table">1a0e411ddbf64f00f59974131f96194e</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:29:00</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>6d945bb8dbe7570054d8ff621f9619e9</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS PI Sign Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_6d945bb8dbe7570054d8ff621f9619e9</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:29:00</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-896823496</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b8576a31db2b5b00b86770c08c961918</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce31ff2e0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS PI Sign Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>e9949bb8b4e7570050e0aac9293f5867</update_guid>
<update_guid_history>e9949bb8b4e7570050e0aac9293f5867:-896823496</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_dd6597f8dbe7570054d8ff621f961969</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Data Entry Section">5bf38bfddb4e7a0054d8ff621f961914</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:32:32</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>dd6597f8dbe7570054d8ff621f961969</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Data Entry Section</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_dd6597f8dbe7570054d8ff621f961969</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:32:32</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1061185947</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b8576a31db2b5b00b86770c08c96191b</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3acfcc0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Data Entry Section</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>6ac69ff8a5e757008b8148055ea6ff1e</update_guid>
<update_guid_history>6ac69ff8a5e757008b8148055ea6ff1e:-1061185947,d56597f8cae75700efdf8a57cfff836b:512108017</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_5dd52f37dbfd3600f59974131f9619e7</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($rootScope, $scope, $http, spUtil, $timeout) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};
	c.columns = [
		{
			key: 'project_id',
			label: 'Project ID',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'principal_investigator',
			label: 'Principal Investigator',
			sort: 'asc'
		},
		{
			key: 'gdsp_status',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'ic_status',
			label: 'IC ID',
			sort: 'asc'
		},
		{
			key: 'exception_request_status',
			label: 'Exception Request ID',
			sort: 'asc'
		},
		{
			key: 'submitter',
			label: 'Submitter',
			sort: 'asc'
		},
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.floor(c.data.tasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.tasks = c.data.tasks.sort(compareRows);
		}
	};
	//Above is Brian's code, need to read it
	$('.collapse').on('shown.bs.collapse', function() {
    console.log(this);
    $(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
  }).on('hidden.bs.collapse', function() {
		$(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
  });
	c.removeItem = function(id) {
		$('#refresh').val('0');
		var $confirm = $('#confirmDiv');
		$confirm.modal('show');
		$('#message').html("Are you sure you want to remove this record?");
		$('#btnYesConfirmYesNo').off('click').click(function() {
			$('#loading').show();
			var data = {
				'id': id,
				'method': 'anything'
			};
			
			var request = {
				method: 'POST',
				url: '/api/naci/gds/deleteGDSRecord',
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
			};			
			
			$http(request).then(handleResponse, handleError);
			
			function handleResponse(response) {
				var result = response.data.result;
				console.log(result);
			}
			
			function handleError(response) {
				console.error(response);
				alert('ERROR');
			}
			
			$confirm.modal('hide');
			$('#loading').hide();
		});
		
		$('#btnNoConfirmYesNo').off('click').click(function(){			
			$confirm.modal('hide');
		});
	};
	
	c.editItem = function(id, access) {
		 $('#refresh').val('0');
			location.replace("$sp.do?id=gds_web_main&amp;itemId=" + id +"&amp;access=" + encodeDecodeData(access, 'encode'));
	};
	
	spUtil.recordWatch($scope, "u_software_solution_gds_project_information", "", function(name, data) {  
		spUtil.update($scope);
	});
	
	function encodeDecodeData(data, flag){
		var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
								encode:function(e){
									var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);
									while(f&lt;e.length){
										n=e.charCodeAt(f++);
										r=e.charCodeAt(f++);
										i=e.charCodeAt(f++);
										s=n&gt;&gt;2;
										o=(n&amp;3)&lt;&lt;4|r&gt;&gt;4;
										u=(r&amp;15)&lt;&lt;2|i&gt;&gt;6;
										a=i&amp;63;
										if(isNaN(r)){
											u=a=64
										}else if(isNaN(i)){
											a=64
										}
										t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);
									}
									return t
								},
								decode:function(e){
									var t="";
									var n,r,i;
									var s,o,u,a;
									var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");
									while(f&lt;e.length){
										s=this._keyStr.indexOf(e.charAt(f++));
										o=this._keyStr.indexOf(e.charAt(f++));
										u=this._keyStr.indexOf(e.charAt(f++));
										a=this._keyStr.indexOf(e.charAt(f++));
										n=s&lt;&lt;2|o&gt;&gt;4;
										r=(o&amp;15)&lt;&lt;4|u&gt;&gt;2;
										i=(u&amp;3)&lt;&lt;6|a;
										t=t+String.fromCharCode(n);
										if(u!=64){
											t=t+String.fromCharCode(r);
										}
										if(a!=64){
											t=t+String.fromCharCode(i);
										}
									}
									t=Base64._utf8_decode(t);
									return t;
								},
								_utf8_encode:function(e){
									e=e.replace(/rn/g,"n");
									var t="";
									for(var n=0;n&lt;e.length;n++){
										var r=e.charCodeAt(n);
										if(r&lt;128){
											t+=String.fromCharCode(r);
										}else if(r&gt;127&amp;&amp;r&lt;2048){
											t+=String.fromCharCode(r&gt;&gt;6|192);
											t+=String.fromCharCode(r&amp;63|128)
										}else{
											t+=String.fromCharCode(r&gt;&gt;12|224);
											t+=String.fromCharCode(r&gt;&gt;6&amp;63|128);
											t+=String.fromCharCode(r&amp;63|128);
										}
									}
									return t;
								},
								_utf8_decode:function(e){
									var t="";
									var n=0;
									var r=0,c1=0,c2=0;
									while(n&lt;e.length){
										r=e.charCodeAt(n);
										if(r&lt;128){
											t+=String.fromCharCode(r);
											n++;
										}else if(r&gt;191&amp;&amp;r&lt;224){
											c2=e.charCodeAt(n+1);
											t+=String.fromCharCode((r&amp;31)&lt;&lt;6|c2&amp;63);
											n+=2;
										}else{
											c2=e.charCodeAt(n+1);
											c3=e.charCodeAt(n+2);
											t+=String.fromCharCode((r&amp;15)&lt;&lt;12|(c2&amp;63)&lt;&lt;6|c3&amp;63);
											n+=3;
										}
									}
									return t;
								}
							 };

		var result = '';
		if(flag == 'encode'){
			result = Base64.encode(data);
		}else if(flag == 'decode'){
			result = Base64.decode(data);
		}else{
			result = 'ERROR Method';
		}
		
		return result;
	}
}
]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css/&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-project-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS Project Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;true&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
		data.tasks = [];
		var my_sys_id = gs.getUserID();
		data.info = {
			userId: my_sys_id
		};
	  //search for project that this person has read or write access.
	  var gds_ids = [];
		var gl = new GlideRecord('u_gds_user_accress_t');
				gl.addQuery('u_user_id', my_sys_id);
				gl.query();
		while (gl.next()){
			var id = gl.getDisplayValue('u_gds_id');
			if(id != null || id.trim().length &gt; 0){
				gds_ids.push(gl.getDisplayValue('u_gds_id'));
			}
		}
		var gr = new GlideRecord('u_software_solution_gds_project_information');
		var tt = gr.addQuery('u_user_id', my_sys_id);
		gr.orderByDesc('u_number');
		if(gds_ids != null){
			for(var i = 0;  i &lt; gds_ids.length; i++){
				tt.addOrCondition('sys_id', gds_ids[i]);
			}
		}
		gr.query();
		while (gr.next()){
			var item = {};
			item.project_id = gr.getDisplayValue('u_number');
			item.project_name = gr.getDisplayValue('u_project_title');
			item.principal_investigator = gr.getDisplayValue('u_pi_last_name') + ", " + gr.getDisplayValue('u_pi_first_name'); 
			item.gdsp_status = gr.getDisplayValue('u_gdsp_status');
			item.ic_status = gr.getDisplayValue('u_ic_status');
			item.exception_request_status = gr.getDisplayValue('u_er_status');
			item.submitter = gr.getDisplayValue('u_submitter');
			item.id = gr.getValue('sys_id');
			//add access
			var gt = new GlideRecord('u_gds_user_accress_t');
			gt.addQuery('u_user_id', my_sys_id);
			gt.addQuery('u_gds_id', item.id);
			gt.query();
			gt.next();
			var access = gt.getDisplayValue('u_access');
			if(access == null || access.trim().length == 0){
				item.access='Read_and_Write';
			}else{
				item.access = access;
			}
			data.tasks.push(item);
		}

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-04-05 14:14:34&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;5dd52f37dbfd3600f59974131f9619e7&lt;/sys_id&gt;&lt;sys_mod_count&gt;279&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS Project Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_5dd52f37dbfd3600f59974131f9619e7&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:21:55&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[
&lt;div class="panel panel-success panel-area" ng-show="c.data.tasks.length &gt; 0"&gt;
  &lt;div class="panel-heading panel-header" id="heading_savedItems" role="tab"&gt;
    &lt;h4 class="panel-title"&gt;
      &lt;a aria-controls="collapsesavedItems" aria-expanded="true" data-target="#collapsesavedItems" data-toggle="collapse" role="button"&gt;
        &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
        Genomic Data Sharing Projects &lt;span class="badge" id="ritm_count"&gt;{{ c.data.tasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
  &lt;/div&gt;
  
  &lt;div aria-labelledby="heading_savedItems" class="panel-collapse collapse in" id="collapsesavedItems" role="tabpanel"&gt;
    &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
	  &lt;thead&gt;
      &lt;tr&gt;
        &lt;th 
            ng-repeat="column in c.columns track by $index" 
            ng-click="c.toggleSort($index)" 
            style="cursor: pointer"&gt;
        		{{ column.label }}
          	&lt;span 
            	class="glyphicon small" 
              ng-class="{
                        	'glyphicon-chevron-up': column.sort === 'asc',
                        	'glyphicon-chevron-down': column.sort === 'desc'
                        }"&gt;
          	&lt;/span&gt;
        &lt;/th&gt;
      &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tr ng-repeat="row in c.data.tasks track by $index"
          ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                   $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize" id='{{ row.project_id }}'&gt;
        &lt;td class="ritm_number"&gt;{{ row.project_id }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.principal_investigator }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.gdsp_status }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.ic_status }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.exception_request_status }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.submitter }}&lt;/td&gt;
        &lt;td ng-show="row.access == 'Read_and_Write'" style="white-space:nowrap;"&gt;
        	&lt;button class="btn btn-sm btn-primary active" ng-click="c.editItem(row.id, row.access)" style="width: 70px; text-align: center;"&gt;
          	View/Edit
         	&lt;/button&gt;
          &lt;button class="btn btn-sm btn-primary active" ng-click="c.removeItem(row.id)"style="width: 70px; text-align: center;"&gt;
            Remove
         	&lt;/button&gt;
       	&lt;/td&gt;
        &lt;td ng-show="row.access == 'Read_Only'" style="white-space:nowrap;"&gt;
        	&lt;button class="btn btn-sm btn-primary active" ng-click="c.editItem(row.id, row.access)" style="width: 70px; text-align: center;"&gt;
          	View
         	&lt;/button&gt; 
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
    &lt;!-- select the page size --&gt;
    &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize0"&gt;
                Items per page
              &lt;/label&gt;
              &lt;select 
                id="pageSize0" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                ng-model="c.pagination.currentSize"
                ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
          &lt;/div&gt;
    &lt;!-- select the page index (offset) --&gt;
     &lt;div class="paging-content"&gt;
    &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.tasks.length"&gt;
      &lt;li
        ng-repeat="index in c.getRange() track by $index"
        ng-click="c.setPage($index)"
        &gt;
        &lt;a href=""&gt;
          {{ $index + 1 }}
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div id="confirmDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="message"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesConfirmYesNo" 
                type="button" class="btn btn-primary"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoConfirmYesNo" 
                type="button" class="btn btn-default"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1928475141</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>b8576a31db2b5b00b86770c08c961983</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d2ad128a0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS Project Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>7e537b81fda797007440248c0ad67277</update_guid>
<update_guid_history>7e537b81fda797007440248c0ad67277:-1928475141,b395e7c5af679700e4fd5cf62617a0bf:-1509504287,a4d41bb8c4e757004035181209224ca6:-378722436,5a3bcffcc0a75700da5282aae91e1ccf:-1428010290,ba2bcb3050e75700cfe9e4e4da6b2d44:1167876277,b42bc77c02a75700d3aa4efbb4989660:1878723061,351b037035e75700a8d98bd170380d5a:2139327250,980bcb30d8e75700a733f2ed6182fbdc:1478890665,84ea8b3c9aa75700be74a2aee05b63d0:-1118232411,11da0b3063e75700c9e23f18d6391db8:1811542906,9a3ffaf4c8a757009847eb2f99ea03ee:1348135904,619655a3c11f5300d13d9a36a68788b2:-97827558,6d0e99471674130035a0fbeafa4345bc:-2112577570,6d0e99471674130035a0fbeafa4345bc:-2112577570,6d0e99471674130035a0fbeafa4345bc:-2112577570,f1fd1d47a574130081e69c9feaf6d852:1359676794,105724c04cb347006ed1411da6b9e2a4:537609717,4b3720002eb3470060ac9ecf12ba9695:-1842292365,9f072080ffb347007d21456468b2d623:1543173087,874cfcb261238300205a7e925377910d:577478997,554cf8f2d32383001f1c78681c4d66d9:1561082095,7549b072382383001d082e27fe166af1:-464358833,b239bc3233238300fc364b6b5d88aa3e:-2109770187,e42970724a2383002a6fedffde587e4b:-1125158089,7616f4fa94ef430047b32f3bf4ceab25:625899013,eca889b183a7cf001587ab0132193542:577478997,a0cc8e64783acb002ae02c68e98de5e3:129394605,c7ac0ee4723acb007471b85b8a9d2af1:-401888109,859c0628463acb008c6c03cd8c6ae26b:54521105,1ca5aa56632a87005593f9d537b3c61d:7524037,44d26ad2572a87003c8469599ae80d80:343581787,3381aa12402a87002def54ef33d251c1:-499965516,8ba02e12632a8700747fd0c07781e957:-1944885967,5218979f0ede8300c04cb770eedb6f05:-1554087865,5218979f0ede8300c04cb770eedb6f05:-1554087865,5218979f0ede8300c04cb770eedb6f05:-1554087865</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_dependency_js_include_9ef1191fdbdf130054d8ff621f9619e4</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_dependency_js_include"><m2m_sp_dependency_js_include action="INSERT_OR_UPDATE"><order>100</order><sp_dependency display_value="GDSP JSPDF include">622706f8dbd2720054d8ff621f96194d</sp_dependency><sp_js_include display_value="JSPSF">33d1d91fdbdf130054d8ff621f961920</sp_js_include><sys_class_name>m2m_sp_dependency_js_include</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 20:07:27</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>9ef1191fdbdf130054d8ff621f9619e4</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GDSP JSPDF include.JSPSF</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_dependency_js_include_9ef1191fdbdf130054d8ff621f9619e4</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 20:07:27</sys_updated_on></m2m_sp_dependency_js_include></record_update>]]></payload>
<payload_hash>-1964376392</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>bc576a31db2b5b00b86770c08c961914</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b4278c180000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<table/>
<target_name>GDSP JSPDF include.JSPSF</target_name>
<type>Dependency JS Includes</type>
<update_domain>global</update_domain>
<update_guid>16f1191f8ddf13001eb46137b6bc53e6</update_guid>
<update_guid_history>16f1191f8ddf13001eb46137b6bc53e6:-1964376392</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_5d131738dbe7570054d8ff621f9619c2</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS  IC Form Data Display">d79f1816dbd84f00f59974131f96190a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:22:26</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>5d131738dbe7570054d8ff621f9619c2</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS  IC Form Data Display</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_5d131738dbe7570054d8ff621f9619c2</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:22:26</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>514710547</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>bc576a31db2b5b00b86770c08c961917</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2bfc8e0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS  IC Form Data Display</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>551317382ce7570060fefbf1d9e776c4</update_guid>
<update_guid_history>551317382ce7570060fefbf1d9e776c4:514710547</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_bc63d1dfdbdf130054d8ff621f9619b0</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="dirPagination dependency">61c476cedb12360054d8ff621f961957</sp_dependency><sp_widget display_value="GDS ER Form Widget">5c99a62fdbbc070054d8ff621f9619a9</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 20:13:38</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>bc63d1dfdbdf130054d8ff621f9619b0</sys_id><sys_mod_count>0</sys_mod_count><sys_name>dirPagination dependency.GDS ER Form Widget</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_bc63d1dfdbdf130054d8ff621f9619b0</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 20:13:38</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-906782335</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>bc576a31db2b5b00b86770c08c96191a</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b42d329b0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>dirPagination dependency.GDS ER Form Widget</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>b463d1dff2df1300322796be05ab9ab2</update_guid>
<update_guid_history>b463d1dff2df1300322796be05ab9ab2:-906782335</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_43693e31db6d720054d8ff621f9619aa</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($rootScope, $scope, $http) {
	var c = this;
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;
	$('#refresh').val('0');
	window.setTimeout(function() {
		var userLocation = window.location.href;
		var temp = userLocation.split('&amp;');
		if(temp[1] != null){
			var ids = temp[1].split('=');
			var type = ids[0];
			var requestId = ids[1];
			if(type == 'gdsId'){
				type='GDS_IC';
				getGDSId(requestId);
			}else if(type == 'ic_itemId'){
				$('#collapseIC').collapse('show');
				$('#'+requestId).css('background-color', 'yellow');
			}
			//continue
		}
	}, 0)

	$scope.startGDS = function(){
		$('#refresh').val('0');
		location.replace("$sp.do?id=gds_web_main&amp;itemId=&amp;access=" + encodeDecodeData('Read_and_Write', 'encode'));
	}; 

	function getGDSId(requestId){
		var result = '';
		var req = {
			method: 'GET',
			url: '/api/naci/gds/getGDSbyRequestID',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			params: {requestId: requestId}
		};
		$http(req).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			//hightlight right record
			$('#'+result.gdsId).css('background-color', 'yellow');
			console.log(result);
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}		
		return result;
	}

	function encodeDecodeData(data, flag){
		var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
								encode:function(e){
									var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);
									while(f&lt;e.length){
										n=e.charCodeAt(f++);
										r=e.charCodeAt(f++);
										i=e.charCodeAt(f++);
										s=n&gt;&gt;2;
										o=(n&amp;3)&lt;&lt;4|r&gt;&gt;4;
										u=(r&amp;15)&lt;&lt;2|i&gt;&gt;6;
										a=i&amp;63;
										if(isNaN(r)){
											u=a=64
										}else if(isNaN(i)){
											a=64
										}
										t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);
									}
									return t
								},
								decode:function(e){
									var t="";
									var n,r,i;
									var s,o,u,a;
									var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");
									while(f&lt;e.length){
										s=this._keyStr.indexOf(e.charAt(f++));
										o=this._keyStr.indexOf(e.charAt(f++));
										u=this._keyStr.indexOf(e.charAt(f++));
										a=this._keyStr.indexOf(e.charAt(f++));
										n=s&lt;&lt;2|o&gt;&gt;4;
										r=(o&amp;15)&lt;&lt;4|u&gt;&gt;2;
										i=(u&amp;3)&lt;&lt;6|a;
										t=t+String.fromCharCode(n);
										if(u!=64){
											t=t+String.fromCharCode(r);
										}
										if(a!=64){
											t=t+String.fromCharCode(i);
										}
									}
									t=Base64._utf8_decode(t);
									return t;
								},
								_utf8_encode:function(e){
									e=e.replace(/rn/g,"n");
									var t="";
									for(var n=0;n&lt;e.length;n++){
										var r=e.charCodeAt(n);
										if(r&lt;128){
											t+=String.fromCharCode(r);
										}else if(r&gt;127&amp;&amp;r&lt;2048){
											t+=String.fromCharCode(r&gt;&gt;6|192);
											t+=String.fromCharCode(r&amp;63|128)
										}else{
											t+=String.fromCharCode(r&gt;&gt;12|224);
											t+=String.fromCharCode(r&gt;&gt;6&amp;63|128);
											t+=String.fromCharCode(r&amp;63|128);
										}
									}
									return t;
								},
								_utf8_decode:function(e){
									var t="";
									var n=0;
									var r=0,c1=0,c2=0;
									while(n&lt;e.length){
										r=e.charCodeAt(n);
										if(r&lt;128){
											t+=String.fromCharCode(r);
											n++;
										}else if(r&gt;191&amp;&amp;r&lt;224){
											c2=e.charCodeAt(n+1);
											t+=String.fromCharCode((r&amp;31)&lt;&lt;6|c2&amp;63);
											n+=2;
										}else{
											c2=e.charCodeAt(n+1);
											c3=e.charCodeAt(n+2);
											t+=String.fromCharCode((r&amp;15)&lt;&lt;12|(c2&amp;63)&lt;&lt;6|c3&amp;63);
											n+=3;
										}
									}
									return t;
								}
							 };

		var result = '';
		if(flag == 'encode'){
			result = Base64.encode(data);
		}else if(flag == 'decode'){
			result = Base64.decode(data);
		}else{
			result = 'ERROR Method';
		}

		return result;
	}
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.external-link{
	color:#0C5C97;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id/&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS Home Content&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id
	};

})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-03-17 19:37:23&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;43693e31db6d720054d8ff621f9619aa&lt;/sys_id&gt;&lt;sys_mod_count&gt;191&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS Home Content&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_43693e31db6d720054d8ff621f9619aa&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-26 22:08:21&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div class="col-md-12"&gt;&amp;#160;&lt;/div&gt;
&lt;script type="text/javascript"&gt;

&lt;/script&gt;
&lt;div class="col-md-12"&gt;
  &lt;div&gt;The National Institutes of Health (NIH) Genomic Data Sharing (GDS) Policy applies to all NIH intramural research that generates large-scale human or non-human genomic data 
    as well as the use of these data for subsequent research. Large-scale data include genome-wide association studies (GWAS), single nucleotide polymorphisms (SNP) arrays, 
    and genome sequence, transcriptomic, metagenomic, epigenomic, and gene expression data. For details about what thresholds require data sharing please refer to  &lt;a class="external-link" href="https://ccrod.cancer.gov/confluence/display/CCRGDS/CCR+Genomic+Data+Sharing+Project+Home" target="_BLANK"&gt;CCR GDS Website&lt;/a&gt; 
  &lt;/div&gt;&lt;br/&gt;
  &lt;div&gt;
    For studies that will generate large-scale genomic data, investigators are required to develop the following documents PRIOR to start the research:&lt;br/&gt;&lt;br/&gt;
    &lt;b&gt;Human Studies:&lt;/b&gt;
    &lt;ul&gt;
      &lt;li&gt;Genomic Data Sharing Plan &lt;b&gt;AND&lt;/b&gt;&lt;/li&gt;
      &lt;li&gt;Institutional Certification Memo&lt;/li&gt;
    &lt;/ul&gt;
    &lt;b&gt;Non-Human Studies:&lt;/b&gt;
    &lt;ul&gt;
      &lt;li&gt;Genomic Data Sharing Plan&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;span&gt;To complete the GDS documents, begin by clicking Start New GDS Project to provide core information about the study.&lt;/span&gt;&amp;#160; &amp;#160;&lt;span id="piId"&gt;&lt;button class="btn btn-sm btn-primary active" ng-click="startGDS()"&gt;Start New GDS Project&lt;/button&gt;        
  &lt;/span&gt;&lt;br/&gt;&lt;br/&gt;
&lt;/div&gt;






]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1524032982</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>bc576a31db2b5b00b86770c08c961982</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d8a2bd850000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS Home Content</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>19c0f125c86b1b007f689ea5033fb99e</update_guid>
<update_guid_history>19c0f125c86b1b007f689ea5033fb99e:1524032982,39f2e125216b1b0091a70b3f80a92e95:-1684753545,4bd22125cc6b1b00ef5d73e5bdf9af86:1244112228,9eb22de1ef6b1b00e83a3f9117759f67:772467486,0fa225e1166b1b007a981ac9b7e8edba:1866122093,a312e9a13d6b1b0064865c6a665e8cfd:349364637,f6b16121ce6b1b0037816860564730e4:-599053504,db916d21756b1b0007966ee4add27ed8:-655227943,7b4129213e6b1b0010d9908cf425d396:1382725054,8ce1d7f401e75700209baae7452cb4e7:1664497270,c7911ff4a0e757000313bc69741262d7:-2133586965,8380d7b4a7e75700309aae59740bb97c:-807221571,902ecbf07ce757007645198a268cdb0e:-2133586965,5dae76fcd9675700393068158d746f45:1664497270,4221799f8f53530039a1026ac11947d2:-1630967,43c0719f635353007c6736ce837e93b9:1377954124,2ec0b9db8b5353000b848bc453432634:-702256791,2360f95fba53530031a0b731073d0727:-1626719237,e810355f63535300a677b35e23014f33:-1683527662,5fbf615f895353008dea52a6dfdcb851:-1960261168,528fe9db94535300c2705a59d3a093d1:319267578,bc8fa91fac535300ad7c5fde08db0f61:-375696333,7ffd21dba153530066a8c853742f38fc:-277027886,478d6d9b4f53530058a1b2e9c35233f2:-1811775690,1a5d215b415353001d5ab92d2f658902:1077006177,1eece19be8535300e9afca9885314d42:-1740150608,feea6dd75553530059c1af7d8fceac49:1071785378,c5da251b455353002960b7e124e3cac0:-1589483460,08caa95705535300d2d007edd5c32680:-1548627697,b5bae99748535300b738593e1bf7795d:1441093766,28aae5d71253530049abaee0c41f1744:1167114945,339aa9570a535300acc2b770259e6df2:-372197942,a79aadd7ee5353007b7b857b4da66323:-931943093,b78a61d739535300aa2043c478d31831:-237979583,536ae5d77f5353001ac8dbed696d903c:292780545,3ef961d72653530046f37e0378e9cd2b:851970983,e8d9e197f1535300eb2db19bedfae8bb:-1692674894,c618579f11de8300f9e43ba08ec5b0e9:282801168,c618579f11de8300f9e43ba08ec5b0e9:282801168,c618579f11de8300f9e43ba08ec5b0e9:282801168,c618579f11de8300f9e43ba08ec5b0e9:282801168,c618579f11de8300f9e43ba08ec5b0e9:282801168,c618579f11de8300f9e43ba08ec5b0e9:282801168,c618579f11de8300f9e43ba08ec5b0e9:282801168</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sys_ui_script_04b105016ff6d2000a09034abb3ee437</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ui_script"&gt;&lt;sys_ui_script action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;description/&gt;&lt;global&gt;true&lt;/global&gt;&lt;name&gt;jspdfCDN&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/**  
 * jsPDF - PDF Document creation from JavaScript
 * Version 1.2.61-git Built on 2016-03-01T16:15
 *                           CommitID 04343b54b0
 *
 * Copyright (c) 2010-2014 James Hall &lt;james@parall.ax&gt;, https://github.com/MrRio/jsPDF
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, willow-systems.com
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */
/**
 * jsPDF AcroForm Plugin
 * Copyright (c) 2016 Alexander Weidt, https://github.com/BiggA94
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**
 * jsPDF addHTML PlugIn
 * Copyright (c) 2014 Diego Casorran
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**  
 * jsPDF addImage plugin
 * Copyright (c) 2012 Jason Siefken, https://github.com/siefkenj/
 *               2013 Chris Dowling, https://github.com/gingerchris
 *               2013 Trinh Ho, https://github.com/ineedfat
 *               2013 Edwin Alejandro Perez, https://github.com/eaparango
 *               2013 Norah Smith, https://github.com/burnburnrocket
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 James Robb, https://github.com/jamesbrobb
 *
 */
/**
 * jsPDF Annotations PlugIn
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**
 * jsPDF Autoprint Plugin
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**
 * jsPDF Canvas PlugIn
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/** ====================================================================
 * jsPDF Cell plugin
 * Copyright (c) 2013 Youssef Beddad, youssef.beddad@gmail.com
 *               2013 Eduardo Menezes de Morais, eduardo.morais@usp.br
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Hall, james@parall.ax
 *               2014 Diego Casorran, https://github.com/diegocr
 *
 * ====================================================================
 */
/**
 * jsPDF Context2D PlugIn
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**  
 * jsPDF fromHTML plugin. BETA stage. API subject to change. Needs browser
 * Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Daniel Husar, https://github.com/danielhusar
 *               2014 Wolfgang Gassler, https://github.com/woolfg
 *               2014 Steven Spungin, https://github.com/flamenco
 *
 * ====================================================================
 */
/** ==================================================================== 
 * jsPDF JavaScript plugin
 * Copyright (c) 2013 Youssef Beddad, youssef.beddad@gmail.com
 * 
 * ====================================================================
 */
/**
 * jsPDF Outline PlugIn
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/** 
 *  ====================================================================
 * jsPDF PNG PlugIn
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * ====================================================================
 */
/**
 * jsPDF Autoprint Plugin
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**  
 * jsPDF split_text_to_size plugin - MIT license.
 * Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
 *               2014 Diego Casorran, https://github.com/diegocr
 */
/**   
jsPDF standard_fonts_metrics plugin
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
MIT license.
*/
/**  
jsPDF SVG plugin
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
*/
/** ==================================================================== 
 * jsPDF total_pages plugin
 * Copyright (c) 2013 Eduardo Menezes de Morais, eduardo.morais@usp.br
 * 
 * ====================================================================
 */
/* Blob.js
 * A Blob implementation.
 * 2014-07-24
 *
 * By Eli Grey, http://eligrey.com
 * By Devin Samarin, https://github.com/dsamarin
 * License: MIT
 *   See https://github.com/eligrey/Blob.js/blob/master/LICENSE.md
 */
/* FileSaver.js
 * A saveAs() FileSaver implementation.
 * 1.1.20151003
 *
 * By Eli Grey, http://eligrey.com
 * License: MIT
 *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 */
/*
 * Copyright (c) 2012 chick307 &lt;chick307@gmail.com&gt;
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/**
 * CssColors
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/*
 Deflate.js - https://github.com/gildas-lormeau/zip.js
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.
 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:
 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.
 2. Redistributions in binary form must reproduce the above copyright 
 notice, this list of conditions and the following disclaimer in 
 the documentation and/or other materials provided with the distribution.
 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.
 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
/*
  html2canvas 0.5.0-alpha &lt;http://html2canvas.hertzen.com&gt;
  Copyright (c) 2014 Niklas von Hertzen
  Released under MIT License
*/
/*
 Copyright (c) 2013 Yehuda Katz, Tom Dale, and contributors
 */
/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
/**
 * html2pdf.js
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/*
# PNG.js
# Copyright (c) 2011 Devon Govett
# MIT LICENSE
# 
*/
/*
 * Extracted from pdf.js
 * https://github.com/andreasgal/pdf.js
 *
 * Copyright (c) 2011 Mozilla Foundation
 *
 * Contributors: Andreas Gal &lt;gal@mozilla.com&gt;
 *               Chris G Jones &lt;cjones@mozilla.com&gt;
 *               Shaon Barman &lt;shaon.barman@gmail.com&gt;
 *               Vivien Nicolas &lt;21@vingtetun.org&gt;
 *               Justin D'Arcangelo &lt;justindarc@gmail.com&gt;
 *               Yury Delendik
 *
 */
/**
 * JavaScript Polyfill functions for jsPDF
 * Collected from public resources by
 * https://github.com/diegocr
 */
/**
 * config.js
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 * Copyright (c) 2015 James Hall (Parallax Agency Ltd) james@parall.ax
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.15 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
!function(exports,global){function renderDocument(t,e,n,r){return createWindowClone(t,t,n,r,e).then(function(i){log("Document cloned");var o="["+html2canvasNodeAttribute+"='true']";t.querySelector(o).removeAttribute(html2canvasNodeAttribute);var s=i.contentWindow,a=s.document.querySelector(o),c="function"==typeof e.onclone?Promise.resolve(e.onclone(s.document)):Promise.resolve(!0);return c.then(function(){return renderWindow(a,i,e,n,r)})})}function renderWindow(t,e,n,r,i){var o=e.contentWindow,s=new Support(o.document),a=new ImageLoader(n,s),c=getBounds(t),u="view"===n.type?r:documentWidth(o.document),l="view"===n.type?i:documentHeight(o.document),h=new CanvasRenderer(u,l,a,n,document),d=new NodeParser(t,h,s,a,n);return d.ready.then(function(){log("Finished rendering");var r;return r="view"===n.type?crop(h.canvas,{width:h.canvas.width,height:h.canvas.height,top:0,left:0,x:0,y:0}):t===o.document.body||t===o.document.documentElement||null!=n.canvas?h.canvas:crop(h.canvas,{width:null!=n.width?n.width:c.width,height:null!=n.height?n.height:c.height,top:c.top,left:c.left,x:o.pageXOffset,y:o.pageYOffset}),cleanupContainer(e,n),r})}function cleanupContainer(t,e){e.removeContainer&amp;&amp;(t.parentNode.removeChild(t),log("Cleaned up container"))}function crop(t,e){var n=document.createElement("canvas"),r=Math.min(t.width-1,Math.max(0,e.left)),i=Math.min(t.width,Math.max(1,e.left+e.width)),o=Math.min(t.height-1,Math.max(0,e.top)),s=Math.min(t.height,Math.max(1,e.top+e.height));return n.width=e.width,n.height=e.height,log("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",i-r,"height:",s-o),log("Resulting crop with width",e.width,"and height",e.height," with x",r,"and y",o),n.getContext("2d").drawImage(t,r,o,i-r,s-o,e.x,e.y,i-r,s-o),n}function documentWidth(t){return Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth))}function documentHeight(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}function smallImage(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}function createWindowClone(t,e,n,r,i){labelCanvasElements(t);var o=t.documentElement.cloneNode(!0),s=e.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=n,s.height=r,s.scrolling="no",e.body.appendChild(s),new Promise(function(e){var n=s.contentWindow.document;s.contentWindow.onload=s.onload=function(){var o=setInterval(function(){n.body.childNodes.length&gt;0&amp;&amp;(cloneCanvasContents(t,n),clearInterval(o),"view"===i.type&amp;&amp;s.contentWindow.scrollTo(r,a),e(s))},50)};var r=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset;n.open(),n.write("&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;/html&gt;"),restoreOwnerScroll(t,r,a),n.replaceChild(i.javascriptEnabled===!0?n.adoptNode(o):removeScriptNodes(n.adoptNode(o)),n.documentElement),n.close()})}function restoreOwnerScroll(t,e,n){e===t.defaultView.pageXOffset&amp;&amp;n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)}function loadUrlDocument(t,e,n,r,i,o){return new Proxy(t,e,window.document).then(documentFromHTML(t)).then(function(t){return createWindowClone(t,n,r,i,o)})}function documentFromHTML(t){return function(e){var n,r=new DOMParser;try{n=r.parseFromString(e,"text/html")}catch(i){log("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(o){log("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var s=n.querySelector("base");if(!s||!s.href.host){var a=n.createElement("base");a.href=t,n.head.insertBefore(a,n.head.firstChild)}return n}}function labelCanvasElements(t){[].slice.call(t.querySelectorAll("canvas"),0).forEach(function(t){t.setAttribute(html2canvasCanvasCloneAttribute,"canvas-"+html2canvasCanvasCloneIndex++)})}function cloneCanvasContents(t,e){[].slice.call(t.querySelectorAll("["+html2canvasCanvasCloneAttribute+"]"),0).forEach(function(t){try{var n=e.querySelector("["+html2canvasCanvasCloneAttribute+'="'+t.getAttribute(html2canvasCanvasCloneAttribute)+'"]');n&amp;&amp;(n.width=t.width,n.height=t.height,n.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(r){log("Unable to copy canvas content from",t,r)}t.removeAttribute(html2canvasCanvasCloneAttribute)})}function removeScriptNodes(t){return[].slice.call(t.childNodes,0).filter(isElementNode).forEach(function(e){"SCRIPT"===e.tagName?t.removeChild(e):removeScriptNodes(e)}),t}function isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}function absoluteUrl(t){var e=document.createElement("a");return e.href=t,e.href=e.href,e}function DummyImageContainer(t){if(this.src=t,log("DummyImageContainer for",t),!this.promise||!this.image){log("Initiating DummyImageContainer"),DummyImageContainer.prototype.image=new Image;var e=this.image;DummyImageContainer.prototype.promise=new Promise(function(t,n){e.onload=t,e.onerror=n,e.src=smallImage(),e.complete===!0&amp;&amp;t(e)})}}function Font(t,e){var n,r,i=document.createElement("div"),o=document.createElement("img"),s=document.createElement("span"),a="Hidden Text";i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),o.src=smallImage(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode(a)),i.appendChild(s),i.appendChild(o),n=o.offsetTop-s.offsetTop+1,i.removeChild(s),i.appendChild(document.createTextNode(a)),i.style.lineHeight="normal",o.style.verticalAlign="super",r=o.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=n,this.lineWidth=1,this.middle=r}function FontMetrics(){this.data={}}function FrameContainer(t,e,n){this.image=null,this.src=t;var r=this,i=getBounds(t);this.promise=(e?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(n.proxy,i,n)).then(function(t){return html2canvas(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(t){return r.image=t})}function GradientContainer(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}function ImageContainer(t,e){this.src=t,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(r,i){n.image.onload=r,n.image.onerror=i,e&amp;&amp;(n.image.crossOrigin="anonymous"),n.image.src=t,n.image.complete===!0&amp;&amp;r(n.image)})}function ImageLoader(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}function LinearGradientContainer(t){GradientContainer.apply(this,arguments),this.type=this.TYPES.LINEAR;var e=null===t.args[0].match(this.stepRegExp);e?t.args[0].split(" ").reverse().forEach(function(t){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var e=this.y0,n=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=n,this.y1=e}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(this.stepRegExp);return{color:e[1],stop:"%"===e[3]?e[2]/100:null}},this),null===this.colorStops[0].stop&amp;&amp;(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&amp;&amp;(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&amp;&amp;this.colorStops.slice(e).some(function(n,r){return null!==n.stop?(t.stop=(n.stop-this.colorStops[e-1].stop)/(r+1)+this.colorStops[e-1].stop,!0):!1},this)},this)}function log(){window.html2canvas.logging&amp;&amp;window.console&amp;&amp;window.console.log&amp;&amp;Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-window.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}function NodeContainer(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function selectionValue(t){var e=t.options[t.selectedIndex||0];return e?e.text||"":""}function parseMatrix(t){return t&amp;&amp;"matrix"===t[1]?t[2].split(",").map(function(t){return parseFloat(t.trim())}):void 0}function isPercentage(t){return-1!==t.toString().indexOf("%")}function parseBackgrounds(t){var e,n,r,i,o,s,a,c=" \r\n	",u=[],l=0,h=0,d=function(){e&amp;&amp;('"'===n.substr(0,1)&amp;&amp;(n=n.substr(1,n.length-2)),n&amp;&amp;a.push(n),"-"===e.substr(0,1)&amp;&amp;(i=e.indexOf("-",1)+1)&gt;0&amp;&amp;(r=e.substr(0,i),e=e.substr(i)),u.push({prefix:r,method:e.toLowerCase(),value:o,args:a,image:null})),a=[],e=r=n=o=""};return a=[],e=r=n=o="",t.split("").forEach(function(t){if(!(0===l&amp;&amp;c.indexOf(t)&gt;-1)){switch(t){case'"':s?s===t&amp;&amp;(s=null):s=t;break;case"(":if(s)break;if(0===l)return l=1,void(o+=t);h++;break;case")":if(s)break;if(1===l){if(0===h)return l=0,o+=t,void d();h--}break;case",":if(s)break;if(0===l)return void d();if(1===l&amp;&amp;0===h&amp;&amp;!e.match(/^url$/i))return a.push(n),n="",void(o+=t)}o+=t,0===l?e+=t:n+=t}}),d(),u}function removePx(t){return t.replace("px","")}function asFloat(t){return parseFloat(t)}function getBounds(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}}function offsetBounds(t){var e=t.offsetParent?offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}}function NodeParser(t,e,n,r,i){log("Starting NodeParser"),this.renderer=e,this.options=i,this.range=null,this.support=n,this.renderQueue=[],this.stack=new StackingContext(!0,1,t.ownerDocument,null);var o=new NodeContainer(t,null);if(t===t.ownerDocument.documentElement){var s=new NodeContainer(this.renderer.isTransparent(o.css("backgroundColor"))?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,s.css("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=flatten([o].concat(this.getChildren(o)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new FontMetrics,log("Fetched nodes, total:",this.nodes.length),log("Calculate overflow clips"),this.calculateOverflowClips(),log("Start fetching images"),this.images=r.fetch(this.nodes.filter(isElement)),this.ready=this.images.ready.then(bind(function(){return log("Images loaded, starting parsing"),log("Creating stacking contexts"),this.createStackingContexts(),log("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),log("Render queue created with "+this.renderQueue.length+" items"),new Promise(bind(function(t){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,t):this.renderQueue.length&gt;0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function hasParentClip(t){return t.parent&amp;&amp;t.parent.clip.length}function toCamelCase(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function ClearTransform(){}function calculateBorders(t,e,n,r){return t.map(function(i,o){if(i.width&gt;0){var s=e.left,a=e.top,c=e.width,u=e.height-t[2].width;switch(o){case 0:u=t[0].width,i.args=drawSide({c1:[s,a],c2:[s+c,a],c3:[s+c-t[1].width,a+u],c4:[s+t[3].width,a+u]},r[0],r[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:s=e.left+e.width-t[1].width,c=t[1].width,i.args=drawSide({c1:[s+c,a],c2:[s+c,a+u+t[2].width],c3:[s,a+u],c4:[s,a+t[0].width]},r[1],r[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:a=a+e.height-t[2].width,u=t[2].width,i.args=drawSide({c1:[s+c,a+u],c2:[s,a+u],c3:[s+t[3].width,a],c4:[s+c-t[3].width,a]},r[2],r[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:c=t[3].width,i.args=drawSide({c1:[s,a+u+t[2].width],c2:[s,a],c3:[s+c,a+t[0].width],c4:[s+c,a+u]},r[3],r[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return i})}function getCurvePoints(t,e,n,r){var i=4*((Math.sqrt(2)-1)/3),o=n*i,s=r*i,a=t+n,c=e+r;return{topLeft:bezierCurve({x:t,y:c},{x:t,y:c-s},{x:a-o,y:e},{x:a,y:e}),topRight:bezierCurve({x:t,y:e},{x:t+o,y:e},{x:a,y:c-s},{x:a,y:c}),bottomRight:bezierCurve({x:a,y:e},{x:a,y:e+s},{x:t+o,y:c},{x:t,y:c}),bottomLeft:bezierCurve({x:a,y:c},{x:a-o,y:c},{x:t,y:e+s},{x:t,y:e})}}function calculateCurvePoints(t,e,n){var r=t.left,i=t.top,o=t.width,s=t.height,a=e[0][0],c=e[0][1],u=e[1][0],l=e[1][1],h=e[2][0],d=e[2][1],f=e[3][0],p=e[3][1],m=o-u,g=s-d,w=o-h,y=s-p;return{topLeftOuter:getCurvePoints(r,i,a,c).topLeft.subdivide(.5),topLeftInner:getCurvePoints(r+n[3].width,i+n[0].width,Math.max(0,a-n[3].width),Math.max(0,c-n[0].width)).topLeft.subdivide(.5),topRightOuter:getCurvePoints(r+m,i,u,l).topRight.subdivide(.5),topRightInner:getCurvePoints(r+Math.min(m,o+n[3].width),i+n[0].width,m&gt;o+n[3].width?0:u-n[3].width,l-n[0].width).topRight.subdivide(.5),bottomRightOuter:getCurvePoints(r+w,i+g,h,d).bottomRight.subdivide(.5),bottomRightInner:getCurvePoints(r+Math.min(w,o-n[3].width),i+Math.min(g,s+n[0].width),Math.max(0,h-n[1].width),d-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:getCurvePoints(r,i+y,f,p).bottomLeft.subdivide(.5),bottomLeftInner:getCurvePoints(r+n[3].width,i+y,Math.max(0,f-n[3].width),p-n[2].width).bottomLeft.subdivide(.5)}}function bezierCurve(t,e,n,r){var i=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:r,subdivide:function(o){var s=i(t,e,o),a=i(e,n,o),c=i(n,r,o),u=i(s,a,o),l=i(a,c,o),h=i(u,l,o);return[bezierCurve(t,s,u,h),bezierCurve(h,l,c,r)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function drawSide(t,e,n,r,i,o,s){var a=[];return e[0]&gt;0||e[1]&gt;0?(a.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),n[0]&gt;0||n[1]&gt;0?(a.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),e[0]&gt;0||e[1]&gt;0?(a.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function parseCorner(t,e,n,r,i,o,s){e[0]&gt;0||e[1]&gt;0?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",o,s]),(n[0]&gt;0||n[1]&gt;0)&amp;&amp;t.push(["line",i[0].start.x,i[0].start.y])}function negativeZIndex(t){return t.cssInt("zIndex")&lt;0}function positiveZIndex(t){return t.cssInt("zIndex")&gt;0}function zIndex0(t){return 0===t.cssInt("zIndex")}function inlineLevel(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function isStackingContext(t){return t instanceof StackingContext}function hasText(t){return t.node.data.trim().length&gt;0}function noLetterSpacing(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}function getBorderRadiusData(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var n=t.css("border"+e+"Radius"),r=n.split(" ");return r.length&lt;=1&amp;&amp;(r[1]=r[0]),r.map(asInt)})}function renderableNode(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function isPositionedForStacking(t){var e=t.css("position"),n=-1!==["absolute","relative","fixed"].indexOf(e)?t.css("zIndex"):"auto";return"auto"!==n}function isPositioned(t){return"static"!==t.css("position")}function isFloating(t){return"none"!==t.css("float")}function isInlineBlock(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}function not(t){var e=this;return function(){return!t.apply(e,arguments)}}function isElement(t){return t.node.nodeType===Node.ELEMENT_NODE}function isPseudoElement(t){return t.isPseudoElement===!0}function isTextNode(t){return t.node.nodeType===Node.TEXT_NODE}function zIndexSort(t){return function(e,n){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(n.cssInt("zIndex")+t.indexOf(n)/t.length)}}function hasOpacity(t){return t.getOpacity()&lt;1}function bind(t,e){return function(){return t.apply(e,arguments)}}function asInt(t){return parseInt(t,10)}function getWidth(t){return t.width}function nonIgnoredElement(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function flatten(t){return[].concat.apply([],t)}function stripQuotes(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&amp;&amp;e.match(/'|"/)?t.substr(1,t.length-2):t}function getWords(t){for(var e,n=[],r=0,i=!1;t.length;)isWordBoundary(t[r])===i?(e=t.splice(0,r),e.length&amp;&amp;n.push(window.html2canvas.punycode.ucs2.encode(e)),i=!i,r=0):r++,r&gt;=t.length&amp;&amp;(e=t.splice(0,r),e.length&amp;&amp;n.push(window.html2canvas.punycode.ucs2.encode(e)));return n}function isWordBoundary(t){return-1!==[32,13,10,9,45].indexOf(t)}function hasUnicode(t){return/[^\u0000-\u00ff]/.test(t)}function Proxy(t,e,n){var r=createCallback(supportsCORS),i=createProxyUrl(e,t,r);return supportsCORS?XHR(i):jsonp(n,i,r).then(function(t){return decode64(t.content)})}function ProxyURL(t,e,n){var r=createCallback(supportsCORSImage),i=createProxyUrl(e,t,r);return supportsCORSImage?Promise.resolve(i):jsonp(n,i,r).then(function(t){return"data:"+t.type+";base64,"+t.content})}function jsonp(t,e,n){return new Promise(function(r,i){var o=t.createElement("script"),s=function(){delete window.html2canvas.proxy[n],t.body.removeChild(o)};window.html2canvas.proxy[n]=function(t){s(),r(t)},o.src=e,o.onerror=function(t){s(),i(t)},t.body.appendChild(o)})}function createCallback(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++proxyCount+"_"+Math.round(1e5*Math.random())}function createProxyUrl(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&amp;callback=html2canvas.proxy."+n:"")}function ProxyImageContainer(t,e){var n=(document.createElement("script"),document.createElement("a"));n.href=t,t=n.href,this.src=t,this.image=new Image;var r=this;this.promise=new Promise(function(n,i){r.image.crossOrigin="Anonymous",r.image.onload=n,r.image.onerror=i,new ProxyURL(t,e,document).then(function(t){r.image.src=t})["catch"](i)})}function PseudoElementContainer(t,e,n){NodeContainer.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}function Renderer(t,e,n,r,i){this.width=t,this.height=e,this.images=n,this.options=r,this.document=i}function StackingContext(t,e,n,r){NodeContainer.call(this,n,r),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}function Support(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}function SVGContainer(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):XHR(t)}).then(function(t){return new Promise(function(n){html2canvas.fabric.loadSVGFromString(t,e.createCanvas.call(e,n))})})}function decode64(t){var e,n,r,i,o,s,a,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=t.length,h="";for(e=0;l&gt;e;e+=4)n=u.indexOf(t[e]),r=u.indexOf(t[e+1]),i=u.indexOf(t[e+2]),o=u.indexOf(t[e+3]),s=n&lt;&lt;2|r&gt;&gt;4,a=(15&amp;r)&lt;&lt;4|i&gt;&gt;2,c=(3&amp;i)&lt;&lt;6|o,h+=64===i?String.fromCharCode(s):64===o||-1===o?String.fromCharCode(s,a):String.fromCharCode(s,a,c);return h}function SVGNodeContainer(t,e){this.src=t,this.image=null;var n=this;this.promise=e?new Promise(function(e,r){n.image=new Image,n.image.onload=e,n.image.onerror=r,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),n.image.complete===!0&amp;&amp;e(n.image)}):this.hasFabric().then(function(){return new Promise(function(e){html2canvas.fabric.parseSVGDocument(t,n.createCanvas.call(n,e))})})}function TextContainer(t,e){NodeContainer.call(this,t,e)}function capitalize(t,e,n){return t.length&gt;0?e+n.toUpperCase():void 0}function WebkitGradientContainer(t){GradientContainer.apply(this,arguments),this.type="linear"===t.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}function XHR(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.responseText):n(new Error(r.statusText))},r.onerror=function(){n(new Error("Network Error"))},r.send()})}function html2pdf(t,e,n){var r=e.canvas;if(!r)return void alert("jsPDF canvas plugin not installed");if(r.pdf=e,e.annotations={_nameMap:[],createAnnotation:function(t,n){var r,i=e.context2d._wrapX(n.left),o=e.context2d._wrapY(n.top),s=(e.context2d._page(n.top),t.indexOf("#"));r=s&gt;=0?{name:t.substring(s+1)}:{url:t},e.link(i,o,n.right-n.left,n.bottom-n.top,r)},setName:function(t,n){var r=e.context2d._wrapX(n.left),i=e.context2d._wrapY(n.top),o=e.context2d._page(n.top);this._nameMap[t]={page:o,x:r,y:i}}},r.annotations=e.annotations,e.context2d._pageBreakAt=function(t){this.pageBreaks.push(t)},e.context2d._gotoPage=function(t){for(;e.internal.getNumberOfPages()&lt;t;)e.addPage();e.setPage(t)},"string"==typeof t){t=t.replace(/&lt;script\b[^&lt;]*(?:(?!&lt;\/script&gt;)&lt;[^&lt;]*)*&lt;\/script&gt;/gi,"");var i=document.createElement("iframe");document.body.appendChild(i);var o;o=i.contentDocument,void 0!=o&amp;&amp;null!=o||(o=i.contentWindow.document),o.open(),o.write(t),o.close();html2canvas(o.body,{canvas:r,onrendered:function(t){n&amp;&amp;(i&amp;&amp;i.parentElement.removeChild(i),n(e))}})}else{var s=t;html2canvas(s,{canvas:r,onrendered:function(t){n&amp;&amp;(i&amp;&amp;i.parentElement.removeChild(i),n(e))}})}}var jsPDF=function(t){"use strict";function e(e){var n={};this.subscribe=function(t,e,r){if("function"!=typeof e)return!1;n.hasOwnProperty(t)||(n[t]={});var i=Math.random().toString(35);return n[t][i]=[e,!!r],i},this.unsubscribe=function(t){for(var e in n)if(n[e][t])return delete n[e][t],!0;return!1},this.publish=function(r){if(n.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var s in n[r]){var a=n[r][s];try{a[0].apply(e,i)}catch(c){t.console&amp;&amp;console.error("jsPDF PubSub Error",c.message,c)}a[1]&amp;&amp;o.push(s)}o.length&amp;&amp;o.forEach(this.unsubscribe)}}}function n(s,a,c,u){var l={};"object"==typeof s&amp;&amp;(l=s,s=l.orientation,a=l.unit||a,c=l.format||c,u=l.compress||l.compressPdf||u),a=a||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var h,d,f,p,m,g,w,y,v,b=((""+c).toLowerCase(),!!u&amp;&amp;"function"==typeof Uint8Array),x=l.textColor||"0 g",k=l.drawColor||"0 G",A=l.fontSize||16,C=l.lineHeight||1.15,E=l.lineWidth||.200025,S=2,F=!1,T=[],P={},_={},I=0,q=[],O=[],R=[],B=[],D=[],N=0,j=0,L=0,M={title:"",subject:"",author:"",keywords:"",creator:""},z={},U=new e(z),H=function(t){return t.toFixed(2)},W=function(t){return t.toFixed(3)},V=function(t){return("0"+parseInt(t)).slice(-2)},X=function(t){F?q[p].push(t):(L+=t.length+1,B.push(t))},Y=function(){return S++,T[S]=L,X(S+" 0 obj"),S},G=function(){var t=2*q.length+1;t+=D.length;var e={objId:t,content:""};return D.push(e),e},Q=function(){return S++,T[S]=function(){return L},S},J=function(t){T[t]=L},K=function(t){X("stream"),X(t),X("endstream")},$=function(){var e,r,i,o,s,a,c,u,l;for(c=t.adler32cs||n.adler32cs,b&amp;&amp;"undefined"==typeof c&amp;&amp;(b=!1),e=1;I&gt;=e;e++){if(Y(),u=(m=R[e].width)*d,l=(g=R[e].height)*d,X("&lt;&lt;/Type /Page"),X("/Parent 1 0 R"),X("/Resources 2 0 R"),X("/MediaBox [0 0 "+H(u)+" "+H(l)+"]"),U.publish("putPage",{pageNumber:e,page:q[e]}),X("/Contents "+(S+1)+" 0 R"),X("&gt;&gt;"),X("endobj"),r=q[e].join("\n"),Y(),b){for(i=[],o=r.length;o--;)i[o]=r.charCodeAt(o);a=c.from(r),s=new Deflater(6),s.append(new Uint8Array(i)),r=s.flush(),i=new Uint8Array(r.length+6),i.set(new Uint8Array([120,156])),i.set(r,2),i.set(new Uint8Array([255&amp;a,a&gt;&gt;8&amp;255,a&gt;&gt;16&amp;255,a&gt;&gt;24&amp;255]),r.length+2),r=String.fromCharCode.apply(null,i),X("&lt;&lt;/Length "+r.length+" /Filter [/FlateDecode]&gt;&gt;")}else X("&lt;&lt;/Length "+r.length+"&gt;&gt;");K(r),X("endobj")}T[1]=L,X("1 0 obj"),X("&lt;&lt;/Type /Pages");var h="/Kids [";for(o=0;I&gt;o;o++)h+=3+2*o+" 0 R ";X(h+"]"),X("/Count "+I),X("&gt;&gt;"),X("endobj"),U.publish("postPutPages")},Z=function(t){t.objectNumber=Y(),X("&lt;&lt;/BaseFont/"+t.PostScriptName+"/Type/Font"),"string"==typeof t.encoding&amp;&amp;X("/Encoding/"+t.encoding),X("/Subtype/Type1&gt;&gt;"),X("endobj")},tt=function(){for(var t in P)P.hasOwnProperty(t)&amp;&amp;Z(P[t])},et=function(){U.publish("putXobjectDict")},nt=function(){X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),X("/Font &lt;&lt;");for(var t in P)P.hasOwnProperty(t)&amp;&amp;X("/"+t+" "+P[t].objectNumber+" 0 R");X("&gt;&gt;"),X("/XObject &lt;&lt;"),et(),X("&gt;&gt;")},rt=function(){tt(),U.publish("putResources"),T[2]=L,X("2 0 obj"),X("&lt;&lt;"),nt(),X("&gt;&gt;"),X("endobj"),U.publish("postPutResources")},it=function(){U.publish("putAdditionalObjects");for(var t=0;t&lt;D.length;t++){var e=D[t];T[e.objId]=L,X(e.objId+" 0 obj"),X(e.content),X("endobj")}S+=D.length,U.publish("postPutAdditionalObjects")},ot=function(t,e,n){_.hasOwnProperty(e)||(_[e]={}),_[e][n]=t},st=function(t,e,n,r){var i="F"+(Object.keys(P).length+1).toString(10),o=P[i]={id:i,PostScriptName:t,fontName:e,fontStyle:n,encoding:r,metadata:{}};return ot(i,e,n),U.publish("addFont",o),i},at=function(){for(var t="helvetica",e="times",n="courier",r="normal",i="bold",o="italic",s="bolditalic",a="StandardEncoding",c="zapfdingbats",u=[["Helvetica",t,r],["Helvetica-Bold",t,i],["Helvetica-Oblique",t,o],["Helvetica-BoldOblique",t,s],["Courier",n,r],["Courier-Bold",n,i],["Courier-Oblique",n,o],["Courier-BoldOblique",n,s],["Times-Roman",e,r],["Times-Bold",e,i],["Times-Italic",e,o],["Times-BoldItalic",e,s],["ZapfDingbats",c]],l=0,h=u.length;h&gt;l;l++){var d=st(u[l][0],u[l][1],u[l][2],a),f=u[l][0].split("-");ot(d,f[0],f[1]||"")}U.publish("addFonts",{fonts:P,dictionary:_})},ct=function(e){return e.foo=function(){try{return e.apply(this,arguments)}catch(n){var r=n.stack||"";~r.indexOf(" at ")&amp;&amp;(r=r.split(" at ")[1]);var i="Error in function "+r.split("\n")[0].split("&lt;")[0]+": "+n.message;if(!t.console)throw new Error(i);t.console.error(i,n),t.alert&amp;&amp;alert(i)}},e.foo.bar=e,e.foo},ut=function(t,e){var n,r,i,o,s,a,c,u,l;if(e=e||{},i=e.sourceEncoding||"Unicode",s=e.outputEncoding,(e.autoencode||s)&amp;&amp;P[h].metadata&amp;&amp;P[h].metadata[i]&amp;&amp;P[h].metadata[i].encoding&amp;&amp;(o=P[h].metadata[i].encoding,!s&amp;&amp;P[h].encoding&amp;&amp;(s=P[h].encoding),!s&amp;&amp;o.codePages&amp;&amp;(s=o.codePages[0]),"string"==typeof s&amp;&amp;(s=o[s]),s)){for(c=!1,a=[],n=0,r=t.length;r&gt;n;n++)u=s[t.charCodeAt(n)],u?a.push(String.fromCharCode(u)):a.push(t[n]),a[n].charCodeAt(0)&gt;&gt;8&amp;&amp;(c=!0);t=a.join("")}for(n=t.length;void 0===c&amp;&amp;0!==n;)t.charCodeAt(n-1)&gt;&gt;8&amp;&amp;(c=!0),n--;if(!c)return t;for(a=e.noBOM?[]:[254,255],n=0,r=t.length;r&gt;n;n++){if(u=t.charCodeAt(n),l=u&gt;&gt;8,l&gt;&gt;8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(l),a.push(u-(l&lt;&lt;8))}return String.fromCharCode.apply(void 0,a)},lt=function(t,e){return ut(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ht=function(){X("/Producer (jsPDF "+n.version+")");for(var t in M)M.hasOwnProperty(t)&amp;&amp;M[t]&amp;&amp;X("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+lt(M[t])+")");var e=new Date,r=e.getTimezoneOffset(),i=0&gt;r?"+":"-",o=Math.floor(Math.abs(r/60)),s=Math.abs(r%60),a=[i,V(o),"'",V(s),"'"].join("");X(["/CreationDate (D:",e.getFullYear(),V(e.getMonth()+1),V(e.getDate()),V(e.getHours()),V(e.getMinutes()),V(e.getSeconds()),a,")"].join(""))},dt=function(){switch(X("/Type /Catalog"),X("/Pages 1 0 R"),y||(y="fullwidth"),y){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var t=""+y;"%"===t.substr(t.length-1)&amp;&amp;(y=parseInt(y)/100),"number"==typeof y&amp;&amp;X("/OpenAction [3 0 R /XYZ null null "+H(y)+"]")}switch(v||(v="continuous"),v){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}w&amp;&amp;X("/PageMode /"+w),U.publish("putCatalog")},ft=function(){X("/Size "+(S+1)),X("/Root "+S+" 0 R"),X("/Info "+(S-1)+" 0 R")},pt=function(t,e){var n="string"==typeof e&amp;&amp;e.toLowerCase();if("string"==typeof t){var r=t.toLowerCase();o.hasOwnProperty(r)&amp;&amp;(t=o[r][0]/d,e=o[r][1]/d)}if(Array.isArray(t)&amp;&amp;(e=t[1],t=t[0]),n){switch(n.substr(0,1)){case"l":e&gt;t&amp;&amp;(n="s");break;case"p":t&gt;e&amp;&amp;(n="s")}"s"===n&amp;&amp;(f=t,t=e,e=f)}F=!0,q[++I]=[],R[I]={width:Number(t)||m,height:Number(e)||g},O[I]={},wt(I)},mt=function(){pt.apply(this,arguments),X(H(E*d)+" w"),X(k),0!==N&amp;&amp;X(N+" J"),0!==j&amp;&amp;X(j+" j"),U.publish("addPage",{pageNumber:I})},gt=function(t){t&gt;0&amp;&amp;I&gt;=t&amp;&amp;(q.splice(t,1),R.splice(t,1),I--,p&gt;I&amp;&amp;(p=I),this.setPage(p))},wt=function(t){t&gt;0&amp;&amp;I&gt;=t&amp;&amp;(p=t,m=R[t].width,g=R[t].height)},yt=function(t,e){var n;switch(t=void 0!==t?t:P[h].fontName,e=void 0!==e?e:P[h].fontStyle,void 0!==t&amp;&amp;(t=t.toLowerCase()),t){case"sans-serif":case"verdana":case"arial":case"helvetica":t="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":t="courier";break;case"serif":case"cursive":case"fantasy":default:t="times"}try{n=_[t][e]}catch(r){}return n||(n=_.times[e],null==n&amp;&amp;(n=_.times.normal)),n},vt=function(){F=!1,S=2,B=[],T=[],D=[],U.publish("buildDocument"),X("%PDF-"+r),$(),it(),rt(),Y(),X("&lt;&lt;"),ht(),X("&gt;&gt;"),X("endobj"),Y(),X("&lt;&lt;"),dt(),X("&gt;&gt;"),X("endobj");var t,e=L,n="0000000000";for(X("xref"),X("0 "+(S+1)),X(n+" 65535 f "),t=1;S&gt;=t;t++){var i=T[t];X("function"==typeof i?(n+T[t]()).slice(-10)+" 00000 n ":(n+T[t]).slice(-10)+" 00000 n ")}return X("trailer"),X("&lt;&lt;"),ft(),X("&gt;&gt;"),X("startxref"),X(e),X("%%EOF"),F=!0,B.join("\n")},bt=function(t){var e="S";return"F"===t?e="f":"FD"===t||"DF"===t?e="B":"f"!==t&amp;&amp;"f*"!==t&amp;&amp;"B"!==t&amp;&amp;"B*"!==t||(e=t),e},xt=function(){for(var t=vt(),e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},kt=function(){return new Blob([xt()],{type:"application/pdf"})},At=ct(function(e,n){var r="dataur"===(""+e).substr(0,6)?"data:application/pdf;base64,"+btoa(vt()):0;switch(e){case void 0:return vt();case"save":if(navigator.getUserMedia&amp;&amp;(void 0===t.URL||void 0===t.URL.createObjectURL))return z.output("dataurlnewwindow");saveAs(kt(),n),"function"==typeof saveAs.unload&amp;&amp;t.setTimeout&amp;&amp;setTimeout(saveAs.unload,911);break;case"arraybuffer":return xt();case"blob":return kt();case"bloburi":case"bloburl":return t.URL&amp;&amp;t.URL.createObjectURL(kt())||void 0;case"datauristring":case"dataurlstring":return r;case"dataurlnewwindow":var i=t.open(r);if(i||"undefined"==typeof safari)return i;case"datauri":case"dataurl":return t.document.location.href=r;default:throw new Error('Output type "'+e+'" is not supported.')}});switch(a){case"pt":d=1;break;case"mm":d=72/25.4000508;break;case"cm":d=72/2.54000508;break;case"in":d=72;break;case"px":d=96/72;break;case"pc":d=12;break;case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}z.internal={pdfEscape:lt,getStyle:bt,getFont:function(){return P[yt.apply(z,arguments)]},getFontSize:function(){return A},getLineHeight:function(){return A*C},write:function(t){X(1===arguments.length?t:Array.prototype.join.call(arguments," "));
},getCoordinateString:function(t){return H(t*d)},getVerticalCoordinateString:function(t){return H((g-t)*d)},collections:{},newObject:Y,newAdditionalObject:G,newObjectDeferred:Q,newObjectDeferredBegin:J,putStream:K,events:U,scaleFactor:d,pageSize:{get width(){return m},get height(){return g}},output:function(t,e){return At(t,e)},getNumberOfPages:function(){return q.length-1},pages:q,out:X,f2:H,getPageInfo:function(t){var e=2*(t-1)+3;return{objId:e,pageNumber:t,pageContext:O[t]}},getCurrentPageInfo:function(){var t=2*(p-1)+3;return{objId:t,pageNumber:p,pageContext:O[p]}},getPDFVersion:function(){return r}},z.addPage=function(){return mt.apply(this,arguments),this},z.setPage=function(){return wt.apply(this,arguments),this},z.insertPage=function(t){return this.addPage(),this.movePage(p,t),this},z.movePage=function(t,e){if(t&gt;e){for(var n=q[t],r=R[t],i=O[t],o=t;o&gt;e;o--)q[o]=q[o-1],R[o]=R[o-1],O[o]=O[o-1];q[e]=n,R[e]=r,O[e]=i,this.setPage(e)}else if(e&gt;t){for(var n=q[t],r=R[t],i=O[t],o=t;e&gt;o;o++)q[o]=q[o+1],R[o]=R[o+1],O[o]=O[o+1];q[e]=n,R[e]=r,O[e]=i,this.setPage(e)}return this},z.deletePage=function(){return gt.apply(this,arguments),this},z.setDisplayMode=function(t,e,n){return y=t,v=e,w=n,this},z.text=function(t,e,n,r,o,s){function a(t){return t=t.split("	").join(Array(l.TabLen||9).join(" ")),lt(t,r)}"number"==typeof t&amp;&amp;(f=n,n=e,e=t,t=f),"string"==typeof t&amp;&amp;(t=t.match(/[\n\r]/)?t.split(/\r\n|\r|\n/g):[t]),"string"==typeof o&amp;&amp;(s=o,o=null),"string"==typeof r&amp;&amp;(s=r,r=null),"number"==typeof r&amp;&amp;(o=r,r=null);var c,u="",p="Td";if(o){o*=Math.PI/180;var m=Math.cos(o),w=Math.sin(o);u=[H(m),H(w),H(-1*w),H(m),""].join(" "),p="Tm"}r=r||{},"noBOM"in r||(r.noBOM=!0),"autoencode"in r||(r.autoencode=!0);var y="",v=this.internal.getCurrentPageInfo().pageContext;if(!0===r.stroke?v.lastTextWasStroke!==!0&amp;&amp;(y="1 Tr\n",v.lastTextWasStroke=!0):(v.lastTextWasStroke&amp;&amp;(y="0 Tr\n"),v.lastTextWasStroke=!1),"undefined"==typeof this._runningPageHeight&amp;&amp;(this._runningPageHeight=0),"string"==typeof t)t=a(t);else{if("[object Array]"!==Object.prototype.toString.call(t))throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');for(var b=t.concat(),k=[],E=b.length;E--;)k.push(a(b.shift()));var S=Math.ceil((g-n-this._runningPageHeight)*d/(A*C));if(S&gt;=0&amp;&amp;S&lt;k.length+1,s){var F,T,P,_=A*C,I=t.map(function(t){return this.getStringUnitWidth(t)*A/d},this);if(P=Math.max.apply(Math,I),"center"===s)F=e-P/2,e-=I[0]/2;else{if("right"!==s)throw new Error('Unrecognized alignment option, use "center" or "right".');F=e-P,e-=I[0]}for(T=e,t=k[0]+") Tj\n",i=1,E=k.length;i&lt;E;i++){var q=P-I[i];"center"===s&amp;&amp;(q/=2),t+=F-T+q+" -"+_+" Td ("+k[i],T=F+q,i&lt;E-1&amp;&amp;(t+=") Tj\n")}}else t=k.join(") Tj\nT* (")}var O;return c||(O=H((g-n)*d)),X("BT\n/"+h+" "+A+" Tf\n"+A*C+" TL\n"+y+x+"\n"+u+H(e*d)+" "+O+" "+p+"\n("+t+") Tj\nET"),c&amp;&amp;this.text(c,e,n),this},z.lstext=function(t,e,n,r){for(var i=0,o=t.length;o&gt;i;i++,e+=r)this.text(t[i],e,n)},z.line=function(t,e,n,r){return this.lines([[n-t,r-e]],t,e)},z.clip=function(){X("W"),X("S")},z.lines=function(t,e,n,r,i,o){var s,a,c,u,l,h,p,m,w,y,v;for("number"==typeof t&amp;&amp;(f=n,n=e,e=t,t=f),r=r||[1,1],X(W(e*d)+" "+W((g-n)*d)+" m "),s=r[0],a=r[1],u=t.length,y=e,v=n,c=0;u&gt;c;c++)l=t[c],2===l.length?(y=l[0]*s+y,v=l[1]*a+v,X(W(y*d)+" "+W((g-v)*d)+" l")):(h=l[0]*s+y,p=l[1]*a+v,m=l[2]*s+y,w=l[3]*a+v,y=l[4]*s+y,v=l[5]*a+v,X(W(h*d)+" "+W((g-p)*d)+" "+W(m*d)+" "+W((g-w)*d)+" "+W(y*d)+" "+W((g-v)*d)+" c"));return o&amp;&amp;X(" h"),null!==i&amp;&amp;X(bt(i)),this},z.rect=function(t,e,n,r,i){bt(i);return X([H(t*d),H((g-e)*d),H(n*d),H(-r*d),"re"].join(" ")),null!==i&amp;&amp;X(bt(i)),this},z.triangle=function(t,e,n,r,i,o,s){return this.lines([[n-t,r-e],[i-n,o-r],[t-i,e-o]],t,e,[1,1],s,!0),this},z.roundedRect=function(t,e,n,r,i,o,s){var a=4/3*(Math.SQRT2-1);return this.lines([[n-2*i,0],[i*a,0,i,o-o*a,i,o],[0,r-2*o],[0,o*a,-(i*a),o,-i,o],[-n+2*i,0],[-(i*a),0,-i,-(o*a),-i,-o],[0,-r+2*o],[0,-(o*a),i*a,-o,i,-o]],t+i,e,[1,1],s),this},z.ellipse=function(t,e,n,r,i){var o=4/3*(Math.SQRT2-1)*n,s=4/3*(Math.SQRT2-1)*r;return X([H((t+n)*d),H((g-e)*d),"m",H((t+n)*d),H((g-(e-s))*d),H((t+o)*d),H((g-(e-r))*d),H(t*d),H((g-(e-r))*d),"c"].join(" ")),X([H((t-o)*d),H((g-(e-r))*d),H((t-n)*d),H((g-(e-s))*d),H((t-n)*d),H((g-e)*d),"c"].join(" ")),X([H((t-n)*d),H((g-(e+s))*d),H((t-o)*d),H((g-(e+r))*d),H(t*d),H((g-(e+r))*d),"c"].join(" ")),X([H((t+o)*d),H((g-(e+r))*d),H((t+n)*d),H((g-(e+s))*d),H((t+n)*d),H((g-e)*d),"c"].join(" ")),null!==i&amp;&amp;X(bt(i)),this},z.circle=function(t,e,n,r){return this.ellipse(t,e,n,n,r)},z.setProperties=function(t){for(var e in M)M.hasOwnProperty(e)&amp;&amp;t[e]&amp;&amp;(M[e]=t[e]);return this},z.setFontSize=function(t){return A=t,this},z.setFont=function(t,e){return h=yt(t,e),this},z.setFontStyle=z.setFontType=function(t){return h=yt(void 0,t),this},z.getFontList=function(){var t,e,n,r={};for(t in _)if(_.hasOwnProperty(t)){r[t]=n=[];for(e in _[t])_[t].hasOwnProperty(e)&amp;&amp;n.push(e)}return r},z.addFont=function(t,e,n){st(t,e,n,"StandardEncoding")},z.setLineWidth=function(t){return X((t*d).toFixed(2)+" w"),this},z.setDrawColor=function(t,e,n,r){var i;return i=void 0===e||void 0===r&amp;&amp;t===e===n?"string"==typeof t?t+" G":H(t/255)+" G":void 0===r?"string"==typeof t?[t,e,n,"RG"].join(" "):[H(t/255),H(e/255),H(n/255),"RG"].join(" "):"string"==typeof t?[t,e,n,r,"K"].join(" "):[H(t),H(e),H(n),H(r),"K"].join(" "),X(i),this},z.setFillColor=function(t,e,n,r){var i;return void 0===e||void 0===r&amp;&amp;t===e===n?i="string"==typeof t?t+" g":H(t/255)+" g":void 0===r||"object"==typeof r?(i="string"==typeof t?[t,e,n,"rg"].join(" "):[H(t/255),H(e/255),H(n/255),"rg"].join(" "),r&amp;&amp;0===r.a&amp;&amp;(i=["255","255","255","rg"].join(" "))):i="string"==typeof t?[t,e,n,r,"k"].join(" "):[H(t),H(e),H(n),H(r),"k"].join(" "),X(i),this},z.setTextColor=function(t,e,n){if("string"==typeof t&amp;&amp;/^#[0-9A-Fa-f]{6}$/.test(t)){var r=parseInt(t.substr(1),16);t=r&gt;&gt;16&amp;255,e=r&gt;&gt;8&amp;255,n=255&amp;r}return x=0===t&amp;&amp;0===e&amp;&amp;0===n||"undefined"==typeof e?W(t/255)+" g":[W(t/255),W(e/255),W(n/255),"rg"].join(" "),this},z.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},z.setLineCap=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return N=e,X(e+" J"),this},z.setLineJoin=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return j=e,X(e+" j"),this},z.output=At,z.save=function(t){z.output("save",t)};for(var Ct in n.API)n.API.hasOwnProperty(Ct)&amp;&amp;("events"===Ct&amp;&amp;n.API.events.length?!function(t,e){var n,r,i;for(i=e.length-1;-1!==i;i--)n=e[i][0],r=e[i][1],t.subscribe.apply(t,[n].concat("function"==typeof r?[r]:r))}(U,n.API.events):z[Ct]=n.API[Ct]);return at(),h="F1",mt(c,s),U.publish("initialized"),z}var r="1.3",o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return n.API={events:[]},n.version="1.2.61-git 2016-03-01T16:15:jameshall","function"==typeof define&amp;&amp;define.amd?define("jsPDF",function(){return n}):"undefined"!=typeof module&amp;&amp;module.exports?module.exports=n:t.jsPDF=n,n}("undefined"!=typeof self&amp;&amp;self||"undefined"!=typeof window&amp;&amp;window||this);(AcroForm=function(t){"use strict";AcroForm.scale=function(t){return t*(e.internal.scaleFactor/1)},AcroForm.antiScale=function(t){return 1/e.internal.scaleFactor*t};var e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null};jsPDF.API.acroformPlugin=e;var n=function(){for(var t in this.acroformPlugin.acroFormDictionaryRoot.Fields){var e=this.acroformPlugin.acroFormDictionaryRoot.Fields[t];e.hasAnnotation&amp;&amp;i.call(this,e)}},r=function(){if(this.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");this.acroformPlugin.acroFormDictionaryRoot=new AcroForm.AcroFormDictionary,this.acroformPlugin.internal=this.internal,this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",a),this.internal.events.subscribe("buildDocument",n),this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutPages",c)},i=function(t){var e={type:"reference",object:t};jsPDF.API.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(e)},o=function(t){this.acroformPlugin.printedOut&amp;&amp;(this.acroformPlugin.printedOut=!1,this.acroformPlugin.acroFormDictionaryRoot=null),this.acroformPlugin.acroFormDictionaryRoot||r.call(this),this.acroformPlugin.acroFormDictionaryRoot.Fields.push(t)},s=function(){"undefined"!=typeof this.acroformPlugin.acroFormDictionaryRoot?this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R"):console.log("Root missing...")},a=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID),delete this.acroformPlugin.acroFormDictionaryRoot._eventID,this.acroformPlugin.printedOut=!0},c=function(t){var e=!t;t||(this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId),this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString()));var t=t||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var n in t){var r=t[n],i=r.Rect;r.Rect&amp;&amp;(r.Rect=AcroForm.internal.calculateCoordinates.call(this,r.Rect)),this.internal.newObjectDeferredBegin(r.objId);var o="";if(o+=r.objId+" 0 obj\n",o+="&lt;&lt;\n"+r.getContent(),r.Rect=i,r.hasAppearanceStream&amp;&amp;!r.appearanceStreamContent){var s=AcroForm.internal.calculateAppearanceStream.call(this,r);o+="/AP &lt;&lt; /N "+s+" &gt;&gt;\n",this.acroformPlugin.xForms.push(s)}if(r.appearanceStreamContent){o+="/AP &lt;&lt; ";for(var a in r.appearanceStreamContent){var c=r.appearanceStreamContent[a];if(o+="/"+a+" ",o+="&lt;&lt; ",Object.keys(c).length&gt;=1||Array.isArray(c))for(var n in c){var l=c[n];"function"==typeof l&amp;&amp;(l=l.call(this,r)),o+="/"+n+" "+l+" ",this.acroformPlugin.xForms.indexOf(l)&gt;=0||this.acroformPlugin.xForms.push(l)}else{var l=c;"function"==typeof l&amp;&amp;(l=l.call(this,r)),o+="/"+n+" "+l+" \n",this.acroformPlugin.xForms.indexOf(l)&gt;=0||this.acroformPlugin.xForms.push(l)}o+=" &gt;&gt;\n"}o+="&gt;&gt;\n"}o+="&gt;&gt;\nendobj\n",this.internal.out(o)}e&amp;&amp;u.call(this,this.acroformPlugin.xForms)},u=function(t){for(var e in t){var n=e,r=t[e];this.internal.newObjectDeferredBegin(r.objId);var i="";i+=r.getString(),this.internal.out(i),delete t[n]}};t.addField=function(t){return t instanceof AcroForm.TextField?h.call(this,t):t instanceof AcroForm.ChoiceField?d.call(this,t):t instanceof AcroForm.Button?l.call(this,t):t instanceof AcroForm.ChildClass?o.call(this,t):t&amp;&amp;o.call(this,t),this};var l=function(t){var t=t||new AcroForm.Field;t.FT="/Btn";var e=t.Ff||0;t.pushbutton&amp;&amp;(e=AcroForm.internal.setBitPosition(e,17),delete t.pushbutton),t.radio&amp;&amp;(e=AcroForm.internal.setBitPosition(e,16),delete t.radio),t.noToggleToOff&amp;&amp;(e=AcroForm.internal.setBitPosition(e,15)),t.Ff=e,o.call(this,t)},h=function(t){var t=t||new AcroForm.Field;t.FT="/Tx";var e=t.Ff||0;t.multiline&amp;&amp;(e=4096|e),t.password&amp;&amp;(e=8192|e),t.fileSelect&amp;&amp;(e|=1&lt;&lt;20),t.doNotSpellCheck&amp;&amp;(e|=1&lt;&lt;22),t.doNotScroll&amp;&amp;(e|=1&lt;&lt;23),t.Ff=t.Ff||e,o.call(this,t)},d=function(t){var e=t||new AcroForm.Field;e.FT="/Ch";var n=e.Ff||0;e.combo&amp;&amp;(n=AcroForm.internal.setBitPosition(n,18),delete e.combo),e.edit&amp;&amp;(n=AcroForm.internal.setBitPosition(n,19),delete e.edit),e.sort&amp;&amp;(n=AcroForm.internal.setBitPosition(n,20),delete e.sort),e.multiSelect&amp;&amp;this.internal.getPDFVersion()&gt;=1.4&amp;&amp;(n=AcroForm.internal.setBitPosition(n,22),delete e.multiSelect),e.doNotSpellCheck&amp;&amp;this.internal.getPDFVersion()&gt;=1.4&amp;&amp;(n=AcroForm.internal.setBitPosition(n,23),delete e.doNotSpellCheck),e.Ff=n,o.call(this,e)}})(jsPDF.API),AcroForm.internal={},AcroForm.createFormXObject=function(t){var e=new AcroForm.FormXObject,n=AcroForm.Appearance.internal.getHeight(t)||0,r=AcroForm.Appearance.internal.getWidth(t)||0;return e.BBox=[0,0,r,n],e},AcroForm.Appearance={CheckBox:{createAppearanceStream:function(){var t={N:{On:AcroForm.Appearance.CheckBox.YesNormal},D:{On:AcroForm.Appearance.CheckBox.YesPushDown,Off:AcroForm.Appearance.CheckBox.OffPushDown}};return t},createMK:function(){return"&lt;&lt; /CA (3)&gt;&gt;"},YesPushDown:function(t){var e=AcroForm.createFormXObject(t),n="";t.Q=1;var r=AcroForm.internal.calculateX(t,"3","ZapfDingbats",50);return n+="0.749023 g\n             0 0 "+AcroForm.Appearance.internal.getWidth(t)+" "+AcroForm.Appearance.internal.getHeight(t)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+r.fontSize+" Tf 0 g\n             BT\n",n+=r.text,n+="ET\n             Q\n             EMC\n",e.stream=n,e},YesNormal:function(t){var e=AcroForm.createFormXObject(t),n="";t.Q=1;var r=AcroForm.internal.calculateX(t,"3","ZapfDingbats",.9*AcroForm.Appearance.internal.getHeight(t));return n+="1 g\n0 0 "+AcroForm.Appearance.internal.getWidth(t)+" "+AcroForm.Appearance.internal.getHeight(t)+" re\nf\nq\n0 0 1 rg\n0 0 "+(AcroForm.Appearance.internal.getWidth(t)-1)+" "+(AcroForm.Appearance.internal.getHeight(t)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+r.fontSize+" Tf 0 g\n",n+=r.text,n+="ET\n             Q\n",e.stream=n,e},OffPushDown:function(t){var e=AcroForm.createFormXObject(t),n="";return n+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(t)+" "+AcroForm.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=n,e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:AcroForm.Appearance.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=AcroForm.Appearance.RadioButton.Circle.YesNormal,e.D[t]=AcroForm.Appearance.RadioButton.Circle.YesPushDown,e},createMK:function(){return"&lt;&lt; /CA (l)&gt;&gt;"},YesNormal:function(t){var e=AcroForm.createFormXObject(t),n="",r=AcroForm.Appearance.internal.getWidth(t)&lt;=AcroForm.Appearance.internal.getHeight(t)?AcroForm.Appearance.internal.getWidth(t)/4:AcroForm.Appearance.internal.getHeight(t)/4;r*=.9;var i=AcroForm.Appearance.internal.Bezier_C;return n+="q\n1 0 0 1 "+AcroForm.Appearance.internal.getWidth(t)/2+" "+AcroForm.Appearance.internal.getHeight(t)/2+" cm\n"+r+" 0 m\n"+r+" "+r*i+" "+r*i+" "+r+" 0 "+r+" c\n-"+r*i+" "+r+" -"+r+" "+r*i+" -"+r+" 0 c\n-"+r+" -"+r*i+" -"+r*i+" -"+r+" 0 -"+r+" c\n"+r*i+" -"+r+" "+r+" -"+r*i+" "+r+" 0 c\nf\nQ\n",e.stream=n,e},YesPushDown:function(t){var e=AcroForm.createFormXObject(t),n="",r=AcroForm.Appearance.internal.getWidth(t)&lt;=AcroForm.Appearance.internal.getHeight(t)?AcroForm.Appearance.internal.getWidth(t)/4:AcroForm.Appearance.internal.getHeight(t)/4;r*=.9;var i=AcroForm.Appearance.internal.Bezier_C;return n+="0.749023 g\n            q\n           1 0 0 1 "+AcroForm.Appearance.internal.getWidth(t)/2+" "+AcroForm.Appearance.internal.getHeight(t)/2+" cm\n"+2*r+" 0 m\n"+2*r+" "+2*r*i+" "+2*r*i+" "+2*r+" 0 "+2*r+" c\n-"+2*r*i+" "+2*r+" -"+2*r+" "+2*r*i+" -"+2*r+" 0 c\n-"+2*r+" -"+2*r*i+" -"+2*r*i+" -"+2*r+" 0 -"+2*r+" c\n"+2*r*i+" -"+2*r+" "+2*r+" -"+2*r*i+" "+2*r+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+AcroForm.Appearance.internal.getWidth(t)/2+" "+AcroForm.Appearance.internal.getHeight(t)/2+" cm\n"+r+" 0 m\n"+r+" "+r*i+" "+r*i+" "+r+" 0 "+r+" c\n-"+r*i+" "+r+" -"+r+" "+r*i+" -"+r+" 0 c\n-"+r+" -"+r*i+" -"+r*i+" -"+r+" 0 -"+r+" c\n"+r*i+" -"+r+" "+r+" -"+r*i+" "+r+" 0 c\n            f\n            Q\n",e.stream=n,e},OffPushDown:function(t){var e=AcroForm.createFormXObject(t),n="",r=AcroForm.Appearance.internal.getWidth(t)&lt;=AcroForm.Appearance.internal.getHeight(t)?AcroForm.Appearance.internal.getWidth(t)/4:AcroForm.Appearance.internal.getHeight(t)/4;r*=.9;var i=AcroForm.Appearance.internal.Bezier_C;return n+="0.749023 g\n            q\n 1 0 0 1 "+AcroForm.Appearance.internal.getWidth(t)/2+" "+AcroForm.Appearance.internal.getHeight(t)/2+" cm\n"+2*r+" 0 m\n"+2*r+" "+2*r*i+" "+2*r*i+" "+2*r+" 0 "+2*r+" c\n-"+2*r*i+" "+2*r+" -"+2*r+" "+2*r*i+" -"+2*r+" 0 c\n-"+2*r+" -"+2*r*i+" -"+2*r*i+" -"+2*r+" 0 -"+2*r+" c\n"+2*r*i+" -"+2*r+" "+2*r+" -"+2*r*i+" "+2*r+" 0 c\n            f\n            Q\n",e.stream=n,e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:AcroForm.Appearance.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=AcroForm.Appearance.RadioButton.Cross.YesNormal,e.D[t]=AcroForm.Appearance.RadioButton.Cross.YesPushDown,e},createMK:function(){return"&lt;&lt; /CA (8)&gt;&gt;"},YesNormal:function(t){var e=AcroForm.createFormXObject(t),n="",r=AcroForm.Appearance.internal.calculateCross(t);return n+="q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(t)-2)+" "+(AcroForm.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+r.x1.x+" "+r.x1.y+" m\n            "+r.x2.x+" "+r.x2.y+" l\n            "+r.x4.x+" "+r.x4.y+" m\n            "+r.x3.x+" "+r.x3.y+" l\n            s\n            Q\n",e.stream=n,e},YesPushDown:function(t){var e=AcroForm.createFormXObject(t),n=AcroForm.Appearance.internal.calculateCross(t),r="";return r+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(t)+" "+AcroForm.Appearance.internal.getHeight(t)+" re\n            f\n            q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(t)-2)+" "+(AcroForm.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+n.x1.x+" "+n.x1.y+" m\n            "+n.x2.x+" "+n.x2.y+" l\n            "+n.x4.x+" "+n.x4.y+" m\n            "+n.x3.x+" "+n.x3.y+" l\n            s\n            Q\n",e.stream=r,e},OffPushDown:function(t){var e=AcroForm.createFormXObject(t),n="";return n+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(t)+" "+AcroForm.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=n,e}}},createDefaultAppearanceStream:function(t){var e="";return e+="/Helv 12 Tf 0 g"}},AcroForm.Appearance.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=function(t,e){return t&gt;e?e:t},n=AcroForm.Appearance.internal.getWidth(t),r=AcroForm.Appearance.internal.getHeight(t),i=e(n,r),o={x1:{x:(n-i)/2,y:(r-i)/2+i},x2:{x:(n-i)/2+i,y:(r-i)/2},x3:{x:(n-i)/2,y:(r-i)/2},x4:{x:(n-i)/2+i,y:(r-i)/2+i}};return o}},AcroForm.Appearance.internal.getWidth=function(t){return t.Rect[2]},AcroForm.Appearance.internal.getHeight=function(t){return t.Rect[3]},AcroForm.internal.inherit=function(t,e){Object.create||function(t){var e=function(){};return e.prototype=t,new e};t.prototype=Object.create(e.prototype),t.prototype.constructor=t},AcroForm.internal.arrayToPdfArray=function(t){if(Array.isArray(t)){var e=" [";for(var n in t){var r=t[n].toString();e+=r,e+=n&lt;t.length-1?" ":""}return e+="]"}},AcroForm.internal.toPdfString=function(t){return t=t||"",0!==String.indexOf("(",0)&amp;&amp;(t="("+t),")"!=t.substring(t.length-1)&amp;&amp;(t+="("),t},AcroForm.PDFObject=function(){var t;Object.defineProperty(this,"objId",{get:function(){return t||(this.internal?t=this.internal.newObjectDeferred():jsPDF.API.acroformPlugin.internal&amp;&amp;(t=jsPDF.API.acroformPlugin.internal.newObjectDeferred())),t||console.log("Couldn't create Object ID"),t},configurable:!1})},AcroForm.PDFObject.prototype.toString=function(){return this.objId+" 0 R"},AcroForm.PDFObject.prototype.getString=function(){var t=this.objId+" 0 obj\n&lt;&lt;",e=this.getContent();return t+=e+"&gt;&gt;\n",this.stream&amp;&amp;(t+="stream\n",t+=this.stream,t+="endstream\n"),t+="endobj\n"},AcroForm.PDFObject.prototype.getContent=function(){var t=function(t){var e="",n=Object.keys(t).filter(function(t){return"content"!=t&amp;&amp;"appearanceStreamContent"!=t&amp;&amp;"_"!=t.substring(0,1)});for(var r in n){var i=n[r],o=t[i];o&amp;&amp;(e+=Array.isArray(o)?"/"+i+" "+AcroForm.internal.arrayToPdfArray(o)+"\n":o instanceof AcroForm.PDFObject?"/"+i+" "+o.objId+" 0 R\n":"/"+i+" "+o+"\n")}return e},e="";return e+=t(this)},AcroForm.FormXObject=function(){AcroForm.PDFObject.call(this),this.Type="/XObject",this.Subtype="/Form",this.FormType=1,this.BBox,this.Matrix,this.Resources="2 0 R",this.PieceInfo;var t;Object.defineProperty(this,"Length",{enumerable:!0,get:function(){return void 0!==t?t.length:0}}),Object.defineProperty(this,"stream",{enumerable:!1,set:function(e){t=e},get:function(){return t?t:null}})},AcroForm.internal.inherit(AcroForm.FormXObject,AcroForm.PDFObject),AcroForm.AcroFormDictionary=function(){AcroForm.PDFObject.call(this);var t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length&gt;0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!0,configurable:!0,get:function(){return t}}),this.DA},AcroForm.internal.inherit(AcroForm.AcroFormDictionary,AcroForm.PDFObject),AcroForm.Field=function(){"use strict";AcroForm.PDFObject.call(this);var t;Object.defineProperty(this,"Rect",{enumerable:!0,configurable:!1,get:function(){if(t){var e=t;return e}},set:function(e){t=e}});var e="";Object.defineProperty(this,"FT",{enumerable:!0,set:function(t){e=t},get:function(){return e}});var n;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,set:function(t){n=t},get:function(){if(!n||n.length&lt;1){if(this instanceof AcroForm.ChildClass)return;return"(FieldObject"+AcroForm.Field.FieldNum++ +")"}return"("==n.substring(0,1)&amp;&amp;n.substring(n.length-1)?n:"("+n+")"}});var r;Object.defineProperty(this,"DA",{enumerable:!0,get:function(){return r?"("+r+")":void 0},set:function(t){r=t}});var i;Object.defineProperty(this,"DV",{enumerable:!0,configurable:!0,get:function(){return i?i:void 0},set:function(t){i=t}}),Object.defineProperty(this,"Type",{enumerable:!0,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,get:function(){return this.hasAnnotation?"/Widget":null}}),this.BG,Object.defineProperty(this,"hasAnnotation",{enumerable:!1,get:function(){return!!(this.Rect||this.BC||this.BG)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,configurable:!0})},AcroForm.Field.FieldNum=0,AcroForm.internal.inherit(AcroForm.Field,AcroForm.PDFObject),AcroForm.ChoiceField=function(){AcroForm.Field.call(this),this.FT="/Ch",this.Opt=[],this.V="()",this.TI=0,this.combo=!1,Object.defineProperty(this,"edit",{enumerable:!0,set:function(t){1==t?(this._edit=!0,this.combo=!0):this._edit=!1},get:function(){return this._edit?this._edit:!1},configurable:!1}),this.hasAppearanceStream=!0,this.V.get=function(){AcroForm.internal.toPdfString()}},AcroForm.internal.inherit(AcroForm.ChoiceField,AcroForm.Field),window.ChoiceField=AcroForm.ChoiceField,AcroForm.ListBox=function(){AcroForm.ChoiceField.call(this)},AcroForm.internal.inherit(AcroForm.ListBox,AcroForm.ChoiceField),window.ListBox=AcroForm.ListBox,AcroForm.ComboBox=function(){AcroForm.ListBox.call(this),this.combo=!0},AcroForm.internal.inherit(AcroForm.ComboBox,AcroForm.ListBox),window.ComboBox=AcroForm.ComboBox,AcroForm.EditBox=function(){AcroForm.ComboBox.call(this),this.edit=!0},AcroForm.internal.inherit(AcroForm.EditBox,AcroForm.ComboBox),window.EditBox=AcroForm.EditBox,AcroForm.Button=function(){AcroForm.Field.call(this),this.FT="/Btn"},AcroForm.internal.inherit(AcroForm.Button,AcroForm.Field),window.Button=AcroForm.Button,AcroForm.PushButton=function(){AcroForm.Button.call(this),this.pushbutton=!0},AcroForm.internal.inherit(AcroForm.PushButton,AcroForm.Button),window.PushButton=AcroForm.PushButton,AcroForm.RadioButton=function(){AcroForm.Button.call(this),this.radio=!0;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,get:function(){return t.length&gt;0?t:void 0}}),Object.defineProperty(this,"__Kids",{get:function(){return t}});var e;Object.defineProperty(this,"noToggleToOff",{enumerable:!1,get:function(){return e},set:function(t){e=t}})},AcroForm.internal.inherit(AcroForm.RadioButton,AcroForm.Button),window.RadioButton=AcroForm.RadioButton,AcroForm.ChildClass=function(t,e){AcroForm.Field.call(this),this.Parent=t,this._AppearanceType=AcroForm.Appearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(e),this.F=AcroForm.internal.setBitPosition(this.F,3,1),this.MK=this._AppearanceType.createMK(),this.AS="/Off",this._Name=e},AcroForm.internal.inherit(AcroForm.ChildClass,AcroForm.Field),AcroForm.RadioButton.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t&amp;&amp;"createMK"in t))return void console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.__Kids){var n=this.__Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n._Name),n.MK=t.createMK()}},AcroForm.RadioButton.prototype.createOption=function(t){var e=this,n=(this.__Kids.length,new AcroForm.ChildClass(e,t));return this.__Kids.push(n),jsPDF.API.addField(n),n},AcroForm.CheckBox=function(){Button.call(this),this.appearanceStreamContent=AcroForm.Appearance.CheckBox.createAppearanceStream(),this.MK=AcroForm.Appearance.CheckBox.createMK(),this.AS="/On",this.V="/On"},AcroForm.internal.inherit(AcroForm.CheckBox,AcroForm.Button),window.CheckBox=AcroForm.CheckBox,AcroForm.TextField=function(){AcroForm.Field.call(this);var t;Object.defineProperty(this,"V",{get:function(){return t?"("+t+")":t},enumerable:!0,set:function(e){t=e}});var e;Object.defineProperty(this,"DV",{get:function(){return e?"("+e+")":e},enumerable:!0,set:function(t){e=t}});var n=!1;Object.defineProperty(this,"multiline",{enumerable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,get:function(){return this.V||this.DV}})},AcroForm.internal.inherit(AcroForm.TextField,AcroForm.Field),window.TextField=AcroForm.TextField,AcroForm.PasswordField=function(){TextField.call(this),Object.defineProperty(this,"password",{value:!0,enumerable:!1,configurable:!1,writable:!1})},AcroForm.internal.inherit(AcroForm.PasswordField,AcroForm.TextField),window.PasswordField=AcroForm.PasswordField,AcroForm.internal.calculateFontSpace=function(t,e,n){var n=n||"helvetica",r=AcroForm.internal.calculateFontSpace.canvas||(AcroForm.internal.calculateFontSpace.canvas=document.createElement("canvas")),i=r.getContext("2d");i.save();var o=e+" "+n;i.font=o;var s=i.measureText(t);i.fontcolor="black";var i=r.getContext("2d");s.height=1.5*i.measureText("3").width,i.restore();s.width;return s},AcroForm.internal.calculateX=function(t,e,n,r){var r=r||12,n=n||"helvetica",i={text:"",fontSize:""};e="("==e.substr(0,1)?e.substr(1):e,e=")"==e.substr(e.length-1)?e.substr(0,e.length-1):e;var o=e.split(" "),s=r,a=2,c=2,u=AcroForm.Appearance.internal.getHeight(t)||0;u=0&gt;u?-u:u;var l=AcroForm.Appearance.internal.getWidth(t)||0;l=0&gt;l?-l:l;var h=function(t,e,r){if(t+1&lt;o.length){var i=e+" "+o[t+1],s=AcroForm.internal.calculateFontSpace(i,r+"px",n).width,a=l-2*c;return a&gt;=s}return!1};s++;t:for(;;){var e="";s--;var d=AcroForm.internal.calculateFontSpace("3",s+"px",n).height,f=t.multiline?u-s:(u-d)/2;f+=a;var p=-c,m=p,g=f,w=0,y=0,v=0;if(0==s){s=12,e="(...) Tj\n",e+="% Width of Text: "+AcroForm.internal.calculateFontSpace(e,"1px").width+", FieldWidth:"+l+"\n";break}v=AcroForm.internal.calculateFontSpace(o[0]+" ",s+"px",n).width;var b="",x=0;for(var k in o){b+=o[k]+" ",b=" "==b.substr(b.length-1)?b.substr(0,b.length-1):b;var A=parseInt(k);v=AcroForm.internal.calculateFontSpace(b+" ",s+"px",n).width;var C=h(A,b,s),E=k&gt;=o.length-1;if(!C||E){if(C||E){if(E)y=A;else if(t.multiline&amp;&amp;(d+a)*(x+2)+a&gt;u)continue t}else{if(!t.multiline)continue t;if((d+a)*(x+2)+a&gt;u)continue t;y=A}for(var S="",F=w;y&gt;=F;F++)S+=o[F]+" ";switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,v=AcroForm.internal.calculateFontSpace(S,s+"px",n).width,t.Q){case 2:p=l-v-c;break;case 1:p=(l-v)/2;break;case 0:default:p=c}e+=p+" "+g+" Td\n",e+="("+S+") Tj\n",e+=-p+" 0 Td\n",g=-(s+a),m=p,v=0,w=y+1,x++,b=""}else b+=" "}break}return i.text=e,i.fontSize=s,i},AcroForm.internal.calculateAppearanceStream=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e="",n=t.V||t.DV,r=AcroForm.internal.calculateX(t,n);e+="/Tx BMC\nq\n/F1 "+r.fontSize+" Tf\n1 0 0 1 0 0 Tm\n",e+="BT\n",e+=r.text,e+="ET\n",e+="Q\nEMC\n";var i=new AcroForm.createFormXObject(t);i.stream=e;return i}},AcroForm.internal.calculateCoordinates=function(t,e,n,r){function i(t){return t*this.internal.scaleFactor}var o={};return this.internal?Array.isArray(t)?(t[0]=AcroForm.scale(t[0]),t[1]=AcroForm.scale(t[1]),t[2]=AcroForm.scale(t[2]),t[3]=AcroForm.scale(t[3]),o.lowerLeft_X=0|t[0],o.lowerLeft_Y=i.call(this,this.internal.pageSize.height)-t[3]-t[1]|0,o.upperRight_X=t[0]+t[2]|0,o.upperRight_Y=i.call(this,this.internal.pageSize.height)-t[1]|0):(t=AcroForm.scale(t),e=AcroForm.scale(e),n=AcroForm.scale(n),r=AcroForm.scale(r),o.lowerLeft_X=0|t,o.lowerLeft_Y=this.internal.pageSize.height-e|0,o.upperRight_X=t+n|0,o.upperRight_Y=this.internal.pageSize.height-e+r|0):Array.isArray(t)?(o.lowerLeft_X=0|t[0],o.lowerLeft_Y=0|t[1],o.upperRight_X=t[0]+t[2]|0,o.upperRight_Y=t[1]+t[3]|0):(o.lowerLeft_X=0|t,o.lowerLeft_Y=0|e,o.upperRight_X=t+n|0,o.upperRight_Y=e+r|0),[o.lowerLeft_X,o.lowerLeft_Y,o.upperRight_X,o.upperRight_Y]},AcroForm.internal.calculateColor=function(t,e,n){var r=new Array(3);return r.r=0|t,r.g=0|e,r.b=0|n,r},AcroForm.internal.getBitPosition=function(t,e){t=t||0;var n=1;return n&lt;&lt;=e-1,t|n},AcroForm.internal.setBitPosition=function(t,e,n){t=t||0,n=n||1;var r=1;if(r&lt;&lt;=e-1,1==n)var t=t|r;else var t=t&amp;~r;return t},function(t){"use strict";t.addHTML=function(t,e,n,r,i){if("undefined"==typeof html2canvas&amp;&amp;"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof e&amp;&amp;(r=e,i=n),"function"==typeof r&amp;&amp;(i=r,r=null);var o=this.internal,s=o.scaleFactor,a=o.pageSize.width,c=o.pageSize.height;if(r=r||{},r.onrendered=function(t){e=parseInt(e)||0,n=parseInt(n)||0;var o=r.dim||{},u=o.h||0,l=o.w||Math.min(a,t.width/s)-e,h="JPEG";if(r.format&amp;&amp;(h=r.format),t.height&gt;c&amp;&amp;r.pagesplit){var d=function(){for(var r=0;;){var o=document.createElement("canvas");o.width=Math.min(a*s,t.width),o.height=Math.min(c*s,t.height-r);var u=o.getContext("2d");u.drawImage(t,0,r,t.width,o.height,0,0,o.width,o.height);var d=[o,e,r?0:n,o.width/s,o.height/s,h,null,"SLOW"];if(this.addImage.apply(this,d),r+=o.height,r&gt;=t.height)break;this.addPage()}i(l,r,null,d)}.bind(this);if("CANVAS"===t.nodeName){var f=new Image;f.onload=d,f.src=t.toDataURL("image/png"),t=f}else d()}else{var p=Math.random().toString(35),m=[t,e,n,l,u,h,p,"SLOW"];this.addImage.apply(this,m),i(l,u,p,m)}}.bind(this),"undefined"!=typeof html2canvas&amp;&amp;!r.rstz)return html2canvas(t,r);if("undefined"!=typeof rasterizeHTML){var u="drawDocument";return"string"==typeof t&amp;&amp;(u=/^http/.test(t)?"drawURL":"drawHTML"),r.width=r.width||a*s,rasterizeHTML[u](t,void 0,r).then(function(t){r.onrendered(t.image)},function(t){i(null,t)})}return null}}(jsPDF.API),function(t){"use strict";var e="addImage_",n=["jpeg","jpg","png"],r=function(t){var e=this.internal.newObject(),n=this.internal.write,i=this.internal.putStream;if(t.n=e,n("&lt;&lt;/Type /XObject"),n("/Subtype /Image"),n("/Width "+t.w),n("/Height "+t.h),t.cs===this.color_spaces.INDEXED?n("/ColorSpace [/Indexed /DeviceRGB "+(t.pal.length/3-1)+" "+("smask"in t?e+2:e+1)+" 0 R]"):(n("/ColorSpace /"+t.cs),t.cs===this.color_spaces.DEVICE_CMYK&amp;&amp;n("/Decode [1 0 1 0 1 0 1 0]")),n("/BitsPerComponent "+t.bpc),"f"in t&amp;&amp;n("/Filter /"+t.f),"dp"in t&amp;&amp;n("/DecodeParms &lt;&lt;"+t.dp+"&gt;&gt;"),"trns"in t&amp;&amp;t.trns.constructor==Array){for(var o="",s=0,a=t.trns.length;a&gt;s;s++)o+=t.trns[s]+" "+t.trns[s]+" ";
n("/Mask ["+o+"]")}if("smask"in t&amp;&amp;n("/SMask "+(e+1)+" 0 R"),n("/Length "+t.data.length+"&gt;&gt;"),i(t.data),n("endobj"),"smask"in t){var c="/Predictor 15 /Colors 1 /BitsPerComponent "+t.bpc+" /Columns "+t.w,u={w:t.w,h:t.h,cs:"DeviceGray",bpc:t.bpc,dp:c,data:t.smask};"f"in t&amp;&amp;(u.f=t.f),r.call(this,u)}t.cs===this.color_spaces.INDEXED&amp;&amp;(this.internal.newObject(),n("&lt;&lt; /Length "+t.pal.length+"&gt;&gt;"),i(this.arrayBufferToBinaryString(new Uint8Array(t.pal))),n("endobj"))},i=function(){var t=this.internal.collections[e+"images"];for(var n in t)r.call(this,t[n])},o=function(){var t,n=this.internal.collections[e+"images"],r=this.internal.write;for(var i in n)t=n[i],r("/I"+t.i,t.n,"0","R")},s=function(e){return e&amp;&amp;"string"==typeof e&amp;&amp;(e=e.toUpperCase()),e in t.image_compression?e:t.image_compression.NONE},a=function(){var t=this.internal.collections[e+"images"];return t||(this.internal.collections[e+"images"]=t={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o)),t},c=function(t){var e=0;return t&amp;&amp;(e=Object.keys?Object.keys(t).length:function(t){var e=0;for(var n in t)t.hasOwnProperty(n)&amp;&amp;e++;return e}(t)),e},u=function(t){return"undefined"==typeof t||null===t},l=function(e){return"string"==typeof e&amp;&amp;t.sHashCode(e)},h=function(t){return-1===n.indexOf(t)},d=function(e){return"function"!=typeof t["process"+e.toUpperCase()]},f=function(t){return"object"==typeof t&amp;&amp;1===t.nodeType},p=function(t,e,n){if("IMG"===t.nodeName&amp;&amp;t.hasAttribute("src")){var r=""+t.getAttribute("src");if(!n&amp;&amp;0===r.indexOf("data:image/"))return r;!e&amp;&amp;/\.png(?:[?#].*)?$/i.test(r)&amp;&amp;(e="png")}if("CANVAS"===t.nodeName)var i=t;else{var i=document.createElement("canvas");i.width=t.clientWidth||t.width,i.height=t.clientHeight||t.height;var o=i.getContext("2d");if(!o)throw"addImage requires canvas to be supported by browser.";if(n){var s,a,c,u,l,h,d,f,p=Math.PI/180;"object"==typeof n&amp;&amp;(s=n.x,a=n.y,c=n.bg,n=n.angle),f=n*p,u=Math.abs(Math.cos(f)),l=Math.abs(Math.sin(f)),h=i.width,d=i.height,i.width=d*l+h*u,i.height=d*u+h*l,isNaN(s)&amp;&amp;(s=i.width/2),isNaN(a)&amp;&amp;(a=i.height/2),o.clearRect(0,0,i.width,i.height),o.fillStyle=c||"white",o.fillRect(0,0,i.width,i.height),o.save(),o.translate(s,a),o.rotate(f),o.drawImage(t,-(h/2),-(d/2)),o.rotate(-f),o.translate(-s,-a),o.restore()}else o.drawImage(t,0,0,i.width,i.height)}return i.toDataURL("png"==(""+e).toLowerCase()?"image/png":"image/jpeg")},m=function(t,e){var n;if(e)for(var r in e)if(t===e[r].alias){n=e[r];break}return n},g=function(t,e,n){return t||e||(t=-96,e=-96),0&gt;t&amp;&amp;(t=-1*n.w*72/t/this.internal.scaleFactor),0&gt;e&amp;&amp;(e=-1*n.h*72/e/this.internal.scaleFactor),0===t&amp;&amp;(t=e*n.w/n.h),0===e&amp;&amp;(e=t*n.h/n.w),[t,e]},w=function(t,e,n,r,i,o,s){var a=g.call(this,n,r,i),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;n=a[0],r=a[1],s[o]=i,this.internal.write("q",c(n),"0 0",c(r),c(t),u(e+r),"cm /I"+i.i,"Do Q")};t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"},t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},t.sHashCode=function(t){return Array.prototype.reduce&amp;&amp;t.split("").reduce(function(t,e){return t=(t&lt;&lt;5)-t+e.charCodeAt(0),t&amp;t},0)},t.isString=function(t){return"string"==typeof t},t.extractInfoFromBase64DataURI=function(t){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(t)},t.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&amp;&amp;"undefined"!=typeof Uint8Array},t.isArrayBuffer=function(t){return this.supportsArrayBuffer()?t instanceof ArrayBuffer:!1},t.isArrayBufferView=function(t){return this.supportsArrayBuffer()?"undefined"==typeof Uint32Array?!1:t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&amp;&amp;t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array:!1},t.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;e&gt;r;r++)n[r]=t.charCodeAt(r);return n},t.arrayBufferToBinaryString=function(t){if("TextDecoder"in window){var e=new TextDecoder("ascii");return e.decode(t)}this.isArrayBuffer(t)&amp;&amp;(t=new Uint8Array(t));for(var n="",r=t.byteLength,i=0;r&gt;i;i++)n+=String.fromCharCode(t[i]);return n},t.arrayBufferToBase64=function(t){for(var e,n,r,i,o,s="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=new Uint8Array(t),u=c.byteLength,l=u%3,h=u-l,d=0;h&gt;d;d+=3)o=c[d]&lt;&lt;16|c[d+1]&lt;&lt;8|c[d+2],e=(16515072&amp;o)&gt;&gt;18,n=(258048&amp;o)&gt;&gt;12,r=(4032&amp;o)&gt;&gt;6,i=63&amp;o,s+=a[e]+a[n]+a[r]+a[i];return 1==l?(o=c[h],e=(252&amp;o)&gt;&gt;2,n=(3&amp;o)&lt;&lt;4,s+=a[e]+a[n]+"=="):2==l&amp;&amp;(o=c[h]&lt;&lt;8|c[h+1],e=(64512&amp;o)&gt;&gt;10,n=(1008&amp;o)&gt;&gt;4,r=(15&amp;o)&lt;&lt;2,s+=a[e]+a[n]+a[r]+"="),s},t.createImageInfo=function(t,e,n,r,i,o,s,a,c,u,l,h){var d={alias:a,w:e,h:n,cs:r,bpc:i,i:s,data:t};return o&amp;&amp;(d.f=o),c&amp;&amp;(d.dp=c),u&amp;&amp;(d.trns=u),l&amp;&amp;(d.pal=l),h&amp;&amp;(d.smask=h),d},t.addImage=function(t,e,r,i,o,g,y,v,b){if("string"!=typeof e){var x=g;g=o,o=i,i=r,r=e,e=x}if("object"==typeof t&amp;&amp;!f(t)&amp;&amp;"imageData"in t){var k=t;t=k.imageData,e=k.format||e,r=k.x||r||0,i=k.y||i||0,o=k.w||o,g=k.h||g,y=k.alias||y,v=k.compression||v,b=k.rotation||k.angle||b}if(isNaN(r)||isNaN(i))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var A,C=a.call(this);if(!(A=m(t,C))){var E;if(f(t)&amp;&amp;(t=p(t,e,b)),u(y)&amp;&amp;(y=l(t)),!(A=m(y,C))){if(this.isString(t)){var S=this.extractInfoFromBase64DataURI(t);S?(e=S[2],t=atob(S[3])):137===t.charCodeAt(0)&amp;&amp;80===t.charCodeAt(1)&amp;&amp;78===t.charCodeAt(2)&amp;&amp;71===t.charCodeAt(3)&amp;&amp;(e="png")}if(e=(e||"JPEG").toLowerCase(),h(e))throw new Error("addImage currently only supports formats "+n+", not '"+e+"'");if(d(e))throw new Error("please ensure that the plugin for '"+e+"' support is added");if(this.supportsArrayBuffer()&amp;&amp;(t instanceof Uint8Array||(E=t,t=this.binaryStringToUint8Array(t))),A=this["process"+e.toUpperCase()](t,c(C),y,s(v),E),!A)throw new Error("An unkwown error occurred whilst processing the image")}}return w.call(this,r,i,o,g,A,A.i,C),this};var y=function(t){var e,n,r;if(255===!t.charCodeAt(0)||216===!t.charCodeAt(1)||255===!t.charCodeAt(2)||224===!t.charCodeAt(3)||!t.charCodeAt(6)==="J".charCodeAt(0)||!t.charCodeAt(7)==="F".charCodeAt(0)||!t.charCodeAt(8)==="I".charCodeAt(0)||!t.charCodeAt(9)==="F".charCodeAt(0)||0===!t.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var i=256*t.charCodeAt(4)+t.charCodeAt(5),o=4,s=t.length;s&gt;o;){if(o+=i,255!==t.charCodeAt(o))throw new Error("getJpegSize could not find the size of the image");if(192===t.charCodeAt(o+1)||193===t.charCodeAt(o+1)||194===t.charCodeAt(o+1)||195===t.charCodeAt(o+1)||196===t.charCodeAt(o+1)||197===t.charCodeAt(o+1)||198===t.charCodeAt(o+1)||199===t.charCodeAt(o+1))return n=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),e=256*t.charCodeAt(o+7)+t.charCodeAt(o+8),r=t.charCodeAt(o+9),[e,n,r];o+=2,i=256*t.charCodeAt(o)+t.charCodeAt(o+1)}},v=function(t){var e=t[0]&lt;&lt;8|t[1];if(65496!==e)throw new Error("Supplied data is not a JPEG");for(var n,r,i,o,s=t.length,a=(t[4]&lt;&lt;8)+t[5],c=4;s&gt;c;){if(c+=a,n=b(t,c),a=(n[2]&lt;&lt;8)+n[3],(192===n[1]||194===n[1])&amp;&amp;255===n[0]&amp;&amp;a&gt;7)return n=b(t,c+5),r=(n[2]&lt;&lt;8)+n[3],i=(n[0]&lt;&lt;8)+n[1],o=n[4],{width:r,height:i,numcomponents:o};c+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},b=function(t,e){return t.subarray(e,e+5)};t.processJPEG=function(t,e,n,r,i){var o,s=this.color_spaces.DEVICE_RGB,a=this.decode.DCT_DECODE,c=8;return this.isString(t)?(o=y(t),this.createImageInfo(t,o[0],o[1],1==o[3]?this.color_spaces.DEVICE_GRAY:s,c,a,e,n)):(this.isArrayBuffer(t)&amp;&amp;(t=new Uint8Array(t)),this.isArrayBufferView(t)?(o=v(t),t=i||this.arrayBufferToBinaryString(t),this.createImageInfo(t,o.width,o.height,1==o.numcomponents?this.color_spaces.DEVICE_GRAY:s,c,a,e,n)):null)},t.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(jsPDF.API),function(t){"use strict";var e={annotations:[],f2:function(t){return t.toFixed(2)},notEmpty:function(t){return"undefined"!=typeof t&amp;&amp;""!=t?!0:void 0}};return jsPDF.API.annotationPlugin=e,jsPDF.API.events.push(["addPage",function(t){this.annotationPlugin.annotations[t.pageNumber]=[]}]),t.events.push(["putPage",function(t){for(var n=this.annotationPlugin.annotations[t.pageNumber],r=!1,i=0;i&lt;n.length&amp;&amp;!r;i++){var o=n[i];switch(o.type){case"link":if(e.notEmpty(o.options.url)||e.notEmpty(o.options.pageNumber)){r=!0;break}case"reference":case"text":case"freetext":r=!0}}if(0!=r){this.internal.write("/Annots [");for(var s=this.annotationPlugin.f2,a=this.internal.scaleFactor,c=this.internal.pageSize.height,u=this.internal.getPageInfo(t.pageNumber),i=0;i&lt;n.length;i++){var o=n[i];switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var l=this.internal.newAdditionalObject(),h=this.internal.newAdditionalObject(),d=o.title||"Note",f="/Rect ["+s(o.bounds.x*a)+" "+s(c-(o.bounds.y+o.bounds.h)*a)+" "+s((o.bounds.x+o.bounds.w)*a)+" "+s((c-o.bounds.y)*a)+"] ";y="&lt;&lt;/Type /Annot /Subtype /Text "+f+"/Contents ("+o.contents+")",y+=" /Popup "+h.objId+" 0 R",y+=" /P "+u.objId+" 0 R",y+=" /T ("+d+") &gt;&gt;",l.content=y;var p=l.objId+" 0 R",m=30,f="/Rect ["+s((o.bounds.x+m)*a)+" "+s(c-(o.bounds.y+o.bounds.h)*a)+" "+s((o.bounds.x+o.bounds.w+m)*a)+" "+s((c-o.bounds.y)*a)+"] ";y="&lt;&lt;/Type /Annot /Subtype /Popup "+f+" /Parent "+p,o.open&amp;&amp;(y+=" /Open true"),y+=" &gt;&gt;",h.content=y,this.internal.write(l.objId,"0 R",h.objId,"0 R");break;case"freetext":var f="/Rect ["+s(o.bounds.x*a)+" "+s((c-o.bounds.y)*a)+" "+s(o.bounds.x+o.bounds.w*a)+" "+s(c-(o.bounds.y+o.bounds.h)*a)+"] ",g=o.color||"#000000";y="&lt;&lt;/Type /Annot /Subtype /FreeText "+f+"/Contents ("+o.contents+")",y+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+g+")",y+=" /Border [0 0 0]",y+=" &gt;&gt;",this.internal.write(y);break;case"link":if(o.options.name){var w=this.annotations._nameMap[o.options.name];o.options.pageNumber=w.page,o.options.top=w.y}else o.options.top||(o.options.top=0);var f="/Rect ["+s(o.x*a)+" "+s((c-o.y)*a)+" "+s(o.x+o.w*a)+" "+s(c-(o.y+o.h)*a)+"] ",y="";if(o.options.url)y="&lt;&lt;/Type /Annot /Subtype /Link "+f+"/Border [0 0 0] /A &lt;&lt;/S /URI /URI ("+o.options.url+") &gt;&gt;";else if(o.options.pageNumber){var t=this.internal.getPageInfo(o.options.pageNumber);switch(y="&lt;&lt;/Type /Annot /Subtype /Link "+f+"/Border [0 0 0] /Dest ["+t.objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":y+=" /Fit]";break;case"FitH":y+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,y+=" /FitV "+o.options.left+"]";break;case"XYZ":default:var v=s((c-o.options.top)*a);o.options.left=o.options.left||0,"undefined"==typeof o.options.zoom&amp;&amp;(o.options.zoom=0),y+=" /XYZ "+o.options.left+" "+v+" "+o.options.zoom+"]"}}""!=y&amp;&amp;(y+=" &gt;&gt;",this.internal.write(y))}}this.internal.write("]")}}]),t.createAnnotation=function(t){switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(t)}},t.link=function(t,e,n,r,i){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:t,y:e,w:n,h:r,options:i,type:"link"})},t.link=function(t,e,n,r,i){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:t,y:e,w:n,h:r,options:i,type:"link"})},t.textWithLink=function(t,e,n,r){var i=this.getTextWidth(t),o=this.internal.getLineHeight();return this.text(t,e,n),n+=.2*o,this.link(e,n-o,i,o,r),i},t.getTextWidth=function(t){var e=this.internal.getFontSize(),n=this.getStringUnitWidth(t)*e/this.internal.scaleFactor;return n},t.getLineHeight=function(){return this.internal.getLineHeight()},this}(jsPDF.API),function(t){"use strict";t.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("&lt;&lt; /S/Named /Type/Action /N/Print &gt;&gt;","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this}}(jsPDF.API),function(t){"use strict";return t.events.push(["initialized",function(){this.canvas.pdf=this}]),t.canvas={getContext:function(t){return this.pdf.context2d},style:{}},Object.defineProperty(t.canvas,"width",{get:function(){return this._width},set:function(t){this._width=t,this.getContext("2d").pageWrapX=t+1}}),Object.defineProperty(t.canvas,"height",{get:function(){return this._height},set:function(t){this._height=t,this.getContext("2d").pageWrapY=t+1}}),this}(jsPDF.API),function(t){"use strict";var e,n,r,i,o=3,s=13,a={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},c=1,u=function(t,e,n,r,i){a={x:t,y:e,w:n,h:r,ln:i}},l=function(){return a},h={left:0,top:0,bottom:0};t.setHeaderFunction=function(t){i=t},t.getTextDimensions=function(t){e=this.internal.getFont().fontName,n=this.table_font_size||this.internal.getFontSize(),r=this.internal.getFont().fontStyle;var i,o,s=19.049976/25.4;o=document.createElement("font"),o.id="jsPDFCell";try{o.style.fontStyle=r}catch(a){o.style.fontWeight=r}o.style.fontName=e,o.style.fontSize=n+"pt";try{o.textContent=t}catch(a){o.innerText=t}return document.body.appendChild(o),i={w:(o.offsetWidth+1)*s,h:(o.offsetHeight+1)*s},document.body.removeChild(o),i},t.cellAddPage=function(){var t=this.margins||h;this.addPage(),u(t.left,t.top,void 0,void 0),c+=1},t.cellInitialize=function(){a={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},c=1},t.cell=function(t,e,n,r,i,a,c){var d=l(),f=!1;if(void 0!==d.ln)if(d.ln===a)t=d.x+d.w,e=d.y;else{var p=this.margins||h;d.y+d.h+r+s&gt;=this.internal.pageSize.height-p.bottom&amp;&amp;(this.cellAddPage(),f=!0,this.printHeaders&amp;&amp;this.tableHeaderRow&amp;&amp;this.printHeaderRow(a,!0)),e=l().y+l().h,f&amp;&amp;(e=s+10)}if(void 0!==i[0])if(this.printingHeaderRow?this.rect(t,e,n,r,"FD"):this.rect(t,e,n,r),"right"===c){i instanceof Array||(i=[i]);for(var m=0;m&lt;i.length;m++){var g=i[m],w=this.getStringUnitWidth(g)*this.internal.getFontSize();this.text(g,t+n-w-o,e+this.internal.getLineHeight()*(m+1))}}else this.text(i,t+o,e+this.internal.getLineHeight());return u(t,e,n,r,a),this},t.arrayMax=function(t,e){var n,r,i,o=t[0];for(n=0,r=t.length;r&gt;n;n+=1)i=t[n],e?-1===e(o,i)&amp;&amp;(o=i):i&gt;o&amp;&amp;(o=i);return o},t.table=function(e,n,r,i,o){if(!r)throw"No data for PDF table";var s,u,l,d,f,p,m,g,w,y,v=[],b=[],x={},k={},A=[],C=[],E=!1,S=!0,F=12,T=h;if(T.width=this.internal.pageSize.width,o&amp;&amp;(o.autoSize===!0&amp;&amp;(E=!0),o.printHeaders===!1&amp;&amp;(S=!1),o.fontSize&amp;&amp;(F=o.fontSize),o.css["font-size"]&amp;&amp;(F=16*o.css["font-size"]),o.margins&amp;&amp;(T=o.margins)),this.lnMod=0,a={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},c=1,this.printHeaders=S,this.margins=T,this.setFontSize(F),this.table_font_size=F,void 0===i||null===i)v=Object.keys(r[0]);else if(i[0]&amp;&amp;"string"!=typeof i[0]){var P=19.049976/25.4;for(u=0,l=i.length;l&gt;u;u+=1)s=i[u],v.push(s.name),b.push(s.prompt),k[s.name]=s.width*P}else v=i;if(E)for(y=function(t){return t[s]},u=0,l=v.length;l&gt;u;u+=1){for(s=v[u],x[s]=r.map(y),A.push(this.getTextDimensions(b[u]||s).w),p=x[s],m=0,d=p.length;d&gt;m;m+=1)f=p[m],A.push(this.getTextDimensions(f).w);k[s]=t.arrayMax(A),A=[]}if(S){var _=this.calculateLineHeight(v,k,b.length?b:v);for(u=0,l=v.length;l&gt;u;u+=1)s=v[u],C.push([e,n,k[s],_,String(b.length?b[u]:s)]);this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}for(u=0,l=r.length;l&gt;u;u+=1){var _;for(g=r[u],_=this.calculateLineHeight(v,k,g),m=0,w=v.length;w&gt;m;m+=1)s=v[m],this.cell(e,n,k[s],_,g[s],u+2,s.align)}return this.lastCellPos=a,this.table_x=e,this.table_y=n,this},t.calculateLineHeight=function(t,e,n){for(var r,i=0,s=0;s&lt;t.length;s++){r=t[s],n[r]=this.splitTextToSize(String(n[r]),e[r]-o);var a=this.internal.getLineHeight()*n[r].length+o;a&gt;i&amp;&amp;(i=a)}return i},t.setTableHeaderRow=function(t){this.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var n,r,o,a;if(this.printingHeaderRow=!0,void 0!==i){var l=i(this,c);u(l[0],l[1],l[2],l[3],-1)}this.setFontStyle("bold");var h=[];for(o=0,a=this.tableHeaderRow.length;a&gt;o;o+=1)this.setFillColor(200,200,200),n=this.tableHeaderRow[o],e&amp;&amp;(this.margins.top=s,n[1]=this.margins&amp;&amp;this.margins.top||0,h.push(n)),r=[].concat(n),this.cell.apply(this,r.concat(t));h.length&gt;0&amp;&amp;this.setTableHeaderRow(h),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(jsPDF.API),function(t){"use strict";function e(){this.fillStyle="#000000",this.strokeStyle="#000000",this.font="12pt times",this.textBaseline="alphabetic",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this._translate={x:0,y:0},this.copy=function(t){this.fillStyle=t.fillStyle,this.strokeStyle=t.strokeStyle,this.font=t.font,this.lineWidth=t.lineWidth,this.lineJoin=t.lineJoin,this.lineCap=t.lineCap,this.textBaseline=t.textBaseline,this._fontSize=t._fontSize,this._translate={x:t._translate.x,y:t._translate.y}}}t.events.push(["initialized",function(){this.context2d.pdf=this,this.context2d.internal.pdf=this,this.context2d.ctx=new e,this.context2d.ctxStack=[],this.context2d.path=[]}]),t.context2d={pageWrapXEnabled:!1,pageWrapYEnabled:!0,pageWrapX:9999999,pageWrapY:9999999,f2:function(t){return t.toFixed(2)},fillRect:function(t,e,n,r){t=this._wrapX(t),e=this._wrapY(e),this.pdf.rect(t,e,n,r,"f")},strokeRect:function(t,e,n,r){t=this._wrapX(t),e=this._wrapY(e),this.pdf.rect(t,e,n,r,"s")},clearRect:function(t,e,n,r){t=this._wrapX(t),e=this._wrapY(e),this.save(),this.setFillStyle("#ffffff"),this.pdf.rect(t,e,n,r,"f"),this.restore()},save:function(){this.ctx._fontSize=this.pdf.internal.getFontSize();var t=new e;t.copy(this.ctx),this.ctxStack.push(this.ctx),this.ctx=t},restore:function(){this.ctx=this.ctxStack.pop(),this.setFillStyle(this.ctx.fillStyle),this.setStrokeStyle(this.ctx.strokeStyle),this.setFont(this.ctx.font),this.pdf.setFontSize(this.ctx._fontSize),this.setLineCap(this.ctx.lineCap),this.setLineWidth(this.ctx.lineWidth),this.setLineJoin(this.ctx.lineJoin)},beginPath:function(){this.path=[]},closePath:function(){this.path.push({type:"close"})},setFillStyle:function(t){var e,n,r,i,o=this.internal.rxRgb.exec(t);null!=o?(e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3])):(o=this.internal.rxRgba.exec(t),null!=o?(e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=parseInt(o[4])):("#"!=t.charAt(0)&amp;&amp;(t=CssColors.colorNameToHex(t),t||(t="#000000")),this.ctx.fillStyle=t,4===t.length?(e=this.ctx.fillStyle.substring(1,2),e+=e,n=this.ctx.fillStyle.substring(2,3),n+=n,r=this.ctx.fillStyle.substring(3,4),r+=r):(e=this.ctx.fillStyle.substring(1,3),n=this.ctx.fillStyle.substring(3,5),r=this.ctx.fillStyle.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16))),this.pdf.setFillColor(e,n,r,{a:i}),this.pdf.setTextColor(e,n,r,{a:i})},setStrokeStyle:function(t){"#"!=t.charAt(0)&amp;&amp;(t=CssColors.colorNameToHex(t),t||(t="#000000")),this.ctx.strokeStyle=t;var e=this.ctx.strokeStyle.substring(1,3);e=parseInt(e,16);var n=this.ctx.strokeStyle.substring(3,5);n=parseInt(n,16);var r=this.ctx.strokeStyle.substring(5,7);r=parseInt(r,16),this.pdf.setDrawColor(e,n,r)},fillText:function(t,e,n,r){e=this._wrapX(e),n=this._wrapY(n),this.pdf.text(t,e,this._getBaseline(n))},strokeText:function(t,e,n,r){e=this._wrapX(e),n=this._wrapY(n),this.pdf.text(t,e,this._getBaseline(n),{stroke:!0})},setFont:function(t){this.ctx.font=t;var e=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+["']?(\w+)['"]?/;if(c=e.exec(t),null!=c){var n=c[1],r=(c[2],c[3]),i=c[4],o=c[5],s=c[6];i="px"===o?Math.floor(parseFloat(i)):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)),this.pdf.setFontSize(i),"bold"===r||"700"===r?this.pdf.setFontStyle("bold"):"italic"===n?this.pdf.setFontStyle("italic"):this.pdf.setFontStyle("normal");var a=s;this.pdf.setFont(a,l)}else{var e=/(\d+)(pt|px|em)\s+(\w+)\s*(\w+)?/,c=e.exec(t);if(null!=c){var u=c[1],a=(c[2],c[3]),l=c[4];l||(l="normal"),u="em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(u)),this.pdf.setFontSize(u),this.pdf.setFont(a,l)}}},setTextBaseline:function(t){this.ctx.textBaseline=t},getTextBaseline:function(){return this.ctx.textBaseline},setLineWidth:function(t){this.ctx.lineWidth=t,this.pdf.setLineWidth(t)},setLineCap:function(t){this.ctx.lineCap=t,this.pdf.setLineCap(t)},setLineJoin:function(t){this.ctx.lineJon=t,this.pdf.setLineJoin(t)},moveTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var n={type:"mt",x:t,y:e};this.path.push(n)},_wrapX:function(t){return this.pageWrapXEnabled?t%this.pageWrapX:t},_wrapY:function(t){return this.pageWrapYEnabled?(this._gotoPage(this._page(t)),(t-this.lastBreak)%this.pageWrapY):t},lastBreak:0,pageBreaks:[],_page:function(t){if(this.pageWrapYEnabled){this.lastBreak=0;for(var e=0,n=0,r=0;r&lt;this.pageBreaks.length;r++)if(t&gt;=this.pageBreaks[r]){e++,0===this.lastBreak&amp;&amp;n++;var i=this.pageBreaks[r]-this.lastBreak;this.lastBreak=this.pageBreaks[r];var o=Math.floor(i/this.pageWrapY);n+=o}if(0===this.lastBreak){var o=Math.floor(t/this.pageWrapY)+1;n+=o}return n+e}return this.pdf.internal.getCurrentPageInfo().pageNumber},_gotoPage:function(t){},lineTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var n={type:"lt",x:t,y:e};this.path.push(n)},bezierCurveTo:function(t,e,n,r,i,o){t=this._wrapX(t),e=this._wrapY(e),n=this._wrapX(n),r=this._wrapY(r),i=this._wrapX(i),o=this._wrapY(o);var s={type:"bct",x1:t,y1:e,x2:n,y2:r,x:i,y:o};this.path.push(s)},quadraticCurveTo:function(t,e,n,r){t=this._wrapX(t),e=this._wrapY(e),n=this._wrapX(n),r=this._wrapY(r);var i={type:"qct",x1:t,y1:e,x:n,y:r};this.path.push(i)},arc:function(t,e,n,r,i,o){t=this._wrapX(t),e=this._wrapY(e);var s={type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,anticlockwise:o};this.path.push(s)},drawImage:function(t,e,n,r,i,o,s,a,c){void 0!==o&amp;&amp;(e=o,n=s,r=a,i=c),e=this._wrapX(e),n=this._wrapY(n);var u,l=/data:image\/(\w+).*/i,h=l.exec(t);u=null!=h?h[1]:"png",this.pdf.addImage(t,u,e,n,r,i)},stroke:function(){for(var t,e=[],n=!1,r=0;r&lt;this.path.length;r++){var i=this.path[r];switch(i.type){case"mt":t=i,"undefined"!=typeof t&amp;&amp;(this.pdf.lines(e,t.x,t.y,null,"s"),e=[]);break;case"lt":var o=[i.x-this.path[r-1].x,i.y-this.path[r-1].y];e.push(o);break;case"bct":var o=[i.x1-this.path[r-1].x,i.y1-this.path[r-1].y,i.x2-this.path[r-1].x,i.y2-this.path[r-1].y,i.x-this.path[r-1].x,i.y-this.path[r-1].y];e.push(o);break;case"qct":var s=this.path[r-1].x+2/3*(i.x1-this.path[r-1].x),a=this.path[r-1].y+2/3*(i.y1-this.path[r-1].y),c=i.x+2/3*(i.x1-i.x),u=i.y+2/3*(i.y1-i.y),l=i.x,h=i.y,o=[s-this.path[r-1].x,a-this.path[r-1].y,c-this.path[r-1].x,u-this.path[r-1].y,l-this.path[r-1].x,h-this.path[r-1].y];e.push(o);break;case"close":n=!0}}"undefined"!=typeof t&amp;&amp;this.pdf.lines(e,t.x,t.y,null,"s",n);for(var r=0;r&lt;this.path.length;r++){var i=this.path[r];switch(i.type){case"arc":var t=360*i.startAngle/(2*Math.PI),d=360*i.endAngle/(2*Math.PI);this.internal.arc(i.x,i.y,i.radius,t,d,i.anticlockwise,"s")}}this.path=[]},fill:function(){for(var t,e=[],n=0;n&lt;this.path.length;n++){var r=this.path[n];switch(r.type){case"mt":t=r,"undefined"!=typeof t&amp;&amp;(this.pdf.lines(e,t.x,t.y,null,"f"),e=[]);break;case"lt":var i=[r.x-this.path[n-1].x,r.y-this.path[n-1].y];e.push(i);break;case"bct":var i=[r.x1-this.path[n-1].x,r.y1-this.path[n-1].y,r.x2-this.path[n-1].x,r.y2-this.path[n-1].y,r.x-this.path[n-1].x,r.y-this.path[n-1].y];e.push(i);break;case"qct":var o=this.path[n-1].x+2/3*(r.x1-this.path[n-1].x),s=this.path[n-1].y+2/3*(r.y1-this.path[n-1].y),a=r.x+2/3*(r.x1-r.x),c=r.y+2/3*(r.y1-r.y),u=r.x,l=r.y,i=[o-this.path[n-1].x,s-this.path[n-1].y,a-this.path[n-1].x,c-this.path[n-1].y,u-this.path[n-1].x,l-this.path[n-1].y];e.push(i)}}"undefined"!=typeof t&amp;&amp;this.pdf.lines(e,t.x,t.y,null,"f");for(var n=0;n&lt;this.path.length;n++){var r=this.path[n];switch(r.type){case"arc":var t=360*r.startAngle/(2*Math.PI),h=360*r.endAngle/(2*Math.PI);this.internal.arc(r.x,r.y,r.radius,t,h,r.anticlockwise,"f");break;case"close":this.pdf.internal.out("h")}}this.path=[]},clip:function(){},translate:function(t,e){this.ctx._translate={x:t,y:e}},measureText:function(t){var e=this.pdf;return{getWidth:function(){var n=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*n/e.internal.scaleFactor;return r},get width(){return this.getWidth(t)}}},_getBaseline:function(t){var e=parseInt(this.pdf.internal.getFontSize()),n=.25*e;switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e;case"hanging":return t+e-n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}}};var n=t.context2d;return Object.defineProperty(n,"fillStyle",{set:function(t){this.setFillStyle(t)},get:function(){return this.ctx.fillStyle}}),Object.defineProperty(n,"textBaseline",{set:function(t){this.setTextBaseline(t)},get:function(){return this.getTextBaseline()}}),Object.defineProperty(n,"font",{set:function(t){this.setFont(t)},get:function(){return this.getFont()}}),n.internal={},n.internal.rxRgb=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/,n.internal.rxRgba=/rgba\s*\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/,n.internal.arc=function(t,e,n,r,i,o,s){for(var a=this.pdf.internal.scaleFactor,c=this.pdf.internal.pageSize.height,u=this.pdf.internal.f2,l=r*(Math.PI/180),h=i*(Math.PI/180),d=this.createArc(n,l,h,o),f=0;f&lt;d.length;f++){var p=d[f];0==f?this.pdf.internal.out([u((p.x1+t)*a),u((c-(p.y1+e))*a),"m",u((p.x2+t)*a),u((c-(p.y2+e))*a),u((p.x3+t)*a),u((c-(p.y3+e))*a),u((p.x4+t)*a),u((c-(p.y4+e))*a),"c"].join(" ")):this.pdf.internal.out([u((p.x2+t)*a),u((c-(p.y2+e))*a),u((p.x3+t)*a),u((c-(p.y3+e))*a),u((p.x4+t)*a),u((c-(p.y4+e))*a),"c"].join(" "))}null!==s&amp;&amp;this.pdf.internal.out(this.pdf.internal.getStyle(s))},n.internal.createArc=function(t,e,n,r){var i=1e-5,o=2*Math.PI,s=e;(o&gt;s||s&gt;o)&amp;&amp;(s%=o);var a=n;(o&gt;a||a&gt;o)&amp;&amp;(a%=o);for(var c=[],u=Math.PI/2,l=r?-1:1,h=e,d=Math.min(o,Math.abs(a-s));d&gt;i;){var f=h+l*Math.min(d,u);c.push(this.createSmallArc(t,h,f)),d-=Math.abs(f-h),h=f}return c},n.internal.createSmallArc=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),o=t*Math.sin(r),s=i,a=-o,c=s*s+a*a,u=c+s*i+a*o,l=4/3*(Math.sqrt(2*c*u)-u)/(s*o-a*i),h=s-l*a,d=a+l*s,f=h,p=-d,m=r+e,g=Math.cos(m),w=Math.sin(m);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*g-d*w,y2:h*w+d*g,x3:f*g-p*w,y3:f*w+p*g,x4:t*Math.cos(n),y4:t*Math.sin(n)}},this}(jsPDF.API),function(t){var e,n,r,i,o,s,a,c,u,l,h,d,f,p,m,g,w,y,v;e=function(){function t(){}return function(e){return t.prototype=e,new t}}(),u=function(t){var e,n,r,i,o,s,a;for(n=0,r=t.length,e=void 0,i=!1,s=!1;!i&amp;&amp;n!==r;)e=t[n]=t[n].trimLeft(),e&amp;&amp;(i=!0),n++;for(n=r-1;r&amp;&amp;!s&amp;&amp;-1!==n;)e=t[n]=t[n].trimRight(),e&amp;&amp;(s=!0),n--;for(o=/\s+$/g,a=!0,n=0;n!==r;)"\u2028"!=t[n]&amp;&amp;(e=t[n].replace(/\s+/g," "),a&amp;&amp;(e=e.trimLeft()),e&amp;&amp;(a=o.test(e)),t[n]=e),n++;return t},l=function(t,e,n,r){return this.pdf=t,this.x=e,this.y=n,this.settings=r,this.watchFunctions=[],this.init(),this},h=function(t){var e,n,i;for(e=void 0,i=t.split(","),n=i.shift();!e&amp;&amp;n;)e=r[n.trim().toLowerCase()],n=i.shift();return e},d=function(t){t="auto"===t?"0px":t,t.indexOf("em")&gt;-1&amp;&amp;!isNaN(Number(t.replace("em","")))&amp;&amp;(t=18.719*Number(t.replace("em",""))+"px"),t.indexOf("pt")&gt;-1&amp;&amp;!isNaN(Number(t.replace("pt","")))&amp;&amp;(t=1.333*Number(t.replace("pt",""))+"px");var e,n,r;return n=void 0,e=16,(r=f[t])?r:(r={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:t}],r!==n?f[t]=r/e:(r=parseFloat(t))?f[t]=r/e:(r=t.match(/([\d\.]+)(px)/),3===r.length?f[t]=parseFloat(r[1])/e:f[t]=1))},c=function(t){var e,n,r;return r=function(t){var e;return e=function(t){return document.defaultView&amp;&amp;document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle?t.currentStyle:t.style}(t),function(t){return t=t.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()}),e[t]}}(t),e={},n=void 0,e["font-family"]=h(r("font-family"))||"times",e["font-style"]=i[r("font-style")]||"normal",e["text-align"]=TextAlignMap[r("text-align")]||"left",n=o[r("font-weight")]||"normal","bold"===n&amp;&amp;("normal"===e["font-style"]?e["font-style"]=n:e["font-style"]=n+e["font-style"]),e["font-size"]=d(r("font-size"))||1,e["line-height"]=d(r("line-height"))||1,e.display="inline"===r("display")?"inline":"block",n="block"===e.display,e["margin-top"]=n&amp;&amp;d(r("margin-top"))||0,e["margin-bottom"]=n&amp;&amp;d(r("margin-bottom"))||0,e["padding-top"]=n&amp;&amp;d(r("padding-top"))||0,e["padding-bottom"]=n&amp;&amp;d(r("padding-bottom"))||0,e["margin-left"]=n&amp;&amp;d(r("margin-left"))||0,e["margin-right"]=n&amp;&amp;d(r("margin-right"))||0,e["padding-left"]=n&amp;&amp;d(r("padding-left"))||0,e["padding-right"]=n&amp;&amp;d(r("padding-right"))||0,e["page-break-before"]=r("page-break-before")||"auto",e["float"]=s[r("cssFloat")]||"none",e.clear=a[r("clear")]||"none",e.color=r("color"),e},p=function(t,e,n){var r,i,o,s,a;if(o=!1,i=void 0,s=void 0,a=void 0,r=n["#"+t.id])if("function"==typeof r)o=r(t,e);else for(i=0,s=r.length;!o&amp;&amp;i!==s;)o=r[i](t,e),i++;if(r=n[t.nodeName],!o&amp;&amp;r)if("function"==typeof r)o=r(t,e);else for(i=0,s=r.length;!o&amp;&amp;i!==s;)o=r[i](t,e),i++;return o},v=function(t,e){var n,r,i,o,s,a,c,u,l,h;for(n=[],r=[],i=0,h=t.rows[0].cells.length,u=t.clientWidth;h&gt;i;)l=t.rows[0].cells[i],r[i]={name:l.textContent.toLowerCase().replace(/\s+/g,""),prompt:l.textContent.replace(/\r?\n/g,""),width:l.clientWidth/u*e.pdf.internal.pageSize.width},i++;for(i=1;i&lt;t.rows.length;){for(a=t.rows[i],s={},o=0;o&lt;a.cells.length;)s[r[o].name]=a.cells[o].textContent.replace(/\r?\n/g,""),o++;n.push(s),i++}return c={rows:n,headers:r}};var b={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},x=1;n=function(t,r,i){var o,s,a,u,l,h,d,f,g;for(s=t.childNodes,o=void 0,a=c(t),l="block"===a.display,l&amp;&amp;(r.setBlockBoundary(),r.setBlockStyle(a)),d=19.049976/25.4,u=0,h=s.length;h&gt;u;){if(o=s[u],"object"==typeof o){if(r.executeWatchFunctions(o),1===o.nodeType&amp;&amp;"HEADER"===o.nodeName){var w=o,y=r.pdf.margins_doc.top;r.pdf.internal.events.subscribe("addPage",function(t){r.y=y,n(w,r,i),r.pdf.margins_doc.top=r.y+10,r.y+=10},!1)}if(8===o.nodeType&amp;&amp;"#comment"===o.nodeName)~o.textContent.indexOf("ADD_PAGE")&amp;&amp;(r.pdf.addPage(),r.y=r.pdf.margins_doc.top);else if(1!==o.nodeType||b[o.nodeName])if(3===o.nodeType){var k=o.nodeValue;if(o.nodeValue&amp;&amp;"LI"===o.parentNode.nodeName)if("OL"===o.parentNode.parentNode.nodeName)k=x++ +". "+k;else{var A=a["font-size"];offsetX=(3-.75*A)*r.pdf.internal.scaleFactor,offsetY=.75*A*r.pdf.internal.scaleFactor,radius=1.74*A/r.pdf.internal.scaleFactor,g=function(t,e){this.pdf.circle(t+offsetX,e+offsetY,radius,"FD")}}o.ownerDocument.body.contains(o)&amp;&amp;r.addText(k,a)}else"string"==typeof o&amp;&amp;r.addText(o,a);else{var C;if("IMG"===o.nodeName){var E=o.getAttribute("src");C=m[r.pdf.sHashCode(E)||E]}if(C){r.pdf.internal.pageSize.height-r.pdf.margins_doc.bottom&lt;r.y+o.height&amp;&amp;r.y&gt;r.pdf.margins_doc.top&amp;&amp;(r.pdf.addPage(),r.y=r.pdf.margins_doc.top,r.executeWatchFunctions(o));var S=c(o),F=r.x,T=12/r.pdf.internal.scaleFactor,P=(S["margin-left"]+S["padding-left"])*T,_=(S["margin-right"]+S["padding-right"])*T,I=(S["margin-top"]+S["padding-top"])*T,q=(S["margin-bottom"]+S["padding-bottom"])*T;F+=void 0!==S["float"]&amp;&amp;"right"===S["float"]?r.settings.width-o.width-_:P,r.pdf.addImage(C,F,r.y+I,o.width,o.height),C=void 0,"right"===S["float"]||"left"===S["float"]?(r.watchFunctions.push(function(t,e,n,i){return r.y&gt;=e?(r.x+=t,r.settings.width+=n,!0):i&amp;&amp;1===i.nodeType&amp;&amp;!b[i.nodeName]&amp;&amp;r.x+i.width&gt;r.pdf.margins_doc.left+r.pdf.margins_doc.width?(r.x+=t,r.y=e,r.settings.width+=n,!0):!1}.bind(this,"left"===S["float"]?-o.width-P-_:0,r.y+o.height+I+q,o.width)),r.watchFunctions.push(function(t,e,n){return r.y&lt;t&amp;&amp;e===r.pdf.internal.getNumberOfPages()?1===n.nodeType&amp;&amp;"both"===c(n).clear?(r.y=t,
!0):!1:!0}.bind(this,r.y+o.height,r.pdf.internal.getNumberOfPages())),r.settings.width-=o.width+P+_,"left"===S["float"]&amp;&amp;(r.x+=o.width+P+_)):r.y+=o.height+I+q}else if("TABLE"===o.nodeName)f=v(o,r),r.y+=10,r.pdf.table(r.x,r.y,f.rows,f.headers,{autoSize:!1,printHeaders:i.printHeaders,margins:r.pdf.margins_doc,css:c(o)}),r.y=r.pdf.lastCellPos.y+r.pdf.lastCellPos.h+20;else if("OL"===o.nodeName||"UL"===o.nodeName)x=1,p(o,r,i)||n(o,r,i),r.y+=10;else if("LI"===o.nodeName){var O=r.x;r.x+=20/r.pdf.internal.scaleFactor,r.y+=3,p(o,r,i)||n(o,r,i),r.x=O}else"BR"===o.nodeName?(r.y+=a["font-size"]*r.pdf.internal.scaleFactor,r.addText("\u2028",e(a))):p(o,r,i)||n(o,r,i)}}u++}return i.outY=r.y,l?r.setBlockBoundary(g):void 0},m={},g=function(t,e,n,r){function i(){e.pdf.internal.events.publish("imagesLoaded"),r(s)}function o(t,n,r){if(t){var o=new Image;s=++u,o.crossOrigin="",o.onerror=o.onload=function(){if(o.complete&amp;&amp;(0===o.src.indexOf("data:image/")&amp;&amp;(o.width=n||o.width||0,o.height=r||o.height||0),o.width+o.height)){var s=e.pdf.sHashCode(t)||t;m[s]=m[s]||o}--u||i()},o.src=t}}for(var s,a=t.getElementsByTagName("img"),c=a.length,u=0;c--;)o(a[c].getAttribute("src"),a[c].width,a[c].height);return u||i()},w=function(t,e,r){var i=t.getElementsByTagName("footer");if(i.length&gt;0){i=i[0];var o=e.pdf.internal.write,s=e.y;e.pdf.internal.write=function(){},n(i,e,r);var a=Math.ceil(e.y-s)+5;e.y=s,e.pdf.internal.write=o,e.pdf.margins_doc.bottom+=a;for(var c=function(t){var o=void 0!==t?t.pageNumber:1,s=e.y;e.y=e.pdf.internal.pageSize.height-e.pdf.margins_doc.bottom,e.pdf.margins_doc.bottom-=a;for(var c=i.getElementsByTagName("span"),u=0;u&lt;c.length;++u)(" "+c[u].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")&gt;-1&amp;&amp;(c[u].innerHTML=o),(" "+c[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&gt;-1&amp;&amp;(c[u].innerHTML="###jsPDFVarTotalPages###");n(i,e,r),e.pdf.margins_doc.bottom+=a,e.y=s},u=i.getElementsByTagName("span"),l=0;l&lt;u.length;++l)(" "+u[l].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&gt;-1&amp;&amp;e.pdf.internal.events.subscribe("htmlRenderingFinished",e.pdf.putTotalPages.bind(e.pdf,"###jsPDFVarTotalPages###"),!0);e.pdf.internal.events.subscribe("addPage",c,!1),c(),b.FOOTER=1}},y=function(t,e,r,i,o,s){if(!e)return!1;"string"==typeof e||e.parentNode||(e=""+e.innerHTML),"string"==typeof e&amp;&amp;(e=function(t){var e,n,r,i;return r="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),i="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",n=document.createElement("div"),n.style.cssText=i,n.innerHTML='&lt;iframe style="height:1px;width:1px" name="'+r+'" /&gt;',document.body.appendChild(n),e=window.frames[r],e.document.open(),e.document.writeln(t),e.document.close(),e.document.body}(e.replace(/&lt;\/?script[^&gt;]*?&gt;/gi,"")));var a,c=new l(t,r,i,o);return g.call(this,e,c,o.elementHandlers,function(t){w(e,c,o.elementHandlers),n(e,c,o.elementHandlers),c.pdf.internal.events.publish("htmlRenderingFinished"),a=c.dispose(),"function"==typeof s?s(a):t&amp;&amp;console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),a||{x:c.x,y:c.y}},l.prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},l.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},l.prototype.executeWatchFunctions=function(t){var e=!1,n=[];if(this.watchFunctions.length&gt;0){for(var r=0;r&lt;this.watchFunctions.length;++r)this.watchFunctions[r](t)===!0?e=!0:n.push(this.watchFunctions[r]);this.watchFunctions=n}return e},l.prototype.splitFragmentsIntoLines=function(t,n){var r,i,o,s,a,c,u,l,h,d,f,p,m,g,w;for(i=12,f=this.pdf.internal.scaleFactor,a={},o=void 0,d=void 0,s=void 0,c=void 0,w=void 0,h=void 0,l=void 0,u=void 0,p=[],m=[p],r=0,g=this.settings.width;t.length;)if(c=t.shift(),w=n.shift(),c)if(o=w["font-family"],d=w["font-style"],s=a[o+d],s||(s=this.pdf.internal.getFont(o,d).metadata.Unicode,a[o+d]=s),h={widths:s.widths,kerning:s.kerning,fontSize:w["font-size"]*i,textIndent:r},l=this.pdf.getStringUnitWidth(c,h)*h.fontSize/f,"\u2028"==c)p=[],m.push(p);else if(r+l&gt;g){for(u=this.pdf.splitTextToSize(c,g,h),p.push([u.shift(),w]);u.length;)p=[[u.shift(),w]],m.push(p);r=this.pdf.getStringUnitWidth(p[0][0],h)*h.fontSize/f}else p.push([c,w]),r+=l;if(void 0!==w["text-align"]&amp;&amp;("center"===w["text-align"]||"right"===w["text-align"]||"justify"===w["text-align"]))for(var y=0;y&lt;m.length;++y){var v=this.pdf.getStringUnitWidth(m[y][0][0],h)*h.fontSize/f;y&gt;0&amp;&amp;(m[y][0][1]=e(m[y][0][1]));var b=g-v;if("right"===w["text-align"])m[y][0][1]["margin-left"]=b;else if("center"===w["text-align"])m[y][0][1]["margin-left"]=b/2;else if("justify"===w["text-align"]){var x=m[y][0][0].split(" ").length-1;m[y][0][1]["word-spacing"]=b/x,y===m.length-1&amp;&amp;(m[y][0][1]["word-spacing"]=0)}}return m},l.prototype.RenderTextFragment=function(t,e){var n,r,i;i=0,n=12,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom&lt;this.y+this.pdf.internal.getFontSize()&amp;&amp;(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),e.color,"Td"),i=Math.max(i,e["line-height"],e["font-size"]),this.pdf.internal.write(0,(-1*n*i).toFixed(2),"Td")),r=this.pdf.internal.getFont(e["font-family"],e["font-style"]);var o=this.getPdfColor(e.color);o!==this.lastTextColor&amp;&amp;(this.pdf.internal.write(o),this.lastTextColor=o),void 0!==e["word-spacing"]&amp;&amp;e["word-spacing"]&gt;0&amp;&amp;this.pdf.internal.write(e["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+r.id,(n*e["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(t)+") Tj"),void 0!==e["word-spacing"]&amp;&amp;this.pdf.internal.write(0,"Tw")},l.prototype.getPdfColor=function(t){var e,n,r,i,o=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/,s=o.exec(t);if(null!=s?(n=parseInt(s[1]),r=parseInt(s[2]),i=parseInt(s[3])):("#"!=t.charAt(0)&amp;&amp;(t=CssColors.colorNameToHex(t),t||(t="#000000")),n=t.substring(1,3),n=parseInt(n,16),r=t.substring(3,5),r=parseInt(r,16),i=t.substring(5,7),i=parseInt(i,16)),"string"==typeof n&amp;&amp;/^#[0-9A-Fa-f]{6}$/.test(n)){var a=parseInt(n.substr(1),16);n=a&gt;&gt;16&amp;255,r=a&gt;&gt;8&amp;255,i=255&amp;a}var c=this.f3;return e=0===n&amp;&amp;0===r&amp;&amp;0===i||"undefined"==typeof r?c(n/255)+" g":[c(n/255),c(r/255),c(i/255),"rg"].join(" ")},l.prototype.f3=function(t){return t.toFixed(3)},l.prototype.renderParagraph=function(t){var e,n,r,i,o,s,a,c,l,h,d,f,p,m,g;if(i=u(this.paragraph.text),m=this.paragraph.style,e=this.paragraph.blockstyle,p=this.paragraph.priorblockstyle||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:e},i.join("").trim()){c=this.splitFragmentsIntoLines(i,m),a=void 0,l=void 0,n=12,r=n/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,f=(Math.max((e["margin-top"]||0)-this.priorMarginBottom,0)+(e["padding-top"]||0))*r,d=((e["margin-bottom"]||0)+(e["padding-bottom"]||0))*r,this.priorMarginBottom=e["margin-bottom"]||0,"always"===e["page-break-before"]&amp;&amp;(this.pdf.addPage(),this.y=0,f=((e["margin-top"]||0)+(e["padding-top"]||0))*r),h=this.pdf.internal.write,o=void 0,s=void 0,this.y+=f,h("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var w=0;c.length;){for(a=c.shift(),l=0,o=0,s=a.length;o!==s;)a[o][0].trim()&amp;&amp;(l=Math.max(l,a[o][1]["line-height"],a[o][1]["font-size"]),g=7*a[o][1]["font-size"]),o++;var y=0,v=0;void 0!==a[0][1]["margin-left"]&amp;&amp;a[0][1]["margin-left"]&gt;0&amp;&amp;(wantedIndent=this.pdf.internal.getCoordinateString(a[0][1]["margin-left"]),y=wantedIndent-w,w=wantedIndent);var v=Math.max(e["margin-left"]||0,0)*r;for(h(y+v,(-1*n*l).toFixed(2),"Td"),o=0,s=a.length;o!==s;)a[o][0]&amp;&amp;this.RenderTextFragment(a[o][0],a[o][1]),o++;if(this.y+=l*r,this.executeWatchFunctions(a[0][1])&amp;&amp;c.length&gt;0){var b=[],x=[];c.forEach(function(t){for(var e=0,n=t.length;e!==n;)t[e][0]&amp;&amp;(b.push(t[e][0]+" "),x.push(t[e][1])),++e}),c=this.splitFragmentsIntoLines(u(b),x),h("ET","Q"),h("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return t&amp;&amp;"function"==typeof t&amp;&amp;t.call(this,this.x-9,this.y-g/2),h("ET","Q"),this.y+=d}},l.prototype.setBlockBoundary=function(t){return this.renderParagraph(t)},l.prototype.setBlockStyle=function(t){return this.paragraph.blockstyle=t},l.prototype.addText=function(t,e){return this.paragraph.text.push(t),this.paragraph.style.push(e)},r={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},o={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},i={normal:"normal",italic:"italic",oblique:"italic"},TextAlignMap={left:"left",right:"right",center:"center",justify:"justify"},s={none:"none",right:"right",left:"left"},a={none:"none",both:"both"},f={normal:1},t.fromHTML=function(t,e,n,r,i,o){"use strict";return this.margins_doc=o||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),y(this,t,isNaN(e)?4:e,isNaN(n)?4:n,r,i)}}(jsPDF.API),function(t){"use strict";var e,n,r;t.addJS=function(t){return r=t,this.internal.events.subscribe("postPutResources",function(t){e=this.internal.newObject(),this.internal.write("&lt;&lt; /Names [(EmbeddedJS) "+(e+1)+" 0 R] &gt;&gt;","endobj"),n=this.internal.newObject(),this.internal.write("&lt;&lt; /S /JavaScript /JS (",r,") &gt;&gt;","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==e&amp;&amp;void 0!==n&amp;&amp;this.internal.write("/Names &lt;&lt;/JavaScript "+e+" 0 R&gt;&gt;")}),this}}(jsPDF.API),function(t){"use strict";return t.events.push(["postPutResources",function(){var t=this,e=/^(\d+) 0 obj$/;if(this.outline.root.children.length&gt;0)for(var n=t.outline.render().split(/\r\n/),r=0;r&lt;n.length;r++){var i=n[r],o=e.exec(i);if(null!=o){var s=o[1];t.internal.newObjectDeferredBegin(s)}t.internal.write(i)}if(this.outline.createNamedDestinations){for(var a=this.internal.pages.length,c=[],r=0;a&gt;r;r++){var u=t.internal.newObject();c.push(u);var l=t.internal.getPageInfo(r+1);t.internal.write("&lt;&lt; /D["+l.objId+" 0 R /XYZ null null null]&gt;&gt; endobj")}var h=t.internal.newObject();t.internal.write("&lt;&lt; /Names [ ");for(var r=0;r&lt;c.length;r++)t.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");t.internal.write(" ] &gt;&gt;","endobj");t.internal.newObject();t.internal.write("&lt;&lt; /Dests "+h+" 0 R"),t.internal.write("&gt;&gt;","endobj")}}]),t.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length&gt;0&amp;&amp;(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&amp;&amp;t.internal.write("/Names "+namesOid+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}};t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&amp;&amp;(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n&lt;e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length&gt;0&amp;&amp;(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=0;n&lt;e.children.length;n++){var r=e.children[n];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(e)),n&gt;0&amp;&amp;this.line("/Prev "+this.makeRef(e.children[n-1])),n&lt;e.children.length-1&amp;&amp;this.line("/Next "+this.makeRef(e.children[n+1])),r.children.length&gt;0&amp;&amp;(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var i=this.count=this.count_r({count:0},r);if(i&gt;0&amp;&amp;this.line("/Count "+i),r.options&amp;&amp;r.options.pageNumber){var o=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}this.objEnd()}for(var n=0;n&lt;e.children.length;n++){var r=e.children[n];this.renderItems(r)}},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n&lt;&lt;\r\n"},t.outline.objEnd=function(t){this.ctx.val+="&gt;&gt; \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n&lt;e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}]),this}(jsPDF.API),function(t){"use strict";var e=function(){return"function"!=typeof PNG||"function"!=typeof FlateStream},n=function(e){return e!==t.image_compression.NONE&amp;&amp;r()},r=function(){var t="function"==typeof Deflater;if(!t)throw new Error("requires deflate.js for compression");return t},i=function(e,n,r,i){var c=5,f=l;switch(i){case t.image_compression.FAST:c=3,f=u;break;case t.image_compression.MEDIUM:c=6,f=h;break;case t.image_compression.SLOW:c=9,f=d}e=a(e,n,r,f);var p=new Uint8Array(o(c)),m=s(e),g=new Deflater(c),w=g.append(e),y=g.flush(),v=p.length+w.length+y.length,b=new Uint8Array(v+4);return b.set(p),b.set(w,p.length),b.set(y,p.length+w.length),b[v++]=m&gt;&gt;&gt;24&amp;255,b[v++]=m&gt;&gt;&gt;16&amp;255,b[v++]=m&gt;&gt;&gt;8&amp;255,b[v++]=255&amp;m,t.arrayBufferToBinaryString(b)},o=function(t,e){var n=8,r=Math.LOG2E*Math.log(32768)-8,i=r&lt;&lt;4|n,o=i&lt;&lt;8,s=Math.min(3,(e-1&amp;255)&gt;&gt;1);return o|=s&lt;&lt;6,o|=0,o+=31-o%31,[i,255&amp;o&amp;255]},s=function(t,e){for(var n,r=1,i=65535&amp;r,o=r&gt;&gt;&gt;16&amp;65535,s=t.length,a=0;s&gt;0;){n=s&gt;e?e:s,s-=n;do i+=t[a++],o+=i;while(--n);i%=65521,o%=65521}return(o&lt;&lt;16|i)&gt;&gt;&gt;0},a=function(t,e,n,r){for(var i,o,s,a=t.length/e,c=new Uint8Array(t.length+a),u=p(),l=0;a&gt;l;l++){if(s=l*e,i=t.subarray(s,s+e),r)c.set(r(i,n,o),s+l);else{for(var h=0,d=u.length,f=[];d&gt;h;h++)f[h]=u[h](i,n,o);var g=m(f.concat());c.set(f[g],s+l)}o=i}return c},c=function(t,e,n){var r=Array.apply([],t);return r.unshift(0),r},u=function(t,e,n){var r,i=[],o=0,s=t.length;for(i[0]=1;s&gt;o;o++)r=t[o-e]||0,i[o+1]=t[o]-r+256&amp;255;return i},l=function(t,e,n){var r,i=[],o=0,s=t.length;for(i[0]=2;s&gt;o;o++)r=n&amp;&amp;n[o]||0,i[o+1]=t[o]-r+256&amp;255;return i},h=function(t,e,n){var r,i,o=[],s=0,a=t.length;for(o[0]=3;a&gt;s;s++)r=t[s-e]||0,i=n&amp;&amp;n[s]||0,o[s+1]=t[s]+256-(r+i&gt;&gt;&gt;1)&amp;255;return o},d=function(t,e,n){var r,i,o,s,a=[],c=0,u=t.length;for(a[0]=4;u&gt;c;c++)r=t[c-e]||0,i=n&amp;&amp;n[c]||0,o=n&amp;&amp;n[c-e]||0,s=f(r,i,o),a[c+1]=t[c]-s+256&amp;255;return a},f=function(t,e,n){var r=t+e-n,i=Math.abs(r-t),o=Math.abs(r-e),s=Math.abs(r-n);return o&gt;=i&amp;&amp;s&gt;=i?t:s&gt;=o?e:n},p=function(){return[c,u,l,h,d]},m=function(t){for(var e,n,r,i=0,o=t.length;o&gt;i;)e=g(t[i].slice(1)),(n&gt;e||!n)&amp;&amp;(n=e,r=i),i++;return r},g=function(t){for(var e=0,n=t.length,r=0;n&gt;e;)r+=Math.abs(t[e++]);return r};t.processPNG=function(t,r,o,s,a){var c,u,l,h,d,f,p=this.color_spaces.DEVICE_RGB,m=this.decode.FLATE_DECODE,g=8;if(this.isArrayBuffer(t)&amp;&amp;(t=new Uint8Array(t)),this.isArrayBufferView(t)){if(e())throw new Error("PNG support requires png.js and zlib.js");if(c=new PNG(t),t=c.imgData,g=c.bits,p=c.colorSpace,h=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits)for(var w,y,v=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer),b=v.length,x=new Uint8Array(b*c.colors),k=new Uint8Array(b),A=c.pixelBitlength-c.bits,C=0,E=0;b&gt;C;C++){for(w=v[C],y=0;A&gt;y;)x[E++]=w&gt;&gt;&gt;y&amp;255,y+=c.bits;k[C]=w&gt;&gt;&gt;y&amp;255}if(16===c.bits){for(var w,v=new Uint32Array(c.decodePixels().buffer),b=v.length,x=new Uint8Array(b*(32/c.pixelBitlength)*c.colors),k=new Uint8Array(b*(32/c.pixelBitlength)),S=c.colors&gt;1,C=0,E=0,F=0;b&gt;C;)w=v[C++],x[E++]=w&gt;&gt;&gt;0&amp;255,S&amp;&amp;(x[E++]=w&gt;&gt;&gt;16&amp;255,w=v[C++],x[E++]=w&gt;&gt;&gt;0&amp;255),k[F++]=w&gt;&gt;&gt;16&amp;255;g=8}n(s)?(t=i(x,c.width*c.colors,c.colors,s),f=i(k,c.width,1,s)):(t=x,f=k,m=null)}if(3===c.colorType&amp;&amp;(p=this.color_spaces.INDEXED,d=c.palette,c.transparency.indexed)){for(var T=c.transparency.indexed,P=0,C=0,b=T.length;b&gt;C;++C)P+=T[C];if(P/=255,P===b-1&amp;&amp;-1!==T.indexOf(0))l=[T.indexOf(0)];else if(P!==b){for(var v=c.decodePixels(),k=new Uint8Array(v.length),C=0,b=v.length;b&gt;C;C++)k[C]=T[v[C]];f=i(k,c.width,1)}}return u=m===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+h+" /BitsPerComponent "+g+" /Columns "+c.width:"/Colors "+h+" /BitsPerComponent "+g+" /Columns "+c.width,(this.isArrayBuffer(t)||this.isArrayBufferView(t))&amp;&amp;(t=this.arrayBufferToBinaryString(t)),(f&amp;&amp;this.isArrayBuffer(f)||this.isArrayBufferView(f))&amp;&amp;(f=this.arrayBufferToBinaryString(f)),this.createImageInfo(t,c.width,c.height,p,g,m,r,o,u,l,d,f)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(jsPDF.API),function(t){"use strict";t.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("&lt;&lt; /S/Named /Type/Action /N/Print &gt;&gt;","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this}}(jsPDF.API),function(t){"use strict";var e=t.getCharWidthsArray=function(t,e){e||(e={});var n,r,i,o=e.widths?e.widths:this.internal.getFont().metadata.Unicode.widths,s=o.fof?o.fof:1,a=e.kerning?e.kerning:this.internal.getFont().metadata.Unicode.kerning,c=a.fof?a.fof:1,u=0,l=o[0]||s,h=[];for(n=0,r=t.length;r&gt;n;n++)i=t.charCodeAt(n),h.push((o[i]||l)/s+(a[i]&amp;&amp;a[i][u]||0)/c),u=i;return h},n=function(t){for(var e=t.length,n=0;e;)e--,n+=t[e];return n},r=t.getStringUnitWidth=function(t,r){return n(e.call(this,t,r))},i=function(t,e,n,r){for(var i=[],o=0,s=t.length,a=0;o!==s&amp;&amp;a+e[o]&lt;n;)a+=e[o],o++;i.push(t.slice(0,o));var c=o;for(a=0;o!==s;)a+e[o]&gt;r&amp;&amp;(i.push(t.slice(c,o)),a=0,c=o),a+=e[o],o++;return c!==o&amp;&amp;i.push(t.slice(c,o)),i},o=function(t,o,s){s||(s={});var a,c,u,l,h,d,f=[],p=[f],m=s.textIndent||0,g=0,w=0,y=t.split(" "),v=e(" ",s)[0];if(d=-1===s.lineIndent?y[0].length+2:s.lineIndent||0){var b=Array(d).join(" "),x=[];y.map(function(t){t=t.split(/\s*\n/),t.length&gt;1?x=x.concat(t.map(function(t,e){return(e&amp;&amp;t.length?"\n":"")+t})):x.push(t[0])}),y=x,d=r(b,s)}for(u=0,l=y.length;l&gt;u;u++){var k=0;if(a=y[u],d&amp;&amp;"\n"==a[0]&amp;&amp;(a=a.substr(1),k=1),c=e(a,s),w=n(c),m+g+w&gt;o||k){if(w&gt;o){for(h=i(a,c,o-(m+g),o),f.push(h.shift()),f=[h.pop()];h.length;)p.push([h.shift()]);w=n(c.slice(a.length-f[0].length))}else f=[a];p.push(f),m=w+d,g=v}else f.push(a),m+=g+w,g=v}if(d)var A=function(t,e){return(e?b:"")+t.join(" ")};else var A=function(t){return t.join(" ")};return p.map(A)};t.splitTextToSize=function(t,e,n){n||(n={});var r,i=n.fontSize||this.internal.getFontSize(),s=function(t){var e={0:1},n={};if(t.widths&amp;&amp;t.kerning)return{widths:t.widths,kerning:t.kerning};var r=this.internal.getFont(t.fontName,t.fontStyle),i="Unicode";return r.metadata[i]?{widths:r.metadata[i].widths||e,kerning:r.metadata[i].kerning||n}:{widths:e,kerning:n}}.call(this,n);r=Array.isArray(t)?t:t.split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var c,u,l=[];for(c=0,u=r.length;u&gt;c;c++)l=l.concat(o(r[c],a,s));return l}}(jsPDF.API),function(t){"use strict";var e=function(t){for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i=0;i&lt;n.length;i++)r[n[i]]=e[i];var o,s,a,c,u,l={},h=1,d=l,f=[],p="",m="",g=t.length-1;for(i=1;i!=g;)u=t[i],i+=1,"'"==u?s?(c=s.join(""),s=o):s=[]:s?s.push(u):"{"==u?(f.push([d,c]),d={},c=o):"}"==u?(a=f.pop(),a[0][a[1]]=d,c=o,d=a[0]):"-"==u?h=-1:c===o?r.hasOwnProperty(u)?(p+=r[u],c=parseInt(p,16)*h,h=1,p=""):p+=u:r.hasOwnProperty(u)?(m+=r[u],d[c]=parseInt(m,16)*h,h=1,c=o,m=""):m+=u;return l},n={codePages:["WinAnsiEncoding"],WinAnsiEncoding:e("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},r={Unicode:{Courier:n,"Courier-Bold":n,"Courier-BoldOblique":n,"Courier-Oblique":n,Helvetica:n,"Helvetica-Bold":n,"Helvetica-BoldOblique":n,"Helvetica-Oblique":n,"Times-Roman":n,"Times-Bold":n,"Times-BoldItalic":n,"Times-Italic":n}},i={Unicode:{"Courier-Oblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":e("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":e("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":e("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":e("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
"Helvetica-Oblique":e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e,n,o,s="Unicode";e=i[s][t.PostScriptName],e&amp;&amp;(n=t.metadata[s]?t.metadata[s]:t.metadata[s]={},n.widths=e.widths,n.kerning=e.kerning),o=r[s][t.PostScriptName],o&amp;&amp;(n=t.metadata[s]?t.metadata[s]:t.metadata[s]={},n.encoding=o,o.codePages&amp;&amp;o.codePages.length&amp;&amp;(t.encoding=o.codePages[0]))}])}(jsPDF.API),function(t){"use strict";t.addSVG=function(t,e,n,r,i){function o(t,e){var n=e.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(n)}function s(t){var e="childframe",n=t.createElement("iframe");return o(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",t),n.name=e,n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),n.setAttribute("seamless","seamless"),n.setAttribute("class","jsPDF_sillysvg_iframe"),t.body.appendChild(n),n}function a(t,e){var n=(e.contentWindow||e.contentDocument).document;return n.write(t),n.close(),n.getElementsByTagName("svg")[0]}function c(t){for(var e=parseFloat(t[1]),n=parseFloat(t[2]),r=[],i=3,o=t.length;o&gt;i;)"c"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2]),parseFloat(t[i+3]),parseFloat(t[i+4]),parseFloat(t[i+5]),parseFloat(t[i+6])]),i+=7):"l"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2])]),i+=3):i+=1;return[e,n,r]}var u;if(e===u||n===u)throw new Error("addSVG needs values for 'x' and 'y'");var l=s(document),h=a(t,l),d=[1,1],f=parseFloat(h.getAttribute("width")),p=parseFloat(h.getAttribute("height"));f&amp;&amp;p&amp;&amp;(r&amp;&amp;i?d=[r/f,i/p]:r?d=[r/f,r/f]:i&amp;&amp;(d=[i/p,i/p]));var m,g,w,y,v=h.childNodes;for(m=0,g=v.length;g&gt;m;m++)w=v[m],w.tagName&amp;&amp;"PATH"===w.tagName.toUpperCase()&amp;&amp;(y=c(w.getAttribute("d").split(" ")),y[0]=y[0]*d[0]+e,y[1]=y[1]*d[1]+n,this.lines.call(this,y[2],y[0],y[1],d));return this}}(jsPDF.API),function(t){"use strict";t.putTotalPages=function(t){for(var e=new RegExp(t,"g"),n=1;n&lt;=this.internal.getNumberOfPages();n++)for(var r=0;r&lt;this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,this.internal.getNumberOfPages());return this}}(jsPDF.API),function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&amp;&amp;t.URL)try{return void new Blob}catch(e){}var n=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},i=n.prototype,o=r.prototype,s=t.FileReaderSync,a=function(t){this.code=this[this.name=t]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=c.length,l=t.URL||t.webkitURL||t,h=l.createObjectURL,d=l.revokeObjectURL,f=l,p=t.btoa,m=t.atob,g=t.ArrayBuffer,w=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=o.fake=!0;u--;)a.prototype[c[u]]=u+1;return l.createObjectURL||(f=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(y),n.origin=e&amp;&amp;e[1])),n}),f.createObjectURL=function(t){var e,n=t.type;return null===n&amp;&amp;(n="application/octet-stream"),t instanceof r?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):h?h.call(l,t):void 0},f.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&amp;&amp;d&amp;&amp;d.call(l,t)},i.append=function(t){var n=this.data;if(w&amp;&amp;(t instanceof g||t instanceof w)){for(var i="",o=new w(t),c=0,u=o.length;u&gt;c;c++)i+=String.fromCharCode(o[c]);n.push(i)}else if("Blob"===e(t)||"File"===e(t)){if(!s)throw new a("NOT_READABLE_ERR");var l=new s;n.push(l.readAsBinaryString(t))}else t instanceof r?"base64"===t.encoding&amp;&amp;m?n.push(m(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&amp;&amp;n.push(t.data):("string"!=typeof t&amp;&amp;(t+=""),n.push(unescape(encodeURIComponent(t))))},i.getBlob=function(t){return arguments.length||(t=null),new r(this.data.join(""),t,"raw")},i.toString=function(){return"[object BlobBuilder]"},o.slice=function(t,e,n){var i=arguments.length;return 3&gt;i&amp;&amp;(n=null),new r(this.data.slice(t,i&gt;1?e:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,e){var r=e?e.type||"":"",i=new n;if(t)for(var o=0,s=t.length;s&gt;o;o++)Uint8Array&amp;&amp;t[o]instanceof Uint8Array?i.append(t[o].buffer):i.append(t[o]);var a=i.getBlob(r);return!a.slice&amp;&amp;a.webkitSlice&amp;&amp;(a.slice=a.webkitSlice),a};var r=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=r(new t.Blob)}("undefined"!=typeof self&amp;&amp;self||"undefined"!=typeof window&amp;&amp;window||this.content||this);var saveAs=saveAs||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},s=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),a=t.webkitRequestFileSystem,c=t.requestFileSystem||a||t.mozRequestFileSystem,u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l="application/octet-stream",h=0,d=500,f=function(e){var r=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};t.chrome?r():setTimeout(r,d)},p=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(o){u(o)}}},m=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t},g=function(e,u,d){d||(e=m(e));var g,w,y,v=this,b=e.type,x=!1,k=function(){p(v,"writestart progress write writeend".split(" "))},A=function(){if(w&amp;&amp;s&amp;&amp;"undefined"!=typeof FileReader){var r=new FileReader;return r.onloadend=function(){var t=r.result;w.location.href="data:attachment/file"+t.slice(t.search(/[,;]/)),v.readyState=v.DONE,k()},r.readAsDataURL(e),void(v.readyState=v.INIT)}if(!x&amp;&amp;g||(g=n().createObjectURL(e)),w)w.location.href=g;else{var i=t.open(g,"_blank");void 0==i&amp;&amp;s&amp;&amp;(t.location.href=g)}v.readyState=v.DONE,k(),f(g)},C=function(t){return function(){return v.readyState!==v.DONE?t.apply(this,arguments):void 0}},E={create:!0,exclusive:!1};return v.readyState=v.INIT,u||(u="download"),i?(g=n().createObjectURL(e),void setTimeout(function(){r.href=g,r.download=u,o(r),k(),f(g),v.readyState=v.DONE})):(t.chrome&amp;&amp;b&amp;&amp;b!==l&amp;&amp;(y=e.slice||e.webkitSlice,e=y.call(e,0,e.size,l),x=!0),a&amp;&amp;"download"!==u&amp;&amp;(u+=".download"),(b===l||a)&amp;&amp;(w=t),c?(h+=e.size,void c(t.TEMPORARY,h,C(function(t){t.root.getDirectory("saved",E,C(function(t){var n=function(){t.getFile(u,E,C(function(t){t.createWriter(C(function(n){n.onwriteend=function(e){w.location.href=t.toURL(),v.readyState=v.DONE,p(v,"writeend",e),f(t)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&amp;&amp;A()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=v["on"+t]}),n.write(e),v.abort=function(){n.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),A)}),A)};t.getFile(u,{create:!1},C(function(t){t.remove(),n()}),C(function(t){t.code===t.NOT_FOUND_ERR?n():A()}))}),A)}),A)):void A())},w=g.prototype,y=function(t,e,n){return new g(t,e,n)};return"undefined"!=typeof navigator&amp;&amp;navigator.msSaveOrOpenBlob?function(t,e,n){return n||(t=m(t)),navigator.msSaveOrOpenBlob(t,e||"download")}:(w.abort=function(){var t=this;t.readyState=t.DONE,p(t,"abort")},w.readyState=w.INIT=0,w.WRITING=1,w.DONE=2,w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null,y)}}("undefined"!=typeof self&amp;&amp;self||"undefined"!=typeof window&amp;&amp;window||this.content);"undefined"!=typeof module&amp;&amp;module.exports&amp;&amp;(module.exports.saveAs=saveAs),void function(t,e){"object"==typeof module?module.exports=e():t.adler32cs=e()}(jsPDF,function(){var t="function"==typeof ArrayBuffer&amp;&amp;"function"==typeof Uint8Array,e=null,n=function(){if(!t)return function(){return!1};try{var n=require("buffer");"function"==typeof n.Buffer&amp;&amp;(e=n.Buffer)}catch(r){}return function(t){return t instanceof ArrayBuffer||null!==e&amp;&amp;t instanceof e}}(),r=function(){return null!==e?function(t){return new e(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))}}(),i=65521,o=function(t,e){for(var n=65535&amp;t,r=t&gt;&gt;&gt;16,o=0,s=e.length;s&gt;o;o++)n=(n+(255&amp;e.charCodeAt(o)))%i,r=(r+n)%i;return(r&lt;&lt;16|n)&gt;&gt;&gt;0},s=function(t,e){for(var n=65535&amp;t,r=t&gt;&gt;&gt;16,o=0,s=e.length;s&gt;o;o++)n=(n+e[o])%i,r=(r+n)%i;return(r&lt;&lt;16|n)&gt;&gt;&gt;0},a={},c=a.Adler32=function(){var e=function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(t=null==t?1:+t))throw new Error("First arguments needs to be a finite number.");this.checksum=t&gt;&gt;&gt;0},i=e.prototype={};return i.constructor=e,e.from=function(t){return t.prototype=i,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");this.checksum=o(1,t.toString())}),e.fromUtf8=function(t){return t.prototype=i,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");var n=r(t.toString());this.checksum=o(1,n)}),t&amp;&amp;(e.fromBuffer=function(t){return t.prototype=i,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(!n(t))throw new Error("First argument needs to be ArrayBuffer.");var r=new Uint8Array(t);return this.checksum=s(1,r)})),i.update=function(t){if(null==t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=o(this.checksum,t)},i.updateUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=r(t.toString());return this.checksum=o(this.checksum,e)},t&amp;&amp;(i.updateBuffer=function(t){if(!n(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=s(this.checksum,e)}),i.clone=function(){return new c(this.checksum)},e}();return a.from=function(t){if(null==t)throw new Error("First argument needs to be a string.");return o(1,t.toString())},a.fromUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=r(t.toString());return o(1,e)},t&amp;&amp;(a.fromBuffer=function(t){if(!n(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return s(1,e)}),a});var CssColors={};CssColors._colorsTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},CssColors.colorNameToHex=function(t){return t=t.toLowerCase(),"undefined"!=typeof this._colorsTable[t]?this._colorsTable[t]:!1};var Deflater=function(t){function e(){function t(t){var e,n,i,o,s,c,u=r.dyn_tree,l=r.stat_desc.static_tree,h=r.stat_desc.extra_bits,d=r.stat_desc.extra_base,p=r.stat_desc.max_length,m=0;for(o=0;a&gt;=o;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;f&gt;e;e++)n=t.heap[e],o=u[2*u[2*n+1]+1]+1,o&gt;p&amp;&amp;(o=p,m++),u[2*n+1]=o,n&gt;r.max_code||(t.bl_count[o]++,s=0,n&gt;=d&amp;&amp;(s=h[n-d]),c=u[2*n],t.opt_len+=c*(o+s),l&amp;&amp;(t.static_len+=c*(l[2*n+1]+s)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m&gt;0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)i=t.heap[--e],i&gt;r.max_code||(u[2*i+1]!=o&amp;&amp;(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}function e(t,e){var n=0;do n|=1&amp;t,t&gt;&gt;&gt;=1,n&lt;&lt;=1;while(--e&gt;0);return n&gt;&gt;&gt;1}function n(t,n,r){var i,o,s,c=[],u=0;for(i=1;a&gt;=i;i++)c[i]=u=u+r[i-1]&lt;&lt;1;for(o=0;n&gt;=o;o++)s=t[2*o+1],0!==s&amp;&amp;(t[2*o]=e(c[s]++,s))}var r=this;r.build_tree=function(e){var i,o,s,a=r.dyn_tree,c=r.stat_desc.static_tree,u=r.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=f,i=0;u&gt;i;i++)0!==a[2*i]?(e.heap[++e.heap_len]=l=i,e.depth[i]=0):a[2*i+1]=0;for(;e.heap_len&lt;2;)s=e.heap[++e.heap_len]=2&gt;l?++l:0,a[2*s]=1,e.depth[s]=0,e.opt_len--,c&amp;&amp;(e.static_len-=c[2*s+1]);for(r.max_code=l,i=Math.floor(e.heap_len/2);i&gt;=1;i--)e.pqdownheap(a,i);s=u;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],e.pqdownheap(a,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,a[2*s]=a[2*i]+a[2*o],e.depth[s]=Math.max(e.depth[i],e.depth[o])+1,a[2*i+1]=a[2*o+1]=s,e.heap[1]=s++,e.pqdownheap(a,1);while(e.heap_len&gt;=2);e.heap[--e.heap_max]=e.heap[1],t(e),n(a,r.max_code,e.bl_count)}}function n(t,e,n,r,i){var o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=n,o.elems=r,o.max_length=i}function r(t,e,n,r,i){var o=this;o.good_length=t,o.max_lazy=e,o.nice_length=n,o.max_chain=r,o.func=i}function i(t,e,n,r){var i=t[2*e],o=t[2*n];return o&gt;i||i==o&amp;&amp;r[e]&lt;=r[n]}function o(){function t(){var t;for(_t=2*St,qt[Rt-1]=0,t=0;Rt-1&gt;t;t++)qt[t]=0;Yt=M[Gt].max_lazy,Jt=M[Gt].good_length,Kt=M[Gt].nice_length,Xt=M[Gt].max_chain,Ut=0,jt=0,Wt=0,Lt=Vt=tt-1,zt=0,Ot=0}function r(){var t;for(t=0;d&gt;t;t++)$t[2*t]=0;for(t=0;c&gt;t;t++)Zt[2*t]=0;for(t=0;u&gt;t;t++)te[2*t]=0;$t[2*p]=1,ee.opt_len=ee.static_len=0,ae=ue=0}function o(){ne.dyn_tree=$t,ne.stat_desc=n.static_l_desc,re.dyn_tree=Zt,re.stat_desc=n.static_d_desc,ie.dyn_tree=te,ie.stat_desc=n.static_bl_desc,he=0,de=0,le=8,r()}function s(t,e){var n,r,i=-1,o=t[1],s=0,a=7,c=4;for(0===o&amp;&amp;(a=138,c=3),t[2*(e+1)+1]=65535,n=0;e&gt;=n;n++)r=o,o=t[2*(n+1)+1],++s&lt;a&amp;&amp;r==o||(c&gt;s?te[2*r]+=s:0!==r?(r!=i&amp;&amp;te[2*r]++,te[2*g]++):10&gt;=s?te[2*w]++:te[2*y]++,s=0,i=r,0===o?(a=138,c=3):r==o?(a=6,c=3):(a=7,c=4))}function a(){var t;for(s($t,ne.max_code),s(Zt,re.max_code),ie.build_tree(ee),t=u-1;t&gt;=3&amp;&amp;0===te[2*e.bl_order[t]+1];t--);return ee.opt_len+=3*(t+1)+5+5+4,t}function l(t){ee.pending_buf[ee.pending++]=t}function f(t){l(255&amp;t),l(t&gt;&gt;&gt;8&amp;255)}function m(t){l(t&gt;&gt;8&amp;255),l(255&amp;t&amp;255)}function R(t,e){var n,r=e;de&gt;v-r?(n=t,he|=n&lt;&lt;de&amp;65535,f(he),he=n&gt;&gt;&gt;v-de,de+=r-v):(he|=t&lt;&lt;de&amp;65535,de+=r)}function rt(t,e){var n=2*t;R(65535&amp;e[n],65535&amp;e[n+1])}function it(t,e){var n,r,i=-1,o=t[1],s=0,a=7,c=4;for(0===o&amp;&amp;(a=138,c=3),n=0;e&gt;=n;n++)if(r=o,o=t[2*(n+1)+1],!(++s&lt;a&amp;&amp;r==o)){if(c&gt;s){do rt(r,te);while(0!==--s)}else 0!==r?(r!=i&amp;&amp;(rt(r,te),s--),rt(g,te),R(s-3,2)):10&gt;=s?(rt(w,te),R(s-3,3)):(rt(y,te),R(s-11,7));s=0,i=r,0===o?(a=138,c=3):r==o?(a=6,c=3):(a=7,c=4)}}function ot(t,n,r){var i;for(R(t-257,5),R(n-1,5),R(r-4,4),i=0;r&gt;i;i++)R(te[2*e.bl_order[i]+1],3);it($t,t-1),it(Zt,n-1)}function st(){16==de?(f(he),he=0,de=0):de&gt;=8&amp;&amp;(l(255&amp;he),he&gt;&gt;&gt;=8,de-=8)}function at(){R($&lt;&lt;1,3),rt(p,n.static_ltree),st(),9&gt;1+le+10-de&amp;&amp;(R($&lt;&lt;1,3),rt(p,n.static_ltree),st()),le=7}function ct(t,n){var r,i,o;if(ee.pending_buf[ce+2*ae]=t&gt;&gt;&gt;8&amp;255,ee.pending_buf[ce+2*ae+1]=255&amp;t,ee.pending_buf[oe+ae]=255&amp;n,ae++,0===t?$t[2*n]++:(ue++,t--,$t[2*(e._length_code[n]+h+1)]++,Zt[2*e.d_code(t)]++),0===(8191&amp;ae)&amp;&amp;Gt&gt;2){for(r=8*ae,i=Ut-jt,o=0;c&gt;o;o++)r+=Zt[2*o]*(5+e.extra_dbits[o]);if(r&gt;&gt;&gt;=3,ue&lt;Math.floor(ae/2)&amp;&amp;r&lt;Math.floor(i/2))return!0}return ae==se-1}function ut(t,n){var r,i,o,s,a=0;if(0!==ae)do r=ee.pending_buf[ce+2*a]&lt;&lt;8&amp;65280|255&amp;ee.pending_buf[ce+2*a+1],i=255&amp;ee.pending_buf[oe+a],a++,0===r?rt(i,t):(o=e._length_code[i],rt(o+h+1,t),s=e.extra_lbits[o],0!==s&amp;&amp;(i-=e.base_length[o],R(i,s)),r--,o=e.d_code(r),rt(o,n),s=e.extra_dbits[o],0!==s&amp;&amp;(r-=e.base_dist[o],R(r,s)));while(ae&gt;a);rt(p,t),le=t[2*p+1]}function lt(){de&gt;8?f(he):de&gt;0&amp;&amp;l(255&amp;he),he=0,de=0}function ht(t,e,n){lt(),le=8,n&amp;&amp;(f(e),f(~e)),ee.pending_buf.set(Pt.subarray(t,t+e),ee.pending),ee.pending+=e}function dt(t,e,n){R((K&lt;&lt;1)+(n?1:0),3),ht(t,e,!0)}function ft(t,e,i){var o,s,c=0;Gt&gt;0?(ne.build_tree(ee),re.build_tree(ee),c=a(),o=ee.opt_len+3+7&gt;&gt;&gt;3,s=ee.static_len+3+7&gt;&gt;&gt;3,o&gt;=s&amp;&amp;(o=s)):o=s=e+5,o&gt;=e+4&amp;&amp;-1!=t?dt(t,e,i):s==o?(R(($&lt;&lt;1)+(i?1:0),3),ut(n.static_ltree,n.static_dtree)):(R((Z&lt;&lt;1)+(i?1:0),3),ot(ne.max_code+1,re.max_code+1,c+1),ut($t,Zt)),r(),i&amp;&amp;lt()}function pt(t){ft(jt&gt;=0?jt:-1,Ut-jt,t),jt=Ut,xt.flush_pending()}function mt(){var t,e,n,r;do{if(r=_t-Wt-Ut,0===r&amp;&amp;0===Ut&amp;&amp;0===Wt)r=St;else if(-1==r)r--;else if(Ut&gt;=St+St-nt){Pt.set(Pt.subarray(St,St+St),0),Ht-=St,Ut-=St,jt-=St,t=Rt,n=t;do e=65535&amp;qt[--n],qt[n]=e&gt;=St?e-St:0;while(0!==--t);t=St,n=t;do e=65535&amp;It[--n],It[n]=e&gt;=St?e-St:0;while(0!==--t);r+=St}if(0===xt.avail_in)return;t=xt.read_buf(Pt,Ut+Wt,r),Wt+=t,Wt&gt;=tt&amp;&amp;(Ot=255&amp;Pt[Ut],Ot=(Ot&lt;&lt;Nt^255&amp;Pt[Ut+1])&amp;Dt)}while(nt&gt;Wt&amp;&amp;0!==xt.avail_in)}function gt(t){var e,n=65535;for(n&gt;At-5&amp;&amp;(n=At-5);;){if(1&gt;=Wt){if(mt(),0===Wt&amp;&amp;t==C)return U;if(0===Wt)break}if(Ut+=Wt,Wt=0,e=jt+n,(0===Ut||Ut&gt;=e)&amp;&amp;(Wt=Ut-e,Ut=e,pt(!1),0===xt.avail_out))return U;if(Ut-jt&gt;=St-nt&amp;&amp;(pt(!1),0===xt.avail_out))return U}return pt(t==F),0===xt.avail_out?t==F?W:U:t==F?V:H}function wt(t){var e,n,r=Xt,i=Ut,o=Vt,s=Ut&gt;St-nt?Ut-(St-nt):0,a=Kt,c=Tt,u=Ut+et,l=Pt[i+o-1],h=Pt[i+o];Vt&gt;=Jt&amp;&amp;(r&gt;&gt;=2),a&gt;Wt&amp;&amp;(a=Wt);do if(e=t,Pt[e+o]==h&amp;&amp;Pt[e+o-1]==l&amp;&amp;Pt[e]==Pt[i]&amp;&amp;Pt[++e]==Pt[i+1]){i+=2,e++;do;while(Pt[++i]==Pt[++e]&amp;&amp;Pt[++i]==Pt[++e]&amp;&amp;Pt[++i]==Pt[++e]&amp;&amp;Pt[++i]==Pt[++e]&amp;&amp;Pt[++i]==Pt[++e]&amp;&amp;Pt[++i]==Pt[++e]&amp;&amp;Pt[++i]==Pt[++e]&amp;&amp;Pt[++i]==Pt[++e]&amp;&amp;u&gt;i);if(n=et-(u-i),i=u-et,n&gt;o){if(Ht=t,o=n,n&gt;=a)break;l=Pt[i+o-1],h=Pt[i+o]}}while((t=65535&amp;It[t&amp;c])&gt;s&amp;&amp;0!==--r);return Wt&gt;=o?o:Wt}function yt(t){for(var e,n=0;;){if(nt&gt;Wt){if(mt(),nt&gt;Wt&amp;&amp;t==C)return U;if(0===Wt)break}if(Wt&gt;=tt&amp;&amp;(Ot=(Ot&lt;&lt;Nt^255&amp;Pt[Ut+(tt-1)])&amp;Dt,n=65535&amp;qt[Ot],It[Ut&amp;Tt]=qt[Ot],qt[Ot]=Ut),0!==n&amp;&amp;St-nt&gt;=(Ut-n&amp;65535)&amp;&amp;Qt!=k&amp;&amp;(Lt=wt(n)),Lt&gt;=tt)if(e=ct(Ut-Ht,Lt-tt),Wt-=Lt,Yt&gt;=Lt&amp;&amp;Wt&gt;=tt){Lt--;do Ut++,Ot=(Ot&lt;&lt;Nt^255&amp;Pt[Ut+(tt-1)])&amp;Dt,n=65535&amp;qt[Ot],It[Ut&amp;Tt]=qt[Ot],qt[Ot]=Ut;while(0!==--Lt);Ut++}else Ut+=Lt,Lt=0,Ot=255&amp;Pt[Ut],Ot=(Ot&lt;&lt;Nt^255&amp;Pt[Ut+1])&amp;Dt;else e=ct(0,255&amp;Pt[Ut]),Wt--,Ut++;if(e&amp;&amp;(pt(!1),0===xt.avail_out))return U}return pt(t==F),0===xt.avail_out?t==F?W:U:t==F?V:H}function vt(t){for(var e,n,r=0;;){if(nt&gt;Wt){if(mt(),nt&gt;Wt&amp;&amp;t==C)return U;if(0===Wt)break}if(Wt&gt;=tt&amp;&amp;(Ot=(Ot&lt;&lt;Nt^255&amp;Pt[Ut+(tt-1)])&amp;Dt,r=65535&amp;qt[Ot],It[Ut&amp;Tt]=qt[Ot],qt[Ot]=Ut),Vt=Lt,Mt=Ht,Lt=tt-1,0!==r&amp;&amp;Yt&gt;Vt&amp;&amp;St-nt&gt;=(Ut-r&amp;65535)&amp;&amp;(Qt!=k&amp;&amp;(Lt=wt(r)),5&gt;=Lt&amp;&amp;(Qt==x||Lt==tt&amp;&amp;Ut-Ht&gt;4096)&amp;&amp;(Lt=tt-1)),Vt&gt;=tt&amp;&amp;Vt&gt;=Lt){n=Ut+Wt-tt,e=ct(Ut-1-Mt,Vt-tt),Wt-=Vt-1,Vt-=2;do++Ut&lt;=n&amp;&amp;(Ot=(Ot&lt;&lt;Nt^255&amp;Pt[Ut+(tt-1)])&amp;Dt,r=65535&amp;qt[Ot],It[Ut&amp;Tt]=qt[Ot],qt[Ot]=Ut);while(0!==--Vt);if(zt=0,Lt=tt-1,Ut++,e&amp;&amp;(pt(!1),0===xt.avail_out))return U}else if(0!==zt){if(e=ct(0,255&amp;Pt[Ut-1]),e&amp;&amp;pt(!1),Ut++,Wt--,0===xt.avail_out)return U}else zt=1,Ut++,Wt--}return 0!==zt&amp;&amp;(e=ct(0,255&amp;Pt[Ut-1]),zt=0),pt(t==F),0===xt.avail_out?t==F?W:U:t==F?V:H}function bt(e){return e.total_in=e.total_out=0,e.msg=null,ee.pending=0,ee.pending_out=0,kt=G,Et=C,o(),t(),T}var xt,kt,At,Ct,Et,St,Ft,Tt,Pt,_t,It,qt,Ot,Rt,Bt,Dt,Nt,jt,Lt,Mt,zt,Ut,Ht,Wt,Vt,Xt,Yt,Gt,Qt,Jt,Kt,$t,Zt,te,ee=this,ne=new e,re=new e,ie=new e;ee.depth=[];var oe,se,ae,ce,ue,le,he,de;ee.bl_count=[],ee.heap=[],$t=[],Zt=[],te=[],ee.pqdownheap=function(t,e){for(var n=ee.heap,r=n[e],o=e&lt;&lt;1;o&lt;=ee.heap_len&amp;&amp;(o&lt;ee.heap_len&amp;&amp;i(t,n[o+1],n[o],ee.depth)&amp;&amp;o++,!i(t,r,n[o],ee.depth));)n[e]=n[o],e=o,o&lt;&lt;=1;n[e]=r},ee.deflateInit=function(t,e,n,r,i,o){return r||(r=J),i||(i=D),o||(o=A),t.msg=null,e==b&amp;&amp;(e=6),1&gt;i||i&gt;B||r!=J||9&gt;n||n&gt;15||0&gt;e||e&gt;9||0&gt;o||o&gt;k?I:(t.dstate=ee,Ft=n,St=1&lt;&lt;Ft,Tt=St-1,Bt=i+7,Rt=1&lt;&lt;Bt,Dt=Rt-1,Nt=Math.floor((Bt+tt-1)/tt),Pt=new Uint8Array(2*St),It=[],qt=[],se=1&lt;&lt;i+6,ee.pending_buf=new Uint8Array(4*se),At=4*se,ce=Math.floor(se/2),oe=3*se,Gt=e,Qt=o,Ct=255&amp;r,bt(t))},ee.deflateEnd=function(){return kt!=Y&amp;&amp;kt!=G&amp;&amp;kt!=Q?I:(ee.pending_buf=null,qt=null,It=null,Pt=null,ee.dstate=null,kt==G?q:T)},ee.deflateParams=function(t,e,n){var r=T;return e==b&amp;&amp;(e=6),0&gt;e||e&gt;9||0&gt;n||n&gt;k?I:(M[Gt].func!=M[e].func&amp;&amp;0!==t.total_in&amp;&amp;(r=t.deflate(E)),Gt!=e&amp;&amp;(Gt=e,Yt=M[Gt].max_lazy,Jt=M[Gt].good_length,Kt=M[Gt].nice_length,Xt=M[Gt].max_chain),Qt=n,r)},ee.deflateSetDictionary=function(t,e,n){var r,i=n,o=0;if(!e||kt!=Y)return I;if(tt&gt;i)return T;for(i&gt;St-nt&amp;&amp;(i=St-nt,o=n-i),Pt.set(e.subarray(o,o+i),0),Ut=i,jt=i,Ot=255&amp;Pt[0],Ot=(Ot&lt;&lt;Nt^255&amp;Pt[1])&amp;Dt,r=0;i-tt&gt;=r;r++)Ot=(Ot&lt;&lt;Nt^255&amp;Pt[r+(tt-1)])&amp;Dt,It[r&amp;Tt]=qt[Ot],qt[Ot]=r;return T},ee.deflate=function(t,e){var n,r,i,o,s;if(e&gt;F||0&gt;e)return I;if(!t.next_out||!t.next_in&amp;&amp;0!==t.avail_in||kt==Q&amp;&amp;e!=F)return t.msg=z[_-I],I;if(0===t.avail_out)return t.msg=z[_-O],O;if(xt=t,o=Et,Et=e,kt==Y&amp;&amp;(r=J+(Ft-8&lt;&lt;4)&lt;&lt;8,i=(Gt-1&amp;255)&gt;&gt;1,i&gt;3&amp;&amp;(i=3),r|=i&lt;&lt;6,0!==Ut&amp;&amp;(r|=X),r+=31-r%31,kt=G,m(r)),0!==ee.pending){if(xt.flush_pending(),0===xt.avail_out)return Et=-1,T}else if(0===xt.avail_in&amp;&amp;o&gt;=e&amp;&amp;e!=F)return xt.msg=z[_-O],O;if(kt==Q&amp;&amp;0!==xt.avail_in)return t.msg=z[_-O],O;if(0!==xt.avail_in||0!==Wt||e!=C&amp;&amp;kt!=Q){switch(s=-1,M[Gt].func){case N:s=gt(e);break;case j:s=yt(e);break;case L:s=vt(e)}if(s!=W&amp;&amp;s!=V||(kt=Q),s==U||s==W)return 0===xt.avail_out&amp;&amp;(Et=-1),T;if(s==H){if(e==E)at();else if(dt(0,0,!1),e==S)for(n=0;Rt&gt;n;n++)qt[n]=0;if(xt.flush_pending(),0===xt.avail_out)return Et=-1,T}}return e!=F?T:P}}function s(){var t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}var a=15,c=30,u=19,l=29,h=256,d=h+1+l,f=2*d+1,p=256,m=7,g=16,w=17,y=18,v=16,b=-1,x=1,k=2,A=0,C=0,E=1,S=3,F=4,T=0,P=1,_=2,I=-2,q=-3,O=-5,R=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];e._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],e.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],e.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],e.d_code=function(t){return 256&gt;t?R[t]:R[256+(t&gt;&gt;&gt;7)]},e.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],e.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],e.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],e.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],n.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],n.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],n.static_l_desc=new n(n.static_ltree,e.extra_lbits,h+1,d,a),n.static_d_desc=new n(n.static_dtree,e.extra_dbits,0,c,a),n.static_bl_desc=new n(null,e.extra_blbits,0,u,m);var B=9,D=8,N=0,j=1,L=2,M=[new r(0,0,0,0,N),new r(4,4,8,4,j),new r(4,5,16,8,j),new r(4,6,32,32,j),new r(4,4,16,16,L),new r(8,16,32,32,L),new r(8,16,128,128,L),new r(8,32,128,256,L),new r(32,128,258,1024,L),new r(32,258,258,4096,L)],z=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],U=0,H=1,W=2,V=3,X=32,Y=42,G=113,Q=666,J=8,K=0,$=1,Z=2,tt=3,et=258,nt=et+tt+1;return s.prototype={deflateInit:function(t,e){var n=this;return n.dstate=new o,e||(e=a),n.dstate.deflateInit(n,t,e)},deflate:function(t){var e=this;return e.dstate?e.dstate.deflate(e,t):I},deflateEnd:function(){var t=this;if(!t.dstate)return I;var e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams:function(t,e){var n=this;return n.dstate?n.dstate.deflateParams(n,t,e):I},deflateSetDictionary:function(t,e){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):I},read_buf:function(t,e,n){var r=this,i=r.avail_in;return i&gt;n&amp;&amp;(i=n),0===i?0:(r.avail_in-=i,t.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),e),r.next_in_index+=i,r.total_in+=i,i)},flush_pending:function(){var t=this,e=t.dstate.pending;e&gt;t.avail_out&amp;&amp;(e=t.avail_out),0!==e&amp;&amp;(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&amp;&amp;(t.dstate.pending_out=0))}},function(t){var e=this,n=new s,r=512,i=C,o=new Uint8Array(r);"undefined"==typeof t&amp;&amp;(t=b),n.deflateInit(t),n.next_out=o,e.append=function(t,e){var s,a,c=[],u=0,l=0,h=0;if(t.length){n.next_in_index=0,n.next_in=t,n.avail_in=t.length;do{if(n.next_out_index=0,n.avail_out=r,
s=n.deflate(i),s!=T)throw"deflating: "+n.msg;n.next_out_index&amp;&amp;(n.next_out_index==r?c.push(new Uint8Array(o)):c.push(new Uint8Array(o.subarray(0,n.next_out_index)))),h+=n.next_out_index,e&amp;&amp;n.next_in_index&gt;0&amp;&amp;n.next_in_index!=u&amp;&amp;(e(n.next_in_index),u=n.next_in_index)}while(n.avail_in&gt;0||0===n.avail_out);return a=new Uint8Array(h),c.forEach(function(t){a.set(t,l),l+=t.length}),a}},e.flush=function(){var t,e,i=[],s=0,a=0;do{if(n.next_out_index=0,n.avail_out=r,t=n.deflate(F),t!=P&amp;&amp;t!=T)throw"deflating: "+n.msg;r-n.avail_out&gt;0&amp;&amp;i.push(new Uint8Array(o.subarray(0,n.next_out_index))),a+=n.next_out_index}while(n.avail_in&gt;0||0===n.avail_out);return n.deflateEnd(),e=new Uint8Array(a),i.forEach(function(t){e.set(t,s),s+=t.length}),e}}}(this);(function(t,e,n,r,i,o,s){function a(t,e,n,r){return p(t,t,n,r,e).then(function(i){I("Document cloned");var o="["+Wt+"='true']";t.querySelector(o).removeAttribute(Wt);var s=i.contentWindow,a=s.document.querySelector(o),u="function"==typeof e.onclone?Promise.resolve(e.onclone(s.document)):Promise.resolve(!0);return u.then(function(){return c(a,i,e,n,r)})})}function c(t,n,r,i,o){var s=n.contentWindow,a=new Rt(s.document),c=new P(r,a),f=L(t),p="view"===r.type?i:h(s.document),m="view"===r.type?o:d(s.document),g=new Ut(p,m,c,r,e),w=new z(t,g,a,c,r);return w.ready.then(function(){I("Finished rendering");var e;return e="view"===r.type?l(g.canvas,{width:g.canvas.width,height:g.canvas.height,top:0,left:0,x:0,y:0}):t===s.document.body||t===s.document.documentElement||null!=r.canvas?g.canvas:l(g.canvas,{width:null!=r.width?r.width:f.width,height:null!=r.height?r.height:f.height,top:f.top,left:f.left,x:s.pageXOffset,y:s.pageYOffset}),u(n,r),e})}function u(t,e){e.removeContainer&amp;&amp;(t.parentNode.removeChild(t),I("Cleaned up container"))}function l(t,n){var r=e.createElement("canvas"),i=Math.min(t.width-1,Math.max(0,n.left)),o=Math.min(t.width,Math.max(1,n.left+n.width)),s=Math.min(t.height-1,Math.max(0,n.top)),a=Math.min(t.height,Math.max(1,n.top+n.height));return r.width=n.width,r.height=n.height,I("Cropping canvas at:","left:",n.left,"top:",n.top,"width:",o-i,"height:",a-s),I("Resulting crop with width",n.width,"and height",n.height," with x",i,"and y",s),r.getContext("2d").drawImage(t,i,s,o-i,a-s,n.x,n.y,o-i,a-s),r}function h(t){return Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth))}function d(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}function f(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}function p(t,e,n,r,i){y(t);var o=t.documentElement.cloneNode(!0),s=e.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=n,s.height=r,s.scrolling="no",e.body.appendChild(s),new Promise(function(e){var n=s.contentWindow.document;s.contentWindow.onload=s.onload=function(){var o=setInterval(function(){n.body.childNodes.length&gt;0&amp;&amp;(v(t,n),clearInterval(o),"view"===i.type&amp;&amp;s.contentWindow.scrollTo(r,a),e(s))},50)};var r=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset;n.open(),n.write("&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;/html&gt;"),m(t,r,a),n.replaceChild(i.javascriptEnabled===!0?n.adoptNode(o):b(n.adoptNode(o)),n.documentElement),n.close()})}function m(t,e,n){e===t.defaultView.pageXOffset&amp;&amp;n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)}function g(e,n,r,i,o,s){return new Et(e,n,t.document).then(w(e)).then(function(t){return p(t,r,i,o,s)})}function w(t){return function(n){var r,i=new DOMParser;try{r=i.parseFromString(n,"text/html")}catch(o){I("DOMParser not supported, falling back to createHTMLDocument"),r=e.implementation.createHTMLDocument("");try{r.open(),r.write(n),r.close()}catch(s){I("createHTMLDocument write not supported, falling back to document.body.innerHTML"),r.body.innerHTML=n}}var a=r.querySelector("base");if(!a||!a.href.host){var c=r.createElement("base");c.href=t,r.head.insertBefore(c,r.head.firstChild)}return r}}function y(t){[].slice.call(t.querySelectorAll("canvas"),0).forEach(function(t){t.setAttribute(Vt,"canvas-"+Xt++)})}function v(t,e){[].slice.call(t.querySelectorAll("["+Vt+"]"),0).forEach(function(t){try{var n=e.querySelector("["+Vt+'="'+t.getAttribute(Vt)+'"]');n&amp;&amp;(n.width=t.width,n.height=t.height,n.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(r){I("Unable to copy canvas content from",t,r)}t.removeAttribute(Vt)})}function b(t){return[].slice.call(t.childNodes,0).filter(x).forEach(function(e){"SCRIPT"===e.tagName?t.removeChild(e):b(e)}),t}function x(t){return t.nodeType===Node.ELEMENT_NODE}function k(t){var n=e.createElement("a");return n.href=t,n.href=n.href,n}function A(t){if(this.src=t,I("DummyImageContainer for",t),!this.promise||!this.image){I("Initiating DummyImageContainer"),A.prototype.image=new Image;var e=this.image;A.prototype.promise=new Promise(function(t,n){e.onload=t,e.onerror=n,e.src=f(),e.complete===!0&amp;&amp;t(e)})}}function C(t,n){var r,i,o=e.createElement("div"),s=e.createElement("img"),a=e.createElement("span"),c="Hidden Text";o.style.visibility="hidden",o.style.fontFamily=t,o.style.fontSize=n,o.style.margin=0,o.style.padding=0,e.body.appendChild(o),s.src=f(),s.width=1,s.height=1,s.style.margin=0,s.style.padding=0,s.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=n,a.style.margin=0,a.style.padding=0,a.appendChild(e.createTextNode(c)),o.appendChild(a),o.appendChild(s),r=s.offsetTop-a.offsetTop+1,o.removeChild(a),o.appendChild(e.createTextNode(c)),o.style.lineHeight="normal",s.style.verticalAlign="super",i=s.offsetTop-o.offsetTop+1,e.body.removeChild(o),this.baseline=r,this.lineWidth=1,this.middle=i}function E(){this.data={}}function S(t,e,n){this.image=null,this.src=t;var r=this,i=L(t);this.promise=(e?new Promise(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(n.proxy,i,n)).then(function(t){return html2canvas(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(t){return r.image=t})}function F(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}function T(t,e){this.src=t,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(r,i){n.image.onload=r,n.image.onerror=i,e&amp;&amp;(n.image.crossOrigin="anonymous"),n.image.src=t,n.image.complete===!0&amp;&amp;r(n.image)})}function P(e,n){this.link=null,this.options=e,this.support=n,this.origin=this.getOrigin(t.location.href)}function _(t){F.apply(this,arguments),this.type=this.TYPES.LINEAR;var e=null===t.args[0].match(this.stepRegExp);e?t.args[0].split(" ").reverse().forEach(function(t){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var e=this.y0,n=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=n,this.y1=e}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(this.stepRegExp);return{color:e[1],stop:"%"===e[3]?e[2]/100:null}},this),null===this.colorStops[0].stop&amp;&amp;(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&amp;&amp;(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&amp;&amp;this.colorStops.slice(e).some(function(n,r){return null!==n.stop?(t.stop=(n.stop-this.colorStops[e-1].stop)/(r+1)+this.colorStops[e-1].stop,!0):!1},this)},this)}function I(){t.html2canvas.logging&amp;&amp;t.console&amp;&amp;t.console.log&amp;&amp;Function.prototype.bind.call(t.console.log,t.console).apply(t.console,[Date.now()-t.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}function q(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function O(t){var e=t.options[t.selectedIndex||0];return e?e.text||"":""}function R(t){return t&amp;&amp;"matrix"===t[1]?t[2].split(",").map(function(t){return parseFloat(t.trim())}):void 0}function B(t){return-1!==t.toString().indexOf("%")}function D(t){var e,n,r,i,o,s,a,c=" \r\n	",u=[],l=0,h=0,d=function(){e&amp;&amp;('"'===n.substr(0,1)&amp;&amp;(n=n.substr(1,n.length-2)),n&amp;&amp;a.push(n),"-"===e.substr(0,1)&amp;&amp;(i=e.indexOf("-",1)+1)&gt;0&amp;&amp;(r=e.substr(0,i),e=e.substr(i)),u.push({prefix:r,method:e.toLowerCase(),value:o,args:a,image:null})),a=[],e=r=n=o=""};return a=[],e=r=n=o="",t.split("").forEach(function(t){if(!(0===l&amp;&amp;c.indexOf(t)&gt;-1)){switch(t){case'"':s?s===t&amp;&amp;(s=null):s=t;break;case"(":if(s)break;if(0===l)return l=1,void(o+=t);h++;break;case")":if(s)break;if(1===l){if(0===h)return l=0,o+=t,void d();h--}break;case",":if(s)break;if(0===l)return void d();if(1===l&amp;&amp;0===h&amp;&amp;!e.match(/^url$/i))return a.push(n),n="",void(o+=t)}o+=t,0===l?e+=t:n+=t}}),d(),u}function N(t){return t.replace("px","")}function j(t){return parseFloat(t)}function L(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}}function M(t){var e=t.offsetParent?M(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}}function z(t,e,n,r,i){I("Starting NodeParser"),this.renderer=e,this.options=i,this.range=null,this.support=n,this.renderQueue=[],this.stack=new Ot(!0,1,t.ownerDocument,null);var o=new q(t,null);if(t===t.ownerDocument.documentElement){var s=new q(this.renderer.isTransparent(o.css("backgroundColor"))?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,s.css("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=bt([o].concat(this.getChildren(o)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new E,I("Fetched nodes, total:",this.nodes.length),I("Calculate overflow clips"),this.calculateOverflowClips(),I("Start fetching images"),this.images=r.fetch(this.nodes.filter(ht)),this.ready=this.images.ready.then(gt(function(){return I("Images loaded, starting parsing"),I("Creating stacking contexts"),this.createStackingContexts(),I("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),I("Render queue created with "+this.renderQueue.length+" items"),new Promise(gt(function(t){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,t):this.renderQueue.length&gt;0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function U(t){return t.parent&amp;&amp;t.parent.clip.length}function H(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function W(){}function V(t,e,n,r){return t.map(function(i,o){if(i.width&gt;0){var s=e.left,a=e.top,c=e.width,u=e.height-t[2].width;switch(o){case 0:u=t[0].width,i.args=Q({c1:[s,a],c2:[s+c,a],c3:[s+c-t[1].width,a+u],c4:[s+t[3].width,a+u]},r[0],r[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:s=e.left+e.width-t[1].width,c=t[1].width,i.args=Q({c1:[s+c,a],c2:[s+c,a+u+t[2].width],c3:[s,a+u],c4:[s,a+t[0].width]},r[1],r[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:a=a+e.height-t[2].width,u=t[2].width,i.args=Q({c1:[s+c,a+u],c2:[s,a+u],c3:[s+t[3].width,a],c4:[s+c-t[3].width,a]},r[2],r[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:c=t[3].width,i.args=Q({c1:[s,a+u+t[2].width],c2:[s,a],c3:[s+c,a+t[0].width],c4:[s+c,a+u]},r[3],r[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return i})}function X(t,e,n,r){var i=4*((Math.sqrt(2)-1)/3),o=n*i,s=r*i,a=t+n,c=e+r;return{topLeft:G({x:t,y:c},{x:t,y:c-s},{x:a-o,y:e},{x:a,y:e}),topRight:G({x:t,y:e},{x:t+o,y:e},{x:a,y:c-s},{x:a,y:c}),bottomRight:G({x:a,y:e},{x:a,y:e+s},{x:t+o,y:c},{x:t,y:c}),bottomLeft:G({x:a,y:c},{x:a-o,y:c},{x:t,y:e+s},{x:t,y:e})}}function Y(t,e,n){var r=t.left,i=t.top,o=t.width,s=t.height,a=e[0][0],c=e[0][1],u=e[1][0],l=e[1][1],h=e[2][0],d=e[2][1],f=e[3][0],p=e[3][1],m=o-u,g=s-d,w=o-h,y=s-p;return{topLeftOuter:X(r,i,a,c).topLeft.subdivide(.5),topLeftInner:X(r+n[3].width,i+n[0].width,Math.max(0,a-n[3].width),Math.max(0,c-n[0].width)).topLeft.subdivide(.5),topRightOuter:X(r+m,i,u,l).topRight.subdivide(.5),topRightInner:X(r+Math.min(m,o+n[3].width),i+n[0].width,m&gt;o+n[3].width?0:u-n[3].width,l-n[0].width).topRight.subdivide(.5),bottomRightOuter:X(r+w,i+g,h,d).bottomRight.subdivide(.5),bottomRightInner:X(r+Math.min(w,o-n[3].width),i+Math.min(g,s+n[0].width),Math.max(0,h-n[1].width),d-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:X(r,i+y,f,p).bottomLeft.subdivide(.5),bottomLeftInner:X(r+n[3].width,i+y,Math.max(0,f-n[3].width),p-n[2].width).bottomLeft.subdivide(.5)}}function G(t,e,n,r){var i=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:r,subdivide:function(o){var s=i(t,e,o),a=i(e,n,o),c=i(n,r,o),u=i(s,a,o),l=i(a,c,o),h=i(u,l,o);return[G(t,s,u,h),G(h,l,c,r)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function Q(t,e,n,r,i,o,s){var a=[];return e[0]&gt;0||e[1]&gt;0?(a.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),n[0]&gt;0||n[1]&gt;0?(a.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),e[0]&gt;0||e[1]&gt;0?(a.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function J(t,e,n,r,i,o,s){e[0]&gt;0||e[1]&gt;0?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",o,s]),(n[0]&gt;0||n[1]&gt;0)&amp;&amp;t.push(["line",i[0].start.x,i[0].start.y])}function K(t){return t.cssInt("zIndex")&lt;0}function $(t){return t.cssInt("zIndex")&gt;0}function Z(t){return 0===t.cssInt("zIndex")}function tt(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function et(t){return t instanceof Ot}function nt(t){return t.node.data.trim().length&gt;0}function rt(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}function it(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var n=t.css("border"+e+"Radius"),r=n.split(" ");return r.length&lt;=1&amp;&amp;(r[1]=r[0]),r.map(wt)})}function ot(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function st(t){var e=t.css("position"),n=-1!==["absolute","relative","fixed"].indexOf(e)?t.css("zIndex"):"auto";return"auto"!==n}function at(t){return"static"!==t.css("position")}function ct(t){return"none"!==t.css("float")}function ut(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}function lt(t){var e=this;return function(){return!t.apply(e,arguments)}}function ht(t){return t.node.nodeType===Node.ELEMENT_NODE}function dt(t){return t.isPseudoElement===!0}function ft(t){return t.node.nodeType===Node.TEXT_NODE}function pt(t){return function(e,n){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(n.cssInt("zIndex")+t.indexOf(n)/t.length)}}function mt(t){return t.getOpacity()&lt;1}function gt(t,e){return function(){return t.apply(e,arguments)}}function wt(t){return parseInt(t,10)}function yt(t){return t.width}function vt(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function bt(t){return[].concat.apply([],t)}function xt(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&amp;&amp;e.match(/'|"/)?t.substr(1,t.length-2):t}function kt(e){for(var n,r=[],i=0,o=!1;e.length;)At(e[i])===o?(n=e.splice(0,i),n.length&amp;&amp;r.push(t.html2canvas.punycode.ucs2.encode(n)),o=!o,i=0):i++,i&gt;=e.length&amp;&amp;(n=e.splice(0,i),n.length&amp;&amp;r.push(t.html2canvas.punycode.ucs2.encode(n)));return r}function At(t){return-1!==[32,13,10,9,45].indexOf(t)}function Ct(t){return/[^\u0000-\u00ff]/.test(t)}function Et(t,e,n){var r=Tt(Gt),i=Pt(e,t,r);return Gt?zt(i):Ft(n,i,r).then(function(t){return Dt(t.content)})}function St(t,e,n){var r=Tt(Qt),i=Pt(e,t,r);return Qt?Promise.resolve(i):Ft(n,i,r).then(function(t){return"data:"+t.type+";base64,"+t.content})}function Ft(e,n,r){return new Promise(function(i,o){var s=e.createElement("script"),a=function(){delete t.html2canvas.proxy[r],e.body.removeChild(s)};t.html2canvas.proxy[r]=function(t){a(),i(t)},s.src=n,s.onerror=function(t){a(),o(t)},e.body.appendChild(s)})}function Tt(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++Yt+"_"+Math.round(1e5*Math.random())}function Pt(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&amp;callback=html2canvas.proxy."+n:"")}function _t(t,n){var r=(e.createElement("script"),e.createElement("a"));r.href=t,t=r.href,this.src=t,this.image=new Image;var i=this;this.promise=new Promise(function(r,o){i.image.crossOrigin="Anonymous",i.image.onload=r,i.image.onerror=o,new St(t,n,e).then(function(t){i.image.src=t})["catch"](o)})}function It(t,e,n){q.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}function qt(t,e,n,r,i){this.width=t,this.height=e,this.images=n,this.options=r,this.document=i}function Ot(t,e,n,r){q.call(this,n,r),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}function Rt(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}function Bt(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):zt(t)}).then(function(t){return new Promise(function(n){html2canvas.fabric.loadSVGFromString(t,e.createCanvas.call(e,n))})})}function Dt(t){var e,n,r,i,o,s,a,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=t.length,h="";for(e=0;l&gt;e;e+=4)n=u.indexOf(t[e]),r=u.indexOf(t[e+1]),i=u.indexOf(t[e+2]),o=u.indexOf(t[e+3]),s=n&lt;&lt;2|r&gt;&gt;4,a=(15&amp;r)&lt;&lt;4|i&gt;&gt;2,c=(3&amp;i)&lt;&lt;6|o,h+=64===i?String.fromCharCode(s):64===o||-1===o?String.fromCharCode(s,a):String.fromCharCode(s,a,c);return h}function Nt(t,e){this.src=t,this.image=null;var n=this;this.promise=e?new Promise(function(e,r){n.image=new Image,n.image.onload=e,n.image.onerror=r,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),n.image.complete===!0&amp;&amp;e(n.image)}):this.hasFabric().then(function(){return new Promise(function(e){html2canvas.fabric.parseSVGDocument(t,n.createCanvas.call(n,e))})})}function jt(t,e){q.call(this,t,e)}function Lt(t,e,n){return t.length&gt;0?e+n.toUpperCase():void 0}function Mt(t){F.apply(this,arguments),this.type="linear"===t.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}function zt(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.responseText):n(new Error(r.statusText))},r.onerror=function(){n(new Error("Network Error"))},r.send()})}function Ut(t,e){qt.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.options.background&amp;&amp;this.rectangle(0,0,t,e,this.options.background),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},I("Initialized CanvasRenderer with size",t,"x",e)}function Ht(t){return t.length&gt;0}if(!function(){var n,r,o,s;!function(){var t={},e={};n=function(e,n,r){t[e]={deps:n,callback:r}},s=o=r=function(n){function i(t){if("."!==t.charAt(0))return t;for(var e=t.split("/"),r=n.split("/").slice(0,-1),i=0,o=e.length;o&gt;i;i++){var s=e[i];if(".."===s)r.pop();else{if("."===s)continue;r.push(s)}}return r.join("/")}if(s._eak_seen=t,e[n])return e[n];if(e[n]={},!t[n])throw new Error("Could not find module "+n);for(var o,a=t[n],c=a.deps,u=a.callback,l=[],h=0,d=c.length;d&gt;h;h++)"exports"===c[h]?l.push(o={}):l.push(r(i(c[h])));var f=u.apply(this,l);return e[n]=o||f}}(),n("promise/all",["./utils","exports"],function(t,e){"use strict";function n(t){var e=this;if(!r(t))throw new TypeError("You must pass an array to all.");return new e(function(e,n){function r(t){return function(e){o(t,e)}}function o(t,n){a[t]=n,0===--c&amp;&amp;e(a)}var s,a=[],c=t.length;0===c&amp;&amp;e([]);for(var u=0;u&lt;t.length;u++)s=t[u],s&amp;&amp;i(s.then)?s.then(r(u),n):o(u,s)})}var r=t.isArray,i=t.isFunction;e.all=n}),n("promise/asap",["exports"],function(n){"use strict";function r(){return function(){process.nextTick(a)}}function o(){var t=0,n=new h(a),r=e.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function s(){return function(){d.setTimeout(a,1)}}function a(){for(var t=0;t&lt;f.length;t++){var e=f[t],n=e[0],r=e[1];n(r)}f=[]}function c(t,e){var n=f.push([t,e]);1===n&amp;&amp;u()}var u,l="undefined"!=typeof t?t:{},h=l.MutationObserver||l.WebKitMutationObserver,d="undefined"!=typeof i?i:this,f=[];u="undefined"!=typeof process&amp;&amp;"[object process]"==={}.toString.call(process)?r():h?o():s(),n.asap=c}),n("promise/cast",["exports"],function(t){"use strict";function e(t){if(t&amp;&amp;"object"==typeof t&amp;&amp;t.constructor===this)return t;var e=this;return new e(function(e){e(t)})}t.cast=e}),n("promise/config",["exports"],function(t){"use strict";function e(t,e){return 2!==arguments.length?n[t]:void(n[t]=e)}var n={instrument:!1};t.config=n,t.configure=e}),n("promise/polyfill",["./promise","./utils","exports"],function(e,n,r){"use strict";function i(){var e="Promise"in t&amp;&amp;"cast"in t.Promise&amp;&amp;"resolve"in t.Promise&amp;&amp;"reject"in t.Promise&amp;&amp;"all"in t.Promise&amp;&amp;"race"in t.Promise&amp;&amp;function(){var e;return new t.Promise(function(t){e=t}),s(e)}();e||(t.Promise=o)}var o=e.Promise,s=n.isFunction;r.polyfill=i}),n("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(t,e,n,r,i,o,s,a,c){"use strict";function u(t){if(!k(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],l(t,this)}function l(t,e){function n(t){m(e,t)}function r(t){w(e,t)}try{t(n,r)}catch(i){r(i)}}function h(t,e,n,r){var i,o,s,a,c=k(n);if(c)try{i=n(r),s=!0}catch(u){a=!0,o=u}else i=r,s=!0;p(e,i)||(c&amp;&amp;s?m(e,i):a?w(e,o):t===I?m(e,i):t===q&amp;&amp;w(e,i))}function d(t,e,n,r){var i=t._subscribers,o=i.length;i[o]=e,i[o+I]=n,i[o+q]=r}function f(t,e){for(var n,r,i=t._subscribers,o=t._detail,s=0;s&lt;i.length;s+=3)n=i[s],r=i[s+e],h(e,n,r,o);t._subscribers=null}function p(t,e){var n,r=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(x(e)&amp;&amp;(r=e.then,k(r)))return r.call(e,function(r){return n?!0:(n=!0,void(e!==r?m(t,r):g(t,r)))},function(e){return n?!0:(n=!0,void w(t,e))}),!0}catch(i){return n?!0:(w(t,i),!0)}return!1}function m(t,e){t===e?g(t,e):p(t,e)||g(t,e)}function g(t,e){t._state===P&amp;&amp;(t._state=_,t._detail=e,b.async(y,t))}function w(t,e){t._state===P&amp;&amp;(t._state=_,t._detail=e,b.async(v,t))}function y(t){f(t,t._state=I)}function v(t){f(t,t._state=q)}var b=t.config,x=(t.configure,e.objectOrFunction),k=e.isFunction,A=(e.now,n.cast),C=r.all,E=i.race,S=o.resolve,F=s.reject,T=a.asap;b.async=T;var P=void 0,_=0,I=1,q=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var n=this,r=new this.constructor(function(){});if(this._state){var i=arguments;b.async(function(){h(n._state,r,i[n._state-1],n._detail)})}else d(this,r,t,e);return r},"catch":function(t){return this.then(null,t)}},u.all=C,u.cast=A,u.race=E,u.resolve=S,u.reject=F,c.Promise=u}),n("promise/race",["./utils","exports"],function(t,e){"use strict";function n(t){var e=this;if(!r(t))throw new TypeError("You must pass an array to race.");return new e(function(e,n){for(var r,i=0;i&lt;t.length;i++)r=t[i],r&amp;&amp;"function"==typeof r.then?r.then(e,n):e(r)})}var r=t.isArray;e.race=n}),n("promise/reject",["exports"],function(t){"use strict";function e(t){var e=this;return new e(function(e,n){n(t)})}t.reject=e}),n("promise/resolve",["exports"],function(t){"use strict";function e(t){var e=this;return new e(function(e){e(t)})}t.resolve=e}),n("promise/utils",["exports"],function(t){"use strict";function e(t){return n(t)||"object"==typeof t&amp;&amp;null!==t}function n(t){return"function"==typeof t}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}var i=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=e,t.isFunction=n,t.isArray=r,t.now=i}),r("promise/polyfill").polyfill()}(),"function"!=typeof Object.create||"function"!=typeof e.createElement("canvas").getContext)return void(t.html2canvas=function(){return Promise.reject("No canvas support")});!function(t){function e(t){throw RangeError(R[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function a(t,e){var n=t.split("@"),r="";n.length&gt;1&amp;&amp;(r=n[0]+"@",t=n[1]);var i=t.split(O),o=s(i,e).join(".");return r+o}function c(t){for(var e,n,r=[],i=0,o=t.length;o&gt;i;)e=t.charCodeAt(i++),e&gt;=55296&amp;&amp;56319&gt;=e&amp;&amp;o&gt;i?(n=t.charCodeAt(i++),56320==(64512&amp;n)?r.push(((1023&amp;e)&lt;&lt;10)+(1023&amp;n)+65536):(r.push(e),i--)):r.push(e);return r}function u(t){return s(t,function(t){var e="";return t&gt;65535&amp;&amp;(t-=65536,e+=N(t&gt;&gt;&gt;10&amp;1023|55296),t=56320|1023&amp;t),e+=N(t)}).join("")}function l(t){return 10&gt;t-48?t-22:26&gt;t-65?t-65:26&gt;t-97?t-97:A}function h(t,e){return t+22+75*(26&gt;t)-((0!=e)&lt;&lt;5)}function d(t,e,n){var r=0;for(t=n?D(t/F):t&gt;&gt;1,t+=D(t/e);t&gt;B*E&gt;&gt;1;r+=A)t=D(t/B);return D(r+(B+1)*t/(t+S))}function f(t){var n,r,i,o,s,a,c,h,f,p,m=[],g=t.length,w=0,y=P,v=T;for(r=t.lastIndexOf(_),0&gt;r&amp;&amp;(r=0),i=0;r&gt;i;++i)t.charCodeAt(i)&gt;=128&amp;&amp;e("not-basic"),m.push(t.charCodeAt(i));for(o=r&gt;0?r+1:0;g&gt;o;){for(s=w,a=1,c=A;o&gt;=g&amp;&amp;e("invalid-input"),h=l(t.charCodeAt(o++)),(h&gt;=A||h&gt;D((k-w)/a))&amp;&amp;e("overflow"),w+=h*a,f=v&gt;=c?C:c&gt;=v+E?E:c-v,!(f&gt;h);c+=A)p=A-f,a&gt;D(k/p)&amp;&amp;e("overflow"),a*=p;n=m.length+1,v=d(w-s,n,0==s),D(w/n)&gt;k-y&amp;&amp;e("overflow"),y+=D(w/n),w%=n,m.splice(w++,0,y)}return u(m)}function p(t){var n,r,i,o,s,a,u,l,f,p,m,g,w,y,v,b=[];for(t=c(t),g=t.length,n=P,r=0,s=T,a=0;g&gt;a;++a)m=t[a],128&gt;m&amp;&amp;b.push(N(m));for(i=o=b.length,o&amp;&amp;b.push(_);g&gt;i;){for(u=k,a=0;g&gt;a;++a)m=t[a],m&gt;=n&amp;&amp;u&gt;m&amp;&amp;(u=m);for(w=i+1,u-n&gt;D((k-r)/w)&amp;&amp;e("overflow"),r+=(u-n)*w,n=u,a=0;g&gt;a;++a)if(m=t[a],n&gt;m&amp;&amp;++r&gt;k&amp;&amp;e("overflow"),m==n){for(l=r,f=A;p=s&gt;=f?C:f&gt;=s+E?E:f-s,!(p&gt;l);f+=A)v=l-p,y=A-p,b.push(N(h(p+v%y,0))),l=D(v/y);b.push(N(h(l,0))),s=d(r,w,i==o),r=0,++i}++r,++n}return b.join("")}function m(t){return a(t,function(t){return I.test(t)?f(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return q.test(t)?"xn--"+p(t):t})}var w="object"==typeof r&amp;&amp;r&amp;&amp;!r.nodeType&amp;&amp;r,y="object"==typeof n&amp;&amp;n&amp;&amp;!n.nodeType&amp;&amp;n,v="object"==typeof i&amp;&amp;i;v.global!==v&amp;&amp;v.window!==v&amp;&amp;v.self!==v||(t=v);var b,x,k=2147483647,A=36,C=1,E=26,S=38,F=700,T=72,P=128,_="-",I=/^xn--/,q=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input &gt;= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=A-C,D=Math.floor,N=String.fromCharCode;if(b={version:"1.3.1",ucs2:{decode:c,encode:u},decode:f,encode:p,toASCII:g,toUnicode:m},"function"==typeof o&amp;&amp;"object"==typeof o.amd&amp;&amp;o.amd)o("punycode",function(){return b});else if(w&amp;&amp;y)if(n.exports==w)y.exports=b;else for(x in b)b.hasOwnProperty(x)&amp;&amp;(w[x]=b[x]);else t.punycode=b}(this);var Wt="data-html2canvas-node",Vt="data-html2canvas-canvas-clone",Xt=0;t.html2canvas=function(n,r){if(r=r||{},r.logging&amp;&amp;(t.html2canvas.logging=!0,t.html2canvas.start=Date.now()),r.async="undefined"==typeof r.async?!0:r.async,r.allowTaint="undefined"==typeof r.allowTaint?!1:r.allowTaint,r.removeContainer="undefined"==typeof r.removeContainer?!0:r.removeContainer,r.javascriptEnabled="undefined"==typeof r.javascriptEnabled?!1:r.javascriptEnabled,r.imageTimeout="undefined"==typeof r.imageTimeout?1e4:r.imageTimeout,"string"==typeof n)return"string"!=typeof r.proxy?Promise.reject("Proxy must be used when rendering url"):g(k(n),r.proxy,e,t.innerWidth,t.innerHeight,r).then(function(e){return c(e.contentWindow.document.documentElement,e,r,t.innerWidth,t.innerHeight)});var i=(n===s?[e.documentElement]:n.length?n:[n])[0];return i.setAttribute(Wt,"true"),a(i.ownerDocument,r,i.ownerDocument.defaultView.innerWidth,i.ownerDocument.defaultView.innerHeight).then(function(t){return"function"==typeof r.onrendered&amp;&amp;(I("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),r.onrendered(t)),t})},t.html2canvas.punycode=this.punycode,t.html2canvas.proxy={},E.prototype.getMetrics=function(t,e){return this.data[t+"-"+e]===s&amp;&amp;(this.data[t+"-"+e]=new C(t,e)),this.data[t+"-"+e]},S.prototype.proxyLoad=function(t,e,n){var r=this.src;return g(r.src,t,r.ownerDocument,e.width,e.height,n)},F.prototype.TYPES={LINEAR:1,RADIAL:2},P.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},P.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},P.prototype.addImage=function(t,e){return function(n){n.args.forEach(function(r){this.imageExists(t,r)||(t.splice(0,0,e.call(this,n)),I("Added image #"+t.length,"string"==typeof r?r.substring(0,100):r))},this)}},P.prototype.hasImageBackground=function(t){return"none"!==t.method},P.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new T(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||this.options.allowTaint===!0||this.isSVG(e)?new T(e,!1):this.support.cors&amp;&amp;!this.options.allowTaint&amp;&amp;this.options.useCORS?new T(e,!0):this.options.proxy?new _t(e,this.options.proxy):new A(e):new Bt(e)}return"linear-gradient"===t.method?new _(t):"gradient"===t.method?new Mt(t):"svg"===t.method?new Nt(t.args[0],this.support.svg):"IFRAME"===t.method?new S(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new A(t)},P.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||Bt.prototype.isInline(t)},P.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},P.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},P.prototype.getOrigin=function(t){var n=this.link||(this.link=e.createElement("a"));return n.href=t,n.href=n.href,n.protocol+n.hostname+n.port},P.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout)["catch"](function(){var e=new A(t.src);return e.promise.then(function(e){t.image=e})})},P.prototype.get=function(t){var e=null;return this.images.some(function(n){return(e=n).src===t})?e:null},P.prototype.fetch=function(t){
return this.images=t.reduce(gt(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){I("Succesfully loaded image #"+(e+1),t)},function(n){I("Failed loading image #"+(e+1),t,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),I("Finished searching images"),this},P.prototype.timeout=function(t,e){var n;return Promise.race([t.promise,new Promise(function(r,i){n=setTimeout(function(){I("Timed out loading image",t),i(t)},e)})]).then(function(t){return clearTimeout(n),t})},_.prototype=Object.create(F.prototype),_.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/,q.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},q.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},q.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},q.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&amp;&amp;"hidden"!==this.css("visibility")&amp;&amp;!this.node.hasAttribute("data-html2canvas-ignore")&amp;&amp;("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},q.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},q.prototype.prefixedCss=function(t){var e=["webkit","moz","ms","o"],n=this.css(t);return n===s&amp;&amp;e.some(function(e){return n=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)),n!==s},this),n===s?null:n},q.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},q.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},q.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},q.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},q.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},q.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=D(this.css("backgroundImage")))},q.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return n=n[e||0]||n[0]||"auto",n=n.trim().split(" "),1===n.length&amp;&amp;(n=[n[0],n[0]]),n},q.prototype.parseBackgroundSize=function(t,e,n){var r,i,o=this.cssList("backgroundSize",n);if(B(o[0]))r=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=t.width/t.height,a=e.width/e.height;return a&gt;s^"contain"===o[0]?{width:t.height*a,height:t.height}:{width:t.width,height:t.width/a}}r=parseInt(o[0],10)}return i="auto"===o[0]&amp;&amp;"auto"===o[1]?e.height:"auto"===o[1]?r/e.width*e.height:B(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&amp;&amp;(r=i/e.height*e.width),{width:r,height:i}},q.prototype.parseBackgroundPosition=function(t,e,n,r){var i,o,s=this.cssList("backgroundPosition",n);return i=B(s[0])?(t.width-(r||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?i/e.width*e.height:B(s[1])?(t.height-(r||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&amp;&amp;(i=o/e.height*e.width),{left:i,top:o}},q.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},q.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&amp;&amp;"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),r=0;n&amp;&amp;r&lt;n.length;r++){var i=n[r].match(this.TEXT_SHADOW_VALUES);e.push({color:i[0],offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return e},q.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(N).map(j);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},q.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?R(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e?e:[1,0,0,1,0,0]}return this.transformMatrix},q.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?M(this.node):L(this.node))},q.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&amp;&amp;this.parent.hasTransform()},q.prototype.getValue=function(){var t=this.node.value||"";return t="SELECT"===this.node.tagName?O(this.node):t,0===t.length?this.node.placeholder||"":t},q.prototype.MATRIX_PROPERTY=/(matrix)\((.+)\)/,q.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,q.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,q.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,z.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(ht(t)){dt(t)&amp;&amp;t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&amp;&amp;-1!==["absolute","fixed"].indexOf(t.css("position"))&amp;&amp;e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=U(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,dt(t)&amp;&amp;t.cleanDOM()}else ft(t)&amp;&amp;(t.clip=U(t)?t.parent.clip:[]);dt(t)||(t.bounds=null)},this)},z.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20&gt;Date.now()?this.asyncRenderer(t,e,n):setTimeout(gt(function(){this.asyncRenderer(t,e)},this),0)},z.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+It.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+It.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},z.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},z.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},z.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),r=this.getPseudoElement(t,":after");n&amp;&amp;e.push(n),r&amp;&amp;e.push(r)}return bt(e)},z.prototype.getPseudoElement=function(t,n){var r=t.computedStyle(n);if(!r||!r.content||"none"===r.content||"-moz-alt-content"===r.content||"none"===r.display)return null;for(var i=xt(r.content),o="url"===i.substr(0,3),s=e.createElement(o?"img":"html2canvaspseudoelement"),a=new It(s,t,n),c=r.length-1;c&gt;=0;c--){var u=H(r.item(c));s.style[u]=r[u]}if(s.className=It.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+It.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,o)return s.src=D(i)[0].args[0],[a];var l=e.createTextNode(i);return s.appendChild(l),[a,new jt(l,a)]},z.prototype.getChildren=function(t){return bt([].filter.call(t.node.childNodes,ot).map(function(e){var n=[e.nodeType===Node.TEXT_NODE?new jt(e,t):new q(e,t)].filter(vt);return e.nodeType===Node.ELEMENT_NODE&amp;&amp;n.length&amp;&amp;"TEXTAREA"!==e.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},z.prototype.newStackingContext=function(t,e){var n=new Ot(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n);var r=e?n.getParentStack(this):n.parent.stack;r.contexts.push(n),t.stack=n},z.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){ht(t)&amp;&amp;(this.isRootElement(t)||mt(t)||st(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):ht(t)&amp;&amp;(at(t)&amp;&amp;Z(t)||ut(t)||ct(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},z.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&amp;&amp;this.renderer.isTransparent(t.parent.css("backgroundColor"))},z.prototype.isRootElement=function(t){return null===t.parent},z.prototype.sortStackingContexts=function(t){t.contexts.sort(pt(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},z.prototype.parseTextBounds=function(t){return function(e,n,r){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&amp;&amp;!t.parent.hasTransform()){var i=r.slice(0,n).join("").length;return this.getRangeBounds(t.node,i,e.length)}if(t.node&amp;&amp;"string"==typeof t.node.data){var o=t.node.splitText(e.length),s=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=o,s}}else this.support.rangeBounds&amp;&amp;!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},z.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),r=t.parentNode,i=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),r.replaceChild(n,t);var o=e?M(n):L(n);return r.replaceChild(i,n),o},z.prototype.getRangeBounds=function(t,e,n){var r=this.range||(this.range=t.ownerDocument.createRange());return r.setStart(t,e),r.setEnd(t,e+n),r.getBoundingClientRect()},z.prototype.parse=function(t){var e=t.contexts.filter(K),n=t.children.filter(ht),r=n.filter(lt(ct)),i=r.filter(lt(at)).filter(lt(tt)),o=n.filter(lt(at)).filter(ct),s=r.filter(lt(at)).filter(tt),a=t.contexts.concat(r.filter(at)).filter(Z),c=t.children.filter(ft).filter(nt),u=t.contexts.filter($);e.concat(i).concat(o).concat(s).concat(a).concat(c).concat(u).forEach(function(t){this.renderQueue.push(t),et(t)&amp;&amp;(this.parse(t),this.renderQueue.push(new W))},this)},z.prototype.paint=function(t){try{t instanceof W?this.renderer.ctx.restore():ft(t)?(dt(t.parent)&amp;&amp;t.parent.appendToDOM(),this.paintText(t),dt(t.parent)&amp;&amp;t.parent.cleanDOM()):this.paintNode(t)}catch(e){I(e)}},z.prototype.paintNode=function(t){if(et(t)&amp;&amp;(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&amp;&amp;this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&amp;&amp;"checkbox"===t.node.type)this.paintCheckbox(t);else if("INPUT"===t.node.nodeName&amp;&amp;"radio"===t.node.type)this.paintRadio(t);else{if("always"===t.css("page-break-before")){var e=this.options.canvas.getContext("2d");"function"==typeof e._pageBreakAt&amp;&amp;e._pageBreakAt(t.node.offsetTop)}this.paintElement(t)}if(t.node.getAttribute){var n=t.node.getAttribute("name");if(null===n)var n=t.node.getAttribute("id");if(null!==n){var r=this.options.canvas.annotations;r&amp;&amp;r.setName(n,t.bounds)}}},z.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(yt))},this),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(t.node);n?this.renderer.renderImage(t,e,t.borders,n):I("Error loading &lt;"+t.node.nodeName+"&gt;",t.node);break;case"IMG":var r=this.images.get(t.node.src);r?this.renderer.renderImage(t,e,t.borders,r):I("Error loading &lt;img&gt;",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this)},z.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),r={width:n-1,height:n-1,top:e.top,left:e.left},i=[3,3],o=[i,i,i,i],s=[1,1,1,1].map(function(t){return{color:"#A5A5A5",width:t}}),a=Y(r,o,s);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,"#DEDEDE"),this.renderer.renderBorders(V(s,r,a,o)),t.node.checked&amp;&amp;(this.renderer.font("#424242","normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",r.left+n/6,r.top+n-1))},this)},z.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,"#DEDEDE",1,"#A5A5A5"),t.node.checked&amp;&amp;this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),"#424242")},this)},z.prototype.paintFormValue=function(t){if(t.getValue().length&gt;0){var e=t.node.ownerDocument,n=e.createElement("html2canvaswrapper"),r=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];r.forEach(function(e){try{n.style[e]=t.css(e)}catch(r){I("html2canvas: Parse: Exception caught in renderFormValue: "+r.message)}});var i=t.parseBounds();n.style.position="fixed",n.style.left=i.left+"px",n.style.top=i.top+"px",n.textContent=t.getValue(),e.body.appendChild(n),this.paintText(new jt(n.firstChild,t)),e.body.removeChild(n)}},z.prototype.paintText=function(e){e.applyTextTransform();var n=t.html2canvas.punycode.ucs2.decode(e.node.data),r=this.options.letterRendering&amp;&amp;!rt(e)||Ct(e.node.data)?n.map(function(e){return t.html2canvas.punycode.ucs2.encode([e])}):kt(n),i=e.parent.fontWeight(),o=e.parent.css("fontSize"),a=e.parent.css("fontFamily"),c=e.parent.parseTextShadows();this.renderer.font(e.parent.css("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),i,o,a),c.length?this.renderer.fontShadow(c[0].color,c[0].offsetX,c[0].offsetY,c[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){r.map(this.parseTextBounds(e),this).forEach(function(t,n){t&amp;&amp;(t.left===s&amp;&amp;(t.left=0),t.bottom===s&amp;&amp;(t.bottom=0),this.renderer.text(r[n],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(a,o)),0==n&amp;&amp;"LI"===e.parent.node.nodeName&amp;&amp;this.renderBullet(e,t),0==n&amp;&amp;this.renderAnnotation(e.parent,t))},this)},this)},z.prototype.generateListNumber={listAlpha:function(t){var e,n="";do e=t%26,n=String.fromCharCode(e+64)+n,t/=26;while(26*t&gt;26);return n},listRoman:function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],i="",o=n.length;if(0&gt;=t||t&gt;=4e3)return t;for(e=0;o&gt;e;e+=1)for(;t&gt;=r[e];)t-=r[e],i+=n[e];return i}},z.prototype.listItemText=function(t,e){switch(t){case"decimal-leading-zero":text=1===e.toString().length?e="0"+e.toString():e.toString();break;case"upper-roman":text=this.generateListNumber.listRoman(e);break;case"lower-roman":text=this.generateListNumber.listRoman(e).toLowerCase();break;case"lower-alpha":text=this.generateListNumber.listAlpha(e).toLowerCase();break;case"upper-alpha":text=this.generateListNumber.listAlpha(e);break;case"decimal":default:text=e}return text},z.prototype.renderBullet=function(t,e){var n=t.parent.css("listStyleType");if("none"!==n){var r=e.top+(e.bottom-e.top)/2,i=this.renderer.canvas.getContext("2d"),o=i.measureText("M").width,s=o/4,a=.75*o,c=e.left-a;switch(n){case"decimal":case"decimal-leading-zero":case"upper-alpha":case"lower-alpha":case"upper-roman":case"lower-roman":var u=t.parent,l=u.parent,h=Array.prototype.slice.call(l.node.children),d=h.indexOf(u.node)+1,f=this.listItemText(n,d);f+=".";var p=e.left-a;p-=i.measureText(f).width,i.fillText(f,p,e.bottom);break;case"square":var s=o/3;c-=s,r-=s/2,i.fillRect(c,r,s,s);break;case"circle":var s=o/6;c-=s,i.beginPath(),i.arc(c,r,s,0,2*Math.PI),i.closePath(),i.stroke();break;case"disc":default:var s=o/6;c-=s,i.beginPath(),i.arc(c,r,s,0,2*Math.PI),i.closePath(),i.fill()}}},z.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.css("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.css("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.css("color"))}},z.prototype.renderAnnotation=function(t,e){if("A"===t.node.nodeName){var n=t.node.getAttribute("href");if(n){var r=this.options.canvas.annotations;r&amp;&amp;r.createAnnotation(n,t.bounds)}}},z.prototype.parseBorders=function(t){var e=t.parseBounds(),n=it(t),r=["Top","Right","Bottom","Left"].map(function(e){return{width:t.cssInt("border"+e+"Width"),color:t.css("border"+e+"Color"),args:null}}),i=Y(e,n,r);return{clip:this.parseBackgroundClip(t,i,r,n,e),borders:V(r,e,i,n)}},z.prototype.parseBackgroundClip=function(t,e,n,r,i){var o=t.css("backgroundClip"),s=[];switch(o){case"content-box":case"padding-box":J(s,r[0],r[1],e.topLeftInner,e.topRightInner,i.left+n[3].width,i.top+n[0].width),J(s,r[1],r[2],e.topRightInner,e.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),J(s,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),J(s,r[3],r[0],e.bottomLeftInner,e.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:J(s,r[0],r[1],e.topLeftOuter,e.topRightOuter,i.left,i.top),J(s,r[1],r[2],e.topRightOuter,e.bottomRightOuter,i.left+i.width,i.top),J(s,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,i.left+i.width,i.top+i.height),J(s,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,i.left,i.top+i.height)}return s};var Yt=0,Gt="withCredentials"in new XMLHttpRequest,Qt="crossOrigin"in new Image;It.prototype.cloneTo=function(t){It.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},It.prototype=Object.create(q.prototype),It.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},It.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},It.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},It.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",It.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",qt.prototype.renderImage=function(t,e,n,r){var i=t.cssInt("paddingLeft"),o=t.cssInt("paddingTop"),s=t.cssInt("paddingRight"),a=t.cssInt("paddingBottom"),c=n.borders,u=e.width-(c[1].width+c[3].width+i+s),l=e.height-(c[0].width+c[2].width+o+a);this.drawImage(r,0,0,r.image.width||u,r.image.height||l,e.left+i+c[3].width,e.top+o+c[0].width,u,l)},qt.prototype.renderBackground=function(t,e,n){e.height&gt;0&amp;&amp;e.width&gt;0&amp;&amp;(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},qt.prototype.renderBackgroundColor=function(t,e){var n=t.css("backgroundColor");this.isTransparent(n)||this.rectangle(e.left,e.top,e.width,e.height,t.css("backgroundColor"))},qt.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},qt.prototype.renderBorder=function(t){this.isTransparent(t.color)||null===t.args||this.drawShape(t.args,t.color)},qt.prototype.renderBackgroundImage=function(t,e,n){var r=t.parseBackgroundImages();r.reverse().forEach(function(r,i,o){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(t,e,s,o.length-(i+1),n):I("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var a=this.images.get(r.value);a?this.renderBackgroundGradient(a,e,n):I("Error loading background-image",r.args[0]);break;case"none":break;default:I("Unknown background-image type",r.args[0])}},this)},qt.prototype.renderBackgroundRepeating=function(t,e,n,r,i){var o=t.parseBackgroundSize(e,n.image,r),s=t.parseBackgroundPosition(e,n.image,r,o),a=t.parseBackgroundRepeat(r);switch(a){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,s,o,e,e.left+i[3],e.top+s.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,s,o,e,e.left+s.left+i[3],e.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(n,s,o,e,e.left+s.left+i[3],e.top+s.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(n,s,o,{top:e.top,left:e.left},i[3],i[0])}},qt.prototype.isTransparent=function(t){return!t||"transparent"===t||"rgba(0, 0, 0, 0)"===t},Ot.prototype=Object.create(q.prototype),Ot.prototype.getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},Rt.prototype.testRangeBounds=function(t){var e,n,r,i,o=!1;return t.createRange&amp;&amp;(e=t.createRange(),e.getBoundingClientRect&amp;&amp;(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),r=e.getBoundingClientRect(),i=r.height,123===i&amp;&amp;(o=!0),t.body.removeChild(n))),o},Rt.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},Rt.prototype.testSVG=function(){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");t.src="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg'&gt;&lt;/svg&gt;";try{r.drawImage(t,0,0),n.toDataURL()}catch(i){return!1}return!0},Bt.prototype.hasFabric=function(){return html2canvas.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},Bt.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},Bt.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},Bt.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},Bt.prototype.createCanvas=function(t){var e=this;return function(n,r){var i=new html2canvas.fabric.StaticCanvas("c");e.image=i.lowerCanvasEl,i.setWidth(r.width).setHeight(r.height).add(html2canvas.fabric.util.groupSVGElements(n,r)).renderAll(),t(i.lowerCanvasEl)}},Bt.prototype.decode64=function(e){return"function"==typeof t.atob?t.atob(e):Dt(e)},Nt.prototype=Object.create(Bt.prototype),jt.prototype=Object.create(q.prototype),jt.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},jt.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,Lt);case"uppercase":return e.toUpperCase();default:return e}},Mt.prototype=Object.create(F.prototype),Ut.prototype=Object.create(qt.prototype),Ut.prototype.setFillStyle=function(t){return this.ctx.fillStyle=t,this.ctx},Ut.prototype.rectangle=function(t,e,n,r,i){this.setFillStyle(i).fillRect(t,e,n,r)},Ut.prototype.circle=function(t,e,n,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},Ut.prototype.circleStroke=function(t,e,n,r,i,o){this.circle(t,e,n,r),this.ctx.strokeStyle=o,this.ctx.stroke()},Ut.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},Ut.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(n){this.taintCtx=e.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},Ut.prototype.drawImage=function(t,e,n,r,i,o,s,a,c){this.taints(t)&amp;&amp;!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,r,i,o,s,a,c)},Ut.prototype.clip=function(t,e,n){this.ctx.save(),t.filter(Ht).forEach(function(t){this.shape(t).clip()},this),e.call(n),this.ctx.restore()},Ut.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},Ut.prototype.font=function(t,e,n,r,i,o){this.setFillStyle(t).font=[e,n,r,i,o].join(" ").split(",")[0]},Ut.prototype.fontShadow=function(t,e,n,r){this.setVariable("shadowColor",t).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",r)},Ut.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},Ut.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},Ut.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},Ut.prototype.setVariable=function(t,e){return this.variables[t]!==e&amp;&amp;(this.variables[t]=this.ctx[t]=e),this},Ut.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},Ut.prototype.backgroundRepeatShape=function(t,e,n,r,i,o,s,a,c){var u=[["line",Math.round(i),Math.round(o)],["line",Math.round(i+s),Math.round(o)],["line",Math.round(i+s),Math.round(a+o)],["line",Math.round(i),Math.round(a+o)]];this.clip([u],function(){this.renderBackgroundRepeat(t,e,n,r,c[3],c[0])},this)},Ut.prototype.renderBackgroundRepeat=function(t,e,n,r,i,o){var s=Math.round(r.left+e.left+i),a=Math.round(r.top+e.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},Ut.prototype.renderBackgroundGradient=function(t,e){if(t instanceof _){var n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color)}),this.rectangle(e.left,e.top,e.width,e.height,n)}},Ut.prototype.resizeImage=function(t,n){var r=t.image;if(r.width===n.width&amp;&amp;r.height===n.height)return r;var i,o=e.createElement("canvas");return o.width=n.width,o.height=n.height,i=o.getContext("2d"),i.drawImage(r,0,0,r.width,r.height,0,0,n.width,n.height),o}}).call({},window,document);var html2canvasNodeAttribute="data-html2canvas-node",html2canvasCanvasCloneAttribute="data-html2canvas-canvas-clone",html2canvasCanvasCloneIndex=0;window.html2canvas=function(t,e){if(e=e||{},e.logging&amp;&amp;(window.html2canvas.logging=!0,window.html2canvas.start=Date.now()),e.async="undefined"==typeof e.async?!0:e.async,e.allowTaint="undefined"==typeof e.allowTaint?!1:e.allowTaint,e.removeContainer="undefined"==typeof e.removeContainer?!0:e.removeContainer,e.javascriptEnabled="undefined"==typeof e.javascriptEnabled?!1:e.javascriptEnabled,e.imageTimeout="undefined"==typeof e.imageTimeout?1e4:e.imageTimeout,"string"==typeof t)return"string"!=typeof e.proxy?Promise.reject("Proxy must be used when rendering url"):loadUrlDocument(absoluteUrl(t),e.proxy,document,window.innerWidth,window.innerHeight,e).then(function(t){return renderWindow(t.contentWindow.document.documentElement,t,e,window.innerWidth,window.innerHeight)});var n=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return n.setAttribute(html2canvasNodeAttribute,"true"),renderDocument(n.ownerDocument,e,n.ownerDocument.defaultView.innerWidth,n.ownerDocument.defaultView.innerHeight).then(function(t){return"function"==typeof e.onrendered&amp;&amp;(log("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})},window.html2canvas.punycode=this.punycode,window.html2canvas.proxy={},"function"==typeof Object.create&amp;&amp;"function"==typeof document.createElement("canvas").getContext||(window.html2canvas=function(){return Promise.reject("No canvas support")}),FontMetrics.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&amp;&amp;(this.data[t+"-"+e]=new Font(t,e)),this.data[t+"-"+e]},FrameContainer.prototype.proxyLoad=function(t,e,n){var r=this.src;return loadUrlDocument(r.src,t,r.ownerDocument,e.width,e.height,n)},GradientContainer.prototype.TYPES={LINEAR:1,RADIAL:2},ImageLoader.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},ImageLoader.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},ImageLoader.prototype.addImage=function(t,e){return function(n){n.args.forEach(function(r){this.imageExists(t,r)||(t.splice(0,0,e.call(this,n)),log("Added image #"+t.length,"string"==typeof r?r.substring(0,100):r))},this)}},ImageLoader.prototype.hasImageBackground=function(t){return"none"!==t.method},ImageLoader.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new ImageContainer(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||this.options.allowTaint===!0||this.isSVG(e)?new ImageContainer(e,!1):this.support.cors&amp;&amp;!this.options.allowTaint&amp;&amp;this.options.useCORS?new ImageContainer(e,!0):this.options.proxy?new ProxyImageContainer(e,this.options.proxy):new DummyImageContainer(e):new SVGContainer(e)}return"linear-gradient"===t.method?new LinearGradientContainer(t):"gradient"===t.method?new WebkitGradientContainer(t):"svg"===t.method?new SVGNodeContainer(t.args[0],this.support.svg):"IFRAME"===t.method?new FrameContainer(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new DummyImageContainer(t)},ImageLoader.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||SVGContainer.prototype.isInline(t)},ImageLoader.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},ImageLoader.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},ImageLoader.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},ImageLoader.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout)["catch"](function(){var e=new DummyImageContainer(t.src);return e.promise.then(function(e){t.image=e})})},ImageLoader.prototype.get=function(t){var e=null;return this.images.some(function(n){return(e=n).src===t})?e:null},ImageLoader.prototype.fetch=function(t){return this.images=t.reduce(bind(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){log("Succesfully loaded image #"+(e+1),t)},function(n){log("Failed loading image #"+(e+1),t,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),log("Finished searching images"),this},ImageLoader.prototype.timeout=function(t,e){var n;return Promise.race([t.promise,new Promise(function(r,i){n=setTimeout(function(){log("Timed out loading image",t),i(t)},e)})]).then(function(t){return clearTimeout(n),t})},LinearGradientContainer.prototype=Object.create(GradientContainer.prototype),LinearGradientContainer.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/,NodeContainer.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},NodeContainer.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},NodeContainer.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},NodeContainer.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&amp;&amp;"hidden"!==this.css("visibility")&amp;&amp;!this.node.hasAttribute("data-html2canvas-ignore")&amp;&amp;("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},NodeContainer.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),
this.styles[t]||(this.styles[t]=this.computedStyles[t])},NodeContainer.prototype.prefixedCss=function(t){var e=["webkit","moz","ms","o"],n=this.css(t);return void 0===n&amp;&amp;e.some(function(e){return n=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)),void 0!==n},this),void 0===n?null:n},NodeContainer.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},NodeContainer.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},NodeContainer.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},NodeContainer.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},NodeContainer.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},NodeContainer.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=parseBackgrounds(this.css("backgroundImage")))},NodeContainer.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return n=n[e||0]||n[0]||"auto",n=n.trim().split(" "),1===n.length&amp;&amp;(n=[n[0],n[0]]),n},NodeContainer.prototype.parseBackgroundSize=function(t,e,n){var r,i,o=this.cssList("backgroundSize",n);if(isPercentage(o[0]))r=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=t.width/t.height,a=e.width/e.height;return a&gt;s^"contain"===o[0]?{width:t.height*a,height:t.height}:{width:t.width,height:t.width/a}}r=parseInt(o[0],10)}return i="auto"===o[0]&amp;&amp;"auto"===o[1]?e.height:"auto"===o[1]?r/e.width*e.height:isPercentage(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&amp;&amp;(r=i/e.height*e.width),{width:r,height:i}},NodeContainer.prototype.parseBackgroundPosition=function(t,e,n,r){var i,o,s=this.cssList("backgroundPosition",n);return i=isPercentage(s[0])?(t.width-(r||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?i/e.width*e.height:isPercentage(s[1])?(t.height-(r||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&amp;&amp;(i=o/e.height*e.width),{left:i,top:o}},NodeContainer.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},NodeContainer.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&amp;&amp;"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),r=0;n&amp;&amp;r&lt;n.length;r++){var i=n[r].match(this.TEXT_SHADOW_VALUES);e.push({color:i[0],offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return e},NodeContainer.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(removePx).map(asFloat);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},NodeContainer.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?parseMatrix(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e?e:[1,0,0,1,0,0]}return this.transformMatrix},NodeContainer.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?offsetBounds(this.node):getBounds(this.node))},NodeContainer.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&amp;&amp;this.parent.hasTransform()},NodeContainer.prototype.getValue=function(){var t=this.node.value||"";return t="SELECT"===this.node.tagName?selectionValue(this.node):t,0===t.length?this.node.placeholder||"":t},NodeContainer.prototype.MATRIX_PROPERTY=/(matrix)\((.+)\)/,NodeContainer.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,NodeContainer.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,NodeContainer.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,NodeParser.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(isElement(t)){isPseudoElement(t)&amp;&amp;t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&amp;&amp;-1!==["absolute","fixed"].indexOf(t.css("position"))&amp;&amp;e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=hasParentClip(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,isPseudoElement(t)&amp;&amp;t.cleanDOM()}else isTextNode(t)&amp;&amp;(t.clip=hasParentClip(t)?t.parent.clip:[]);isPseudoElement(t)||(t.bounds=null)},this)},NodeParser.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20&gt;Date.now()?this.asyncRenderer(t,e,n):setTimeout(bind(function(){this.asyncRenderer(t,e)},this),0)},NodeParser.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},NodeParser.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},NodeParser.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},NodeParser.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),r=this.getPseudoElement(t,":after");n&amp;&amp;e.push(n),r&amp;&amp;e.push(r)}return flatten(e)},NodeParser.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var r=stripQuotes(n.content),i="url"===r.substr(0,3),o=document.createElement(i?"img":"html2canvaspseudoelement"),s=new PseudoElementContainer(o,t,e),a=n.length-1;a&gt;=0;a--){var c=toCamelCase(n.item(a));o.style[c]=n[c]}if(o.className=PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,i)return o.src=parseBackgrounds(r)[0].args[0],[s];var u=document.createTextNode(r);return o.appendChild(u),[s,new TextContainer(u,s)]},NodeParser.prototype.getChildren=function(t){return flatten([].filter.call(t.node.childNodes,renderableNode).map(function(e){var n=[e.nodeType===Node.TEXT_NODE?new TextContainer(e,t):new NodeContainer(e,t)].filter(nonIgnoredElement);return e.nodeType===Node.ELEMENT_NODE&amp;&amp;n.length&amp;&amp;"TEXTAREA"!==e.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},NodeParser.prototype.newStackingContext=function(t,e){var n=new StackingContext(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n);var r=e?n.getParentStack(this):n.parent.stack;r.contexts.push(n),t.stack=n},NodeParser.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){isElement(t)&amp;&amp;(this.isRootElement(t)||hasOpacity(t)||isPositionedForStacking(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):isElement(t)&amp;&amp;(isPositioned(t)&amp;&amp;zIndex0(t)||isInlineBlock(t)||isFloating(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},NodeParser.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&amp;&amp;this.renderer.isTransparent(t.parent.css("backgroundColor"))},NodeParser.prototype.isRootElement=function(t){return null===t.parent},NodeParser.prototype.sortStackingContexts=function(t){t.contexts.sort(zIndexSort(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},NodeParser.prototype.parseTextBounds=function(t){return function(e,n,r){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&amp;&amp;!t.parent.hasTransform()){var i=r.slice(0,n).join("").length;return this.getRangeBounds(t.node,i,e.length)}if(t.node&amp;&amp;"string"==typeof t.node.data){var o=t.node.splitText(e.length),s=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=o,s}}else this.support.rangeBounds&amp;&amp;!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},NodeParser.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),r=t.parentNode,i=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),r.replaceChild(n,t);var o=e?offsetBounds(n):getBounds(n);return r.replaceChild(i,n),o},NodeParser.prototype.getRangeBounds=function(t,e,n){var r=this.range||(this.range=t.ownerDocument.createRange());return r.setStart(t,e),r.setEnd(t,e+n),r.getBoundingClientRect()},NodeParser.prototype.parse=function(t){var e=t.contexts.filter(negativeZIndex),n=t.children.filter(isElement),r=n.filter(not(isFloating)),i=r.filter(not(isPositioned)).filter(not(inlineLevel)),o=n.filter(not(isPositioned)).filter(isFloating),s=r.filter(not(isPositioned)).filter(inlineLevel),a=t.contexts.concat(r.filter(isPositioned)).filter(zIndex0),c=t.children.filter(isTextNode).filter(hasText),u=t.contexts.filter(positiveZIndex);e.concat(i).concat(o).concat(s).concat(a).concat(c).concat(u).forEach(function(t){this.renderQueue.push(t),isStackingContext(t)&amp;&amp;(this.parse(t),this.renderQueue.push(new ClearTransform))},this)},NodeParser.prototype.paint=function(t){try{t instanceof ClearTransform?this.renderer.ctx.restore():isTextNode(t)?(isPseudoElement(t.parent)&amp;&amp;t.parent.appendToDOM(),this.paintText(t),isPseudoElement(t.parent)&amp;&amp;t.parent.cleanDOM()):this.paintNode(t)}catch(e){log(e)}},NodeParser.prototype.paintNode=function(t){isStackingContext(t)&amp;&amp;(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&amp;&amp;this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&amp;&amp;"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&amp;&amp;"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},NodeParser.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(getWidth))},this),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(t.node);n?this.renderer.renderImage(t,e,t.borders,n):log("Error loading &lt;"+t.node.nodeName+"&gt;",t.node);break;case"IMG":var r=this.images.get(t.node.src);r?this.renderer.renderImage(t,e,t.borders,r):log("Error loading &lt;img&gt;",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this)},NodeParser.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),r={width:n-1,height:n-1,top:e.top,left:e.left},i=[3,3],o=[i,i,i,i],s=[1,1,1,1].map(function(t){return{color:"#A5A5A5",width:t}}),a=calculateCurvePoints(r,o,s);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,"#DEDEDE"),this.renderer.renderBorders(calculateBorders(s,r,a,o)),t.node.checked&amp;&amp;(this.renderer.font("#424242","normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",r.left+n/6,r.top+n-1))},this)},NodeParser.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,"#DEDEDE",1,"#A5A5A5"),t.node.checked&amp;&amp;this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),"#424242")},this)},NodeParser.prototype.paintFormValue=function(t){if(t.getValue().length&gt;0){var e=t.node.ownerDocument,n=e.createElement("html2canvaswrapper"),r=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap","list-style-type"];r.forEach(function(e){try{n.style[e]=t.css(e)}catch(r){log("html2canvas: Parse: Exception caught in renderFormValue: "+r.message)}});var i=t.parseBounds();n.style.position="fixed",n.style.left=i.left+"px",n.style.top=i.top+"px",n.textContent=t.getValue(),e.body.appendChild(n),this.paintText(new TextContainer(n.firstChild,t)),e.body.removeChild(n)}},NodeParser.prototype.paintText=function(t){t.applyTextTransform();var e=window.html2canvas.punycode.ucs2.decode(t.node.data),n=this.options.letterRendering&amp;&amp;!noLetterSpacing(t)||hasUnicode(t.node.data)?e.map(function(t){return window.html2canvas.punycode.ucs2.encode([t])}):getWords(e),r=t.parent.fontWeight(),i=t.parent.css("fontSize"),o=t.parent.css("fontFamily"),s=t.parent.parseTextShadows();this.renderer.font(t.parent.css("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),r,i,o),s.length?this.renderer.fontShadow(s[0].color,s[0].offsetX,s[0].offsetY,s[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,function(){n.map(this.parseTextBounds(t),this).forEach(function(e,r){e&amp;&amp;(this.renderer.text(n[r],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(o,i)))},this)},this)},NodeParser.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.css("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.css("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.css("color"))}},NodeParser.prototype.parseBorders=function(t){var e=t.parseBounds(),n=getBorderRadiusData(t),r=["Top","Right","Bottom","Left"].map(function(e){return{width:t.cssInt("border"+e+"Width"),color:t.css("border"+e+"Color"),args:null}}),i=calculateCurvePoints(e,n,r);return{clip:this.parseBackgroundClip(t,i,r,n,e),borders:calculateBorders(r,e,i,n)}},NodeParser.prototype.parseBackgroundClip=function(t,e,n,r,i){var o=t.css("backgroundClip"),s=[];switch(o){case"content-box":case"padding-box":parseCorner(s,r[0],r[1],e.topLeftInner,e.topRightInner,i.left+n[3].width,i.top+n[0].width),parseCorner(s,r[1],r[2],e.topRightInner,e.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),parseCorner(s,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),parseCorner(s,r[3],r[0],e.bottomLeftInner,e.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:parseCorner(s,r[0],r[1],e.topLeftOuter,e.topRightOuter,i.left,i.top),parseCorner(s,r[1],r[2],e.topRightOuter,e.bottomRightOuter,i.left+i.width,i.top),parseCorner(s,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,i.left+i.width,i.top+i.height),parseCorner(s,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,i.left,i.top+i.height)}return s},!function(){var t,e,n,r;!function(){var i={},o={};t=function(t,e,n){i[t]={deps:e,callback:n}},r=n=e=function(t){function n(e){if("."!==e.charAt(0))return e;for(var n=e.split("/"),r=t.split("/").slice(0,-1),i=0,o=n.length;o&gt;i;i++){var s=n[i];if(".."===s)r.pop();else{if("."===s)continue;r.push(s)}}return r.join("/")}if(r._eak_seen=i,o[t])return o[t];if(o[t]={},!i[t])throw new Error("Could not find module "+t);for(var s,a=i[t],c=a.deps,u=a.callback,l=[],h=0,d=c.length;d&gt;h;h++)"exports"===c[h]?l.push(s={}):l.push(e(n(c[h])));var f=u.apply(this,l);return o[t]=s||f}}(),t("promise/all",["./utils","exports"],function(t,e){"use strict";function n(t){var e=this;if(!r(t))throw new TypeError("You must pass an array to all.");return new e(function(e,n){function r(t){return function(e){o(t,e)}}function o(t,n){a[t]=n,0===--c&amp;&amp;e(a)}var s,a=[],c=t.length;0===c&amp;&amp;e([]);for(var u=0;u&lt;t.length;u++)s=t[u],s&amp;&amp;i(s.then)?s.then(r(u),n):o(u,s)})}var r=t.isArray,i=t.isFunction;e.all=n}),t("promise/asap",["exports"],function(t){"use strict";function e(){return function(){process.nextTick(i)}}function n(){var t=0,e=new c(i),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function r(){return function(){u.setTimeout(i,1)}}function i(){for(var t=0;t&lt;l.length;t++){var e=l[t],n=e[0],r=e[1];n(r)}l=[]}function o(t,e){var n=l.push([t,e]);1===n&amp;&amp;s()}var s,a="undefined"!=typeof window?window:{},c=a.MutationObserver||a.WebKitMutationObserver,u="undefined"!=typeof global?global:this,l=[];s="undefined"!=typeof process&amp;&amp;"[object process]"==={}.toString.call(process)?e():c?n():r(),t.asap=o}),t("promise/cast",["exports"],function(t){"use strict";function e(t){if(t&amp;&amp;"object"==typeof t&amp;&amp;t.constructor===this)return t;var e=this;return new e(function(e){e(t)})}t.cast=e}),t("promise/config",["exports"],function(t){"use strict";function e(t,e){return 2!==arguments.length?n[t]:void(n[t]=e)}var n={instrument:!1};t.config=n,t.configure=e}),t("promise/polyfill",["./promise","./utils","exports"],function(t,e,n){"use strict";function r(){var t="Promise"in window&amp;&amp;"cast"in window.Promise&amp;&amp;"resolve"in window.Promise&amp;&amp;"reject"in window.Promise&amp;&amp;"all"in window.Promise&amp;&amp;"race"in window.Promise&amp;&amp;function(){var t;return new window.Promise(function(e){t=e}),o(t)}();t||(window.Promise=i)}var i=t.Promise,o=e.isFunction;n.polyfill=r}),t("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(t,e,n,r,i,o,s,a,c){"use strict";function u(t){if(!k(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],l(t,this)}function l(t,e){function n(t){m(e,t)}function r(t){w(e,t)}try{t(n,r)}catch(i){r(i)}}function h(t,e,n,r){var i,o,s,a,c=k(n);if(c)try{i=n(r),s=!0}catch(u){a=!0,o=u}else i=r,s=!0;p(e,i)||(c&amp;&amp;s?m(e,i):a?w(e,o):t===I?m(e,i):t===q&amp;&amp;w(e,i))}function d(t,e,n,r){var i=t._subscribers,o=i.length;i[o]=e,i[o+I]=n,i[o+q]=r}function f(t,e){for(var n,r,i=t._subscribers,o=t._detail,s=0;s&lt;i.length;s+=3)n=i[s],r=i[s+e],h(e,n,r,o);t._subscribers=null}function p(t,e){var n,r=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(x(e)&amp;&amp;(r=e.then,k(r)))return r.call(e,function(r){return n?!0:(n=!0,void(e!==r?m(t,r):g(t,r)))},function(e){return n?!0:(n=!0,void w(t,e))}),!0}catch(i){return n?!0:(w(t,i),!0)}return!1}function m(t,e){t===e?g(t,e):p(t,e)||g(t,e)}function g(t,e){t._state===P&amp;&amp;(t._state=_,t._detail=e,b.async(y,t))}function w(t,e){t._state===P&amp;&amp;(t._state=_,t._detail=e,b.async(v,t))}function y(t){f(t,t._state=I)}function v(t){f(t,t._state=q)}var b=t.config,x=(t.configure,e.objectOrFunction),k=e.isFunction,A=(e.now,n.cast),C=r.all,E=i.race,S=o.resolve,F=s.reject,T=a.asap;b.async=T;var P=void 0,_=0,I=1,q=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var n=this,r=new this.constructor(function(){});if(this._state){var i=arguments;b.async(function(){h(n._state,r,i[n._state-1],n._detail)})}else d(this,r,t,e);return r},"catch":function(t){return this.then(null,t)}},u.all=C,u.cast=A,u.race=E,u.resolve=S,u.reject=F,c.Promise=u}),t("promise/race",["./utils","exports"],function(t,e){"use strict";function n(t){var e=this;if(!r(t))throw new TypeError("You must pass an array to race.");return new e(function(e,n){for(var r,i=0;i&lt;t.length;i++)r=t[i],r&amp;&amp;"function"==typeof r.then?r.then(e,n):e(r)})}var r=t.isArray;e.race=n}),t("promise/reject",["exports"],function(t){"use strict";function e(t){var e=this;return new e(function(e,n){n(t)})}t.reject=e}),t("promise/resolve",["exports"],function(t){"use strict";function e(t){var e=this;return new e(function(e){e(t)})}t.resolve=e}),t("promise/utils",["exports"],function(t){"use strict";function e(t){return n(t)||"object"==typeof t&amp;&amp;null!==t}function n(t){return"function"==typeof t}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}var i=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=e,t.isFunction=n,t.isArray=r,t.now=i}),e("promise/polyfill").polyfill()}();var proxyCount=0,supportsCORS="withCredentials"in new XMLHttpRequest,supportsCORSImage="crossOrigin"in new Image;PseudoElementContainer.prototype.cloneTo=function(t){PseudoElementContainer.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},PseudoElementContainer.prototype=Object.create(NodeContainer.prototype),PseudoElementContainer.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},PseudoElementContainer.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},PseudoElementContainer.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",Renderer.prototype.renderImage=function(t,e,n,r){var i=t.cssInt("paddingLeft"),o=t.cssInt("paddingTop"),s=t.cssInt("paddingRight"),a=t.cssInt("paddingBottom"),c=n.borders,u=e.width-(c[1].width+c[3].width+i+s),l=e.height-(c[0].width+c[2].width+o+a);this.drawImage(r,0,0,r.image.width||u,r.image.height||l,e.left+i+c[3].width,e.top+o+c[0].width,u,l)},Renderer.prototype.renderBackground=function(t,e,n){e.height&gt;0&amp;&amp;e.width&gt;0&amp;&amp;(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},Renderer.prototype.renderBackgroundColor=function(t,e){var n=t.css("backgroundColor");this.isTransparent(n)||this.rectangle(e.left,e.top,e.width,e.height,t.css("backgroundColor"))},Renderer.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},Renderer.prototype.renderBorder=function(t){this.isTransparent(t.color)||null===t.args||this.drawShape(t.args,t.color)},Renderer.prototype.renderBackgroundImage=function(t,e,n){var r=t.parseBackgroundImages();r.reverse().forEach(function(r,i,o){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(t,e,s,o.length-(i+1),n):log("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var a=this.images.get(r.value);a?this.renderBackgroundGradient(a,e,n):log("Error loading background-image",r.args[0]);break;case"none":break;default:log("Unknown background-image type",r.args[0])}},this)},Renderer.prototype.renderBackgroundRepeating=function(t,e,n,r,i){var o=t.parseBackgroundSize(e,n.image,r),s=t.parseBackgroundPosition(e,n.image,r,o),a=t.parseBackgroundRepeat(r);switch(a){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,s,o,e,e.left+i[3],e.top+s.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,s,o,e,e.left+s.left+i[3],e.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(n,s,o,e,e.left+s.left+i[3],e.top+s.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(n,s,o,{top:e.top,left:e.left},i[3],i[0])}},Renderer.prototype.isTransparent=function(t){return!t||"transparent"===t||"rgba(0, 0, 0, 0)"===t},StackingContext.prototype=Object.create(NodeContainer.prototype),StackingContext.prototype.getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},Support.prototype.testRangeBounds=function(t){var e,n,r,i,o=!1;return t.createRange&amp;&amp;(e=t.createRange(),e.getBoundingClientRect&amp;&amp;(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),r=e.getBoundingClientRect(),i=r.height,123===i&amp;&amp;(o=!0),t.body.removeChild(n))),o},Support.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},Support.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg'&gt;&lt;/svg&gt;";try{n.drawImage(t,0,0),e.toDataURL()}catch(r){return!1}return!0},SVGContainer.prototype.hasFabric=function(){return html2canvas.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},SVGContainer.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},SVGContainer.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},SVGContainer.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},SVGContainer.prototype.createCanvas=function(t){var e=this;return function(n,r){var i=new html2canvas.fabric.StaticCanvas("c");e.image=i.lowerCanvasEl,i.setWidth(r.width).setHeight(r.height).add(html2canvas.fabric.util.groupSVGElements(n,r)).renderAll(),t(i.lowerCanvasEl)}},SVGContainer.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):decode64(t)},SVGNodeContainer.prototype=Object.create(SVGContainer.prototype),TextContainer.prototype=Object.create(NodeContainer.prototype),TextContainer.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},TextContainer.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,capitalize);case"uppercase":return e.toUpperCase();default:return e}},WebkitGradientContainer.prototype=Object.create(GradientContainer.prototype),function(t){var e;e=function(){function e(t){var e,n,r,i,o,s,a,c,u,l,h,d,f,p,m;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(e=this.readUInt32(),l=function(){var t,e;for(e=[],a=t=0;4&gt;t;a=++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":s&amp;&amp;this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,s.delay=1e3*o/i,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&amp;&amp;(this.pos+=4,e-=4),t=(null!=s?s.data:void 0)||this.imgData,a=f=0;e&gt;=0?e&gt;f:f&gt;e;a=e&gt;=0?++f:--f)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length&gt;r)throw new Error("More transparent colors than palette size");if(h=r-this.transparency.indexed.length,h&gt;0)for(a=p=0;h&gt;=0?h&gt;p:p&gt;h;a=h&gt;=0?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":d=this.read(e),c=d.indexOf(0),u=String.fromCharCode.apply(String,d.slice(0,c)),this.text[u]=String.fromCharCode.apply(String,d.slice(c+1));break;case"IEND":return s&amp;&amp;this.animation.frames.push(s),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(m=this.colorType)||6===m,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos&gt;this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var n,r,i,o,s,a,c,u;e.load=function(t,n,r){var i;return"function"==typeof n&amp;&amp;(r=n),i=new XMLHttpRequest,i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t,o;return t=new Uint8Array(i.response||i.mozResponseArrayBuffer),o=new e(t),"function"==typeof(null!=n?n.getContext:void 0)&amp;&amp;o.render(n),"function"==typeof r?r(o):void 0},i.send(null)},o=0,i=1,s=2,r=0,n=1,e.prototype.read=function(t){var e,n,r;for(r=[],e=n=0;t&gt;=0?t&gt;n:n&gt;t;e=t&gt;=0?++n:--n)r.push(this.data[this.pos++]);return r},e.prototype.readUInt32=function(){var t,e,n,r;return t=this.data[this.pos++]&lt;&lt;24,e=this.data[this.pos++]&lt;&lt;16,n=this.data[this.pos++]&lt;&lt;8,r=this.data[this.pos++],t|e|n|r},e.prototype.readUInt16=function(){var t,e;return t=this.data[this.pos++]&lt;&lt;8,e=this.data[this.pos++],t|e},e.prototype.decodePixels=function(t){var e,n,r,i,o,s,a,c,u,l,h,d,f,p,m,g,w,y,v,b,x,k,A;if(null==t&amp;&amp;(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=new FlateStream(t),t=t.getBytes(),d=this.pixelBitlength/8,g=d*this.width,f=new Uint8Array(g*this.height),s=t.length,m=0,p=0,n=0;s&gt;p;){switch(t[p++]){case 0:for(i=v=0;g&gt;v;i=v+=1)f[n++]=t[p++];break;case 1:for(i=b=0;g&gt;b;i=b+=1)e=t[p++],o=d&gt;i?0:f[n-d],f[n++]=(e+o)%256;break;case 2:for(i=x=0;g&gt;x;i=x+=1)e=t[p++],r=(i-i%d)/d,w=m&amp;&amp;f[(m-1)*g+r*d+i%d],f[n++]=(w+e)%256;break;case 3:for(i=k=0;g&gt;k;i=k+=1)e=t[p++],r=(i-i%d)/d,o=d&gt;i?0:f[n-d],w=m&amp;&amp;f[(m-1)*g+r*d+i%d],f[n++]=(e+Math.floor((o+w)/2))%256;break;case 4:for(i=A=0;g&gt;A;i=A+=1)e=t[p++],r=(i-i%d)/d,o=d&gt;i?0:f[n-d],0===m?w=y=0:(w=f[(m-1)*g+r*d+i%d],y=r&amp;&amp;f[(m-1)*g+(r-1)*d+i%d]),a=o+w-y,c=Math.abs(a-o),l=Math.abs(a-w),h=Math.abs(a-y),u=l&gt;=c&amp;&amp;h&gt;=c?o:h&gt;=l?w:y,f[n++]=(e+u)%256;break;default:throw new Error("Invalid filter algorithm: "+t[p-1])}m++}return f},e.prototype.decodePalette=function(){var t,e,n,r,i,o,s,a,c,u;for(r=this.palette,s=this.transparency.indexed||[],o=new Uint8Array((s.length||0)+r.length),i=0,n=r.length,t=0,e=a=0,c=r.length;c&gt;a;e=a+=3)o[i++]=r[e],o[i++]=r[e+1],o[i++]=r[e+2],o[i++]=null!=(u=s[t++])?u:255;return o},e.prototype.copyToImageData=function(t,e){var n,r,i,o,s,a,c,u,l,h,d;if(r=this.colors,l=null,n=this.hasAlphaChannel,this.palette.length&amp;&amp;(l=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,n=!0),i=t.data||t,u=i.length,s=l||e,o=a=0,1===r)for(;u&gt;o;)c=l?4*e[o/4]:a,h=s[c++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=n?s[c++]:255,a=c;else for(;u&gt;o;)c=l?4*e[o/4]:a,i[o++]=s[c++],i[o++]=s[c++],i[o++]=s[c++],i[o++]=n?s[c++]:255,a=c},e.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};try{c=t.document.createElement("canvas"),u=c.getContext("2d")}catch(l){return-1}return a=function(t){var e;return u.width=t.width,u.height=t.height,u.clearRect(0,0,t.width,t.height),u.putImageData(t,0,0),e=new Image,e.src=c.toDataURL(),e},e.prototype.decodeFrames=function(t){var e,n,r,i,o,s,c,u;if(this.animation){for(c=this.animation.frames,u=[],n=o=0,s=c.length;s&gt;o;n=++o)e=c[n],r=t.createImageData(e.width,e.height),i=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(r,i),e.imageData=r,u.push(e.image=a(r));return u}},e.prototype.renderFrame=function(t,e){var n,o,a;return o=this.animation.frames,n=o[e],a=o[e-1],0===e&amp;&amp;t.clearRect(0,0,this.width,this.height),(null!=a?a.disposeOp:void 0)===i?t.clearRect(a.xOffset,a.yOffset,a.width,a.height):(null!=a?a.disposeOp:void 0)===s&amp;&amp;t.putImageData(a.imageData,a.xOffset,a.yOffset),n.blendOp===r&amp;&amp;t.clearRect(n.xOffset,n.yOffset,n.width,n.height),
t.drawImage(n.image,n.xOffset,n.yOffset)},e.prototype.animate=function(t){var e,n,r,i,o,s,a=this;return n=0,s=this.animation,i=s.numFrames,r=s.frames,o=s.numPlays,(e=function(){var s,c;return s=n++%i,c=r[s],a.renderFrame(t,s),i&gt;1&amp;&amp;o&gt;n/i?a.animation._timeout=setTimeout(e,c.delay):void 0})()},e.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},e.prototype.render=function(t){var e,n;return t._png&amp;&amp;t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},e}(),t.PNG=e}("undefined"!=typeof window&amp;&amp;window||this);var DecodeStream=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,n=e?e.byteLength:0;if(n&gt;t)return e;for(var r=512;t&gt;r;)r&lt;&lt;=1;for(var i=new Uint8Array(r),o=0;n&gt;o;++o)i[o]=e[o];return this.buffer=i},getByte:function(){for(var t=this.pos;this.bufferLength&lt;=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(var n=e+t;!this.eof&amp;&amp;this.bufferLength&lt;n;)this.readBlock();var r=this.bufferLength;n&gt;r&amp;&amp;(n=r)}else{for(;!this.eof;)this.readBlock();var n=this.bufferLength}return this.pos=n,this.buffer.subarray(e,n)},lookChar:function(){for(var t=this.pos;this.bufferLength&lt;=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength&lt;=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,n){for(var r=t+e;this.bufferLength&lt;=r&amp;&amp;!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),FlateStream=function(){function t(t){throw new Error(t)}function e(e){var n=0,r=e[n++],i=e[n++];-1!=r&amp;&amp;-1!=i||t("Invalid header in flate stream"),8!=(15&amp;r)&amp;&amp;t("Unknown compression method in flate stream"),((r&lt;&lt;8)+i)%31!=0&amp;&amp;t("Bad FCHECK in flate stream"),32&amp;i&amp;&amp;t("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=n,this.codeSize=0,this.codeBuf=0,DecodeStream.call(this)}if("undefined"!=typeof Uint32Array){var n=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),i=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return e.prototype=Object.create(DecodeStream.prototype),e.prototype.getBits=function(e){for(var n,r=this.codeSize,i=this.codeBuf,o=this.bytes,s=this.bytesPos;e&gt;r;)"undefined"==typeof(n=o[s++])&amp;&amp;t("Bad encoding in flate stream"),i|=n&lt;&lt;r,r+=8;return n=i&amp;(1&lt;&lt;e)-1,this.codeBuf=i&gt;&gt;e,this.codeSize=r-=e,this.bytesPos=s,n},e.prototype.getCode=function(e){for(var n=e[0],r=e[1],i=this.codeSize,o=this.codeBuf,s=this.bytes,a=this.bytesPos;r&gt;i;){var c;"undefined"==typeof(c=s[a++])&amp;&amp;t("Bad encoding in flate stream"),o|=c&lt;&lt;i,i+=8}var u=n[o&amp;(1&lt;&lt;r)-1],l=u&gt;&gt;16,h=65535&amp;u;return(0==i||l&gt;i||0==l)&amp;&amp;t("Bad encoding in flate stream"),this.codeBuf=o&gt;&gt;l,this.codeSize=i-l,this.bytesPos=a,h},e.prototype.generateHuffmanTable=function(t){for(var e=t.length,n=0,r=0;e&gt;r;++r)t[r]&gt;n&amp;&amp;(n=t[r]);for(var i=1&lt;&lt;n,o=new Uint32Array(i),s=1,a=0,c=2;n&gt;=s;++s,a&lt;&lt;=1,c&lt;&lt;=1)for(var u=0;e&gt;u;++u)if(t[u]==s){for(var l=0,h=a,r=0;s&gt;r;++r)l=l&lt;&lt;1|1&amp;h,h&gt;&gt;=1;for(var r=l;i&gt;r;r+=c)o[r]=s&lt;&lt;16|u;++a}return[o,n]},e.prototype.readBlock=function(){function e(t,e,n,r,i){for(var o=t.getBits(n)+r;o-- &gt;0;)e[A++]=i}var a=this.getBits(3);if(1&amp;a&amp;&amp;(this.eof=!0),a&gt;&gt;=1,0==a){var c,u=this.bytes,l=this.bytesPos;"undefined"==typeof(c=u[l++])&amp;&amp;t("Bad block header in flate stream");var h=c;"undefined"==typeof(c=u[l++])&amp;&amp;t("Bad block header in flate stream"),h|=c&lt;&lt;8,"undefined"==typeof(c=u[l++])&amp;&amp;t("Bad block header in flate stream");var d=c;"undefined"==typeof(c=u[l++])&amp;&amp;t("Bad block header in flate stream"),d|=c&lt;&lt;8,d!=(65535&amp;~h)&amp;&amp;t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var f=this.bufferLength,p=this.ensureBuffer(f+h),m=f+h;this.bufferLength=m;for(var g=f;m&gt;g;++g){if("undefined"==typeof(c=u[l++])){this.eof=!0;break}p[g]=c}return void(this.bytesPos=l)}var w,y;if(1==a)w=o,y=s;else if(2==a){for(var v=this.getBits(5)+257,b=this.getBits(5)+1,x=this.getBits(4)+4,k=Array(n.length),A=0;x&gt;A;)k[n[A++]]=this.getBits(3);for(var C=this.generateHuffmanTable(k),E=0,A=0,S=v+b,F=new Array(S);S&gt;A;){var T=this.getCode(C);16==T?e(this,F,2,3,E):17==T?e(this,F,3,3,E=0):18==T?e(this,F,7,11,E=0):F[A++]=E=T}w=this.generateHuffmanTable(F.slice(0,v)),y=this.generateHuffmanTable(F.slice(v,S))}else t("Unknown block type in flate stream");for(var p=this.buffer,P=p?p.length:0,_=this.bufferLength;;){var I=this.getCode(w);if(256&gt;I)_+1&gt;=P&amp;&amp;(p=this.ensureBuffer(_+1),P=p.length),p[_++]=I;else{if(256==I)return void(this.bufferLength=_);I-=257,I=r[I];var q=I&gt;&gt;16;q&gt;0&amp;&amp;(q=this.getBits(q));var E=(65535&amp;I)+q;I=this.getCode(y),I=i[I],q=I&gt;&gt;16,q&gt;0&amp;&amp;(q=this.getBits(q));var O=(65535&amp;I)+q;_+E&gt;=P&amp;&amp;(p=this.ensureBuffer(_+E),P=p.length);for(var R=0;E&gt;R;++R,++_)p[_]=p[_-O]}}},e}}();!function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";"undefined"==typeof t.btoa&amp;&amp;(t.btoa=function(t){var n,r,i,o,s,a,c,u,l=0,h=0,d="",f=[];if(!t)return t;do n=t.charCodeAt(l++),r=t.charCodeAt(l++),i=t.charCodeAt(l++),u=n&lt;&lt;16|r&lt;&lt;8|i,o=u&gt;&gt;18&amp;63,s=u&gt;&gt;12&amp;63,a=u&gt;&gt;6&amp;63,c=63&amp;u,f[h++]=e.charAt(o)+e.charAt(s)+e.charAt(a)+e.charAt(c);while(l&lt;t.length);d=f.join("");var p=t.length%3;return(p?d.slice(0,p-3):d)+"===".slice(p||3)}),"undefined"==typeof t.atob&amp;&amp;(t.atob=function(t){var n,r,i,o,s,a,c,u,l=0,h=0,d="",f=[];if(!t)return t;t+="";do o=e.indexOf(t.charAt(l++)),s=e.indexOf(t.charAt(l++)),a=e.indexOf(t.charAt(l++)),c=e.indexOf(t.charAt(l++)),u=o&lt;&lt;18|s&lt;&lt;12|a&lt;&lt;6|c,n=u&gt;&gt;16&amp;255,r=u&gt;&gt;8&amp;255,i=255&amp;u,64==a?f[h++]=String.fromCharCode(n):64==c?f[h++]=String.fromCharCode(n,r):f[h++]=String.fromCharCode(n,r,i);while(l&lt;t.length);return d=f.join("")}),Array.prototype.map||(Array.prototype.map=function(t){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length&gt;&gt;&gt;0,r=new Array(n),i=arguments.length&gt;1?arguments[1]:void 0,o=0;n&gt;o;o++)o in e&amp;&amp;(r[o]=t.call(i,e[o],o,e));return r}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){"use strict";if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;for(var n=Object(this),r=n.length&gt;&gt;&gt;0,i=0;r&gt;i;i++)i in n&amp;&amp;t.call(e,n[i],i,n)}),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&amp;&amp;("function"!=typeof i||null===i))throw new TypeError;var o,s,a=[];for(o in i)t.call(i,o)&amp;&amp;a.push(o);if(e)for(s=0;r&gt;s;s++)t.call(i,n[s])&amp;&amp;a.push(n[s]);return a}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&amp;&amp;self||"undefined"!=typeof window&amp;&amp;window||this),"object"==typeof require&amp;&amp;("undefined"==typeof require_baseUrl_override&amp;&amp;(require_baseUrl_override="../"),require.config({baseUrl:require_baseUrl_override,shim:{"plugins/standard_fonts_metrics":{deps:["jspdf"]},"plugins/split_text_to_size":{deps:["jspdf"]},"plugins/annotations":{deps:["jspdf","plugins/standard_fonts_metrics","plugins/split_text_to_size"]},"plugins/outline":{deps:["jspdf"]},"plugins/addimage":{deps:["jspdf"]},"plugins/png_support":{deps:["jspdf","libs/png_support/png","libs/png_support/zlib"]},"plugins/from_html":{deps:["jspdf"]},"plugins/context2d":{deps:["jspdf","plugins/png_support","plugins/addimage","libs/css_colors"]},"libs/html2canvas/dist/html2canvas":{deps:["jspdf"]},"plugins/canvas":{deps:["jspdf"]},"plugins/acroform":{deps:["jspdf","plugins/annotations"]},html2pdf:{deps:["jspdf","plugins/standard_fonts_metrics","plugins/split_text_to_size","plugins/png_support","plugins/context2d","plugins/canvas","plugins/annotations","libs/html2canvas/dist/html2canvas"]},"test/test_harness":{deps:["jspdf","jspdf.plugin.standard_fonts_metrics","jspdf.plugin.split_text_to_size"]}},paths:{html2pdf:"libs/html2pdf"}}));var requirejs,require,define;!function(global){function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){if(t){var n;for(n=0;n&lt;t.length&amp;&amp;(!t[n]||!e(t[n],n,t));n+=1);}}function eachReverse(t,e){if(t){var n;for(n=t.length-1;n&gt;-1&amp;&amp;(!t[n]||!e(t[n],n,t));n-=1);}}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&amp;&amp;t[e]}function eachProp(t,e){var n;for(n in t)if(hasProp(t,n)&amp;&amp;e(t[n],n))break}function mixin(t,e,n,r){return e&amp;&amp;eachProp(e,function(e,i){!n&amp;&amp;hasProp(t,i)||(!r||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?t[i]=e:(t[i]||(t[i]={}),mixin(t[i],e,n,r)))}),t}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,n,r){var i=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return i.requireType=t,i.requireModules=r,n&amp;&amp;(i.originalError=n),i}function newContext(t){function e(t){var e,n;for(e=0;e&lt;t.length;e++)if(n=t[e],"."===n)t.splice(e,1),e-=1;else if(".."===n){if(0===e||1==e&amp;&amp;".."===t[2]||".."===t[e-1])continue;e&gt;0&amp;&amp;(t.splice(e-1,2),e-=2)}}function n(t,n,r){var i,o,s,a,c,u,l,h,d,f,p,m,g=n&amp;&amp;n.split("/"),w=A.map,y=w&amp;&amp;w["*"];if(t&amp;&amp;(t=t.split("/"),l=t.length-1,A.nodeIdCompat&amp;&amp;jsSuffixRegExp.test(t[l])&amp;&amp;(t[l]=t[l].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&amp;&amp;g&amp;&amp;(m=g.slice(0,g.length-1),t=m.concat(t)),e(t),t=t.join("/")),r&amp;&amp;w&amp;&amp;(g||y)){s=t.split("/");t:for(a=s.length;a&gt;0;a-=1){if(u=s.slice(0,a).join("/"),g)for(c=g.length;c&gt;0;c-=1)if(o=getOwn(w,g.slice(0,c).join("/")),o&amp;&amp;(o=getOwn(o,u))){h=o,d=a;break t}!f&amp;&amp;y&amp;&amp;getOwn(y,u)&amp;&amp;(f=getOwn(y,u),p=a)}!h&amp;&amp;f&amp;&amp;(h=f,d=p),h&amp;&amp;(s.splice(0,d,h),t=s.join("/"))}return i=getOwn(A.pkgs,t),i?i:t}function r(t){isBrowser&amp;&amp;each(scripts(),function(e){return e.getAttribute("data-requiremodule")===t&amp;&amp;e.getAttribute("data-requirecontext")===b.contextName?(e.parentNode.removeChild(e),!0):void 0})}function i(t){var e=getOwn(A.paths,t);return e&amp;&amp;isArray(e)&amp;&amp;e.length&gt;1?(e.shift(),b.require.undef(t),b.makeRequire(null,{skipMap:!0})([t]),!0):void 0}function o(t){var e,n=t?t.indexOf("!"):-1;return n&gt;-1&amp;&amp;(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function s(t,e,r,i){var s,a,c,u,l=null,h=e?e.name:null,d=t,f=!0,p="";return t||(f=!1,t="_@r"+(I+=1)),u=o(t),l=u[0],t=u[1],l&amp;&amp;(l=n(l,h,i),a=getOwn(T,l)),t&amp;&amp;(l?p=a&amp;&amp;a.normalize?a.normalize(t,function(t){return n(t,h,i)}):-1===t.indexOf("!")?n(t,h,i):t:(p=n(t,h,i),u=o(p),l=u[0],p=u[1],r=!0,s=b.nameToUrl(p))),c=!l||a||r?"":"_unnormalized"+(q+=1),{prefix:l,name:p,parentMap:e,unnormalized:!!c,url:s,originalName:d,isDefine:f,id:(l?l+"!"+p:p)+c}}function a(t){var e=t.id,n=getOwn(C,e);return n||(n=C[e]=new b.Module(t)),n}function c(t,e,n){var r=t.id,i=getOwn(C,r);!hasProp(T,r)||i&amp;&amp;!i.defineEmitComplete?(i=a(t),i.error&amp;&amp;"error"===e?n(i.error):i.on(e,n)):"defined"===e&amp;&amp;n(T[r])}function u(t,e){var n=t.requireModules,r=!1;e?e(t):(each(n,function(e){var n=getOwn(C,e);n&amp;&amp;(n.error=t,n.events.error&amp;&amp;(r=!0,n.emit("error",t)))}),r||req.onError(t))}function l(){globalDefQueue.length&amp;&amp;(apsp.apply(F,[F.length,0].concat(globalDefQueue)),globalDefQueue=[])}function h(t){delete C[t],delete E[t]}function d(t,e,n){var r=t.map.id;t.error?t.emit("error",t.error):(e[r]=!0,each(t.depMaps,function(r,i){var o=r.id,s=getOwn(C,o);!s||t.depMatched[i]||n[o]||(getOwn(e,o)?(t.defineDep(i,T[o]),t.check()):d(s,e,n))}),n[r]=!0)}function f(){var t,e,n=1e3*A.waitSeconds,o=n&amp;&amp;b.startTime+n&lt;(new Date).getTime(),s=[],a=[],c=!1,l=!0;if(!y){if(y=!0,eachProp(E,function(t){var n=t.map,u=n.id;if(t.enabled&amp;&amp;(n.isDefine||a.push(t),!t.error))if(!t.inited&amp;&amp;o)i(u)?(e=!0,c=!0):(s.push(u),r(u));else if(!t.inited&amp;&amp;t.fetched&amp;&amp;n.isDefine&amp;&amp;(c=!0,!n.prefix))return l=!1}),o&amp;&amp;s.length)return t=makeError("timeout","Load timeout for modules: "+s,null,s),t.contextName=b.contextName,u(t);l&amp;&amp;each(a,function(t){d(t,{},{})}),o&amp;&amp;!e||!c||!isBrowser&amp;&amp;!isWebWorker||k||(k=setTimeout(function(){k=0,f()},50)),y=!1}}function p(t){hasProp(T,t[0])||a(s(t[0],null,!0)).init(t[1],t[2])}function m(t,e,n,r){t.detachEvent&amp;&amp;!isOpera?r&amp;&amp;t.detachEvent(r,e):t.removeEventListener(n,e,!1)}function g(t){var e=t.currentTarget||t.srcElement;return m(e,b.onScriptLoad,"load","onreadystatechange"),m(e,b.onScriptError,"error"),{node:e,id:e&amp;&amp;e.getAttribute("data-requiremodule")}}function w(){var t;for(l();F.length;){if(t=F.shift(),null===t[0])return u(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));p(t)}}var y,v,b,x,k,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},C={},E={},S={},F=[],T={},P={},_={},I=1,q=1;return x={require:function(t){return t.require?t.require:t.require=b.makeRequire(t.map)},exports:function(t){return t.usingExports=!0,t.map.isDefine?t.exports?T[t.map.id]=t.exports:t.exports=T[t.map.id]={}:void 0},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(A.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},v=function(t){this.events=getOwn(S,t.id)||{},this.map=t,this.shim=getOwn(A.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(t,e,n,r){r=r||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&amp;&amp;(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&amp;&amp;t.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var t=this.map;return this.shim?void b.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()})):t.prefix?this.callPlugin():this.load()}},load:function(){var t=this.map.url;P[t]||(P[t]=!0,b.load(this.map.id,t))},check:function(){if(this.enabled&amp;&amp;!this.enabling){var t,e,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount&lt;1&amp;&amp;!this.defined){if(isFunction(o)){if(this.events.error&amp;&amp;this.map.isDefine||req.onError!==defaultOnError)try{i=b.execCb(n,o,r,i)}catch(s){t=s}else i=b.execCb(n,o,r,i);if(this.map.isDefine&amp;&amp;void 0===i&amp;&amp;(e=this.module,e?i=e.exports:this.usingExports&amp;&amp;(i=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",u(this.error=t)}else i=o;this.exports=i,this.map.isDefine&amp;&amp;!this.ignore&amp;&amp;(T[n]=i,req.onResourceLoad&amp;&amp;req.onResourceLoad(b,this.map,this.depMaps)),h(n),this.defined=!0}this.defining=!1,this.defined&amp;&amp;!this.defineEmitted&amp;&amp;(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var t=this.map,e=t.id,r=s(t.prefix);this.depMaps.push(r),c(r,"defined",bind(this,function(r){var i,o,l,d=getOwn(_,this.map.id),f=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,m=b.makeRequire(t.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&amp;&amp;(f=r.normalize(f,function(t){return n(t,p,!0)})||""),o=s(t.prefix+"!"+f,this.map.parentMap),c(o,"defined",bind(this,function(t){this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),l=getOwn(C,o.id),void(l&amp;&amp;(this.depMaps.push(o),this.events.error&amp;&amp;l.on("error",bind(this,function(t){this.emit("error",t)})),l.enable()))):d?(this.map.url=b.nameToUrl(d),void this.load()):(i=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),i.error=bind(this,function(t){this.inited=!0,this.error=t,t.requireModules=[e],eachProp(C,function(t){0===t.map.id.indexOf(e+"_unnormalized")&amp;&amp;h(t.map.id)}),u(t)}),i.fromText=bind(this,function(n,r){var o=t.name,c=s(o),l=useInteractive;r&amp;&amp;(n=r),l&amp;&amp;(useInteractive=!1),a(c),hasProp(A.config,e)&amp;&amp;(A.config[o]=A.config[e]);try{req.exec(n)}catch(h){return u(makeError("fromtexteval","fromText eval for "+e+" failed: "+h,h,[e]))}l&amp;&amp;(useInteractive=!0),this.depMaps.push(c),b.completeLoad(o),m([o],i)}),void r.load(t.name,m,i,A))})),b.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){E[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,r,i;if("string"==typeof t){if(t=s(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,i=getOwn(x,t.id))return void(this.depExports[e]=i(this));this.depCount+=1,c(t,"defined",bind(this,function(t){this.defineDep(e,t),this.check()})),this.errback&amp;&amp;c(t,"error",bind(this,this.errback))}n=t.id,r=C[n],hasProp(x,n)||!r||r.enabled||b.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(C,t.id);e&amp;&amp;!e.enabled&amp;&amp;b.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&amp;&amp;delete this.events[t]}},b={config:A,contextName:t,registry:C,defined:T,urlFetched:P,defQueue:F,Module:v,makeModuleMap:s,nextTick:req.nextTick,onError:u,configure:function(t){t.baseUrl&amp;&amp;"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&amp;&amp;(t.baseUrl+="/");var e=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){n[e]?(A[e]||(A[e]={}),mixin(A[e],t,!0,!0)):A[e]=t}),t.bundles&amp;&amp;eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&amp;&amp;(_[t]=e)})}),t.shim&amp;&amp;(eachProp(t.shim,function(t,n){isArray(t)&amp;&amp;(t={deps:t}),!t.exports&amp;&amp;!t.init||t.exportsFn||(t.exportsFn=b.makeShimExports(t)),e[n]=t}),A.shim=e),t.packages&amp;&amp;each(t.packages,function(t){var e,n;t="string"==typeof t?{name:t}:t,n=t.name,e=t.location,e&amp;&amp;(A.paths[n]=t.location),A.pkgs[n]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(C,function(t,e){t.inited||t.map.unnormalized||(t.map=s(e))}),(t.deps||t.callback)&amp;&amp;b.require(t.deps||[],t.callback)},makeShimExports:function(t){function e(){var e;return t.init&amp;&amp;(e=t.init.apply(global,arguments)),e||t.exports&amp;&amp;getGlobal(t.exports)}return e},makeRequire:function(e,i){function o(n,r,c){var l,h,d;return i.enableBuildCallback&amp;&amp;r&amp;&amp;isFunction(r)&amp;&amp;(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?u(makeError("requireargs","Invalid require call"),c):e&amp;&amp;hasProp(x,n)?x[n](C[e.id]):req.get?req.get(b,n,e,o):(h=s(n,e,!1,!0),l=h.id,hasProp(T,l)?T[l]:u(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+t+(e?"":". Use require([])")))):(w(),b.nextTick(function(){w(),d=a(s(null,e)),d.skipMap=i.skipMap,d.init(n,r,c,{enabled:!0}),f()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(t){var r,i=t.lastIndexOf("."),o=t.split("/")[0],s="."===o||".."===o;return-1!==i&amp;&amp;(!s||i&gt;1)&amp;&amp;(r=t.substring(i,t.length),t=t.substring(0,i)),b.nameToUrl(n(t,e&amp;&amp;e.id,!0),r,!0)},defined:function(t){return hasProp(T,s(t,e,!1,!0).id)},specified:function(t){return t=s(t,e,!1,!0).id,hasProp(T,t)||hasProp(C,t)}}),e||(o.undef=function(t){l();var n=s(t,e,!0),i=getOwn(C,t);r(t),delete T[t],delete P[n.url],delete S[t],eachReverse(F,function(e,n){e[0]===t&amp;&amp;F.splice(n,1)}),i&amp;&amp;(i.events.defined&amp;&amp;(S[t]=i.events),h(t))}),o},enable:function(t){var e=getOwn(C,t.id);e&amp;&amp;a(t).enable()},completeLoad:function(t){var e,n,r,o=getOwn(A.shim,t)||{},s=o.exports;for(l();F.length;){if(n=F.shift(),null===n[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&amp;&amp;(e=!0);p(n)}if(r=getOwn(C,t),!e&amp;&amp;!hasProp(T,t)&amp;&amp;r&amp;&amp;!r.inited){if(!(!A.enforceDefine||s&amp;&amp;getGlobal(s)))return i(t)?void 0:u(makeError("nodefine","No define call for "+t,null,[t]));p([t,o.deps||[],o.exportsFn])}f()},nameToUrl:function(t,e,n){var r,i,o,s,a,c,u,l=getOwn(A.pkgs,t);if(l&amp;&amp;(t=l),u=getOwn(_,t))return b.nameToUrl(u,e,n);if(req.jsExtRegExp.test(t))a=t+(e||"");else{for(r=A.paths,i=t.split("/"),o=i.length;o&gt;0;o-=1)if(s=i.slice(0,o).join("/"),c=getOwn(r,s)){isArray(c)&amp;&amp;(c=c[0]),i.splice(0,o,c);break}a=i.join("/"),a+=e||(/^data\:|\?/.test(a)||n?"":".js"),a=("/"===a.charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+a}return A.urlArgs?a+((-1===a.indexOf("?")?"?":"&amp;")+A.urlArgs):a},load:function(t,e){req.load(b,t,e)},execCb:function(t,e,n,r){return e.apply(r,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=g(t);b.completeLoad(e.id)}},onScriptError:function(t){var e=g(t);return i(e.id)?void 0:u(makeError("scripterror","Script error for: "+e.id,t,[e.id]))}},b.require=b.makeRequire(),b}function getInteractiveScript(){return interactiveScript&amp;&amp;"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(t){return"interactive"===t.readyState?interactiveScript=t:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&amp;&amp;"undefined"!=typeof importScripts,readyRegExp=isBrowser&amp;&amp;"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&amp;&amp;"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(t,e,n,r){var i,o,s=defContextName;return isArray(t)||"string"==typeof t||(o=t,isArray(e)?(t=e,e=n,n=r):t=[]),o&amp;&amp;o.context&amp;&amp;(s=o.context),i=getOwn(contexts,s),i||(i=contexts[s]=req.s.newContext(s)),o&amp;&amp;i.configure(o),i.require(t,e,n)},req.config=function(t){return req(t)},req.nextTick="undefined"!=typeof setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&amp;&amp;(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&amp;&amp;(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t,e,n){var r=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=t.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(t,e,n){var r,i=t&amp;&amp;t.config||{};if(isBrowser)return r=req.createNode(i,e,n),r.setAttribute("data-requirecontext",t.contextName),r.setAttribute("data-requiremodule",e),!r.attachEvent||r.attachEvent.toString&amp;&amp;r.attachEvent.toString().indexOf("[native code")&lt;0||isOpera?(r.addEventListener("load",t.onScriptLoad,!1),r.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",t.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),t.completeLoad(e)}catch(o){t.onError(makeError("importscripts","importScripts failed for "+e+" at "+n,o,[e]))}},isBrowser&amp;&amp;!cfg.skipDataMain&amp;&amp;eachReverse(scripts(),function(t){return head||(head=t.parentNode),dataMain=t.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&amp;&amp;(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(t,e,n){var r,i;"string"!=typeof t&amp;&amp;(n=e,e=t,t=null),isArray(e)||(n=e,e=null),!e&amp;&amp;isFunction(n)&amp;&amp;(e=[],n.length&amp;&amp;(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(t,n){e.push(n)}),e=(1===n.length?["require"]:["require","exports","module"]).concat(e))),useInteractive&amp;&amp;(r=currentlyAddingScript||getInteractiveScript(),r&amp;&amp;(t||(t=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([t,e,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),global[""]=exports}({},function(){return this}());]]&gt;&lt;/script&gt;&lt;script_name/&gt;&lt;sys_class_name&gt;sys_ui_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-04-13 13:54:22&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;04b105016ff6d2000a09034abb3ee437&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;jspdfCDN&lt;/sys_name&gt;&lt;sys_package/&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_script_04b105016ff6d2000a09034abb3ee437&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-19 20:03:36&lt;/sys_updated_on&gt;&lt;use_scoped_format&gt;false&lt;/use_scoped_format&gt;&lt;/sys_ui_script&gt;&lt;/record_update&gt;</payload>
<payload_hash>-483599598</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>bc576a31db2b5b00b86770c08c961985</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b42403ba0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>jspdfCDN</target_name>
<type>UI Script</type>
<update_domain>global</update_domain>
<update_guid>f5111d9bdedf1300428b17aacb163440</update_guid>
<update_guid_history>f5111d9bdedf1300428b17aacb163440:-483599598,5dc0d99b7fdf1300d42b43cff97ca941:-1651244503,-26100623:-26100623</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_1d359fb8dbe7570054d8ff621f96197a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS SD IC Approval Table">63fc8cdcdb284340f59974131f9619d3</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:31:43</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>1d359fb8dbe7570054d8ff621f96197a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS SD IC Approval Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_1d359fb8dbe7570054d8ff621f96197a</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:31:43</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1218510870</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f0576a31db2b5b00b86770c08c961916</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce347c700000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS SD IC Approval Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>1d35d3f898e757005283ebada1c2f589</update_guid>
<update_guid_history>1d35d3f898e757005283ebada1c2f589:-1218510870</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_70841bb8dbe7570054d8ff621f9619ea</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS main content">6f829e9adbf1b20054d8ff621f961937</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:28:41</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>70841bb8dbe7570054d8ff621f9619ea</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS main content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_70841bb8dbe7570054d8ff621f9619ea</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:28:41</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1016589364</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f0576a31db2b5b00b86770c08c961919</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce31b55b0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS main content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>49841bb8d4e75700e1d26527f31b5eeb</update_guid>
<update_guid_history>49841bb8d4e75700e1d26527f31b5eeb:-1016589364</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_f1e55ff8dbe7570054d8ff621f9619be</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Saved Table">a970b6f5db0e7a0054d8ff621f96194c</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:34:46</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>f1e55ff8dbe7570054d8ff621f9619be</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Saved Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_f1e55ff8dbe7570054d8ff621f9619be</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:34:46</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>187775893</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f0576a31db2b5b00b86770c08c96191c</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce40057e0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Saved Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>061893bc16e75700507846b89e8e55b8</update_guid>
<update_guid_history>061893bc16e75700507846b89e8e55b8:187775893,f9e55ff8cde7570072ab9de6a22652bf:571781153</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_dependency_b01117f4dbe7570054d8ff621f961979</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_dependency"><sp_dependency action="INSERT_OR_UPDATE"><module/><name>CCRGDS_CSS_DEPEN</name><page_load>false</page_load><sp_portals/><sys_class_name>sp_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:14:12</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>b01117f4dbe7570054d8ff621f961979</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_dependency_b01117f4dbe7570054d8ff621f961979</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:14:12</sys_updated_on></sp_dependency></record_update>]]></payload>
<payload_hash>-1174973511</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f0576a31db2b5b00b86770c08c961981</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2474530000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>74311bb4dce75700a440d7b8279ad15a</update_guid>
<update_guid_history>74311bb4dce75700a440d7b8279ad15a:-1174973511</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_6f829e9adbf1b20054d8ff621f961937</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($rootScope, $scope, spUtil, $http, $window) {
	var c = this;
	var my_sys_id = c.data.info.userId;
	var sessionId = c.data.info.sessionId;
	var user_name = c.data.info.userName;
	$('#refresh').val('0');
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns = [{
		key: 'project_name',
		label: 'Project Name',
		sort: 'asc'
	},
							 {
								 key: 'sys_create_on',
								 label: 'Created Date',
								 sort: 'asc'
							 },
							 {
								 key: 'actions',
								 label: 'Actions',
								 sort: null
							 }
							];

	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;

		var offset = currentSize * currentPage;

		return new Array(Math.ceil(c.data.tasks.length / currentSize));
	};

	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};

	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;

		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {

			var sortAscending = column.sort === 'asc';

			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;

			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB) :
					keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};

			c.data.tasks = c.data.tasks.sort(compareRows);
		}
	};

	c.pagination0 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns0 = [{
		key: 'ic_id',
		label: 'IC ID',
		sort: 'asc'
	},
								{
									key: 'study_name',
									label: 'Study Name',
									sort: 'asc'
								},
								{
									key: 'project_title',
									label: 'Project Title',
									sort: 'asc'
								},
								{
									key: 'submitted_by',
									label: 'Submitted By',
									sort: 'asc'
								},
								{
									key: 'submitted_date',
									label: 'Submitted Date',
									sort: 'asc'
								},
								{
									key: 'status',
									label: 'Status',
									sort: 'asc'
								},
								{
									key: 'last_update_date',
									label: 'Last Update Date',
									sort: 'asc'
								},
								{
									key: 'approval',
									label: 'Approval',
									sort: null
								},

								{
									key: 'actions',
									label: 'Actions',
									sort: null
								}		
							 ];

	c.getRange0 = function() {
		var currentSize = c.pagination0.currentSize;
		var currentPage = c.pagination0.currentPage;

		var offset = currentSize * currentPage;

		return new Array(Math.ceil(c.data.icSignTasks.length / currentSize));
	};

	c.setPage0 = function(index) {
		c.pagination0.currentPage = index;
	};

	c.toggleSort0 = function(index) {
		var column = c.columns0[index];
		var key = column.key;

		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {

			var sortAscending = column.sort === 'asc';

			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;

			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB) :
					keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};

			c.data.icSignTasks = c.data.icSignTasks.sort(compareRows);
		}
	};

	c.pagination1 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns1 = [{
		key: 'gdsp_id',
		label: 'GDSP ID',
		sort: 'asc'
	},
								{
									key: 'principal_name',
									label: 'Principal Name',
									sort: 'asc'
								},
								{
									key: 'project_name',
									label: 'Project Name',
									sort: 'asc'
								},
								{
									key: 'status',
									label: 'Status',
									sort: 'asc'
								},
								{
									key: 'approval',
									label: 'Approval',
									sort: null
								},
								{
									key: 'submitted_date',
									label: 'Submitted Date',
									sort: 'asc'
								},
								{
									key: 'actions',
									label: 'Actions',
									sort: null
								}
							 ];

	c.getRange1 = function() {
		var currentSize = c.pagination1.currentSize;
		var currentPage = c.pagination1.currentPage;

		var offset = currentSize * currentPage;

		return new Array(Math.ceil(c.data.submittedTasks.length / currentSize));
	};

	c.setPage1 = function(index) {
		c.pagination1.currentPage = index;
	};

	c.toggleSort1 = function(index) {
		var column = c.columns1[index];
		var key = column.key;

		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {

			var sortAscending = column.sort === 'asc';

			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;

			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB) :
					keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};

			c.data.submittedTasks = c.data.submittedTasks.sort(compareRows);
		}
	};

	c.pagination2 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns2 = [{
		key: 'study_name',
		label: 'Study Name',
		sort: 'asc'
	},
								{
									key: 'project_title',
									label: 'Project Title',
									sort: 'asc'
								},
								{
									key: 'certification_to',
									label: 'Certification Issues To',
									sort: 'asc'
								},
								{
									key: 'certification_from',
									label: 'Certification Issues From',
									sort: 'asc'
								},
								{
									key: 'gpa_organization',
									label: 'Organization of GPA',
									sort: null
								},
								{
									key: 'sd_organization',
									label: 'Organization of SD',
									sort: 'asc'
								},
								{
									key: 'sys_create_on',
									label: 'Created Date',
									sort: 'asc'
								},
								{
									key: 'actions',
									label: 'Actions',
									sort: null
								}
							 ];

	c.getRange2 = function() {
		var currentSize = c.pagination2.currentSize;
		var currentPage = c.pagination2.currentPage;

		var offset = currentSize * currentPage;

		return new Array(Math.ceil(c.data.icTasks.length / currentSize));
	};

	c.setPage2 = function(index) {
		c.pagination2.currentPage = index;
	};

	c.toggleSort2 = function(index) {
		var column = c.columns2[index];
		var key = column.key;

		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {

			var sortAscending = column.sort === 'asc';

			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;

			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB) :
					keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};

			c.data.icTasks = c.data.icTasks.sort(compareRows);
		}
	};

	c.pagination3 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns3 = [{
		key: 'first_name',
		label: 'First Name',
		sort: 'asc'
	},
								{
									key: 'last_name',
									label: 'Last Name',
									sort: 'asc'
								},
								{
									key: 'access',
									label: 'Access',
									sort: 'asc'
								},
								{
									key: 'action',
									label: 'Action',
									sort: null
								}
							 ];

	c.getRange3 = function() {
		var currentSize = c.pagination3.currentSize;
		var currentPage = c.pagination3.currentPage;

		var offset = currentSize * currentPage;

		return new Array(Math.ceil(c.data.userTasks.length / currentSize));
	};

	c.setPage3 = function(index) {
		c.pagination3.currentPage = index;
	};

	c.toggleSort3 = function(index) {
		var column = c.columns3[index];
		var key = column.key;

		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {

			var sortAscending = column.sort === 'asc';

			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;

			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB) :
					keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};

			c.data.userTasks = c.data.userTasks.sort(compareRows);
		}
	};

	c.pagination4 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns4 = [{
		key: 'ic_id',
		label: 'IC ID',
		sort: 'asc'
	},
								{
									key: 'study_name',
									label: 'Study Name',
									sort: 'asc'
								},
								{
									key: 'project_title',
									label: 'Project Title',
									sort: 'asc'
								},
								{
									key: 'issue_to',
									label: 'Certification Issues To',
									sort: 'asc'
								},
								{
									key: 'issue_from',
									label: 'Certification Issues From',
									sort: 'asc'
								},
								{
									key: 'status',
									label: 'Approval',
									sort: 'asc'
								},
								{
									key: 'approval',
									label: 'Approval',
									sort: null
								},
								{
									key: 'submitted_date',
									label: 'Submitted Date',
									sort: 'asc'
								},
								{
									key: 'action',
									label: 'Action',
									sort: null
								}
							 ];

	c.getRange4 = function() {
		var currentSize = c.pagination4.currentSize;
		var currentPage = c.pagination4.currentPage;

		var offset = currentSize * currentPage;

		return new Array(Math.ceil(c.data.icSubmittedTasks.length / currentSize));
	};

	c.setPage4 = function(index) {
		c.pagination4.currentPage = index;
	};

	c.toggleSort4 = function(index) {
		var column = c.columns4[index];
		var key = column.key;

		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {

			var sortAscending = column.sort === 'asc';

			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;

			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB) :
					keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};

			c.data.icSubmittedTasks = c.data.icSubmittedTasks.sort(compareRows);
		}
	};

	c.pagination5 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns5 = [{
		key: 'project_name',
		label: 'Project Name',
		sort: 'asc'
	},
								{
									key: 'investigator',
									label: 'Investigator',
									sort: 'asc'
								},
								{
									key: 'sys_create_on',
									label: 'Created Date',
									sort: 'asc'
								},
								{
									key: 'actions',
									label: 'Actions',
									sort: null
								}
							 ];

	c.getRange5 = function() {
		var currentSize = c.pagination5.currentSize;
		var currentPage = c.pagination5.currentPage;

		var offset = currentSize * currentPage;

		return new Array(Math.ceil(c.data.erTasks.length / currentSize));
	};

	c.setPage5 = function(index) {
		c.pagination5.currentPage = index;
	};

	c.toggleSort5 = function(index) {
		var column = c.columns5[index];
		var key = column.key;

		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {

			var sortAscending = column.sort === 'asc';

			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;

			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB) :
					keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};

			c.data.erTasks = c.data.erTasks.sort(compareRows);
		}
	};
	//start client js

	$('.collapse').on('shown.bs.collapse', function() {
		console.log(this);
		$(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
	}).on('hidden.bs.collapse', function() {
		$(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
	});

	var names = ['investigator', 'pTitle', 'pBranch', 'email', 'phone', 'date', 'projectNumber', 'projectName', 'simpleSize', 'prospective', 'restrospective', 'human', 'nonHuman', 'germLine', 'somatic', 'dnaType', 'rnaType', 'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression', 'methylationArray', 'numMethylation', 'arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository', 'phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation', 'limitedOnly', 'limitedPurpose', 'relateToDisease', 'orginId', 'version', 'rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh', 'numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var textFields = ['investigator', 'pTitle', 'pBranch', 'email', 'phone', 'date', 'projectNumber', 'projectName', 'simpleSize', 'specifyOtherType', 'spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument', 'specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version', 'numSNP', 'numExpression', 'numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh', 'numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var icNames = ['certification_date', 'institution_name', 'certification_to', 'certification_from', 'gpa_organization', 'sd_organization', 'study_name', 'project_title', 'data_access', 'display', 'frequency', 'sampleTime', 'sampleConsent', 'consent_group'];

	$scope.backToMain = function() {
		$('#refresh').val('0');
		location.replace("$sp.do?id=gds_web_application");
	};

	$("#piName").autocomplete({
		delay: 500,
		source: function(request, response) {
			var term = $('#piName').val();
			var temp = '';
			if (term.indexOf(',') &gt;= 0) {
				temp = term.split(',');
				var length = temp.length;
				if (length &gt; 1) {
					term = temp[1].trim() + " " + temp[0].trim();
				} else {
					term = temp[0];
				}
			}
			var req = {
				method: 'GET',
				url: '/api/naci/gds/fetchUserList',
				beforeSend: function(xhr) {
					xhr.setRequestHeader('X-UserToken', sessionId);
				},
				headers: {
					'Content-Type': 'application/json'
				},
				params: {
					'term': term
				}
			};
			$http(req).then(handleResponse, handleError);

			function handleResponse(responseData) {
				var result = responseData.data.result;

				response(result);
			}

			function handleError(response) {
				console.error(response);
				alert('ERROR');
			}
		},
		autoFocus: true,
		select: function(event, ui) {
			$('#refresh').val('0');
			console.log(event, ui);
			var id = ui.item.id;
			var email = ui.item.email;
			var phone = ui.item.phone;
			var title = ui.item.title;
			var name = (ui.item.value || '').split(' ');
			$('#piUserId').val(id);
			if (name != null &amp;&amp; name.length &gt; 1) {
				$('#piFirstName').val(name[0]);
				$('#piLastName').val(name[1]);
				$('#piEmail').val(email);
				$('#piPhone').val(phone);
				$('#pTitle').val(title);
			} else {
				$('#piFirstName').val('');
				$('#piLastName').val('');
				$('#piEmail').val('');
				$('#piPhone').val('');
				$('#piTitle').val('');
			}
		}
	});
	$("#userName").autocomplete({
		delay: 500,
		source: function(request, response) {
			var term = $('#userName').val();
			var temp = '';
			if (term.indexOf(',') &gt;= 0) {
				temp = term.split(',');
				var length = temp.length;
				if (length &gt; 1) {
					term = temp[1].trim() + " " + temp[0].trim();
				} else {
					term = temp[0];
				}
			}
			var req = {
				method: 'GET',
				url: '/api/naci/gds/fetchUserList',
				beforeSend: function(xhr) {
					xhr.setRequestHeader('X-UserToken', sessionId);
				},
				headers: {
					'Content-Type': 'application/json'
				},
				params: {
					'term': term
				}
			};
			$http(req).then(handleResponse, handleError);

			function handleResponse(responseData) {
				var result = responseData.data.result;

				response(result);
			}

			function handleError(response) {
				console.error(response);
				alert('ERROR');
			}
		},
		autoFocus: true,
		select: function(event, ui) {
			$('#refresh').val('0');
			console.log(event, ui);
			var id = ui.item.id;
			var name = (ui.item.value || '').split(' ');
			$('#userId').val(id);
			if (name != null &amp;&amp; name.length &gt; 1) {
				$('#userFirstName').val(name[0]);
				$('#userLastName').val(name[1]);
			} else {
				$('#userFirstName').val('');
				$('#userLastName').val('');
			}
		}
	});
	var isLoading = true;
	$('#selectParent').select2();
	/*$('#selectParent').on("change", function(e){
		if (isLoading) {
			isLoading = false;
		} else {
			var value = $(this).val();
			setTimeout(function() {
				var parentId = JSON.stringify(value);
				var gdspStatus = $('#gdspStatus').val();
				var icStatus = $('#icStatus').val();
			}, 0);				
		}
	});*/
	var userLocation = window.location.href;

	var temp = userLocation.split('&amp;');
	var rec_id = '';
	var access = '';

	if (temp.length &gt; 1) {
		var t1 = temp[1].split('itemId');
		rec_id = t1[1].substring(1);
	}
	if (temp.length &gt; 1) {
		var t2 = temp[2].split('access');
		access = t2[1].substring(1);
	}

	access = unescape(access);
	access = encodeDecodeData(access.trim(), 'decode');
	if(access != 'Read_and_Write'){
		access = 'Read_Only';
	}
	if (rec_id != null &amp; rec_id.length &gt; 0) {
		$('#recId').val(rec_id);
		c.data.access = access;
		loadSavedData($('#recId').val());
		loadData(rec_id);
		$('#gdspli').show();
		$('#icli').show();
		$('#erli').show();
		$('#acli').show();

	} else {
		clearData("no Id");
		loadParentOptionString();
		$('#titleDiv').hide();
	}
	preprocess(access);

	function preprocess(access) {
		var names = ['projectTitle', 'piFirstName', 'piLastName', 'piEmail', 'piPhone', 'organismType'];
		$('#refresh').val('0');
		//var radioName = "erId";
		if (access == 'Read_Only') {
			for (var i = 0; i &lt; names.length; i++) {
				if (names[i] == 'organismType') {
					$('#' + names[i]).attr('disabled', 'disabled');
				}
				$('#' + names[i]).attr('readonly', 'readonly');
			}
			$('#erId1').attr('disabled', 'disabled');
			$('#erId2').attr('disabled', 'disabled');
		}
		if (access == 'Read_and_Write') {
			for (var k = 0; k &lt; names.length; k++) {
				if (names[k] == 'organismType') {
					$('#' + names[k]).removeAttr('disabled');
				}
				$('#' + names[k]).removeAttr('readonly');
			}
			$('#erId1').removeAttr('disabled');
			$('#erId2').removeAttr('disabled');
		}
		loadBranchOptionString();
		//$('#piName').attr('readOnly', 'readOnly');
	}

	function loadSavedData(id){
		var data = {
			gdsId: id,
			sysId: my_sys_id
		};
		//load GDSP saved Data
		$('#refresh').val('0');
		var req = {
			method: 'GET',
			url: '/api/naci/gds/loadGDSPSaveData',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			params: data
		};
		$http(req).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			//populate user data
			c.data.tasks = result;
			console.log(result);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
		//load IC saved Data
		var req1 = {
			method: 'GET',
			url: '/api/naci/gds/loadICSavedData',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			params: data
		};
		$http(req1).then(handleResponse1, handleError1);
		function handleResponse1(response) {
			var result = response.data.result;
			//populate user data
			c.data.icTasks = result;
			console.log(result);
		}

		function handleError1(response) {
			console.error(response);
			alert('ERROR');
		}		 

	}

	//when page ready, the user access should populate
	function loadUserData() {
		var data = {
			gds_id: rec_id,
			user_id: my_sys_id
		};
		var req = {
			method: 'GET',
			url: '/api/naci/gds/getUser',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			params: data
		};
		$http(req).then(handleResponse, handleError);
		$('#refresh').val('0');
		function handleResponse(response) {
			var result = response.data.result;
			//populate user data
			c.data.userTasks = result;
			console.log(result);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}
	//end of loading user data
	loadUserData();
	$scope.lookUser = function() {
		$('#refresh').val('0');
		$('#first_name').val('');
		$('#last_name').val('');
		$('#userPageType').val('gdsInfo');
		$('#userSelection').modal('show');
	}
	$scope.saveProjectInformation = function(type) {
		$('#refresh').val('0');
		if (validateGDSInfo()) {
			$('#gdsErrorDiv').show();
		} else {
			$('#gdsErrorDiv').hide();
			var sessionId = c.data.info.sessionId;
			var userId = c.data.info.userId;
			var variables = getProjectInfoData();
			variables[0].userId = userId;
			if (type == 1) {
				variables[0].gds_id = $('#hideGDSId').val();
				variables[0].method = "update";
			} else if (type == 0) {
				variables[0].method = "save";
			}
			var param = JSON.stringify(variables);
			$.ajax({
				dataType: "json",
				type: "POST",
				contentType: "application/json",
				url: "/api/naci/gds/saveProjectInformationService",
				beforeSend: function(xhr) {
					xhr.setRequestHeader('X-UserToken', sessionId);
				},
				data: param,
				async: false,
				success: function(data) {
					$('#titleDiv').html(" &lt;b&gt;GDS ID: " + data.result[0].gds_number + "&lt;/b&gt; &lt;lable&gt;");
					$('#titleDiv').show();
					$('#titleButtomDiv').html(" &lt;b&gt;GDS ID: " + data.result[0].gds_number + "&lt;/b&gt; &lt;lable&gt;");
					$('#titleButtomDiv').show();
					$('#hideGDSId').val(data.result[0].gds_id.toString());
					loadUserData();
					$('#saveBt').hide();
					$('#updateBt').show();
					//$('#messageDiv').html("&lt;font color='green'&gt;The project information has been saved successfully&lt;font&gt;");
					//$('#messageDiv').show();
					$('#messageInfo').html('The project information has been saved successfully');
					$('#infoModal').modal('show');
					$('#btnOkConfirm').off('click').click(function() {
						$('#infoModal').modal('hide');
						location.reload();
					});
					$('#gdspli').show();
					$('#icli').show();
					$('#erli').show();
					$('#acli').show();
					//based on the information to enable or disable IC and Exception Request
					if (variables[0].organismType == 'human' || variables[0].organismType == 'both') {
						$('#icBtn').removeAttr('disabled');
					} else {
						$('#icBtn').attr('disabled', 'disabled');
					}
					if (variables[0].erId == 'yes') {
						$('#erBtn').removeAttr("disabled");
					} else {
						$('#erBtn').attr("disabled", "disabled");
					}
					if(type == 0){
						document.location.href = "$sp.do?id=gds_web_main&amp;itemId=" + $('#hideGDSId').val() + "&amp;access=" + encodeDecodeData('Read_and_Write', 'encode');
					}
					//save user - if PI is not creator, then grant PI project access
					var piId = $('#piUserId').val();
					if(piId != my_sys_id){
						var gdsId = $('#hideGDSId').val();
						var userData = piId + "+" + $('#piFirstName').val() + "+" + $('#piLastName').val();
						saveUser(userData, gdsId, 'Read_and_Write');
					}
				},
				error: function(data) {
					alert("ERROR");
				}
			});
		}
	};

	function validateGDSInfo() {
		var isOk = false;
		clearGDSInfoBackgroud();
		if ($('#projectTitle').val().trim().length == 0) {
			$('#projectTitle').css("background-color", "yellow");
			isOk = true;
		}
		//make sure the user select PI
		if ($('#piName').val().trim().length == 0 ||  $('#piUserId').val() == null ||  $('#piUserId').val().trim().length == 0) {
			$('#piName').css("background-color", "yellow");
			isOk = true;
		}
		if ($('#piEmail').val().trim().length == 0) {
			$('#piEmail').css("background-color", "yellow");
			isOk = true;
		}
		if ($('#piPhone').val().trim().length == 0) {
			$('#piPhone').css("background-color", "yellow");
			isOk = true;
		}
		if ($('#piTitle').val().trim().length == 0) {
			$('#piTitle').css("background-color", "yellow");
			isOk = true;
		}
		if ($('#piBranch').val() == "None") {
			$('#piBranch').css("background-color", "yellow");
			isOk = true;
		}
		if ($('#organismType').val() == "0") {
			$('#organismType').css("background-color", "yellow");
			isOk = true;
		}

		return isOk;
	}

	function clearGDSInfoBackgroud() {
		$('#projectTitle').css("background-color", "");
		$('#piName').css("background-color", "");
		$('#piEmail').css("background-color", "");
		$('#piPhone').css("background-color", "");
		$('#piTitle').css("background-color", "");
		$('#piBranch').css("background-color", "");
		$('#organismType').css("background-color", "");
	}

	$scope.createGDSP = function() {
		$('#collapseGDSP').collapse('show');
		var $gdsp = $('#loadedRequests');
		$('#refresh').val('0');
		clearRequiredFieldBackColor();
		resetRequestValue();
		$('#errorMessage').html('');
		$('#ccr_id').val('');
		$('#saved_id').val('');
		$('#regularSubmit').show();
		$('#resubmit').hide();
		$('#pre_comments_div1').hide();
		//load GDS information and fill them into GDSP form
		var data = {
			sysId: $('#hideGDSId').val()
		};
		var request = {
			method: 'GET',
			url: '/api/naci/gds/getProjectInformation',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			params: data
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result[0];
			//populate data into submission form
			loadGDSData(result);
			$('#inFirstName').val($('#piFirstName').val());
			$('#inLastName').val($('#piLastName').val());
			$('#inUserId').val($('#piUserId').val());
			$gdsp.modal('show').on('shown.bs.modal', function(el) {
				$(el.target).find('.modal-content').scrollTop(0);
			});
			console.log(result);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	};

	$scope.openIcQUestion = function() {
		$('#refresh').val('0');
		$('#collapseIC').collapse('show');
		cleanICData();
		$('#project_title').val($('#projectTitle').val());
		showSubmitButton('0');
		$('#icError').hide();
		clearICFieldBackground();
		$('#pre_comments_ic_div1').hide();

		$('#icQuestion').modal('show');
	}

	$scope.closeGDSPModal = function() {
		var $gdsp = $('#loadedRequests');
		$gdsp.modal('hide');
	}

	c.editItem = function(id) {
		$('#refresh').val('0');
		clearRequiredFieldBackColor();
		$('#inFirstName').val('');
		$('#inLastName').val('');
		$('#inUserId').val('');
		$('#pTitle').val('');
		$('#pBranch').val('None');
		$('#phone').val('');
		$('#email').val('');
		$('#investigator').val('');
		$('#errorMessage').html('');
		$('#pre_comments_div1').hide();
		$('#regularSubmit').show();
		$('#resubmit').hide(); 
		var data = {
			requested_id: id
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gdspapi/fetchSavedRequestData',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			showModal();
			$('#saved_id').val(id);
			$('#selectedUserData').val(result[0].requested_for);
			loadRequestData(result[0].value);
			console.log(result);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	};

	c.removeItem = function(id) {
		$('#refresh').val('0');
		var $confirm = $('#confirmDiv');
		$confirm.modal('show');
		$('#message').html("Are you sure you want to remove this record?");
		$('#btnYesConfirmYesNo').off('click').click(function() {
			var data = {
				saved_id: id,
				action: 'DELETE'
			};
			var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr) {
					xhr.setRequestHeader('X-UserToken', sessionId);
				},
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
			};
			$http(request).then(handleResponse, handleError);

			function handleResponse(response) {
				var result = response.data.result;
				$confirm.modal('hide');
				$('#loading').show();
				console.log(result);
			}

			function handleError(response) {
				console.error(response);
				$confirm.modal('hide');
				alert('ERROR');
			}
		});
		$('#btnNoConfirmYesNo').off('click').click(function() {
			$confirm.modal('hide');
		});
	};
	var userList = [];

	function addUser() {
		var firstname = $('#userFirstName').val();
		var lastname = $('#userLastName').val();
		var userId = $('#userId').val();
		var userData = userId + "+" + firstname + "+" + lastname;
		var gdsId = $('#recId').val();
		var access = $('input[name=access]:checked').val();
		if (firstname.trim().length == 0 || lastname.trim().length == 0 || userData.trim().length == 0) {
			$('#error').html('&lt;font color=red&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Please select a user and Accecss Control (click on the name from the list).&lt;/font&gt;');
			$('#error').show();
		} else {
			$('#error').hide();
			//save data into table u_gds_user_accress_t
			saveUserData(userData, gdsId, access);
			$('#userFirstName').val('');
			$('#userLastName').val('');
			$('#userName').val('');
			$("[name = 'access'][value='Read Only']").prop('checked', true);
		}
	};
	$scope.withdrawIC = function(id, ic_id) {
		$('#refresh').val('0');
		$('#messageWithdrawIC').html('Are you sure you want to withdraw this IC request?');
		$('#withdrawICDiv').modal('show');
		$('#btnYesWithdrawIC').off('click').click(function() {
			withdrawRequestIC(id, my_sys_id, ic_id);
			$('#withdrawICDiv').modal('hide');
			$('#loading').show();
		});
		$('#btnNoWithdrawIC').off('click').click(function() {
			$('#withdrawICDiv').modal('hide');
		});
	};

	function saveUserData(userData, gdsId, access) {
		var data1 = {
			data: userData,
			gds_id: gdsId,
			access: access,
			action: 'add'
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gds/saveUser',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: data1
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			loadUserData();
			$('#addUserAccessDiv').modal('hide');
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	$scope.searchUser = function() {
		$('#refresh').val('0');
		$('#first_name').val('');
		$('#last_name').val('');
		$('#userPageType').val('user');
		$('#userSelection').modal('show');
	};

	function loadGDSData(data) {
		$('#refresh').val('0');
		$('#investigator').val(data.piFirstName + " " + data.piLastName);
		$('#email').val(data.piEmail);
		$('#phone').val(data.piPhone);
		//$('#projectName').val(data.projectTitle);
		$('#pTitle').val(data.piTitle);
		$('#pBranch').val(data.piBranch);
		//get current date
		var today = new Date();
		var dd = today.getDate();
		var mm = today.getMonth() + 1; //January is 0!

		var yyyy = today.getFullYear();
		if (dd &lt; 10) {
			dd = '0' + dd;
		}
		if (mm &lt; 10) {
			mm = '0' + mm;
		}
		var currentDate = mm + '/' + dd + '/' + yyyy;
		$('#date').val(currentDate);
	}

	function loadParentOptionString() {
		$.ajax({
			url: '/api/naci/gds/getAllGDS',
			data: {
				gdsId: rec_id,
				userId: my_sys_id,
				method: 'individual'
			},
			async: false,
			dataType: 'json',
			complete: handleResponse,
			error: handleError
		});

		function handleResponse(response) {
			var result = response.responseJSON.result;
			var val = "";
			for (var i = 0; i &lt; result.length; i++) {
				val = val + "&lt;option value='" + result[i].number + "'&gt;" + result[i].number + "&lt;/option&gt;";
			}
			$('#selectParent').html(val);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	function loadData(rec_id) {
		loadSavedData(rec_id);
		loadParentOptionString();
		var request = {
			method: 'GET',
			url: '/api/naci/gds/getProjectInformation',
			headers: {
				'Content-Type': 'application/json'
			},
			params: {
				sysId: rec_id
			}
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			$('#projectTitle').val(result[0].projectTitle);
			$('#piFirstName').val(result[0].piFirstName);
			$('#piLastName').val(result[0].piLastName);
			$('#piUserId').val(result[0].piUserId);
			$('#piName').val(result[0].piFirstName + " " + result[0].piLastName);
			$('#piEmail').val(result[0].piEmail);
			$('#piTitle').val(result[0].piTitle);
			$('#piBranch').val(result[0].piBranch);
			$('#piPhone').val(result[0].piPhone);
			$('#organismType').val(result[0].organismType);
			$('#selectParent').val(result[0].parent.split(',')).change();//('change');
			var selectedParent = $('#selectParent').val();
			if (result[0].organismType == 'human' || result[0].organismType == 'both') {
				$('#icBtn').removeAttr('disabled');
			} else {
				$('#icBtn').attr('disabled', 'disabled');
			}
			if (result[0].erId == 'yes') {
				$('#erId1').prop("checked", true);
				$('#erBtn').removeAttr('disabled');
			}
			if (result[0].erId == 'no') {
				$('#erId2').prop("checked", true);
				$('#erBtn').attr('disabled', 'disabled');
			}
			$('#titleDiv').html("&lt;label&gt;&lt;b&gt;GDS ID: " + result[0].projectId + "&lt;/b&gt; &lt;lable&gt;");
			$('#titleDiv').show();
			$('#titleButtomDiv').html("&lt;label&gt;&lt;b&gt;GDS ID: " + result[0].projectId + "&lt;/b&gt; &lt;lable&gt;");
			$('#titleButtomDiv').show();
			$('#hideGDSId').val(rec_id);
			$('#gds_id').val(result[0].projectId);
			var gdsp_status = result[0].gdsp_status;
			var ic_status = result[0].ic_status;
			$('#gdspStatus').val(gdsp_status);
			$('#icStatus').val(ic_status);
			//load parent GDSP
			loadSubmittedData(gdsp_status, selectedParent);
			//load parent IC
			loadICSubmittedData(ic_status, selectedParent);

			$('#saveBt').hide();
			controlElementBasedOnAccess();
		}

		function loadSubmittedData(gdsp_status, selectedParent) {
			var request = {
				method: 'GET',
				url: '/api/naci/gds/getProjectGDSPInformation',
				headers: {
					'Content-Type': 'application/json'
				},
				params: {
					projectId: gdsp_status,
					parentId: selectedParent,
					mySysId: my_sys_id
				}
			};
			$http(request).then(handleResponse1, handleError1);

			function handleResponse1(response) {
				//set submitted GDSP data
				var result = response.data.result;
				c.data.submittedTasks = result;
				console.log(result);
			}

			function handleError1(response) {
				console.error(response);
				alert('ERROR');
			}
	  }	

	function loadICSubmittedData(ic_status, selectedParent) {
		var request = {
			method: 'GET',
			url: '/api/naci/gds/getProjectICInformation',
			headers: {
				'Content-Type': 'application/json'
			},
			params: {
				projectId: ic_status,
				parentId: selectedParent,
				mySysId: my_sys_id
			}
		};
		$http(request).then(handleResponse2, handleError2);

		function handleResponse2(response) {
			//set submitted GDSP data
			var result = response.data.result;
			c.data.icSubmittedTasks = result;
			console.log(result);
		}

		function handleError2(response) {
			console.error(response);
			alert('ERROR');
		}
	}
		function controlElementBasedOnAccess() {
			if (access == 'Read_Only') {
				$('#updateBt').hide();
				$('#accessBtn').attr('disabled', 'disabled');
				$('#gdspBt').attr('disabled', 'disabled');
				$('#icBtn').attr('disabled', 'disabled');
				$('#findBt').attr('disabled', 'disabled');
				$('#addBt').attr('disabled', 'disabled');
				$('#erBtn').attr('disabled', 'disabled');
			} else {
				$('#updateBt').show();
			}
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	function clearData() {
		$('#projectTitle').val('');
		$('#piName').val('');
		$('#piFirstName').val('');
		$('#piLastName').val('');
		$('#piEmail').val('');
		$('#piPhone').val('');
		$('#organismType').val('0');
		$('#erId2').prop("checked", true);
	}

	$('#brop-tabs a').click(function(e) {
		e.preventDefault();
		$(this).tab('show');
		$('#messageDiv').html();
		$('#messageDiv').hide();
	});

	function getProjectInfoData() {
		var names = ['projectTitle', 'piFirstName', 'piLastName', 'piEmail', 'piPhone', 'organismType', 'piUserId', 'piTitle', 'piBranch'];
		var radioName = "erId";
		var variables = {};
		var index = 0;
		for (index = 0; index &lt; names.length; index++) {
			var value = $('#' + names[index]).val();
			variables[names[index]] = value;
		}
		var radioValue = '';
		if ($('#erId1').is(":checked")) {
			radioValue = 'yes';
		}
		if ($('#erId2').is(":checked")) {
			radioValue = 'no';
		}
		variables.erId = radioValue;
		variables.user_name = user_name;
		var selectedParent = $('#selectParent').val();
		if (selectedParent == null) {
			selectedParent = "";
		} else {
			selectedParent = selectedParent.toString();
		}
		variables.parent = selectedParent;
		return [variables];
	}

	function resetRequestValue() {
		var i = 0;
		for (i = 0; i != names.length; i++) {
			if (textFields.indexOf(names[i]) != -1) {
				$('#' + names[i]).val('');
			} else {
				$('#' + names[i]).prop('checked', false);
				$('#' + names[i]).removeAttr("disabled");
			}
		}
		$('#withdrawCommentsId').val('');
		$('#withdrawSubmitId').val('');
		$('#saved_id').val('');
	}

	function clearRequiredFieldBackColor() {
		$('#investigator').css("background-color", "");
		$('#email').css("background-color", "");
		$('#phone').css("background-color", "");
		$('#date').css("background-color", "");
		$('#projectName').css("background-color", "");
		$('#simpleSize').css("background-color", "");
		$('#collectionTypeId').css("background-color", "");
		$('#dataId').css("background-color", "");
		$('#specifyOtherType').css("background-color", "");
		$('#data2Id').css("background-color", "");
		$('#arrayDataId').css("background-color", "");
		$('#genotypesId').css("background-color", "");
		$('#sequenceId').css("background-color", "");
		$('#analysisId').css("background-color", "");
		$('#spcifiedOtherAnalysis').css("background-color", "");
		$('#dataFormId').css("background-color", "");
		$('#dataRepositoryId').css("background-color", "");
		$('#specifiedRepository').css("background-color", "");
		$('#companionInfoId').css("background-color", "");
		$('#specifiedClinicalData').css("background-color", "");
		$('#specifiedProtocol').css("background-color", "");
		$('#specifiedInstrument').css("background-color", "");
		$('#specifiedCompanion').css("background-color", "");
		$('#dataSubmissionId').css("background-color", "");
		$('#psecifiedOtherSubmission').css("background-color", "");
		$('#dataUseId').css("background-color", "");
	}

	function toggleNoHumanData() {
		if ($('#noHumanData').is(":checked")) {
			$('#noLimitation').attr("checked", false);
			$('#noLimitation').attr("disabled", "disabled");
			$('#limitedOnly').attr("checked", false);
			$('#limitedOnly').attr("disabled", "disabled");
			$('#limitedPurpose').attr("checked", false);
			$('#limitedPurpose').attr("disabled", "disabled");
			$('#relateToDisease').attr("checked", false);
			$('#relateToDisease').attr("disabled", "disabled");
		} else {
			$('#noLimitation').removeAttr("disabled");
			$('#limitedOnly').removeAttr("disabled");
			$('#limitedPurpose').removeAttr("disabled");
			$('#relateToDisease').removeAttr("disabled");
		}
	}

	function showModal() {
		var $dataEntry = $('#loadedRequests');
		$dataEntry.modal('show').on('shown.bs.modal', function() {
			$('#loadedRequests .modal-content').scrollTop(0);
		});
	}

	function loadRequestData(data) {
		var namePair = data.split(",");
		var i = 0;
		for (i = 0; i != namePair.length; i++) {
			var item = namePair[i];
			if (item == '' || typeof item === "undefined") {} else {
				if (item.indexOf('=') != -1) {
					var small = item.split('=');
					if (small[0] == 'inFirstName') {
						$('#inFirstName').val(small[1]);
					} else if (small[0] == 'inLastName') {
						$('#inLastName').val(small[1]);
					} else if (small[0] == 'inUserId') {
						$('#inUserId').val(small[1]);
					} else {
						setRequestValue(small);
					}
				}
			}
		}

	}

	function setRequestValue(value) {
		var name = value[0];
		var val = value[1];
		if (textFields.indexOf(name) != -1) {
			if (name == 'date') {
				if (val == '' || val === "-undefined-undefined") {
					$('#' + name).val('');
				} else {
					$('#' + name).val(getConvertedValue(val, '1'));
				}
			} else {
				$('#' + name).val(val);
			}
		} else {
			if (val == "true") {
				$('#' + name).prop('checked', true);
				if (name == 'noHumanData') {
					toggleNoHumanData();
				}
			} else {
				$('#' + name).prop('checked', false);
			}
			otherFieldWatcher(name, val);
		}
	}

	function otherFieldWatcher(name, value) {
		var otherCheckbox = ['otherType', 'otherAnalysis', 'OtherRepository', 'clinicalData', 'protocol', 'instrument', 'otherCompanion', 'otherSubmission', 'yeast', 'bacteria', 'nonHuman', 'snpArrayData', 'expressionArray', 'methylationArray', 'arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna'];
		var otherField = ['specifyOtherType', 'spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument', 'specifiedCompanion', 'psecifiedOtherSubmission', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numSNP', 'numExpression', 'numMethylation', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh', 'numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
		var index = otherCheckbox.indexOf(name);
		if (index &gt;= 0) {
			if (value == 'true') {
				$('#' + otherField[index]).prop('disabled', false);
			} else {
				$('#' + otherField[index]).prop('disabled', true);
			}
		}
	}

	function getConvertedValue(value, flag) {
		if (value == '') {
			return '';
		}
		var values = '';
		if (flag == '0') {
			values = value.split('/');
			return values[0] + '-' + values[1] + '-' + values[2];
		} else {
			values = value.split('-');
			return values[0] + '/' + values[1] + '/' + values[2];
		}
	}

	$scope.viewSubmittedIC = function(id, ic_id) {
		$('#refresh').val('0');
		loadICDisplay('',id, ic_id, 'view');
	};

	function loadConsentGroupData() {
		var consentStr = $('#consent_group1').val();
		if (consentStr == null || typeof consentStr === 'undefined' || consentStr.trim().length == 0) {
			$('#consentGrpDiv').hide();
		} else {
			getConsentGroups(consentStr);
		}
	}

	function getConsentGroups(consentStr) {
		var request = {
			method: 'POST',
			url: '/api/naci/gds/fetchConsentGroupDataFromRequest',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: {
				consentGrp: consentStr
			}
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			var strTable = "&lt;table class='table table-bordered table-condensed table-hover' width='100%'&gt;&lt;tr bgcolor='lightgrey'&gt;&lt;th&gt;Collaborating Site Name&lt;/th&gt;&lt;th&gt;Data Use Limitation&lt;/th&gt;&lt;th&gt;Data Use Limitations Modifier&lt;/th&gt;&lt;/tr&gt;";
			for (var i = 0; i &lt; result.length; i++) {
				var use_limit = result[i].use_limit;
				if(result[i].data_field != null &amp;&amp; result[i].data_field.trim().length &gt; 0){
					use_limit = use_limit + " [ "+ result[i].data_field +" ] ";
				}
				strTable = strTable + "&lt;tr&gt;&lt;td&gt;" + result[i].site_name + "&lt;/td&gt;&lt;td&gt;" + use_limit + "&lt;/td&gt;&lt;td&gt;" + result[i].data_modifier + "&lt;/td&gt;&lt;/tr&gt;";
			}
			strTable = strTable + "&lt;/table&gt;";

			$('#consentContentDiv').html(strTable);
			$('#consentGrpDiv').show();
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	$scope.viewItem = function(id, gdsp_id) {
		$('#refresh').val('0');
		var data = {
			requestedid: id
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			cleanDisplayDiv();
			resetRequestValue1();
			$('#displayRequestId').html(gdsp_id);
			var variables = result.variables;
			var comments = result.comments;
			var comment_str = parse(comments);
			$('#commentReviewId1').empty();
			$('#commentReviewId1').append(comment_str);
			if (comment_str.length &lt; 137) {
				$('#pre_comments_div').hide();
				$('#comments_div').hide();
			} else {
				$('#pre_comments_div').show();
				$('#comments_div').hide();
			}
			loadSubmittedData(variables);
			$('#displayRequests').modal('show').on('shown.bs.modal', function() {
				$('#displayRequests .modal-content').scrollTop(0);
			});
			$('#closeButton').show();
			$('#submitButton').hide();
			$('#sd_div').hide();
		}

		function handleError(response) {
			console.error(response);
			//$confirm.modal('hide');
			alert('ERROR');
		}
	};
	$scope.report = function(id, gdsp_id) {
		$('#refresh').val('0');
		window.open('$sp.do?id=gdsp_report_page&amp;itemId=' + id + '&amp;ticket=' + gdsp_id, '_BLANK');
	};
	$scope.withdraw = function(id, gdsp_id) {
		$('#refresh').val('0');
		$('#messageWithdraw').html('Are you sure you want to withdraw this request?');
		$('#withdrawDiv').modal('show');
		$('#btnYesWithdraw').off('click').click(function() {
			withdrawRequest(id, my_sys_id, gdsp_id);
			$('#withdrawDiv').modal('hide');
			$('#loading').show();
		});
		$('#btnNoWithdraw').off('click').click(function() {
			$('#withdrawDiv').modal('hide');
		});
	};
	$scope.displayResubmit = function(request_id) {
		$('#refresh').val('0');
		var variables = {};
		variables.requestedid = request_id;
		var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: variables
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			$('#inUserId').val(result.request_for);
			var variables = result.variables;
			var comments = result.comments;
			var comment_str = parse(comments);
			$('#commentReviewId2').empty();
			$('#commentReviewId2').append(comment_str);
			$('#resubmitCommentsId').val(comments);
			if (comment_str.length &lt; 137) {
				$('#pre_comments_div1').hide();
				$('#comments_div').hide();
			} else {
				$('#pre_comments_div1').show();
				$('#comments_div').hide();
			}
			loadResubmittedData(variables);

			$('#ccr_id').val(request_id);
			$('#errorMessage').hide();
			$('#regularSubmit').hide();
			$('#resubmit').show();
			$('#loadedRequests').modal('show').on('shown.bs.modal', function() {
				$('#displayRequests .modal-content').scrollTop(0);
			});
		}

		function handleError(response) {
			console.error(response);
			$confirm.modal('hide');
			alert('ERROR');
		}

	}


	$scope.displayICResubmit = function(request_id) {
		$('#refresh').val('0');
		var variables = {};
		variables.requestedid = request_id;
		var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: variables
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			cleanICData();
			var result = response.data.result;
			var variables = result.variables;
			var comments = result.comments;
			var comment_str = parse(comments);
			$('#commentReviewICId2').empty();
			$('#commentReviewICId2').append(comment_str);
			$('#resubmitCommentsId').val(comments);

			if (comment_str.length &lt; 137) {
				$('#pre_comments_ic_div1').hide();
				//$('#comments_ic_div').hide();
			} else {
				$('#pre_comments_ic_div1').show();
				//$('#comments_ic_div').hide();
			}
			prepareResubmit(variables.sampleTime, variables.sampleConsent);
			loadResubmittedICData(variables);
			showSubmitButton('1');
			$('#ccr_id').val(request_id);
			$('#errorMessage').hide();
			$('#regularSubmit').hide();
			//$('#resubmit').show();		
			//tmp store request data 
			$('#consentGroupIds').val(variables.consent_group);
			$('#icForm').modal('show').on('shown.bs.modal', function() {
				$('#icForm .modal-content').scrollTop(0);
			});
		}

		function handleError(response) {
			console.error(response);
			$confirm.modal('hide');
			alert('ERROR');
		}

	}


	function loadResubmittedICData(data) {
		for (key in data) {
			if (key == 'data_access') {
				if (data[key] == 'unrestricted') {
					$("input[name=dataAccessBox][value='unrestricted']").prop("checked", true);
				}
				if (data[key] == 'controlled-access') {
					$("input[name=dataAccessBox][value='controlled-access']").prop("checked", true);
				}
			} else if (key == 'display') {
				if (data[key] == 'yes') {
					$('#displayBox').prop('checked', true);
				} else {
					$('#displayBox').prop('checked', false);
				}
			} else if (key == 'frequency') {
				if (data[key] == 'yes') {
					$('#frequenceBox').prop('checked', true);
				} else {
					$('#frequenceBox').prop('checked', false);
				}
			} else {
				$('#' + key).val(data[key]);
			}
		}
	}

	function prepareResubmit(sampleTime, sampleConsent) {
		$('#sample_time').val(sampleTime);
		$('#sample_consent').val(sampleConsent);
		if (sampleTime == 'no' &amp;&amp; sampleConsent == 'no') {
			$('#warning').modal('show');
		} else if (sampleTime == 'yes' &amp;&amp; sampleConsent == 'yes') {
			$('#institutionDiv').css("display", "none");
			$('#institutionNameDiv').css("display", "none");
			//$('#icForm').modal('show');
			//show form 1	
		} else if (sampleTime == 'yes' &amp;&amp; sampleConsent == 'no') {
			$('#institutionDiv').css("display", "block");
			$('#institutionNameDiv').css("display", "block");
			//$('#icForm').modal('show');
			//show form 2
		} else if (sampleTime == 'no' &amp;&amp; sampleConsent == 'yes') {
			$('#institutionDiv').css("display", "none");
			$('#institutionNameDiv').css("display", "none");
			//$('#icForm').modal('show');
			//show form 3
		} else {
			alert("Invalid Choice!");
		}

	}


	// Temp function for IC and Exception Request
	scope.tempFunc = function() {
		$('#refresh').val('0');
		alert("Coming soon!!");
	}

	//end of temp
	function withdrawRequestIC(id, my_sys_id, ic_id) {
		var variables = {};
		variables.requestedid = id;
		var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: variables
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			var variables = result.variables;
			var comments = result.comments;
			var data = getICData(variables, my_sys_id);
			data.comments = comments;
			data.gds_id = $('#hideGDSId').val()
			var icData = JSON.stringify(data);
			saveWithdrawICRequestData(icData, id, ic_id);
			$('#loading').hide();
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	function getICData(data, my_id) {
		var variables = {};
		variables.requested_for = my_sys_id;
		variables.value = '';
		variables.saved_id = ''; //id is for update?
		variables.opened_by = my_sys_id;
		variables.application = 'GDS_IC';
		var index = 0;
		for (key in data) {
			if (index != 0) variables.value += ',';
			variables.value += key + '=' + data[key];
			index++;
		}
		return variables;
	}


	function saveWithdrawICRequestData(icData, id, ic_id) {
		/*var request = {
            method: 'POST',
            url: '/api/naci/gdspapi/saveRequestData',
            beforeSend: function(xhr) {
                xhr.setRequestHeader('X-UserToken', sessionId);
            },
            headers: {
                'Content-Type': 'application/json'
            },
            data: icData
        };
        $http(request).then(handleResponse, handleError);

        function handleResponse(response) {
            var result = response.data.result;*/
		withdrawICDeletion(id, ic_id);
		/* }

        function handleError() {
            console.error(response);
            alert('ERROR');
        }*/
	}

	function withdrawICDeletion(id, ic_id) {
		var variables = {};
		variables.id = id;
		variables.method = 'withdraw';
		var request = {
			method: 'POST',
			url: '/api/naci/gdspapi/gsdspUtil',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: variables
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			removeICfromGDS(ic_id);
			console.log(result);
		}

		function handleError() {
			console.error(response);
			alert('ERROR');
		}
	}

	function removeICfromGDS(ic_id) {
		var param = {
			gds_id: $('#hideGDSId').val(),
			ic_number: ic_id,
			type: 'ic',
			method: 'remove'
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gds/updateGDS',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: param
		};
		$http(request).then(function(response) {
			var data = response.data.result;
			console.log("remove:" + data);
		});
	}

	var initialTime = null;
	var documentTimeout = 60 * 1000;
	var documentInterval = null;

	$scope.reportIC = function(sys_id, ic_id, flag) {
		$('#refresh').val('0');
		$('#loading').show();
		var req_id = sys_id;
		var fileName = '';
		if (flag == 'pi') {
			fileName = ic_id + "_pi.pdf";
		} else if (flag == 'sd') {
			fileName = ic_id + "_sd.pdf";
		}

		initialTime = new Date();
		documentInterval = setInterval(function() {
			getDocument(req_id, fileName);
		}, 5000);
	};

	function getDocument(req_id, fileName){
		var req = {
			method: 'GET',
			url: '/api/naci/gds/getAttachmentFileID',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			params: {
				request_id: req_id,
				file_name: fileName
			}
		};
		$http(req).then(handleResponse, handleError);

		function handleResponse(response) {
			if (new Date() - initialTime &gt; documentTimeout) {
				window.clearInterval(documentInterval);
				$('#messageInfo').html('Application fails to generate PDF document, please contact System Administrator');
				$('#infoModal').modal('show');
				$('#btnOkConfirm').off('click').click(function() {
					$('#infoModal').modal('hide');
				});
				return;
			}

			var result = response.data.result;
			//hightlight right record
			var id = result.file_id;
			if (id != null &amp;&amp; id.trim().length &gt; 0) {
				window.clearInterval(documentInterval);
				window.location.href = '/sys_attachment.do?sys_id=' + id;
				setTimeout(function(){}, 3000);
				$('#loading').hide();
			} 
		}

		function handleError(response) {
			window.clearInterval(documentInterval);
			$('#loading').hide();
			console.error(response);
			alert('ERROR');
		}			
	}

	function withdrawRequest(id, my_sys_id, gdsp_id) {
		var variables = {};
		variables.requestedid = id;
		var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: variables
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			var request_for = result.request_for;
			var open_by = result.opened_by;
			var variables = result.variables;
			var comments = result.comments;
			var data = getGDSPData(variables, request_for, open_by);
			data.comments = comments;
			data.gds_id = $('#hideGDSId').val();
			var gdspData = JSON.stringify(data);
			saveWithdrawRequestData(gdspData, id, gdsp_id);
			$('#loading').hide();
		}

		function handleError(response) {
			console.error(response);
			//$confirm.modal('hide');
			alert('ERROR');
		}
	}

	function saveWithdrawRequestData(data, id, gdsp_id) {

		/*var request = {
            method: 'POST',
            url: '/api/naci/gdspapi/saveRequestData',
            beforeSend: function(xhr) {
                xhr.setRequestHeader('X-UserToken', sessionId);
            },
            headers: {
                'Content-Type': 'application/json'
            },
            data: data
        };
        $http(request).then(handleResponse, handleError);

        function handleResponse(response) {
            var result = response.data.result;*/
		withdrawDeletion(id, gdsp_id);
		/*}

        function handleError() {
            console.error(response);
            alert('ERROR');
        }*/
	}

	function withdrawDeletion(id, gdsp_id) {
		var variables = {};
		variables.id = id;
		variables.method = 'withdraw';
		var request = {
			method: 'POST',
			url: '/api/naci/gdspapi/gsdspUtil',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: variables
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			removeGDSPfromGDS(gdsp_id);
			console.log(result);
		}

		function handleError() {
			console.error(response);
			alert('ERROR');
		}
	}

	function removeGDSPfromGDS(gdsp_id) {
		var param = {
			gds_id: $('#hideGDSId').val(),
			gdsp_number: gdsp_id,
			type: 'gdsp',
			method: 'remove'
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gds/updateGDS',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: param
		};
		$http(request).then(function(response) {
			var data = response.data.result;
			console.log("remove:" + data);
		});
	}

	function getGDSPData(data, request_id, open_id) {
		var variables = {};
		variables.requested_for = request_id;
		variables.opened_by = open_id;
		variables.value = '';
		variables.project_name = '';
		variables.saved_id = ''; //id is for update?
		variables.application = 'GDSP';
		var index = 0;
		var inName = '';
		for (key in data) {
			if (index != 0) variables.value += ',';
			if (key == 'investigator') {
				inName = data[key];
			}
			if (key == 'projectName') {
				variables.project_name = data[key];
			}
			variables.value += key + '=' + data[key];
			index++;
		}
		var temp = inName.split(' ');
		variables.value += ",inFirstName=" + temp[0];
		variables.value += ",inLastName=" + temp[1];
		variables.value += ",inUserId=" + request_id;
		return variables;
	}

	function cleanDisplayDiv() {
		$('#pre_comments_div').hide();
		$('#closeButton').hide();
		$('#comments_div').hide();
		$('#submitButton').hide();
	}

	function parse(allcomments) {
		var comments = allcomments.split("ENDCOMMENTS");
		var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
		for (i = 0; i &lt; comments.length; i++) {
			if (comments[i].length &gt; 40) {
				if (comments[i][0] == '\n') {
					var lastI = 0;
					while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n')
						lastI++;
					comments[i] = comments[i].substring(lastI, comments[i].length);
				}
				var t = comments[i].substring(0, 22);
				var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)') + 9, comments[i].length);
				var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57, comments[i].indexOf('(Additional comments)') + 65);
				var comm = comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)'));
				commentsblock = commentsblock + "&lt;tr&gt;";
				commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				commentsblock = commentsblock + "&lt;td&gt;" + results + "&lt;/td&gt;";
				commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				commentsblock = commentsblock + "&lt;/tr&gt;";
			}
		}
		commentsblock = commentsblock + "&lt;/table&gt;";
		return commentsblock;
	}

	function loadSubmittedData(data) {
		for (key in data) {
			var value = getValue(key, data[key]);
			$('#' + key + "1").html(value);
		}
	}

	function loadResubmittedData(data) {
		for (key in data) {
			setResubmitValue(key, data[key]);
		}

	}

	function getValue(name, value) {
		if (textFields.indexOf(name) != -1) {
			if (name == 'date') {
				return getConvertedValue(value, '1');
			} else {
				if (name == 'investigator') {
					var temp = value.split(' ');
					$('#inFirstName').val(temp[0]);
					$('#inLastName').val(temp[1]);
				}
				return value;
			}
		} else {
			if (value == "true") {
				return '&lt;input type="checkbox" id="' + name + '1" checked="true" disabled="true"/&gt;';
			} else {
				return '&lt;input type="checkbox" id="' + name + '1" disabled="true"/&gt;';
			}
			return value;
		}
	}

	function setResubmitValue(name, value) {
		if (textFields.indexOf(name) != -1) {
			if (name == 'date') {
				$('#' + name).val(getConvertedValue(value, '1'));
			} else {
				$('#' + name).val(value);
			}
		} else {
			if (value == "true") {
				$('#' + name).prop('checked', true);
			} else {
				$('#' + name).prop('checked', false);
			}
			otherFieldWatcher(name, value);
		}
	}

	function resetRequestValue1() {
		var i = 0;
		for (i = 0; i != names.length; i++) {
			if (textFields.indexOf(names[i]) != -1) {
				$('#' + names[i]).val('');
				$('#' + names[i] + "1").html('');
			} else {
				$('#' + names[i] + "1").html('&lt;input type="checkbox" id="' + names[i] + "1" + '" disabled="true"/&gt;');
				$('#' + names[i]).prop('checked', false);
				$('#' + names[i]).removeAttr("disabled");

			}
		}
		$('#withdrawCommentsId').val('');
		$('#withdrawSubmitId').val('');
		$('#saved_id').val('');
	}
	//watch dog
	spUtil.recordWatch($scope, "sc_req_item", "", function(name, data) {

		if($('#refresh').val() =='0'){
			spUtil.update($scope);
			loadSavedData($('#recId').val());
			setTimeout(function(){
				loadData($('#recId').val());
			}, 2000);
			$('#refresh').val('1');
		}
		$('#loading').hide();
	});
	//watch dog
	spUtil.recordWatch($scope, "u_gdsp_user_submission", "", function(name, data) {

		if($('#refresh').val() =='0'){
			spUtil.update($scope);
			loadSavedData($('#recId').val());
			loadData($('#recId').val());
			$('#refresh').val('1');
		}

		$('#loading').hide();
	});

	//client code for IC 

	$scope.viewICItem = function(id, sampleTime, sampleConsent) {
		$('#refresh').val('0');
		$('#type').val('exist');
		if (sampleTime == 'no' &amp;&amp; sampleConsent == 'no') {
			$('#warning').modal('show');
		} else if (sampleTime == 'yes' &amp;&amp; sampleConsent == 'yes') {
			$('#institutionDiv').css("display", "block");
			$('#institutionNameDiv').css("display", "block");
			$('#icForm').modal('show');
			//show form 1	
		} else if (sampleTime == 'yes' &amp;&amp; sampleConsent == 'no') {
			$('#institutionDiv').css("display", "block");
			$('#institutionNameDiv').css("display", "block");
			$('#icForm').modal('show');
			//show form 2
		} else if (sampleTime == 'no' &amp;&amp; sampleConsent == 'yes') {
			$('#institutionDiv').css("display", "block");
			$('#institutionNameDiv').css("display", "block");
			$('#icForm').modal('show');
			//show form 3
		} else {
			alert("Invalid Choice!");
		}
		clearICFieldBackground();
		cleanICData();
		resetConsentGrp();
		showSubmitButton('0');
		$('#pre_comments_ic_div1').hide();
		$('#icError').hide();
		//load IC data
		var icData = {
			requested_id: id
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gdspapi/fetchSavedRequestData',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: icData
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			$('#ic_id').val(id);
			$('#ic_id').trigger('custom_action');
			setICData(result);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	};

	$scope.clearUserData = function() {
		$('#refresh').val('0');
		$('#userFirstName').val('');
		$('#userLastName').val('');
		$('#selectedUserData').val('');
		loadUserData();
	};

	function setICData(data) {
		var variables = parseICData(data[0].value);
		var i = 0;
		for (i = 0; i &lt; icNames.length; i++) {
			if (icNames[i] == 'data_access') {
				if (variables[icNames[i]] == 'unrestricted') {
					$("input[name=dataAccessBox][value='unrestricted']").prop("checked", true);
				}
				if (variables[icNames[i]] == 'controlled-access') {
					$("input[name=dataAccessBox][value='controlled-access']").prop("checked", true);
				}
			} else if (icNames[i] == 'display') {
				if (variables[icNames[i]] == 'yes') {
					$('#displayBox').prop('checked', true);
				} else {
					$('#displayBox').prop('checked', false);
				}
			} else if (icNames[i] == 'frequency') {
				if (variables[icNames[i]] == 'yes') {
					$('#frequenceBox').prop('checked', true);
				} else {
					$('#frequenceBox').prop('checked', false);
				}
			} else {
				$('#' + icNames[i]).val(variables[icNames[i]]);
			}
		}
		$('#sample_time').val(variables.sampleTime);
		$('#sample_consent').val(variables.sampleConsent);
	}

	function resetConsentGrp() {
		$('#branch').val('NCI');
		$('#dataLimitation').val('None');
		$('#useTextField').val('');
		$('#useTextField').css('display', 'none');
		$('#useTextLabel').css('display', 'none');
		$('#dataModifier').val('');
		$('#consentErr').html("");
		$('#consentErr').css('display', 'none');
	}

	function parseICData(data) {
		var variables = {};
		var temp = data.split(",");
		var i = 0;
		for (i = 0; i &lt; temp.length; i++) {
			var val = temp[i].split("=");
			variables[val[0]] = val[1];
		}
		return variables;
	}

	function cleanICData() {
		$('#consentGroupIds').val('');
		$('#ic_id').val('');
		var i = 0;
		for (i = 0; i &lt; icNames.length; i++) {
			if (icNames[i] == 'gpa_organization' || icNames[i] == 'sd_organization') {
				$('#' + icNames[i]).val("none");
			} else {
				if (icNames[i] == 'certification_to') {
					$('#' + icNames[i]).val('Kathleen Calzone');
				} else if (icNames[i] == 'certification_from') {
					$('#' + icNames[i]).val('William Dahut');
				} else if (icNames[i] == 'data_access') {
					$("input[name='dataAccessBox'][value='controlled-access']").prop('checked', true);
				} else if (icNames[i] == 'display' || icNames[i] == 'frquency') {
					$('#displayBox').prop('checked', false);
					$('#frequenceBox').prop('checked', false);
				} else {
					$('#' + icNames[i]).val('');
				}
			}
		}
	}

	function clearICFieldBackground() {
		var i = 0;
		for (i = 0; i &lt; icNames.length; i++) {
			$('#' + icNames[i]).css('background-color', '');
		}
	}

	$scope.removeUser = function(sys_id) {
		$('#refresh').val('0');
		var $confirm = $('#userConfirmDiv');
		$confirm.modal('show');
		$('#messageDeleteUser').html("Are you sure you want to remove this user?");
		$('#btnYesConfirmUser').off('click').click(function() {
			deleteUser(sys_id);
			$confirm.modal('hide');
		});
		$('#btnNoConfirmUser').off('click').click(function() {
			$confirm.modal('hide');
		});
	};

	function deleteUser(sys_id) {
		var data2 = {
			sys_id: sys_id,
			action: 'delete'
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gds/saveUser',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: data2
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			loadUserData();
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	function showSubmitButton(indicator) {
		if (indicator == '0') {
			$('#regularICSubmit').show();
			$('#resubmitIC').hide();
		} else if (indicator == '1') {
			$('#regularICSubmit').hide();
			$('#resubmitIC').show();
		}
	}

	//er functions are here
	var ernames = ['er_investigator', 'er_email', 'er_phone', 'er_date', 'er_projectNumber', 'er_projectName', 'er_simpleSize', 'er_prospective', 'er_restrospective', 'er_human', 'er_nonHuman', 'er_germLine', 'er_somatic', 'er_dnaType', 'er_rnaType', 'er_microbiome', 'er_mitochrondria', 'er_otherType', 'er_specifyOtherType', 'er_snpArrayData', 'er_numSNP', 'er_expressionArray', 'er_numExpression', 'er_methylationArray', 'er_numMethylation', 'er_arrayDerive', 'er_microarrayData', 'er_sequenceData', 'er_somaticSnv', 'er_arrayCgh', 'er_wholeGenome', 'er_wholeExome', 'er_targetGenome', 'er_targetExome', 'er_wholeTranscriptome', 'er_targetTrabscriptome', 'er_epigenomicMark', 'er_sanger', 'er_rrna', 'er_association', 'er_arrayDerivedExpression', 'er_rnaExpression', 'er_derivedMethylation', 'er_otherAnalysis', 'er_spcifiedOtherAnalysis', 'er_individual', 'er_aggregate', 'er_notApplicableDataForm', 'er_orginId', 'er_version', 'er_rat', 'er_mouse', 'er_celegans', 'er_drosophila', 'er_yeast', 'er_yeastSpecies', 'er_bacteria', 'er_bacteriaSpecies', 'er_noHumanOther', 'er_numDerivedGenotype', 'er_numMicroarrayData', 'er_numSquenceData', 'er_numSomaticSnv', 'er_numArrayCgh', 'er_numWholeGenome', 'er_numWholeExome', 'er_numTargetGenome', 'er_numTargetedExome', 'er_numWholeTranscriptome', 'er_numTargetedTranscriptome', 'er_numEpigenomic', 'er_numSanger', 'er_numRrna', 'er_legalRestricton', 'er_describedLegal', 'er_informedConsent', 'er_otherJust', 'er_specifiedOtherJust', 'er_nonExistConsent', 'er_nonAddressConsent', 'er_nonAddressRisk', 'er_precludedConsent', 'er_otherConsent', 'er_specifiedOtherConsent', 'er_copyConsent', 'er_gpaAgreed', 'er_gpaDisagree', 'er_gpaUnclear', 'er_irbAgree', 'er_irbDisagree', 'er_alternative'];
	var ertextFields = ['er_investigator', 'er_email', 'er_phone', 'er_date', 'er_projectNumber', 'er_projectName', 'er_simpleSize', 'er_specifyOtherType', 'er_spcifiedOtherAnalysis', 'er_orginId', 'er_version', 'er_numSNP', 'er_numExpression', 'er_numMethylation', 'er_yeastSpecies', 'er_bacteriaSpecies', 'er_noHumanOther', 'er_numDerivedGenotype', 'er_numMicroarrayData', 'er_numSquenceData', 'er_numSomaticSnv', 'er_numArrayCgh', 'er_numWholeGenome', 'er_numWholeExome', 'er_numTargetGenome', 'er_numTargetedExome', 'er_numWholeTranscriptome', 'er_numTargetedTranscriptome', 'er_numEpigenomic', 'er_numSanger', 'er_numRrna', 'er_describedLegal', 'er_specifiedOtherJust', 'er_specifiedOtherConsent', 'er_alternative'];

	scope.createER = function() {
		$('#refresh').val('0');
		$('#collapseER').collapse('show');
		var $er = $('#loadedERRequests');
		clearErRequiredFieldBackColor();
		resetErRequestValue();
		$('#er_errorMessage').html('');
		$('#ccr_id').val('');
		$('#saved_id').val('');
		$('#regularSubmit').show();
		$('#resubmit').hide();
		//load GDS information and fill them into ER form
		var data = {
			sysId: $('#hideGDSId').val()
		};
		var request = {
			method: 'GET',
			url: '/api/naci/gds/getProjectInformation',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			params: data
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result[0];
			//populate data into submission form
			loadGDSDataForER(result);
			$('#erFirstName').val($('#piFirstName').val());
			$('#erLastName').val($('#piLastName').val());
			$('#erUserId').val($('#piUserId').val());
			$er.modal('show').on('shown.bs.modal', function(el) {
				$(el.target).find('.modal-content').scrollTop(0);
			});
			console.log(result);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	};

	function clearErRequiredFieldBackColor() {
		$('#er_investigator').css("background-color", "");
		$('#er_email').css("background-color", "");
		$('#er_phone').css("background-color", "");
		$('#er_date').css("background-color", "");
		$('#er_projectName').css("background-color", "");
		$('#er_simpleSize').css("background-color", "");
		$('#er_collectionTypeId').css("background-color", "");
		$('#er_dataId').css("background-color", "");
		$('#er_specifyOtherType').css("background-color", "");
		$('#er_data2Id').css("background-color", "");
		$('#er_arrayDataId').css("background-color", "");
		$('#er_genotypesId').css("background-color", "");
		$('#er_sequenceId').css("background-color", "");
		$('#er_analysisId').css("background-color", "");
		$('#er_spcifiedOtherAnalysis').css("background-color", "");
		$('#er_dataFormId').css("background-color", "");
		$('#er_dataRepositoryId').css("background-color", "");
		$('#er_specifiedRepository').css("background-color", "");
		$('#er_companionInfoId').css("background-color", "");
		$('#er_specifiedClinicalData').css("background-color", "");
		$('#er_specifiedProtocol').css("background-color", "");
		$('#er_specifiedInstrument').css("background-color", "");
		$('#er_specifiedCompanion').css("background-color", "");
		$('#er_dataSubmissionId').css("background-color", "");
		$('#er_psecifiedOtherSubmission').css("background-color", "");
		$('#er_dataUseId').css("background-color", "");
	}

	function resetErRequestValue() {
		var i = 0;
		for (i = 0; i != ernames.length; i++) {
			if (ertextFields.indexOf(ernames[i]) != -1) {
				$('#' + ernames[i]).val('');
			} else {
				$('#' + ernames[i]).prop('checked', false);
				$('#' + ernames[i]).removeAttr("disabled");
			}
		}
		$('#withdrawCommentsId').val('');
		$('#withdrawSubmitId').val('');
		$('#saved_id').val('');
	}

	function loadGDSDataForER(data) {
		$('#er_investigator').val(data.piFirstName + " " + data.piLastName);
		$('#er_email').val(data.piEmail);
		$('#er_phone').val(data.piPhone);
		$('#er_projectName').val(data.projectTitle);

		//get current date
		var today = new Date();
		var dd = today.getDate();
		var mm = today.getMonth() + 1; //January is 0!

		var yyyy = today.getFullYear();
		if (dd &lt; 10) {
			dd = '0' + dd;
		}
		if (mm &lt; 10) {
			mm = '0' + mm;
		}
		var currentDate = mm + '/' + dd + '/' + yyyy;
		$('#er_date').val(currentDate);
	}
	// ER function
	$scope.editERItem = function(id) {
		$('#refresh').val('0');
		clearERRequiredFieldBackColor();
		$('#erFirstName').val('');
		$('#erLastName').val('');
		$('#erUserId').val('');
		$('#er_errorMessage').html('');
		var data = {
			requested_id: id
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gdspapi/fetchSavedRequestData',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResponse, handleError);

		function handleResponse(response) {
			var result = response.data.result;
			showERModal();
			$('#saved_id').val(id);
			loadERData(result[0].value);
			console.log(result);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	};

	$scope.removeERItem = function(id) {
		$('#refresh').val('0');
		var $confirm = $('#confirmDiv');
		$confirm.modal('show');
		$('#message').html("Are you sure you want to remove this record?");
		$('#btnYesConfirmYesNo').off('click').click(function() {
			var data = {
				saved_id: id,
				action: 'DELETE'
			};
			var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr) {
					xhr.setRequestHeader('X-UserToken', sessionId);
				},
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
			};
			$http(request).then(handleResponse, handleError);

			function handleResponse(response) {
				var result = response.data.result;
				$confirm.modal('hide');
				console.log(result);
			}

			function handleError(response) {
				console.error(response);
				$confirm.modal('hide');
				alert('ERROR');
			}
		});
		$('#btnNoConfirmYesNo').off('click').click(function() {
			$confirm.modal('hide');
		});
	};

	$scope.viewUserAccess = function() {
		$('#refresh').val('0');
		$('#collapseUser').collapse('show');
	};
	$scope.createNewUserAccess = function(){
		$('#refresh').val('0');
		$('#collapseUser').collapse('show');
		$('#addUserAccessDiv').modal('show');

		$('#btnAddUserAccess').off('click').click(function() {
			addUser();
		});
		$('#btnCancelUserAccess').off('click').click(function() {
			$('#addUserAccessDiv').modal('hide');
		});
	};
	$scope.viewGDSP = function() {
		$('#refresh').val('0');
		$('#collapseGDSP').collapse('show');
	}
	$scope.viewIC = function() {
		$('#refresh').val('0');
		$('#collapseIC').collapse('show');
	}

	function clearERRequiredFieldBackColor() {
		$('#er_investigator').css("background-color", "");
		$('#er_email').css("background-color", "");
		$('#er_phone').css("background-color", "");
		$('#er_date').css("background-color", "");
		$('#er_projectName').css("background-color", "");
		$('#er_simpleSize').css("background-color", "");
		$('#er_collectionTypeId').css("background-color", "");
		$('#er_dataId').css("background-color", "");
		$('#er_specifyOtherType').css("background-color", "");
		$('#er_data2Id').css("background-color", "");
		$('#er_arrayDataId').css("background-color", "");
		$('#er_genotypesId').css("background-color", "");
		$('#er_sequenceId').css("background-color", "");
		$('#er_analysisId').css("background-color", "");
		$('#er_spcifiedOtherAnalysis').css("background-color", "");
		$('#er_dataFormId').css("background-color", "");
	}

	function showERModal() {
		var $erData = $('#loadedERRequests');
		$erData.modal('show').on('shown.bs.modal', function() {
			$('#loadedERRequests .modal-content').scrollTop(0);
		});
	}

	function loadERData(data) {
		var namePair = data.split(",");
		var i = 0;
		for (i = 0; i != namePair.length; i++) {
			var item = namePair[i];
			if (item == '' || typeof item === "undefined") {} else {
				if (item.indexOf('=') != -1) {
					var small = item.split('=');
					if (small[0] == 'erFirstName') {
						$('#erFirstName').val(small[1]);
					} else if (small[0] == 'erLastName') {
						$('#erLastName').val(small[1]);
					} else if (small[0] == 'erUserId') {
						$('#erUserId').val(small[1]);
					} else {
						setERValue(small);
					}
				}
			}
		}
	}

	function setERValue(value) {
		var name = value[0];
		var val = value[1];
		if (ertextFields.indexOf(name) != -1) {
			$('#' + name).val(val);
		} else {
			if (val == "true") {
				$('#' + name).prop('checked', true);
				if (name == 'er_notApplicableDataForm') {
					$('#er_individual').prop('disabled', true);
					$('#er_aggregate').prop('disabled', true);
				}
			} else {
				$('#' + name).prop('checked', false);
				if (name == 'er_notApplicableDataForm') {
					$('#er_individual').prop('disabled', false);
					$('#er_aggregate').prop('disabled', false);
				}
			}
			erOtherFieldWatcher(name, val);
		}
	}

	function erOtherFieldWatcher(name, value) {
		var otherCheckbox = ['er_otherType', 'er_otherAnalysis', 'er_yeast', 'er_bacteria', 'er_nonHuman', 'er_snpArrayData', 'er_expressionArray', 'er_methylationArray', 'er_arrayDerive', 'er_microarrayData', 'er_sequenceData', 'er_somaticSnv', 'er_arrayCgh', 'er_wholeGenome', 'er_wholeExome', 'er_targetGenome', 'er_targetExome', 'er_wholeTranscriptome', 'er_targetTrabscriptome', 'er_epigenomicMark', 'er_sanger', 'er_rrna', 'er_legalRestricton', 'er_otherJust', 'er_otherConsent'];
		var otherField = ['specifyOtherType', 'spcifiedOtherAnalysis', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numSNP', 'numExpression', 'numMethylation', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh', 'numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna', 'er_describedLegal', 'er_specifiedOtherJust', 'er_specifiedOtherConsent'];
		var index = otherCheckbox.indexOf(name);
		if (index &gt;= 0) {
			if (value == 'true') {
				$('#' + otherField[index]).prop('disabled', false);
			} else {
				$('#' + otherField[index]).prop('disabled', true);
			}
		}
	}

	function loadBranchOptionString() {
		$.ajax({
			url: '/api/naci/gds/getAllBranch',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			data: {},
			async: false,
			dataType: 'json',
			complete: handleResponse,
			error: handleError
		});

		function handleResponse(response) {
			var result = response.responseJSON.result;
			var val = "";
			for (var i = 0; i &lt; result.length; i++) {
				val = val + "&lt;option value='" + result[i].value + "'&gt;" + result[i].label + "&lt;/option&gt;";
			}
			$('#piBranch').html(val);
			$('#pBranch').html(val);
		}

		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}
	}
	$scope.viewSignIC = function(approval_id, request_id, ic_id){
		$('#refresh').val('0');
		loadICDisplay(approval_id,request_id, ic_id, 'sign');
	};

	function loadICDisplay(approval_id, request_id, ic_id, indicator){
		$('#displayICId').html(ic_id);
		var data = {
			requestedid: request_id
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gds/getSubmittedICRequestData',
			beforeSend: function(xhr) {
				xhr.setRequestHeader('X-UserToken', sessionId);
			},
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResp, handleErr);

		function handleResp(response) {
			var result = response.data.result;
			var comments = parse(result.comments);
			var variables = result.variables;
			var i = 0;
			for (i = 0; i &lt; icNames.length; i++) {
				if (icNames[i] == 'data_access') {
					if (variables[icNames[i]] == 'unrestricted') {
						$("input[name=dataAccessBox1][value='unrestricted']").prop("checked", true);
					} else {
						$("input[name=dataAccessBox1][value='controlled-access']").prop("checked", true);
					}
				} else if (icNames[i] == 'display') {
					if (variables[icNames[i]] == 'yes') {
						$('#displayBox1').prop('checked', true);
					} else {
						$('#displayBox1').prop('checked', false);
					}
				} else if (icNames[i] == 'frequency') {
					if (variables[icNames[i]] == 'yes') {
						$('#frequenceBox1').prop('checked', true);
					} else {
						$('#frequenceBox1').prop('checked', false);
					}
				} else if (icNames[i] == 'consent_group') {
					$('#' + icNames[i] + '1').val(variables[icNames[i]]);
				} else {
					$('#' + icNames[i] + '1').html(variables[icNames[i]]);
				}
			}
			$('#sample_time').val(variables.sampleTime);
			$('#sample_consent').val(variables.sampleConsent);
			$('#hiddenRequestId').val(request_id);
			$('#hiddenApprovalId').val(approval_id);
			if (comments.length &gt; 137) {
				$('#commentReviewICId1').html('');
				$('#commentReviewICId1').html(comments);
				$('#pre_comments_ic_div').show();
				$('#ic_modal_content').attr('style', 'height:800px; overflow-y:auto; overflow-x: hidden;')
			}
			$('#submitButton1').hide();
			if(indicator == 'sign'){
				$('#signButton1').show();
				$('#closeButton1').hide();
				$('#comments_ic_div').show();
			}else{
				$('#signButton1').hide();
				$('#closeButton1').show();
				$('#comments_ic_div').hide();
			}
			loadConsentGroupData();
			//if(variables.sampleTime == 'yes' &amp;&amp; variables.sampleConsent == 'no'){
			$('#insDiv').show();
			//}else{
			//	$('#insDiv').hide();
			//}
			$('#displayICRequests').modal('show').on('shown.bs.modal', function() {
				$('#displayICRequests .modal-content').scrollTop(0);
			});
		}

		function handleErr(response) {
			console.error(response);
			alert('ERROR');
		}
	}

	function saveUser(userData, gdsId, access){
		var data1 = {
			data: userData,
			gds_id: gdsId,
			access: access,
			action: 'add'
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gds/saveUser',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			data: data1
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}		
	}	

	function encodeDecodeData(data, flag){
		var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
								encode:function(e){
									var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);
									while(f&lt;e.length){
										n=e.charCodeAt(f++);
										r=e.charCodeAt(f++);
										i=e.charCodeAt(f++);
										s=n&gt;&gt;2;
										o=(n&amp;3)&lt;&lt;4|r&gt;&gt;4;
										u=(r&amp;15)&lt;&lt;2|i&gt;&gt;6;
										a=i&amp;63;
										if(isNaN(r)){
											u=a=64
										}else if(isNaN(i)){
											a=64
										}
										t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);
									}
									return t
								},
								decode:function(e){
									var t="";
									var n,r,i;
									var s,o,u,a;
									var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,"");
									while(f&lt;e.length){
										s=this._keyStr.indexOf(e.charAt(f++));
										o=this._keyStr.indexOf(e.charAt(f++));
										u=this._keyStr.indexOf(e.charAt(f++));
										a=this._keyStr.indexOf(e.charAt(f++));
										n=s&lt;&lt;2|o&gt;&gt;4;
										r=(o&amp;15)&lt;&lt;4|u&gt;&gt;2;
										i=(u&amp;3)&lt;&lt;6|a;
										t=t+String.fromCharCode(n);
										if(u!=64){
											t=t+String.fromCharCode(r);
										}
										if(a!=64){
											t=t+String.fromCharCode(i);
										}
									}
									t=Base64._utf8_decode(t);
									return t;
								},
								_utf8_encode:function(e){
									e=e.replace(/rn/g,"n");
									var t="";
									for(var n=0;n&lt;e.length;n++){
										var r=e.charCodeAt(n);
										if(r&lt;128){
											t+=String.fromCharCode(r);
										}else if(r&gt;127&amp;&amp;r&lt;2048){
											t+=String.fromCharCode(r&gt;&gt;6|192);
											t+=String.fromCharCode(r&amp;63|128)
										}else{
											t+=String.fromCharCode(r&gt;&gt;12|224);
											t+=String.fromCharCode(r&gt;&gt;6&amp;63|128);
											t+=String.fromCharCode(r&amp;63|128);
										}
									}
									return t;
								},
								_utf8_decode:function(e){
									var t="";
									var n=0;
									var r=0,c1=0,c2=0;
									while(n&lt;e.length){
										r=e.charCodeAt(n);
										if(r&lt;128){
											t+=String.fromCharCode(r);
											n++;
										}else if(r&gt;191&amp;&amp;r&lt;224){
											c2=e.charCodeAt(n+1);
											t+=String.fromCharCode((r&amp;31)&lt;&lt;6|c2&amp;63);
											n+=2;
										}else{
											c2=e.charCodeAt(n+1);
											c3=e.charCodeAt(n+2);
											t+=String.fromCharCode((r&amp;15)&lt;&lt;12|(c2&amp;63)&lt;&lt;6|c3&amp;63);
											n+=3;
										}
									}
									return t;
								}
							 };

		var result = '';
		if(flag == 'encode'){
			result = Base64.encode(data);
		}else if(flag == 'decode'){
			result = Base64.decode(data);
		}else{
			result = 'ERROR Method';
		}

		return result;
	}
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;/*disable bk logo */
.bk-logo-small {
   display:none;
}

.home-link{
	color:#3071a9;
}

.nav-tabs {
    width: 100%;
    float: left;
    border-bottom-color: #d9d9d9;
}

.nav-tabs&amp;gt;li a {
    text-align: center;
    border-width: 1px 1px 0 1px;
    border-style: solid;
    border-color: #e0e0e0;
    background: #f2f2f2;
    color: #444444;
}

.nav-tabs&amp;gt;li a:hover {
    background: #F9F9F9;
    border-color: #d9d9d9;
}

.nav-tabs&amp;gt;li.active a, .nav-tabs&amp;gt;li.active:hover a {
    background: white;
    border-color: #d9d9d9;
    border-bottom-color: transparent;
    font-weight: bold;
    color: #444444;
}

.instructions {
    text-align: center;
    padding: 10px 0;
}

.tabs-dropdown .dropdown-toggle {
    border-width: 1px 1px 0 1px;
    border-style: solid;
    border-color: #e0e0e0;
    border-radius: 4px 4px 0 0;
    color: #444444;
    background: #f2f2f2;
}

.tab-content {
    padding: 10px;
    width: 100%;
    min-height: 300px;
    -webkit-overflow-scrolling: touch;
    background: white;
    border-width: 0 1px 1px 1px;
    border-style: solid;
    border-color: #d9d9d9;
    border-radius: 0 0 4px 4px;
    overflow: hidden;
}

.tab-content .tab-pane {
    color: #566473;
}

@media ( max-width : 480px) {
    .nav-tabs&amp;gt;li {
        float: none;
        border: 1px solid #dddddd;
    }
    .nav-tabs&amp;gt;li.active&amp;gt;a {
        border: none;
    }
    .nav&amp;gt;li&amp;gt;a:hover, .nav&amp;gt;li&amp;gt;a:focus, .nav-tabs&amp;gt;li.active&amp;gt;a, .nav-tabs&amp;gt;li.active&amp;gt;a:hover,
        .nav-tabs&amp;gt;li.active&amp;gt;a:focus {
        background: none;
        border: none;
    }
}

/* Reset bootstrap table*/
.table &amp;gt; thead &amp;gt; tr &amp;gt; th,
.table &amp;gt; tbody &amp;gt; tr &amp;gt; td,
.table &amp;gt; tfoot &amp;gt; tr &amp;gt; th {
    border-top: 0px;
    border-bottom: 0px;
}
}

.left td {
    text-align:left;
}
.right td {
   text-align:right;
}
.ldpair-results {
    text-align:center;
    border: 1px solid #ddd;
}

.center-align {
    margin: 0 auto !important;
    float: none !important;
}

.spacer {
    width:10%;
}


td.cell-right {
    text-align: right;
}
td.cell-left {
    text-align: left;
}

td.cell-center {
    text-align: center;
}

.cell-height-small {
    height: 10px;
    padding:0px;
}

.btn-file {
  position: relative;
  overflow: hidden;
}

.btn-file input[type=file] {
  position: absolute;
  top: 0;
  right: 0;
  min-width: 100%;
  min-height: 100%;
  font-size: 100px;
  text-align: right;
  filter: alpha(opacity=0);
  opacity: 0;
  background: red;
  cursor: inherit;
  display: block;
}

input[readonly] {
  background-color: white !important;
  cursor: text !important;
}
/*
table.ldhap,table.ldhap tr, table.ldhap th {
  background-color: white !important;
}
*/
.container {
  background-color: white;
}
.two-by-two {
  margin-bottom:0px;
  width:100%;
}

.jumbotron {
  background-color:white;
  padding:10px 15px;
}

table.fixed {
    table-layout:fixed;
    width:400px;
    margin-bottom:15px;
}
table.fixed td {
    overflow: hidden;
}

table thead td {
  font-weight:bold;
  text-align: center;
}

.font-weight-bold {
  font-weight:bold;
}

img.logo {
    max-height:150px;
}


img.loading {
    height:107px;
    max-height:10%;
    display: block;
    margin-left: auto;
    margin-right: auto;
}

img.graph-legend {
  display:block;
  margin-left: auto;
  margin-right: auto;
}

.multiselect-container &amp;gt; li {
    padding-left: 50px;
}
.multiselect-item.multiselect-all {
    padding-left: 0px;
    text-decoration: underline;
}
.multiselect-item.multiselect-group {
    padding-left: 30px;
}
.has-feedback .form-control {
    padding-right: 0px;
}
.multiselect-container &amp;gt; li.multiselect-group-clickable label {
    text-decoration: underline;
}
/* Tighten up snpchip platform list only*/
/*   .btn-ldlink-multiselec  */
.multiselect-container &amp;gt; li &amp;gt; a &amp;gt; label {
    padding: 0px 20px 0px 40px;
}

.form-control-feedback {
    top: 0;
    right: -15px;
}

/* Placeholder Style */
::-webkit-input-placeholder {
   font-size: 90%;
}

:-moz-placeholder { /* Firefox 18- */
   font-size: 90%;
}

::-moz-placeholder {  /* Firefox 19+ */
   font-size: 90%;
}

:-ms-input-placeholder {
    font-size: 90%;
}


.ffWarning {
    display: none;
}
/*
.bk-plot-canvas-wrapper {
    max-width:900px;
    overflow-x: scroll;
}
*/

.haplotype {
    color: black;
    background:#C0C0C0; /* if a multiple grouped */ 
}

/* LDhap Heat Map - Version 4 */
/* Pastel Colors light red, light orage, light blue, and light green */
/* Color Code: http://paletton.com/palette.php?uid=7000u0klLMWnHN3kBNFgZMYgZMY */

.overflowx {
    overflow-x:auto;
}
.overflowy {
    overflow-y:auto;
}

.whats_new {
    height:200px;
    border:1px solid #566473;
    overflow-y:auto;
    margin-bottom:25px;
}

.table {
    min-width: 0;
    display: table;
}
.left-c {   width:auto;
    display: inline-block;
    vertical-align: top;
}
.right-c {
    min-width:300px;
    width:65%;
    display: inline-block;
    vertical-align: top;
}


.left-c &amp;gt; table &amp;gt; tfoot &amp;gt; tr &amp;gt; td,
.right-c &amp;gt; table &amp;gt; tfoot &amp;gt; tr &amp;gt; td {
    font-weight:bold;
}


/* New stuff */

/* Header and Footer */
.header img {
    /*
    width: 60%;
    */
}
.header h4 {
    color: #fff;
    line-height: 0.5em;
}
.footer {
    bottom: 0;
    color: #444;
    padding: 25px 0;
}
.footer ul {
    text-align: center;
}
.footer ul li a {
    color: #444;
}
hr.header {
    border-top: 0.5em solid #bb0e3d;
    margin: 0;
}


caption {
    font-weight:bold;
}


/* Rotate the text on SNPchip table */
th.rotate {
  /* Something you can count on */
  height: 142px;
  white-space: nowrap;
}

th.rotate &amp;gt; div {
  transform: 
    translate(0px, 51px)
    rotate(270deg);
  width: 20px;
}
th.rotate &amp;gt; div &amp;gt; span {
  /*border-bottom: 1px solid #ccc;*/
  /*padding: 5px 10px;*/
}
/* These aren't needed and will be weird if transforms don't work */
.csstransforms &amp;amp; th.rotate {
  height: 142px;
  white-space: nowrap;
}


span.formw &amp;gt; label {
    margin-bottom: 0px;
    font-family: "Lucida Grande",Verdana,Arial,sans-serif;
    font-size: normal;
}

.platform-checkbox {
    padding: 0.2em 0.6em 0.3em;
}

/* From style.css
https://www.broadinstitute.org/mpg/snap/ldsearch.php */

.bolded {
    font-weight: bold;
}
.underlined {
    border-bottom: 1px dotted gray;
}
fieldset#columnAcheckbox {
    min-width: 450px;
}
fieldset#columnAcheckbox div.row span.label, fieldset#columnBcheckbox div.row span.label, fieldset.fullwidthcheckbox div.row span.label {
    padding-top: 1px;
    width: 20px;
}
fieldset#columnBcheckbox {
    min-width: 365px;
}
fieldset div.row span.formw select.yesno {
    width: 80px;
}
/* Custom */

fieldset#columnAcheckbox &amp;gt; div.row,
fieldset#columnBcheckbox &amp;gt; div.row {
    margin-left:15px;
    margin-bottom:-12px;
    font-weight:lighter;
    color: #333;
    font-family: "Lucida Grande",Verdana,Arial,sans-serif;
    font-size: smaller;
}


textarea:valid, .ok {
    color: #555;
}
textarea:invalid, .error {
    color: red;
}
.panel-body &amp;gt; h1 {
    font-size: 1.7em;
}
/* Testing */
@media screen and (max-width: 767px) {
  .dataTables_wrapper .dataTables_info,
  .dataTables_wrapper .dataTables_paginate {
    float: none;
    text-align: center; }
  .dataTables_wrapper .dataTables_paginate {
    margin-top: 0.5em; } 
}
@media screen and (max-width: 640px) {
  .dataTables_wrapper .dataTables_length,
  .dataTables_wrapper .dataTables_filter {
    float: none;
    text-align: center; }
  .dataTables_wrapper .dataTables_filter {
    margin-top: 0.5em; } 
}
.legend{
/* css for agreement*/
font-family: Arial, Helvetica, sans-serif;
font-size:14px;
color:#566473;
font-weight: bold;
}

.overlay{
  opacity:0.5;
  background:white;
  pointer-events: none
}

.tools-owner-title {
    padding-top: 5px;
    padding-bottom: 5px;
    background-color: #F5FAFF;
    color: #0C5C97;
}

.ui-dialog.ui-widget.ui-widget-content {
	background:white; /* and no special background for the dialog */
}
.ui-widget-overlay.ui-front { /* you want this */
	opacity:.10;
}
.modal-dialog1 {
    width: 900px;
    margin: 30px auto;
    position: relative;
}

.form-control1 {
    display: block;
    width: 20%;
    height: 30px;
    padding: 6px 12px;
    font-size: 14px;
    line-height: 1.42857;
    color: #555555;
    background-color: #fff;
    background-image: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
}

.overlay {
  position: fixed; 
  width: 100%; 
  height: 100vh; 
  background-color: white; 
  opacity: 0.9; 
  z-index: 9999; 
  top: 0; 
  left: 0;
  
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}



.spinner {
  animation: spin 2s infinite linear;
}

/** spin animation */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-main-content&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS main content&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;true&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	data.access = '';
	var userName = '';
	  var user_item = new GlideRecord('sys_user');
        user_item.addQuery('sys_id', my_sys_id);
        user_item.query();
        user_item.next();
	if(user_item != null){
	   userName = user_item.last_name + ", " + user_item.first_name;
	}

	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		userName: userName
	};

	data.tasks = [];
	data.userTasks = [];
	data.icSubmittedTasks=[];
	
	data.submittedTasks = [];
	data.icTasks = [];
	data.icSignTasks = [];
	
	//get PI sign record
			var gr1 = new GlideRecord("sc_cat_item");
				gr1.addQuery("short_description", "CCR GDSP Intramural Certification");
				gr1.query();	
				gr1.next();
				var cat_item_id = gr1.getValue('sys_id');


			 var gr_approval_items = GlideRecord('sysapproval_approver');
			 var req_item = gr_approval_items.addJoinQuery('sc_req_item','document_id','sys_id');
			 req_item.addCondition('cat_item', cat_item_id);
       gr_approval_items.addQuery('approver', my_sys_id); 
			 //gr_approval_items.addQuery('document_id.request.requested_for', my_sys_id);
			 gr_approval_items.addQuery('source_table','sc_req_item'); 
			 gr_approval_items.orderByDesc('sys_updated_on');  
			 gr_approval_items.query();
			 while (gr_approval_items.next()){
				 var orginId = '';
				 var tickerNum = '';
				 var org_ticket_num = '';
				 var version = '';
				 var hasParent = '';
				 var selectedOrginId = '';

				 var docId = gr_approval_items.document_id;

				 selectedOrginId = gr_approval_items.document_id.contact_type;
				 if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web' ){
							orginId = gr_approval_items.document_id.sys_id;
							org_ticket_num = gr_approval_items.document_id.number;
							hasParent = 'false';
					}else{
						 var orgIds = selectedOrginId.split("=");
						 var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
						 gr_tracking_item.addQuery('u_orgid',orgIds[0]);
						 gr_tracking_item.query();

						 if(gr_tracking_item.getRowCount() &gt; 0){
									gr_tracking_item.next();
									orginId = gr_tracking_item.u_orgid;
									org_ticket_num = gr_tracking_item.u_ticket_number;
									version = orgIds[1];
									hasParent = 'true';
						 }else {
									orginId = gr_approval_items.document_id.sys_id;
									org_ticket_num = gr_approval_items.document_id.number;
									hasParent = 'false';
						 }
					}

					var ticket_number = '';
					if(hasParent == 'true'){
							ticket_number = 'CCR_IC' + org_ticket_num.substring(8) + '-' + version;
					}else{
							ticket_number = "CCR_IC" + gr_approval_items.sysapproval.number.substring(8);
					}

					var stage_v = gr_approval_items.document_id.context.stage.name;		
							
					if(stage_v == 'Wait for PI to Sign'){
					   var items = {};
									items.ic_id = ticket_number;
									items.study_name = gr_approval_items.document_id.variables.study_name.toString();
									items.project_title = gr_approval_items.document_id.variables.project_title.toString();
									items.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
									items.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
									items.status = gr_approval_items.document_id.context.stage.name.toString();
									items.last_update_date = gr_approval_items.sys_updated_on.toString();
									items.stage = stage_v.toString();
									items.sys_id = gr_approval_items.sys_id.toString();
									items.doc_id = gr_approval_items.document_id.toString();
									items.state = gr_approval_items.state.toString();					
						 data.icSignTasks.push(items);
					}
			}
	//end of PI sign Record 

	/*var gr_ic_sign_items = new GlideRecord('sc_req_item');
	    gr_ic_sign_items.addQuery('requested_for', my_sys_id);
	    gr_ic_sign_items.addQuery()*/
	
	var ernames=['er_investigator','er_email','er_phone', 'er_date', 'er_projectNumber', 'er_projectName', 'er_simpleSize','er_prospective', 'er_restrospective', 'er_human', 'er_nonHuman', 'er_germLine','er_somatic', 'er_dnaType', 'er_rnaType',  'er_microbiome', 'er_mitochrondria', 'er_otherType', 'er_specifyOtherType', 'er_snpArrayData', 'er_numSNP', 'er_expressionArray', 'er_numExpression','er_methylationArray', 'er_numMethylation','er_arrayDerive', 'er_microarrayData', 'er_sequenceData', 'er_somaticSnv', 'er_arrayCgh', 'er_wholeGenome', 'er_wholeExome', 'er_targetGenome', 'er_targetExome', 'er_wholeTranscriptome', 'er_targetTrabscriptome', 'er_epigenomicMark', 'er_sanger', 'er_rrna', 'er_association', 'er_arrayDerivedExpression', 'er_rnaExpression', 'er_derivedMethylation', 'er_otherAnalysis', 'er_spcifiedOtherAnalysis', 'er_individual', 'er_aggregate', 'er_notApplicableDataForm', 'orginId', 'version','er_rat', 'er_mouse', 'er_celegans', 'er_drosophila', 'er_yeast', 'er_yeastSpecies', 'er_bacteria', 'er_bacteriaSpecies','er_noHumanOther', 'er_numDerivedGenotype', 'er_numMicroarrayData', 'er_numSquenceData', 'er_numSomaticSnv', 'er_numArrayCgh','er_numWholeGenome', 'er_numWholeExome', 'er_numTargetGenome', 'er_numTargetedExome', 'er_numWholeTranscriptome', 'er_numTargetedTranscriptome', 'er_numEpigenomic', 'er_numSanger', 'er_numRrna','er_legalRestricton', 'er_describedLegal', 'er_informedConsent','er_otherJust', 'er_specifiedOtherJust','er_nonExistConsent','er_nonAddressConsent', 'er_nonAddressRisk','er_precludedConsent','er_otherConsent', 'er_specifiedOtherConsent', 'er_copyConsent', 'er_gpaAgreed', 'er_gpaDisagree', 'er_gpaUnclear','er_irbAgree', 'er_irbDisagree', 'er_alternative']; 
	data.erTasks = [];
	var gr_er_items = new GlideRecord('u_gdsp_user_submission');
		  gr_er_items.addQuery('u_userid', my_sys_id);
	    gr_er_items.addQuery('u_application', 'GDS_ER');
		  gr_er_items.orderByDesc('sys_updated_on');
		  gr_er_items.query();
	while (gr_er_items.next()){
		var er = {};
		er.sys_create_on = gr_er_items.getValue('sys_created_on');	
		er.requested_for =  gr_er_items.getValue('u_apply_for_id');	
		var er_value = gr_er_items.getValue('u_value');
		var er_temp = er_value.split(",");
		var er_Value = {};
		var er_index = 0;
		for(er_index = 0; er_index &lt; er_temp.length; er_index++){
         var er_vals = er_temp[er_index].split("=");
			   er_Value[er_vals[0]] = er_vals[1];
		}
		for(er_index = 0; er_index &lt; ernames.length; er_index++){
			er[ernames[er_index]] = er_Value[ernames[er_index]];
		}
		er.project_name = er.er_projectName;
		er.investigator = er.er_investigator;
	  er.sys_id = gr_er_items.getDisplayValue("sys_id");
		data.erTasks.push(er);
	}	
	
})();

]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-03-31 16:20:02&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;6f829e9adbf1b20054d8ff621f961937&lt;/sys_id&gt;&lt;sys_mod_count&gt;2193&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS main content&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_6f829e9adbf1b20054d8ff621f961937&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-27 18:02:57&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;br/&gt;
&lt;div&gt;
    &lt;div class="col-md-12" id="messageDiv" style="display:none;"&gt;&lt;/div&gt;
    &lt;!--&lt;div class="col-md-12"&gt;
      &lt;input type="button" class="btn btn-primary btn-sm active pull-right" ng-click="backToMain()" value="Home" /&gt;
    &lt;/div&gt;--&gt;
    &lt;div class="col-md-12"&gt;&lt;label&gt;&lt;a href='' class="home-link" ng-click='backToMain()'&gt; Home &amp;nbsp;&amp;nbsp; &gt; &amp;nbsp;&amp;nbsp; &lt;/a&gt;&lt;/label&gt;&lt;span style="display:none;" id="titleDiv"&gt;&lt;/span&gt;&lt;/div&gt;
    &lt;div class="col-md-12 panel-box"&gt;
        &lt;div class="panel panel-success panel-area"&gt;
            &lt;div class="panel-heading panel-header" id="heading_project" role="tab"&gt;
                &lt;h4 class="panel-title"&gt;
                    &lt;a aria-controls="collapseProject" aria-expanded="true" data-target="#collapseProject" data-toggle="collapse" role="button"&gt;
                  &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
                  Project Information&lt;/a&gt;&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div aria-labelledby="heading_project" class="panel-collapse collapse in" id="collapseProject" role="tabpanel"&gt;
                &lt;div class="tab-content grey-border"&gt;
                    &lt;div class="tab-pane active" id="projectInfo"&gt;
                        &lt;div class="col-md-12" id="gdsErrorDiv" style="display:none"&gt;
                            &lt;font color='#B22222'&gt;
                                &lt;li&gt;Please complete all required fields&lt;/li&gt;
                            &lt;/font&gt;
                        &lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;
                            &lt;div class="col-md-2" label&gt;
                                &lt;label for="projectTitle"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Project Title&lt;/label&gt;&lt;/div&gt;
                            &lt;div class="col-md-10"&gt;&lt;input type="text" class="form-control" id="projectTitle"/&gt;&lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;
                            &lt;div class="col-md-2"&gt;
                              &lt;font color='#B22222'&gt;*&lt;/font&gt;&lt;label for="piName"&gt;PI Name&lt;/label&gt;&lt;/div&gt;
                            &lt;div class="col-md-4"&gt;&lt;input id="piName" class="form-control"&gt;&lt;/div&gt;
                            &lt;input type='hidden' id='piFirstName' /&gt;
                            &lt;input type='hidden' id='piLastName' /&gt;
                            &lt;input type="hidden" id="piUserId" /&gt;
                        &lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;
                            &lt;div class="col-md-2"&gt;
                              &lt;font color='#B22222'&gt;*&lt;/font&gt;&lt;label for="piEmail"&gt;PI Email&lt;/label&gt;&lt;/div&gt;
                            &lt;div class="col-md-4"&gt;&lt;input type="text" class="form-control" id="piEmail" /&gt;&lt;/div&gt;
                            &lt;div class="col-md-2"&gt;
                              &lt;font color='#B22222'&gt;*&lt;/font&gt;&lt;label for="piPhone"&gt;PI Phone&lt;/label&gt;&lt;/div&gt;
                            &lt;div class="col-md-4"&gt;&lt;input type="text" class="form-control" id="piPhone" /&gt;&lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;
                            &lt;div class="col-md-2"&gt;
                              &lt;font color='#B22222'&gt;*&lt;/font&gt;&lt;label for="piTitle"&gt;PI Title&lt;/label&gt;&lt;/div&gt;
                            &lt;div class="col-md-4"&gt;&lt;input type="text" class="form-control" id="piTitle" /&gt;&lt;/div&gt;
                            &lt;div class="col-md-2"&gt;
                              &lt;font color='darkred'&gt;*&lt;/font&gt;&lt;label for="piBranch"&gt;PI Branch&lt;/label&gt;&lt;/div&gt;
                            &lt;div class="col-md-4"&gt;&lt;select id="piBranch" class="form-control"&gt;&lt;/select&gt;&lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;
                            &lt;div class="col-md-2"&gt;
                              &lt;font color='#B22222'&gt;*&lt;/font&gt;&lt;label for="organismType"&gt;Organism Type&lt;/label&gt;&lt;/div&gt;
                            &lt;div class="col-md-4"&gt;
                                &lt;select id="organismType" class="form-control"&gt; 
                                  &lt;option value="0"&gt;Please select a type&lt;/option&gt;
                                  &lt;option value="human"&gt;Human&lt;/option&gt;
                                  &lt;option value="nonhuman"&gt;Non-Human&lt;/option&gt;
                                  &lt;option value="both"&gt;Both Human and Non-Human&lt;/option&gt;
                                &lt;/select&gt;
                            &lt;/div&gt;
                          	&lt;!--
                            &lt;div class="col-md-4"&gt;
                              &lt;font color='#B22222'&gt;*&lt;/font&gt;&lt;label id="erId"&gt;Do you want to submit a GDS Exception Request?&lt;/label&gt;
                          	&lt;/div&gt;
                            &lt;div class="col-md-2"&gt;&lt;input type="radio" name="er" id="erId1" value="yes" aria-labelledby="erId"/&gt; &amp;nbsp; Yes &amp;nbsp; &lt;input type="radio" name="er" id="erId2" value="no" checked="checked" aria-labelledby="erId"/&gt; &amp;nbsp;No
                            &lt;/div&gt;
							--&gt;
                      	&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;
                          &lt;div class="col-md-2"&gt;&lt;label for="selectParent"&gt;Parent Project&lt;/label&gt;&lt;/div&gt;
                            &lt;div class='col-md-4'&gt;
                                &lt;select id="selectParent" class="selectpicker" multiple&gt;
                        &lt;/select&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;
                        &lt;div class="col-md-12" align='right' id="saveBt"&gt;
                            &lt;input type="button" class="btn btn-primary active pull-right" style="width: 70px; text-align: center;" ng-click="saveProjectInformation(0)" value="Save" /&gt;
                        &lt;/div&gt;
                        &lt;div class="col-md-12" id="updateBt" style="display:none"&gt;
                            &lt;input type="button" class="btn btn-primary active pull-right" style="width: 70px; text-align: center;" ng-click="saveProjectInformation(1)" value="Update" /&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- User Access Tab content --&gt;

        &lt;div class="panel panel-success panel-area" id="acli" style="display:none;"&gt;
            &lt;div class="panel-heading panel-header" style="padding-top: 5px; padding-bottom: 5px;" id="heading_user" role="tab"&gt;
                &lt;h4 class="panel-title" style="display: flex; justify-content: space-between; align-items: center;"&gt;
                    &lt;a aria-controls="collapseUser" aria-expanded="true" data-target="#collapseUser" data-toggle="collapse" role="button"&gt;
                        &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
                        User Access&lt;/a&gt;
                &lt;/h4&gt;
            &lt;/div&gt;
            &lt;div aria-labelledby="heading_user" class="panel-collapse collapse" id="collapseUser" role="tabpanel"&gt;
                &lt;div class="tab-content grey-border" id="access"&gt;
                    &lt;div class="row"&gt;
                        &lt;div class="row"&gt;&amp;nbsp; &lt;/div&gt;
 
                        &lt;div class="panel panel-default"&gt;
                            &lt;div class="panel-heading"&gt;
                                &lt;span class="panel-title"&gt;User(s) who can access the project&lt;/span&gt;
                                &lt;span class="pull-right"&gt;
                                  &lt;button type="button" class="btn btn-primary  btn-sm active mt-0" id="accessBtn" ng-click="createNewUserAccess()" style="width: 70px; text-align: center;"&gt;NEW&lt;/button&gt;
                                &lt;/span&gt; 
                            &lt;/div&gt;
                            &lt;div class="panel-body"&gt;
                                 &lt;!-- remove the input into dialog --&gt;
                                &lt;div style="background-color: lightgrey; padding: 2px 10px; display: flex; align-items: center;" ng-show="c.data.userTasks.length &gt; 0"&gt;
                                    &lt;h4 class="section-title"&gt; User Access Table&lt;/h4&gt;
                                    &lt;span class="badge" style="color: #444; margin-left: 5px;" id="ritm_count"&gt;{{ c.data.userTasks.length }}&lt;/span&gt;
                                &lt;/div&gt;
                                &lt;table class="table table-bordered table-striped table-condensed table-hover" ng-show="c.data.userTasks.length &gt; 0"&gt;
                                    &lt;thead&gt;
                                        &lt;tr&gt;
                                            &lt;td colspan="4"&gt;
                                                &lt;form class="form-inline"&gt;
                                                    &lt;input type="text" class="form-control1" ng-model="searchUserAccess" placeholder="Search" aria-labelledby="collapseUser"/&gt;
                                                &lt;/form&gt;
                                            &lt;/td&gt;
                                        &lt;/tr&gt;
                                        &lt;tr&gt;
                                            &lt;th ng-repeat="column in c.columns3 track by $index" ng-click="c.toggleSort3($index)" style="cursor: pointer"&gt;
                                                {{ column.label }}
                                                &lt;span class="glyphicon small" ng-class="{
                                                'glyphicon-chevron-up': column.sort === 'asc',
                                                'glyphicon-chevron-down': column.sort === 'desc'
                                              }"&gt;
                                  &lt;/span&gt;
                                            &lt;/th&gt;
                                        &lt;/tr&gt;
                                    &lt;/thead&gt;
                                    &lt;tr ng-repeat="row in c.data.userTasks | filter:searchUserAccess" ng-show="$index &gt;= c.pagination3.currentPage * c.pagination3.currentSize &amp;&amp;
                                         $index &lt; (c.pagination3.currentPage + 1) * c.pagination3.currentSize"&gt;
                                        &lt;td class="ritm_number"&gt;{{ row.first_name }}&lt;/td&gt;
                                        &lt;td class="ritm_number"&gt;{{ row.last_name }}&lt;/td&gt;
                                        &lt;td class="ritm_number"&gt;{{ row.access }}&lt;/td&gt;
                                        &lt;td class="ritm_number" ng-show="c.data.access != 'Read_Only'"&gt;&lt;button type='button' class="btn btn-primary active" style="width: 70px; text-align: center;" ng-click="removeUser(row.sys_id);"&gt;Remove&lt;/button&gt; &lt;/td&gt;
                                        &lt;td class="ritm_number" ng-show="c.data.access == 'Read_Only'"&gt;&lt;button type='button' class="btn btn-primary active" style="width: 70px; text-align: center;" ng-click="removeUser(row.sys_id);" disabled&gt;Remove&lt;/button&gt; &lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/table&gt;


                                &lt;!-- select the page size --&gt;
                                &lt;form class="form-inline pull-right"&gt;
                                    &lt;div class="pagination form-group" ng-show="c.data.userTasks.length &gt; 0"&gt;
                                        &lt;label for="pageSize16"&gt;
                              Items per page
                            &lt;/label&gt;

                                        &lt;select id="pageSize16" class="form-control" style="display: inline" ng-init="c.pagination3.currentSize = c.pagination3.pageSizes[1]" ng-model="c.pagination3.currentSize" ng-options="sizes for sizes in c.pagination3.pageSizes"&gt;
                            &lt;/select&gt;
                                    &lt;/div&gt;
                                &lt;/form&gt;

                                &lt;!-- select the page index (offset) --&gt;
                                &lt;ul class="pagination" ng-show="c.pagination3.currentSize &lt; c.data.userTasks.length"&gt;
                                    &lt;li ng-repeat="index in c.getRange3() track by $index" ng-click="c.setPage3($index)"&gt;
                                        &lt;a href=""&gt;
                              {{ $index + 1 }}
                            &lt;/a&gt;
                                    &lt;/li&gt;
                                &lt;/ul&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
          &lt;!-- end of User Access --&gt;
     


        &lt;!-- GDSP Tab content --&gt;
        &lt;div class="panel panel-success panel-area" id="gdspli" style="display:none;"&gt;
            &lt;div class="panel-heading panel-header" style="padding-top: 5px; padding-bottom: 5px;" id="heading_GDSP" role="tab"&gt;
                &lt;h4 class="panel-title" style="display: flex; justify-content: space-between; align-items: center;"&gt;
                    &lt;a aria-controls="collapseGDSP" aria-expanded="true" data-target="#collapseGDSP" data-toggle="collapse" role="button"&gt;
                  &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; Genomic Data Sharing Plan &lt;/a&gt;
                &lt;/h4&gt;
            &lt;/div&gt;

            &lt;div aria-labelledby="heading_GDSP" class="panel-collapse collapse" id="collapseGDSP" role="tabpanel"&gt;

                &lt;div class="tab-content grey-border"&gt;
										&lt;div&gt;
                      A &lt;b&gt;Genomic Data Sharing Plan&lt;/b&gt; provides information on the proposed research that will generate large-scale human and non-human genomic data for which the GDS policy applies.   
                      &lt;span class="pull-right"&gt;    
 												&lt;button type="button" class="btn btn-primary  btn-sm active" id="gdspBt" ng-click="createGDSP()" style="width: 70px; text-align: center;"&gt;NEW&lt;/button&gt;
                  		&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div style="background-color: lightgrey; padding: 2px 10px; display: flex; align-items: center; margin-top: 20px;" ng-show="c.data.tasks.length &gt; 0 &amp;&amp; c.data.access != 'Read_Only'"&gt;
                        &lt;h4 class="section-title"&gt;Draft GDSPs&lt;/h4&gt;
                        &lt;span class="badge" style="color: #444; margin-left: 5px;" id="ritm_count"&gt;{{ c.data.tasks.length }}&lt;/span&gt;
                    &lt;/div&gt;

                    &lt;table class="table table-bordered table-striped table-condensed table-hover" ng-show="c.data.tasks.length &gt; 0 &amp;&amp; c.data.access != 'Read_Only'"&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;td colspan="3"&gt;
                                    &lt;form class="form-inline"&gt;
                                        &lt;input type="text" class="form-control1" ng-model="searchDraftGDSP" placeholder="Search" aria-labelledby="collapseGDSP"/&gt;
                                    &lt;/form&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th ng-repeat="column in c.columns track by $index" ng-click="c.toggleSort($index)" style="cursor: pointer"&gt;
                                    {{ column.label }}
                                    &lt;span class="glyphicon small" ng-class="{
                                                'glyphicon-chevron-up': column.sort === 'asc',
                                                'glyphicon-chevron-down': column.sort === 'desc'
                                              }"&gt;
                                  &lt;/span&gt;
                                &lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tr ng-repeat="row in c.data.tasks | filter:searchDraftGDSP" ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                                         $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"&gt;
                            &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.sys_create_on }}&lt;/td&gt;
                            &lt;td&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="c.editItem(row.sys_id)" style="width: 70px; text-align: center;"&gt;
                                  Edit
                                &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="c.removeItem(row.sys_id)" style="width: 70px; text-align: center;"&gt;
                                  Remove
                                &lt;/button&gt;
                            &lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/table&gt;

                    &lt;!-- select the page size --&gt;
                    &lt;form class="form-inline pull-right"&gt;
                        &lt;div class="pagination form-group" ng-show="c.data.tasks.length &gt; 0"&gt;
                            &lt;label for="pageSize17"&gt;
                              Items per page
                            &lt;/label&gt;

                            &lt;select id="pageSize17" class="form-control" style="display: inline" ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]" ng-model="c.pagination.currentSize" ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                    &lt;!-- select the page index (offset) --&gt;
                    &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.tasks.length"&gt;
                        &lt;li ng-repeat="index in c.getRange() track by $index" ng-click="c.setPage($index)"&gt;
                            &lt;a href=""&gt;
                              {{ $index + 1 }}
                            &lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;

                    &lt;!-- submitted Table --&gt;
                    &lt;br/&gt;&lt;br&gt;&lt;br&gt;
                    &lt;div id="submittedTable" style="background-color: lightgrey; padding: 2px 10px; display: flex; align-items: center;" ng-show="c.data.submittedTasks.length &gt; 0"&gt;
                        &lt;h4 class="section-title"&gt;Submitted GDSPs&lt;/h4&gt;
                        &lt;span class="badge" style="color: #444; margin-left: 5px;" id="ritm_count"&gt;{{ c.data.submittedTasks.length }}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;table class="table table-bordered table-striped table-condensed table-hover" ng-show="c.data.submittedTasks.length &gt; 0"&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;td colspan="7"&gt;
                                    &lt;form class="form-inline"&gt;
                                        &lt;input type="text" class="form-control1" ng-model="searchSubmittedGDSP" placeholder="Search" aria-labelledby="submittedTable"/&gt;
                                    &lt;/form&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th ng-repeat="column in c.columns1 track by $index" ng-click="c.toggleSort1($index)" style="cursor: pointer"&gt;
                                    {{ column.label }}
                                    &lt;span class="glyphicon small" ng-class="{
                                                'glyphicon-chevron-up': column.sort === 'asc',
                                                'glyphicon-chevron-down': column.sort === 'desc'
                                              }"&gt;
                                  &lt;/span&gt;
                                &lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tr ng-repeat="row in c.data.submittedTasks | filter: searchSubmittedGDSP" ng-show="$index &gt;= c.pagination1.currentPage * c.pagination1.currentSize &amp;&amp;
                                         $index &lt; (c.pagination1.currentPage + 1) * c.pagination1.currentSize"&gt;
                            &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.principal_name }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;
                                &lt;span ng-switch on='row.approval'&gt;
                                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA review"  title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" title="Request Submitted" Alt="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
                                &lt;/span&gt;
                            &lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.submitted_date}}&lt;/td&gt;
                            &lt;td&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="viewItem(row.sys_id, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
                                  View
                                &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-show="(row.approval == 'Waiting for PI Resubmit' || row.approval == 'Completed') &amp;&amp; row.access == null &amp;&amp; c.data.access != 'Read_Only' " ng-click="displayResubmit(row.sys_id)" style="width: 70px; text-align: center;"&gt;
                                  Resubmit
                                &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-show="row.approval != 'Completed' &amp;&amp;  row.access == null &amp;&amp; c.data.access != 'Read_Only'" ng-click="withdraw(row.sys_id, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
                                  Withdraw
                                &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="report(row.sys_id, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
                                  Export
                                &lt;/button&gt;
                                &lt;input type="hidden" id="{{ row.sys_id }}_orginId" value="{{ row.orginId}}" /&gt;
                                &lt;input type="hidden" id="{{ row.sys_id }}_ticket_num" value="{{ row.org_ticket_num }}" /&gt;
                                &lt;input type="hidden" id="{{ row.sys_id }}_ticket" value="{{row.gdsp_id}}" /&gt;
                            &lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/table&gt;

                    &lt;!-- select the page size --&gt;
                    &lt;form class="form-inline pull-right"&gt;
                        &lt;div class="pagination form-group" ng-show="c.data.submittedTasks.length &gt; 0"&gt;
                            &lt;label for="pageSize18"&gt;
                              Items per page
                            &lt;/label&gt;

                            &lt;select id="pageSize18" class="form-control" style="display: inline" ng-init="c.pagination1.currentSize = c.pagination1.pageSizes[1]" ng-model="c.pagination1.currentSize" ng-options="sizes for sizes in c.pagination1.pageSizes"&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;

                    &lt;!-- select the page index (offset) --&gt;
                    &lt;ul class="pagination" ng-show="c.pagination1.currentSize &lt; c.data.submittedTasks.length"&gt;
                        &lt;li ng-repeat="index in c.getRange1() track by $index" ng-click="c.setPage1($index)"&gt;
                            &lt;a href=""&gt;
                              {{ $index + 1 }}
                            &lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- end of GDSP --&gt;
        &lt;!-- IC Tab content ng-click='openIcQUestion()' --&gt;
        &lt;div class="panel panel-success panel-area" id="icli" style="display:none;"&gt;
            &lt;div class="panel-heading panel-header" style="padding-top: 5px; padding-bottom: 5px;" id="heading_IC" role="tab"&gt;
                &lt;h4 class="panel-title" style="display: flex; justify-content: space-between; align-items: center;"&gt;
                    &lt;a aria-controls="collapseIC" aria-expanded="true" data-target="#collapseIC" data-toggle="collapse" role="button"&gt;
                              &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
                              Institutional Certification
                            &lt;/a&gt;
                &lt;/h4&gt;
            &lt;/div&gt;
            &lt;div aria-labelledby="heading_IC" class="panel-collapse collapse" id="collapseIC" role="tabpanel"&gt;
                &lt;div class="tab-content grey-border" id="IC"&gt;
                  &lt;div&gt;
                     An &lt;b&gt;Institutional Certification Memo certifies &lt;/b&gt; that data submission and sharing is consistent with the informed consent of the study participants. 
                      &lt;span class="pull-right"&gt;
                            &lt;button type="button" class="btn btn-primary  btn-sm active" id="icBtn" ng-click="openIcQUestion()" style="width: 70px; text-align: center;"&gt;NEW&lt;/button&gt;
                      &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;br/&gt;
                  &lt;div&gt;
												&lt;b&gt;Institutional Certification Memo Clarifying Guidance&lt;/b&gt; &lt;br/&gt;
                        More than one Institutional Certification Memo is required for research that began prior to August 31, 2015 (with and/or without consent [one memo for each instance]) and continued past August 31, 2015 when consent is mandatory.  
                    
                  &lt;/div&gt;  
                  &lt;div style="background-color: lightgrey; padding: 2px 10px; display: flex; align-items: center; margin-top: 20px;" ng-show="c.data.icTasks.length &gt; 0 &amp;&amp; c.data.access != 'Read_Only'"&gt;
                        &lt;h4 class="section-title"&gt;Draft ICs&lt;/h4&gt;
                        &lt;span class="badge" style="color: #444; margin-left: 5px;" id="ritm_count"&gt;{{ c.data.icTasks.length }}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;table class="table table-bordered table-striped table-condensed table-hover" ng-show="c.data.icTasks.length &gt; 0 &amp;&amp; c.data.access != 'Read_Only'"&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;td colspan="8"&gt;
                                    &lt;form class="form-inline"&gt;
                                        &lt;input type="text" class="form-control1" ng-model="searchDraftIC" placeholder="Search" aria-labelledby="collapseIC"/&gt;
                                    &lt;/form&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th ng-repeat="column in c.columns2 track by $index" ng-click="c.toggleSort2($index)" style="cursor: pointer"&gt;
                                    {{ column.label }}
                                    &lt;span class="glyphicon small" ng-class="{
                                    'glyphicon-chevron-up': column.sort === 'asc',
                                    'glyphicon-chevron-down': column.sort === 'desc'
                                  }"&gt;
                      &lt;/span&gt;
                                &lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tr ng-repeat="row in c.data.icTasks | filter:searchDraftIC" ng-show="$index &gt;= c.pagination2.currentPage * c.pagination2.currentSize &amp;&amp;
                             $index &lt; (c.pagination2.currentPage + 1) * c.pagination2.currentSize"&gt;
                            &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.certification_to }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.certification_from }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.gpa_organization }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.sd_organization }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.sys_create_on }}&lt;/td&gt;
                            &lt;td&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="viewICItem(row.sys_id, row.sampleTime, row.sampleConsent)" style="width: 70px; text-align: center;"&gt;
                      Edit
                    &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="c.removeItem(row.sys_id)" style="width: 70px; text-align: center;"&gt;
                      Remove
                    &lt;/button&gt;
                            &lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/table&gt;

                    &lt;!-- select the page size --&gt;
                    &lt;form class="form-inline pull-right"&gt;
                        &lt;div class="pagination form-group" ng-show="c.data.icTasks.length &gt; 0"&gt;
                            &lt;label for="pageSize19"&gt;
                  Items per page
                &lt;/label&gt;

                            &lt;select id="pageSize19" class="form-control" style="display: inline" ng-init="c.pagination2.currentSize = c.pagination2.pageSizes[1]" ng-model="c.pagination2.currentSize" ng-options="sizes for sizes in c.pagination2.pageSizes"&gt;
                &lt;/select&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;

                    &lt;!-- select the page index (offset) --&gt;
                    &lt;ul class="pagination" ng-show="c.pagination2.currentSize &lt; c.data.icTasks.length"&gt;
                        &lt;li ng-repeat="index in c.getRange2() track by $index" ng-click="c.setPage2($index)"&gt;
                            &lt;a href=""&gt;
                  {{ $index + 1 }}
                &lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
 
                  &lt;!-- IC submitted Table --&gt;
                 &lt;br/&gt;&lt;br&gt;&lt;br&gt;
                 &lt;div style="background-color: lightgrey; padding: 2px 10px; display: flex; align-items: center;" id="submittedICTable" ng-show="c.data.icSubmittedTasks.length &gt; 0"&gt;
                        &lt;h4 class="section-title"&gt;Submitted ICs&lt;/h4&gt;
                        &lt;span class="badge" style="color: #444; margin-left: 5px;" id="ritm_count"&gt;{{ c.data.icSubmittedTasks.length }}&lt;/span&gt;
                 &lt;/div&gt;
                 &lt;table class="table table-bordered table-striped table-condensed table-hover" ng-show="c.data.icSubmittedTasks.length &gt; 0"&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;td colspan="9"&gt;
                                    &lt;form class="form-inline"&gt;
                                        &lt;input type="text" class="form-control1" ng-model="searchSubmittedIC" placeholder="Search" aria-labelledby="submittedICTable"/&gt;
                                    &lt;/form&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th ng-repeat="column in c.columns4 track by $index" ng-click="c.toggleSort4($index)" style="cursor: pointer"&gt;
                                    {{ column.label }}
                                    &lt;span class="glyphicon small" ng-class="{
                                    'glyphicon-chevron-up': column.sort === 'asc',
                                    'glyphicon-chevron-down': column.sort === 'desc'
                                  }"&gt;
                      &lt;/span&gt;
                                &lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tr ng-repeat="row in c.data.icSubmittedTasks | filter:searchSubmittedIC" ng-show="$index &gt;= c.pagination4.currentPage * c.pagination4.currentSize &amp;&amp;
                             $index &lt; (c.pagination4.currentPage + 1) * c.pagination4.currentSize"&gt;
                            &lt;td class="ritm_number"&gt;{{ row.ic_id }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.study_name }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.project_title }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.issue_to }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.issue_from }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;
                                &lt;span ng-switch on='row.approval'&gt;
                                &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA review"  title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='Wait for PI to Sign'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for PI to sign"  title="Waiting for PI to sign"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;  
                                &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='Waiting for GPA Review - SD Rejected'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                                &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" title="Request Submitted" Alt="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
                                &lt;/span&gt;
                            &lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.submitted_date}}&lt;/td&gt;
                            &lt;td&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="viewSubmittedIC(row.sys_id, row.ic_id)" style="width: 70px; text-align: center;"&gt;
                      View
                    &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-show="(row.approval == 'Waiting for PI Resubmit' || row.approval == 'Completed') &amp;&amp; row.access == null &amp;&amp; c.data.access != 'Read_Only' " ng-click="displayICResubmit(row.sys_id)" style="width: 70px; text-align: center;"&gt;
                      Resubmit
                    &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-show="row.approval != 'Completed' &amp;&amp; row.access == null &amp;&amp; c.data.access != 'Read_Only'" ng-click="withdrawIC(row.sys_id, row.ic_id)" style="width: 70px; text-align: center;"&gt;
                      Withdraw
                    &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-show="row.approval != 'Completed' &amp;&amp; c.data.access != 'Read_Only' &amp;&amp; row.approval != 'Wait for PI to Sign'" ng-click="reportIC(row.sys_id, row.ic_id, 'pi')" style="width: 70px; text-align: center;"&gt;
                      Export
                    &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-show="row.approval == 'Completed' &amp;&amp; c.data.access != 'Read_Only'" ng-click="reportIC(row.sys_id, row.ic_id, 'sd')" style="width: 70px; text-align: center;"&gt;
                      Export
                    &lt;/button&gt;

                                &lt;input type="hidden" id="{{ row.sys_id }}_orginId_ic" value="{{ row.orginId}}" /&gt;
                                &lt;input type="hidden" id="{{ row.sys_id }}_ticket_num_ic" value="{{ row.org_ticket_num }}" /&gt;
                                &lt;input type="hidden" id="{{ row.sys_id }}_ticket_ic" value="{{row.ic_id}}" /&gt;
                            &lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/table&gt;

                    &lt;!-- select the page size --&gt;
                    &lt;form class="form-inline pull-right"&gt;
                        &lt;div class="pagination form-group" ng-show="c.data.icSubmittedTasks.length &gt; 0"&gt;
                            &lt;label for="pageSize20"&gt;
                  Items per page
                &lt;/label&gt;

                            &lt;select id="pageSize20" class="form-control" style="display: inline" ng-init="c.pagination4.currentSize = c.pagination4.pageSizes[1]" ng-model="c.pagination4.currentSize" ng-options="sizes for sizes in c.pagination4.pageSizes"&gt;
                &lt;/select&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;

                    &lt;!-- select the page index (offset) --&gt;
                    &lt;ul class="pagination" ng-show="c.pagination4.currentSize &lt; c.data.icSubmittedTasks.length"&gt;
                        &lt;li ng-repeat="index in c.getRange4() track by $index" ng-click="c.setPage4($index)"&gt;
                            &lt;a href=""&gt;
                  {{ $index + 1 }}
                &lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- end of the IC tab createER() --&gt;

        &lt;!-- Exception Request Tab content  tempFunc   data-target="#collapseER"--&gt;
        &lt;!--
        &lt;div class="panel panel-success panel-area" id="erli" style="display:none;"&gt;
            &lt;div class="panel-heading panel-header" style="padding-top: 5px; padding-bottom: 5px;" id="heading_ER" role="tab"&gt;
                &lt;h4 class="panel-title" style="display: flex; justify-content: space-between; align-items: center;"&gt;
                    &lt;a aria-controls="collapseER" aria-expanded="true" data-target="#" data-toggle="collapse" role="button"&gt;
                                  &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
                                  Exception Request
                                &lt;/a&gt;
                    &lt;button type="button" class="btn btn-primary  btn-sm pull-right" id="erBtn" ng-click="createER()" style="width: 70px; text-align: center;"&gt;NEW&lt;/button&gt;
                    &lt;label&gt;Coming Soon&lt;/label&gt;
                &lt;/h4&gt;

            &lt;/div&gt;

            &lt;div aria-labelledby="heading_ER" class="panel-collapse collapse" id="collapseER" role="tabpanel"&gt;

                &lt;div class="tab-content grey-border" id="ER"&gt;
                    &lt;div style="background-color: lightgrey; padding: 2px 10px; display: flex; align-items: center;" ng-show="c.data.erTasks.length &gt; 0 &amp;&amp; c.data.access != 'Read_Only'"&gt;
                        &lt;h4&gt; Draft Exception Requests&lt;/h4&gt;
                        &lt;span class="badge" style="color: #444; margin-left: 5px;" id="ritm_count"&gt;{{ c.data.erTasks.length }}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;table class="table table-bordered table-striped table-condensed table-hover" ng-show="c.data.erTasks.length &gt; 0 &amp;&amp; c.data.access != 'Read_Only'"&gt;
                        &lt;thead&gt;
                            &lt;tr&gt;
                                &lt;td colspan="9"&gt;
                                    &lt;form class="form-inline"&gt;
                                        &lt;input type="text" class="form-control1" ng-model="searchDraftER" placeholder="Search" aria-labelledby="collapseER"/&gt;
                                    &lt;/form&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;th ng-repeat="column in c.columns5 track by $index" ng-click="c.toggleSort5($index)" style="cursor: pointer"&gt;
                                    {{ column.label }}
                                    &lt;span class="glyphicon small" ng-class="{
                                    'glyphicon-chevron-up': column.sort === 'asc',
                                    'glyphicon-chevron-down': column.sort === 'desc'
                                  }"&gt;
                      &lt;/span&gt;
                                &lt;/th&gt;
                            &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tr ng-repeat="row in c.data.erTasks | filter: searchDraftER" ng-show="$index &gt;= c.pagination5.currentPage * c.pagination5.currentSize &amp;&amp;
                             $index &lt; (c.pagination5.currentPage + 1) * c.pagination5.currentSize"&gt;
                            &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.investigator }}&lt;/td&gt;
                            &lt;td class="ritm_number"&gt;{{ row.sys_create_on }}&lt;/td&gt;
                            &lt;td&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="editERItem(row.sys_id)" style="width: 70px; text-align: center;"&gt;
                      Edit
                    &lt;/button&gt;
                                &lt;button class="btn btn-sm btn-primary active" ng-click="removeERItem(row.sys_id)" style="width: 70px; text-align: center;"&gt;
                      Remove
                    &lt;/button&gt;
                            &lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/table&gt;
                    &lt;form class="form-inline pull-right"&gt;
                        &lt;div class="pagination form-group" ng-show="c.data.erTasks.length &gt; 0"&gt;
                            &lt;label for="pageSize21"&gt;
                  Items per page
                &lt;/label&gt;

                            &lt;select id="pageSize21" class="form-control" style="display: inline" ng-init="c.pagination5.currentSize = c.pagination5.pageSizes[1]" ng-model="c.pagination5.currentSize" ng-options="sizes for sizes in c.pagination5.pageSizes"&gt;
                &lt;/select&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                    &lt;ul class="pagination" ng-show="c.pagination5.currentSize &lt; c.data.erTasks.length"&gt;
                        &lt;li ng-repeat="index in c.getRange5() track by $index" ng-click="c.setPage5($index)"&gt;
                            &lt;a href=""&gt;
                  {{ $index + 1 }}
                &lt;/a&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
		--&gt;
    &lt;/div&gt;
&lt;/div&gt;


&lt;!--&lt;div class="col-md-12"&gt;&amp;nbsp;&lt;/div&gt;--&gt;
&lt;input type="hidden" id="hideGDSId" /&gt;
&lt;input type="hidden" id="recId" /&gt;
&lt;input type="hidden" id="access" /&gt;
&lt;input type='hidden' id='refresh'/&gt;
&lt;input type='hidden' id='gdspStatus'/&gt;
&lt;input type='hidden' id='icStatus'/&gt;


&lt;div class="col-md-12"&gt;&lt;label&gt;&lt;a href='' class="home-link" ng-click='backToMain()'&gt; Home &amp;nbsp;&amp;nbsp; &gt; &amp;nbsp;&amp;nbsp;&lt;/a&gt;&lt;/label&gt;&lt;span style="display:none;" id="titleButtomDiv"&gt;&lt;/span&gt;&lt;/div&gt;

&lt;!-- confirm modal --&gt;
&lt;div id="confirmDiv" class="modal fade" data-keyboard="false" data-backdrop="static"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                  &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
              &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="message"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesConfirmYesNo" type="button" class="btn btn-primary active" style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoConfirmYesNo" type="button" class="btn btn-default active" style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="userConfirmDiv" class="modal fade" data-keyboard="false" data-backdrop="static"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                  &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
              &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageDeleteUser"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesConfirmUser" type="button" class="btn btn-primary active" style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoConfirmUser" type="button" class="btn btn-default active" style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="withdrawDiv" class="modal fade" data-keyboard="false" data-backdrop="static"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageWithdraw"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesWithdraw" type="button" class="btn btn-primary active" style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoWithdraw" type="button" class="btn btn-default active" style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="withdrawICDiv" class="modal fade" data-keyboard="false" data-backdrop="static"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageWithdrawIC"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesWithdrawIC" type="button" class="btn btn-primary active" style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoWithdrawIC" type="button" class="btn btn-default active" style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="infoModal" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;!--button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button --&gt;
                &lt;h4 id="lblTitleConfirmOk" class="modal-title"&gt;Information&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageInfo"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnOkConfirm" type="button" class="btn btn-primary active" style="width: 70px; text-align: center;"&gt;OK&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div id="loading" class="overlay" style="display:none;"&gt;
  &lt;div class="spinner" style="width: 25px; height: 25px"&gt;
  	&lt;svg version="2.0" class="spinner" width="25" height="25"&gt;
      &lt;circle cx="12.5" cy="12.5" r="10" fill="transparent" stroke="#ccc" stroke-width="2.5" /&gt;
      &lt;path fill="transparent" stroke="#666" stroke-width="2.5" d="M 12.5 2.5 a 10 10 0 0 1 10 10" /&gt;
    &lt;/svg&gt;
  &lt;/div&gt;
  &lt;span&gt;Processing&lt;/span&gt;
&lt;/div&gt;

&lt;div id="addUserAccessDiv" class="modal fade" data-keyboard="false" data-backdrop="static"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;User Access&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                 &lt;div class="row" id="error" style="display:none;"&gt; &lt;/div&gt;
                 &lt;div class="row"&gt;
                     &lt;div class="col-md-2"&gt;
                           &lt;lable for="userName"&gt;User Name&lt;/lable&gt;
                     &lt;/div&gt;
                     &lt;div class="col-md-6 ui-front"&gt;
                          &lt;input type="text" class="form-control" id="userName" style="width:90%;" aria-labelledby="userName"/&gt;
                          &lt;input type='hidden' id='userFirstName' /&gt;&lt;input type='hidden' id='userLastName' /&gt;&lt;input type='hidden' id='userId' /&gt;
                     &lt;/div&gt;
                     &lt;div class="col-md-2"&gt;
                          Read-Write &lt;input type="radio" name="access" value="Read_and_Write" aria-labelledby="userName"/&gt;
                     &lt;/div&gt;
                     &lt;div class="col-md-2"&gt;
                          Read-only &lt;input type="radio" name="access" value="Read_Only" aria-labelledby="userName" checked/&gt;
                     &lt;/div&gt;
								&lt;/div&gt;                
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnAddUserAccess" type="button" class="btn btn-primary active" style="width: 70px; text-align: center;"&gt;Add&lt;/button&gt;
                &lt;button id="btnCancelUserAccess" type="button" class="btn btn-default active" style="width: 70px; text-align: center;"&gt;Cancel&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1121064244</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f0576a31db2b5b00b86770c08c961984</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164dce86e7c0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS main content</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>ec3282356da75b00710a386a725d7935</update_guid>
<update_guid_history>ec3282356da75b00710a386a725d7935:1121064244,f1020ef1d8a75b00bd06eb64de6af608:1525831204,4ee10af1e5a75b00710c2fcb0466a5de:-242664156,999102b14ca75b009bc40f705957a6ae:730609109,458106f1dda75b00bce4a48fc481c3d1:-103216594,f33146b1d7a75b00313800d95740994b:710924951,52318eb12fa75b006c01aac9f5d9a19a:2062164757,f69082b1d1a75b0041abcfa942612162:384987911,698042b1d3a75b002ac2a76f8ce50c43:1772812502,be7082b1eea75b0040e02ede9d926e5a:484910575,9930ca7120a75b00a4ba2227db61498f:631347291,4a78f1f94c675b000829ea64466beb34:1071140693,9f58b1f954675b007971f74ea2414a16:-976272209,bfa7b9b96d675b00d012598590224702:814797249,645735b926675b005b14eef5c7e8a2d0:-422106987,5147fd7945675b00355d58bbc71ba51b:-1300821762,89813965896b1b0033309729970ebe41:-579835515,767175ad916b1b00354aa8e3f1abe814:213943947,758425e1316b1b00dfd0fd18c27ca9c1:-1526096691,71602f85fe2797002ac4448489ab16bc:-1063527472,61515745a92797005f052b8a29f91b50:238328626,33fd4b41d22797001c06259e625342d8:-344450111,4a3dcb8dc0e39700dfbfb4ff9bfc8f2b:1222664891,e1fc03cd35e39700ee653a3bfc347cee:1489115771,581c470139279700406bc99c8c46e585:722946790,a7bb4701ed279700cb690ef4050ca45d:-482255258,a8e4cb4583e397009cd29e85c31731f8:-1156012113,ee8efac910a397009c4462bea34800f4:-2055780770,d9ed3e0db9a39700c8961c852d69fe0e:-762442090,aaecdbb0182b5700eeb5682ddf8400da:2098913274,8e9c97b0812b570016ee4a70a993a2fe:221771237,107c97b08a2b5700cac30f092f7e68fb:-1584171737,922cdf703a2b570079930da3fb3404bf:-889873747,5beadf306e2b5700ba756a09b3c422c1:1939753709,6f6c2e38f36757008d59b155f2d602f0:1754483537,349a0a6b729f53008ed6f1c032b809ba:191597921,8c5ac6ab229f530066926bbc2ee3d61c:-565378932,494a4ee7a29f53002d6c95f40cde47a4:227802459,1e1ac6ab649f53006d8747de9d7d9cbc:-1443820656,bd290ae7a99f530011891940e951b47c:1393280431,3909ce6b4a9f5300a30b284f594c59c1:-334336576,40e88e6bfe9f5300a249c3dd64c06d5a:-1944966971,ddc80ae7259f5300e36c5b113e01b76a:1385936361,fa580ea3d69f5300653512489d38f87d:1615891668,6d288e63dd9f5300f6e3aa4b3e9cb9da:855066148,e4564aefa75f53004670161a71683666:87884391,2e164eaf7b5f5300bc1321a1dd089a71:-1949820762,f0160ae72d9f5300d15b258d5377f21e:-801260192,7f06752f815f530013f6dcb66935ad63:87884391,bbd5f12f215f530084ed4a7cdd65f4a3:-1794740989,d2c5b12fd25f5300270ab058f3be91ba:1572746511,2d53292b501f5300c48f3df4a6a0c7a2:1340925273,d623a5efbd1f5300f83795449e2d5f05:1321084429,d92365ef681f53009eed1f3f274f37ad:-1502926394,9ca26daf691f5300a04cf421990b7891:-1609222554,919225afe91f5300c174d4ab8563e19b:1825376647,9e72e5af001f53008aa1d8292ada1066:-1043912247,6752e56fd71f5300485cd783c7d2af88:1499609098,3d42a927e61f53006595484a1a3b1b0e:-1212554102,0b226d6fd31f53009dd364cfbd85b8c7:-1841736342,5b12692f221f5300f6750163b5ba2426:4736489,80126dab791f530028c62e4b76c5feda:1750580072,82f1e56fcc1f53007e8e112b92058675:-106057048,9be16d2fa21f5300af7c99fc9bfc135f:2067681391,17c1e1eb1c1f5300d821138645a4b85b:-1851900631,a091adabe81f5300afab58f622d2ffce:-106057048,c4816dabca1f530005e20859304076d4:1892950694,9b21e5abca1f53002dcb552845c91413:1430152648,3211a5ab341f5300a772fd07379af135:-1558679590,cff0292bb51f5300e0c5bb28383be7c5:588930243,f3aeaa19b91b9300aa0b0e53476e80ef:-871582207,0633160de011134032cd9145bb685211:-876465940,f3aeaa19b91b9300aa0b0e53476e80ef:-871582207,f3aeaa19b91b9300aa0b0e53476e80ef:-871582207,838c6655eb1b93005219a5f8f3fa6edf:609949665,1eeb2a151b1b9300a6cb92e656c57780:-1767042503,2ccb66d1a11b9300c7c2dffbbb10d431:-1788557490,879baad1fd1b930097031f09bac25acf:-425895689,0a6ba215381b93007d8fa5befa7fa3c3:1266842752,bdfae6d1c81b93002ebe07e2d94aa4ee:-414337529,6feae691721b93001431e9dd1f99b74c:664943181,5baa6e91da1b930024718af9736fde8b:-1228542650,a6e00124d7031b00c4d1b5f8b2645526:629995541,e32041200b031b006a3fa93b4db54747:344965778,5a49d4c3842e1f006e604360c2432123:-1749245678,0633160de011134032cd9145bb685211:-876465940,2cd9e9e03edd1f00b552afc6f47043ab:-1027339250,c2a929a03add1f0035483f8384329a74:1765632768,8469ada8dd9d1f00d085412e6659d9aa:1310395403,3c2969605bdd1f001a90d5079e35e595:-688255449,1f38a1a0e2dd1f001610f75915bd9e6b:-1996721107,e318ad6041dd1f001b196eba7ccf2709:1467454029,16b7a520c7dd1f00e8a796595b71dd51:-938667929,8117616009dd1f00546db558ceffd4b6:1586626387,6db62d20f0dd1f007d814f77c8d5d7ca:-1895817030,64862120ebdd1f0010f3c919062659f6:1586626387,ca46a52058dd1f00e96f9a5af1b5594a:426284553,65a5adecab9d1f0050bd3082ed669a15:-2141018051,cd752deca89d1f00e7d46002d4666d2f:746947285,1364a1ac3a9d1f00ef3f716fb5f90cec:2030126803,d73461ac1e9d1f00bb7fb789590c8b11:1492711655,2f1461e86f9d1f00268c64b37eeab857:1382643181,c704a92c659d1f00020f2fdeffa419d4:-659569008,00a3656c959d1f00717fb6a29cc764d7:863524939,4a63616cb89d1f00d1c116012633d12d:870979499,5a13a92c559d1f00e0d2e615a7c65ddd:-1325414716,8913612c419d1f004c548cb7bad58414:2018727972,750365e8c09d1f009e3479627612fa2a:640642503,a0d2e968029d1f00bc15ddb11030ae08:207694561,34b1a1e42a9d1f009f62f8781f0a482f:1794989280,d14121688b9d1f004af53f6aa6a063f2:-4563488,e51129681e9d1f00137b0c9c67b93d03:-152774548,8780e1a4239d1f001da35cb72d548cb0:57200893,9a20e968a79d1f00bd19a37321a8a301:50759594,a46f11686c9d1f0015491fdb6663e1e6:896026811,520fd1e8bd5d1f0010901d2e16be2734:1390877635,3dbe59e4f39d1f00c8891ed6a6721308:1283056168,68cd59e41f9d1f00b604be17077a7c01:-1580718378,973d99acc35d1f00b4b4d2e841e1bca1:-1898048799,d9dc51a4139d1f00633e4adbe96b5f8d:-2040062220,accc1124139d1f00d56afb6573f26248:-1271617473,533c9560b59d1f00aa8076003464271f:-1517741531,7c0cdde0c69d1f0021b55f94cb058bce:-120511095,39c855a08c9d1f0034083c5a8124e499:329646761,2e98d5e0999d1f00b0a449bb388c728f:123238215,061859acf45d1f004da1bf829195adbf:36703271,db4251ec7b5d1f00d2f4016ccc116355:-1306234201,89d151ac955d1f006b29a214784c48ba:904689287,39b1d1acc35d1f00c92fb7269eb41ceb:-1489052376,4d9195ac205d1f00380984e1a6461ea6:-279844796,df619d6cbb5d1f00b268a2a58f79c162:-103584463,1131d1ac375d1f00c403a4a5de2d86e5:604828036,83f0156c105d1f00c60cc507a96376df:-103584463,8cff816c325d1f0011ef096574ac5b1b:1122678797,a1df89a4eb5d1f004bfc9711b944d682:877180125,858f4568495d1f00b973e4dc387a6f39:-74865290,52e72897ea8d5b00791d7b27447a0f10:1292429165,a5f2ec130c8d5b0038621df4a3cdf8eb:-1708271084,75a2e093968d5b00817b856e5268544a:1710008432,2e92a093ba8d5b0099687cba54bd7cc1:851877809,ff626093608d5b0021b9b039c4ed5c26:955307484,b7f1e453318d5b005f9bce717377c5e5:-2129282262,72b160131c8d5b00a7bc370c152f18ef:957900521,12816053098d5b00f3c13c6e12d5cbef:649632329,fd71e4530c8d5b00bf0c53b821be4dde:-1399985989,fc71e453ab8d5b001a0b800929278395:-771768522,4851a4534a8d5b00110abb5c35339f6a:-1203814213,5d506013118d5b000b79c1d8398f126b:-1179671339,c6856bbae1c59b00ce0677d850c51da1:1165473759,2184af7ad5c59b00f985034fcb49321b:-589876514,40546b7a4fc59b000e72ea372894da81:-1102821960,fe146b3a1cc59b005d72fa2facd90326:-1497756591,14f3eff6aec59b0009ece4d522da5308:-244225922,7493ab3a27c59b008d018dd9d9a0ecae:784250367,d3636b3a34c59b003f69935b159cec20:367955743,fec2233a34c59b00bcbbd16f529ad13a:-1887620841,b8a167f64bc59b000a9f136b27893d4e:1165883701,6341e3b273c59b00194d9b83fc7cf6c2:1927349050,e721ebb65bc59b0096ea187052f72705:-2119801812,6f8027b267c59b00be98a084db02cbb9:-1147745874,67606f76b8c59b00e43b55947cef642d:1210562843,2d60e33679c59b002d5c7e9b14fdfae8:-832666421,b540ab7685c59b001e4fbdda0c5ea44b:-1830504674,4110af72aec59b00f5c884de66c8395b:-1147745874,5bf5933e96859b00984ce8a1c5bb09fe:902667823,c4d59bbab5859b00a5cc2094410b3509:710417225,59959fbaf0859b00d49d50cd2adaa73b:562353175,400513fa7a859b0054d27d79897d9e63:1796277541,6c28128cb2f813003002a8305806ab2b:633250117,c2f7528ce9f81300fb4d3ee43c2fa324:-838882044,8dfd55c45f374700b89636cf606bf65e:-853082806,f4a0cdb622238300c2aee6eba7217b20:-1902077762,fa592c32d0ef4300cc5f26691a0b3af5:-433521433,d7b82c32deef430070a3bf5a24dd60cc:1594888134,e1f7203272ef4300b8287e6137952a22:-2037396704,3b47283226ef4300301fef0e2260351f:-429734960,ff372cbe2caf43002aa7d53db99bec13:1063368278,7f56687af6af4300dab9cbb9f5d63991:-249794114,6a752cbe98af4300386ed72aea70d70d:114541154,59e4ecba0faf4300cea21b69d0ce5617:1872755966,5dc460be36af430088a5b08af9e2d97d:-1899747709,a964a07e50af43001c4d4a57dda6acca:-1879828717,b6d3ecba93af4300ed3a0e5a4056af60:-72780515,879f58baa5af43009845cc7b698d28ed:1351252935,ab5194fe4f6f43004433ddbcac832569:-790375054,052158322aaf43008d9d5922dff18a59:1296030562,758f883ed46f430028c6ace167b3b38c:1543468674,7e1e483a8d6f430097d6c51492a2eacb:-1578845854,fadd847aff6f4300e683ca6d05cacc24:-651608685,94748de9a2eb8f0056fbdca9f541ffac:998136836,dff04d294ceb8f00b4c2b8e5c13e5f1c:-1469346689,c910d5eee9f64300991e7c1341994138:998136836,856fc5aed3f64300e289b91f2bd283c2:-470066978,372e838ab1ba03009b4750b1db285dfb:791851045,e89d4d9957f64f00fd2f5066cf36a91e:604069041,f24d01d947f64f000efe3c709adc97c6:1526517498,ad1d8999eef64f00d78101758082aeeb:1926481155,3f8b851df7b64f00f872febde9a8683d:604069041,0a0b24cb3266c700cb78655f1c65c891:770949389,0f2e3a96cf6a8700a6f57d2e4bed2722:-1594114820,dc6d7692ec6a87007b1454e45af5383f:-529816406,ea5df2565b6a870049c36d564b7a39d7:599961260,b2962e96ff2a8700d5ee8878afa2a722:1851643230,744ed29e3ce6870035ff11ef8cf5a248:-366689468,9c7dd69e58e68700acf0ca481d184733:587875410,2a1c925e93e68700027efac9acebd19b:-45672557,c3ab9a1eefe687004907a27a36de63ae:611837426,a2859616bfe6870095f1e261b0723611:205799074,94449e9632e687007fb5215ba4bc22c2:316825730,d2125256aae6870063ff6dcd6dd35536:-1309393323,e3615e160be687000c274462fa038fd5:-1276642895,5ba09ed28ae68700ecbc272d34c66f40:-1729353781,e4fa850a53ee070006fe510ee40f0bcd:1744627652,62aa850a7dee0700e4f40ebe21347e92:742184927,e0f9094a37ee0700af35f20c7db7a612:873515730,cbc9814a40ee07008e8348e0004aa7a7:1835136297,5368a4028cae0700f575c3d3a31811db:-1709723459,fdd4e4ca4c6e07006a4d37bb49b235af:-961278198,3834608a2b6e0700187446371e9077ef:1401272115,f2c1944e2b2e0700b0f3c6d92e28b926:463897336,a9a1144e0e2e0700bb8dfdd94bb5cd69:1756426291,1991d04e572e070011af2f3d398c75eb:-297570734,4571100a9b2e07002d08445ea52590b0:-43492814,5921580e462e070000d22765a37045d2:-297570734,6ef0d48ad92e0700aa2e54a6e3a6a9c9:1876190408,fa5fc08a4f2e0700c5039af7a33d0c87:-29466696,52fd247166260700bce2fbdbc05e9497:-1563448335,88cdec310a260700a3dc24aad26931a5:1044067494,e18ce839f1e20700ba3c9a610c21d653:-1899157402,5eeba4fdf3e2070000fa0e06a146f36b:2068878561,57ab60fdf1e207008e6cdd874c4a7875:1703153969,50b22879f2e207007e6a3326a2428561:-1646971497,0682287988e207007a6dafb8e47df74f:-1915812080,1e42e87560e207006af345898b3ead77:100574732,443264798ce20700f17f0f1a41d4e533:1076006847,2122a47549e207001c0e210b7ec30a74:770024737,27c1a87581e20700b87fecdae61025c4:-2110443100,f08c50b592e207004477fd387c964169:342397233,f6fadc354de20700128ac1c975b6d73f:1747547002,ddf3183181e207003a2d306282c0dd1d:-190588860,e54d003d4ba2070013ed0b7bc86900c3:-883106321,c94d403d1da20700ecfa7414f67d65f2:-786273010,cb3d4cf99fa20700598867975d1bc9f2:-1554755037,c7cb44796ca207003c9ac49c157c06b0:-1077553823,50d7bf297062070012a554e80c59ab8f:-385036362,2f97f7a9b46207009530db65ff546e4e:-2140406107,bd96bf698c62070097bf96aed9849b1f:-1950066378,3e667f691462070067001475f3c147f9:299765884,-1951511070:-1951511070,-1329411909:-1329411909,1390559357:1390559357,-1069377826:-1069377826,1068266073:1068266073,-1199719803:-1199719803</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_0429c23cdbd2720054d8ff621f9619cd</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="GDSP JSPDF include">622706f8dbd2720054d8ff621f96194d</sp_dependency><sp_widget display_value="GDSP Report Page Content">01160574db12720054d8ff621f96192a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2017-04-20 20:18:31</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>0429c23cdbd2720054d8ff621f9619cd</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GDSP JSPDF include.GDSP Report Page Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_0429c23cdbd2720054d8ff621f9619cd</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2017-04-20 20:18:31</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>2043840076</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>f4576a31db2b5b00b86770c08c961915</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b41bf7300000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<table/>
<target_name>GDSP JSPDF include.GDSP Report Page Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>4d1f0d532fdf1300ccee9764063a404d</update_guid>
<update_guid_history>4d1f0d532fdf1300ccee9764063a404d:2043840076,14333929:14333929</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_6b30191bdbdf130054d8ff621f9619ab</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="GDSP JSPDF include">622706f8dbd2720054d8ff621f96194d</sp_dependency><sp_widget display_value="GDSP Report Page Content">01160574db12720054d8ff621f96192a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2018-07-19 19:59:53</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>6b30191bdbdf130054d8ff621f9619ab</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GDSP JSPDF include.GDSP Report Page Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_6b30191bdbdf130054d8ff621f9619ab</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2018-07-19 19:59:53</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>1947876568</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f4576a31db2b5b00b86770c08c961918</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b4209db60000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP JSPDF include.GDSP Report Page Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>6730191bc1df1300f11ac876737d64ad</update_guid>
<update_guid_history>6730191bc1df1300f11ac876737d64ad:1947876568</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_d5b59bf8dbe7570054d8ff621f9619ae</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="DELETE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDSP Home Page Content">0f1aaea9dbc63a00f59974131f96197f</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:33:54</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>d5b59bf8dbe7570054d8ff621f9619ae</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDSP Home Page Content</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_d5b59bf8dbe7570054d8ff621f9619ae</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:33:54</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1635078274</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f4576a31db2b5b00b86770c08c96191b</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce3f52100000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDSP Home Page Content</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>f2e7db7c1ee75700c5fb0e7361dfeabf</update_guid>
<update_guid_history>f2e7db7c1ee75700c5fb0e7361dfeabf:-1635078274,ddb59bf8e3e75700f0b8d42e9e004caf:1200075274</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_5c99a62fdbbc070054d8ff621f9619a9</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($http, $scope) {
  /* widget controller */
  var c = this;
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;

}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.btn-form {
  width: 100px;
  margin-left: 50px;
}

.form-label {
  font-weight: normal
}

.full-width {
  width: 100%;
}

label.control-label {
  font-size: 14px;
  white-space: nowrap;
}

legend.scheduler-border {
  font-size: 16px;
  font-weight: bold;
}

.align-checkboxes {
  margin-top: 8px;
}

.inline-form-input {
  width: 160px;
  max-width: 160px;
  display: inline-block;
  margin-left: 8px;
}

.inline-form-input-specify {
  width: 350px;
  max-width: 450px;
  display: inline-block;
  margin-left: 8px;
}

input[type=checkbox], input[type=radio] {
  vertical-align: middle;
  position: relative;
  bottom: 3px !important;
}

input[type=radio] {
  bottom: 2px;
}

.input-xs {
  height: 24px;
  padding: 4px;
  font-size: 12px;
  line-height: 1.2;
  border-radius: 3px;
}
&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description&gt;This is the GDS Exception Request Form Widget&lt;/description&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gefw&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS ER Form Widget&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id
	};
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-08-31 18:21:13&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;5c99a62fdbbc070054d8ff621f9619a9&lt;/sys_id&gt;&lt;sys_mod_count&gt;282&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS ER Form Widget&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_5c99a62fdbbc070054d8ff621f9619a9&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-20 19:57:58&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;

&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>236029303</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f4576a31db2b5b00b86770c08c961983</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b94538250000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS ER Form Widget</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>496916a7ecdf5300dd94432d9b917441</update_guid>
<update_guid_history>496916a7ecdf5300dd94432d9b917441:236029303,5218579fa2de8300077f5ddc0c3400f7:1063486694,5218579fa2de8300077f5ddc0c3400f7:1063486694,5218579fa2de8300077f5ddc0c3400f7:1063486694</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_dependency_js_include_7468823cdbd2720054d8ff621f961922</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_dependency_js_include"><m2m_sp_dependency_js_include action="DELETE"><order>100</order><sp_dependency display_value="GDSP JSPDF include">622706f8dbd2720054d8ff621f96194d</sp_dependency><sp_js_include display_value="JSPDF Script">7647c6f8dbd2720054d8ff621f961995</sp_js_include><sys_class_name>m2m_sp_dependency_js_include</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2017-04-20 20:15:18</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>7468823cdbd2720054d8ff621f961922</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GDSP JSPDF include.JSPDF Script</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_dependency_js_include_7468823cdbd2720054d8ff621f961922</sys_update_name><sys_updated_by>zhoujim@nih.gov</sys_updated_by><sys_updated_on>2017-04-20 20:15:18</sys_updated_on></m2m_sp_dependency_js_include></record_update>]]></payload>
<payload_hash>-476880413</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:10</sys_created_on>
<sys_id>f8576a31db2b5b00b86770c08c961914</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b42636d30000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:10</sys_updated_on>
<table/>
<target_name>GDSP JSPDF include.JSPDF Script</target_name>
<type>Dependency JS Includes</type>
<update_domain>global</update_domain>
<update_guid>c5a1d51f2edf1300a6418a799841fa94</update_guid>
<update_guid_history>c5a1d51f2edf1300a6418a799841fa94:-476880413,610141440:610141440</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_474457b8dbe7570054d8ff621f961924</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS IC Message Widget">12f7af6adb2f360054d8ff621f9619cf</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:27:45</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>474457b8dbe7570054d8ff621f961924</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS IC Message Widget</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_474457b8dbe7570054d8ff621f961924</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:27:45</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>2117199693</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f8576a31db2b5b00b86770c08c961917</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce30d8bf0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS IC Message Widget</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>4f4457b8f0e7570086c30ec9e9666025</update_guid>
<update_guid_history>4f4457b8f0e7570086c30ec9e9666025:2117199693</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_a90513f8dbe7570054d8ff621f9619a0</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS PSO table">509b3370dba6ba0054d8ff621f961950</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:30:55</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>a90513f8dbe7570054d8ff621f9619a0</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS PSO table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_a90513f8dbe7570054d8ff621f9619a0</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:30:55</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1846049955</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f8576a31db2b5b00b86770c08c96191a</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce33c0ec0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS PSO table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>a10513f811e75700dab32567864618a2</update_guid>
<update_guid_history>a10513f811e75700dab32567864618a2:-1846049955</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_2a1d6b2edb2f360054d8ff621f961976</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http, spUtil) {
  /* widget controller */
	var c = this;
	console.log($scope.data);
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;
	var catItemId = '';
	var itemIdArray = {};
	//start consent group 
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns = [
		{
			key: 'site_name',
			label: 'Collaborating Site Name',
			sort: 'asc'
		},
		{
			key: 'use_limit',
			label: 'Data Use Limitations',
			sort: 'asc'
		},
		{
			key: 'data_modifier',
			label: 'Data Use Limitations Modifier',
			sort: null
		},
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.consentTasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.tasks = c.data.consentTasks.sort(compareRows);
		}
	};
// end of the pagination of Consent Group	
	
	$('#icForm').on('show.bs.modal', function (e) {
		 // loadConsentData();
		c.data.consentTasks = [];
		var grpIds = $('#consentGroupIds').val();
		if(grpIds != null &amp;&amp; grpIds.trim().length &gt; 0){
			populateConsentGroupDataById(grpIds);
		}
	});
	
	$('#dataModifier').select2();
	//loadBranchOptionString();
  $('#branch').val('NCI');
	//ajax call to fetch catItemId
	var req = {
				method: 'GET',
				url: '	/api/naci/gdspapi/getCatItem',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				params: {name: 'CCR GDSP Intramural Certification'}	
	};
	$http(req).then(function(response){
		 console.log(response);
		 catItemId = response.data.result[0].cat_item_id;
	});
	
	var req2 = {
				method: 'GET',
				url: '/api/naci/gdspapi/getICVariableIdArray',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				params: {email: 'zhoujim@nih.gov'}	
	};
	$http(req2).then(function(response){
		 console.log(response);
		 itemIdArray = response.data.result[0].itemId;
	});	

	$("#datepicker").datetimepicker({format:'MM/DD/YYYY'}).on('dp.show', function() {
		$('.bootstrap-datetimepicker-widget li.accordion-toggle').hide();
	});
	
	var names = ['certification_date','institution_name', 'certification_to', 'certification_from', 'gpa_organization', 'sd_organization', 'study_name', 'project_title','data_access', 'display', 'frequency', 'sampleTime', 'sampleConsent', 'consent_group'];

  $scope.closeICForm = function (){
	  $('#icForm').modal('hide');
  };
	
	$scope.submitIcForm = function(){
		$('#refresh').val('0')
		clearICFieldBackground();
		var ic_id = $('#ic_id').val();
		var sample_time = $('#sample_time').val();
		var sample_consent = $('#sample_consent').val();
		var error = icDataValidation(sample_time, sample_consent);
		if(error == true){
				$('#icError').show();		
		}else{
			$('#icError').hide();
		  //submit data to service.
			var $confirm = $('#icConfirmSubmitDiv');
			$confirm.modal('show');
			$('#messageIC').html("Are you sure you want to submit this request and sign this document?");		
			$('#icYesConfirm').off('click').click(function() {
				//submit request
				$('#errorMessage').hide();
				submitICRequest();	
				$confirm.modal('hide');
			});
			$('#icNoConfirm').off('click').click(function() {
				$confirm.modal('hide');
			});
		}
	};
	
	function submitICRequest(){
		 $('#icForm').modal('hide');
		 $('#loading').show();
		 var type = $('#type').val();
		 var variables = getICData();
		
		 variables.requested_for = $('#piUserId').val();
	     variables.opened_by = userId;
         variables.contact_type = 'Web';
		 variables.short_description = $('#hideGDSId').val();
		 variables.investigator = $('#piName').val();
		 variables.projectName = $('#piTitle').val();
		 variables.cat_item = catItemId;
		 variables.variables = itemIdArray;
		 var icData = JSON.stringify(variables);
		 var req = {
						method: 'POST',
						url: '/api/naci/gds/submitICRequest',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: icData
			};
			$http(req).then(function(response){
				 console.log(response);
				  //update GDS record
				 var data = response.data.result[0];
				 var param ={
					 gds_id: $('#hideGDSId').val(),
					 ic_id: data.id,
					 ic_number: data.ticketNum,
					 type: 'ic',
					 method: 'add'
				 };
				var request ={
						method: 'POST',
						url: '/api/naci/gds/updateGDS',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: param				
				};
				$http(request).then(function(response){
					 console.log(response);
					 var icID = $('#ic_id').val();
					 if(icID != null || icID.trim() != ""){
								removeICAfterSubmit(icID);
					 }
					 $('#recId').val($('#hideGDSId').val());
				});				
			});
	} 
	
	$scope.saveIcForm = function(){
		$('#refresh').val('0');
		var variables = getIcFormData();
		variables.gds_id = $('#hideGDSId').val();
		var icData = JSON.stringify(variables);
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: icData
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			$('#recId').val($('#hideGDSId').val());
			$('#icForm').modal('hide');
			$('#infoModal').modal('show');
			$('#messageInfo').html('The Intramural Submission Certification Data has been saved successfully.');
			$('#btnOkConfirm').off('click').click(function() {
          $('#infoModal').modal('hide');
			});
		}
		function handleError(){
			console.error(response);
			alert('ERROR');
		}
	};
	
	function getIcFormData(){
		var variables = {};
		variables.requested_for = userId;
		variables.opened_by = userId;
		variables.application = 'GDS_IC';
		variables.value = '';
		variables.project_name = '';
		variables.saved_id = $('#ic_id').val();
		var index = 0;
		for(index = 0; index &lt; names.length; index++){
			if(index != 0) variables.value += ',';
			if(names[index] == 'data_access'){
				var access = $('input[name=dataAccessBox]:checked').val();
				variables.value += names[index] + "=" + access;
			}else if(names[index] == 'display'){
				var display = 'no';
				if($('#displayBox').is(':checked')){
					display = 'yes';
				}
				variables.value += names[index] + "=" + display;
			}else if(names[index] == 'frequency'){
				var frequency = 'no';
				if($('#frequenceBox').is(':checked')){
					frequency = 'yes';
				}
				variables.value += names[index] + "=" + frequency;				
			}else if(names[index] == 'sampleTime'){
				var sampleTime = $('input[name=sampleTime]:checked').val();
				variables.value += 'sampleTime=' + sampleTime;
			}else if(names[index] == 'sampleConsent'){
				var sampleConsent = $('input[name=sampleConsent]:checked').val();
				variables.value += 'sampleConsent=' + sampleConsent;
			}else{
				var val = $('#'+names[index]).val();
				variables.value += names[index] + '=' + val;
			}
		}
		
		return variables;
	}
	
	function getICData(){
		var variables = {};
		for(i = 0; i &lt; names.length; i++){
			if(names[i] == 'data_access'){
				var access = $('input[name=dataAccessBox]:checked').val();
				variables[names[i]] = access;
			}else if(names[i] == 'display'){
				var display = 'no';
				if($('#displayBox').is(':checked')){
					display = 'yes';
				}
				variables[names[i]] = display;
			}else if(names[i] == 'frequency'){
				var frequency = 'no';
				if($('#frequenceBox').is(':checked')){
					frequency = 'yes';
				}
				variables[names[i]] = frequency;				
			}else if(names[i] == 'sampleTime'){
				variables[names[i]] = $('#sample_time').val();
			}else if(names[i] == 'sampleConsent'){
				variables[names[i]] = $('#sample_consent').val();
			}else{
				variables[names[i]] = $('#'+names[i]).val();
			}
		}
		return variables;
	}
	
	function icDataValidation(sample_time, sample_consent){
		var error = false;
		var i = 0; 
		if($('#piUserId').val() == null || $('#piUserId').val().trim().length == 0){
				error = true;
			$('#icErr').html("&lt;font color='red'&gt;&lt;li&gt;PI Name in Project Information is the required field&lt;/li&gt;&lt;/font&gt;");
		}
		if($('#piTitle').val().trim().length == 0){
			error = true;
			$('#icErr').html("&lt;font color='red'&gt;&lt;li&gt;PI Title in Project Information is the required field&lt;/li&gt;&lt;/font&gt;");
		}else{
				for(i = 0; i &lt; names.length; i++){
					if(names[i] == 'sampleTime' || names[i] == 'sampleConsent'){
						continue;
					}
					/*if(sample_time == 'yes' &amp;&amp; sample_consent == 'yes'){
						if(names[i] == 'institution_name'){
							continue;
						}
					}else if(sample_time == 'no' &amp;&amp; sample_consent == 'yes'){
								if(names[i] == 'institution_name'){
										continue;
								}
					}*/
					if(names[i] == 'data_access' || names[i] == 'display' || names[i] == 'frequency'){
						continue;
					}
					if(names[i] == 'gpa_organization'){
						if($('#' + names[i]).val() == 'none'){
							error = true;
							$('#' + names[i]).css('background-color','yellow');
						} 
					}else	if(names[i] == 'sd_organization'){
						if($('#' + names[i]).val() == 'none'){
							error = true;
							$('#' + names[i]).css('background-color','yellow');
						} 
					}else{
						if($('#' + names[i]).val().trim().length == 0){
							error = true;
							$('#' + names[i]).css('background-color','yellow');
						}
					}
				}
		}
		return error;
	}
	
	function clearICFieldBackground(){
		var i = 0; 
		for(i = 0; i &lt; names.length; i++){
				$('#' + names[i]).css('background-color','');
		}
	}
	
	function cleanICData(){
	 var i = 0; 
	 for(i = 0; i &lt; names.length; i++){
		 if(names[i] == 'gpa_organization' || names[i] == 'sd_organization'){
			 $('#' + names[i]).val("none");
		 }else{
				$('#' + names[i]).val('');
		 }
	 }
 }	
	
	 function removeICAfterSubmit(id){
			var data = {
				saved_id: id,
				action: 'DELETE'
			};
			var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
			};
			$http(request).then(handleResponse, handleError);
			function handleResponse(response) {
				var result = response.data.result;
				$('#icForm').modal('hide');
				console.log(result);
				$('#loading').hide();
			}
			
			function handleError(response) {
				console.error(response);
				alert('ERROR');
			}		
 }	

	function convertDate(year, flag){
		var result = '';
		var symbol = '';
		if(flag == '0'){
			result = year.split('/');
			symbol = '-';
		}
		if(flag == '1'){
			result = year.split('-');
			symbol = '/';
		}
		
		return result[0] + symbol + result[1] + symbol + result[2];
	}
	
	$scope.loadICResubmitConfirm = function(){
		$('#refresh').val('0');
		$('#messageIC').html('Are you sure you want to resubmit this request?');
		$('#icConfirmSubmitDiv').modal('show');
		$('#icYesConfirm').off('click').click(function() {
				//submit request
				$('#errorMessage').hide();
				//validation		
				var sample_time = $('#sample_time').val();
				var sample_consent = $('#sample_consent').val();
				var error = icDataValidation(sample_time, sample_consent);
				if(error == true){
						$('#icError').show();
				}else{
						resubmitICRequest();	
				}
				$('#icConfirmSubmitDiv').modal('hide');
			});
			$('#icNoConfirm').off('click').click(function() {
				$('#icConfirmSubmitDiv').modal('hide');
			});
	};
	
	function resubmitICRequest(){    
		var variables = {};
		//ccr_id is IC request ID
    var currentId = $('#ccr_id').val();
		variables.org_id = $('#'+currentId +'_orginId_ic').val();
    variables.ticket_number = $('#'+currentId +'_ticket_num_ic').val();
		$('#loading').show();
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/gsdspUtil',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: variables
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			var version = result.version;
			resubmitIC($('#'+currentId +'_orginId_ic').val(), version, currentId);
		}
		function handleError(){
			console.error(response);
			alert('ERROR');
		}		
	}

	function resubmitIC(org_id, version, currentId){
     var variables= getICData();
		 variables.orginId = org_id;
		 variables.version = version;
		 variables.requested_for = $('#piUserId').val();
     variables.opened_by = userId;
     variables.contact_type = org_id +"="+version;
	   variables.cat_item = catItemId;
     variables.short_description = $('#hideGDSId').val();
		 var fixedComments = formatHistoricComment($('#resubmitCommentsId').val());
		 variables.comments = fixedComments;
	   variables.resubmit = 'true';
		 variables.variables= itemIdArray;
		 var icData = JSON.stringify(variables);
		 var req = {
						method: 'POST',
						url: '/api/naci/gds/submitICRequest',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: icData
			}
			$http(req).then(function(response){
				 console.log(response);
				 var data = response.data.result[0];
				 var param ={
					 gds_id: $('#hideGDSId').val(),
					 ic_id: data.id,
					 ic_number: data.ticketNum,
					 type: 'ic',
					 method: 'add'
				 };
				var request ={
						method: 'POST',
						url: '/api/naci/gds/updateGDS',
						beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
						headers: {
							'Content-Type': 'application/json'
						},
						data: param				
				};
				$http(request).then(function(response){
					 console.log(response);
					 $('#icForm').modal('hide');
					$('#loading').show();
				});				
			});
	}	
	function formatHistoricComment(comment){
		if(comment.length&gt;= 50){
				 var index = comment.indexOf('Added comment to Approval record:');
				 return comment.substring(index);
		}else{
				 return  ' ';
		}
	}	
	
	window.toggleTextField = function(){
		if($('#dataLimitation').val() == 'Disease-specific'){
			$('#useTextLabel').html('Disease');
			$('#useTextLabel').show();
			$('#useTextField').show();
		}else if($('#dataLimitation').val() == 'other'){
			$('#useTextLabel').html('Other');
			$('#useTextLabel').show();
			$('#useTextField').show();
		}else{
			$('#useTextField').hide();
			$('#useTextLabel').hide();
		}
	};
	
	$scope.addConsent = function(){
		$('#refresh').val('1');
		$('#icConsentGroupDiv').modal('show');
		$('#consentSubmitConfirm').off('click').click(function() {
			var valid = validateConsentGrp();		
			if(valid.hasError == true){
				$('#consentErr').html(valid.message);
				$('#consentErr').show();
			}else{
				$('#consentErr').html('');
				$('#consentErr').hide();
				saveConsentGrp();
				$('#icConsentGroupDiv').modal('hide');
			}
		});
		$('#consentCancelConfirm').off('click').click(function() {
				$('#icConsentGroupDiv').modal('hide');
		});
	}
	
	function saveConsentGrp(){
		var groupData = getConsentGrpData();
		groupData.method = 'add';
		groupData.id = $('#hideGDSId').val();
		var data1 = JSON.stringify(groupData);
		var request = {
				method: 'POST',
				url: '/api/naci/gds/saveICConsent',
			  beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data1
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			$('#recId').val($('#hideGDSId').val());
	    addConsentId(result.id);
			addOrUpdateICInfo();
			resetConsentGrp();
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}	
	}
	
	function addOrUpdateICInfo(){
		var icId =  $('#ic_id').val();
		if(icId == null || icId.trim().length == 0){
			processICData(0);
		}else{
			processICData(1);
		}
	}

	function processICData(indicator){
		
	  var variables = {};
		if(indicator == 0){
			variables = getIcFormData();
		}else {
			variables = getIcFormData2();
		}
		var icData = JSON.stringify(variables);
		var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: icData
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
			if(indicator == 0){
				$('#ic_id').val(result[0].sys_id);
			}
			var ic_id = $('#ic_id').val();
			loadConsentData(ic_id);
		}
		function handleError(response){
			console.error(response);
			alert('ERROR');
		}	
	}
	
	function getIcFormData2(){
		var variables = {};
		variables.requested_for = userId;
		variables.opened_by = userId;
		variables.application = 'GDS_IC';
		variables.value = '';
		variables.project_name = '';
		variables.saved_id = $('#ic_id').val();
		var index = 0;
		for(index = 0; index &lt; names.length; index++){
			if(index != 0) variables.value += ',';
			var val = $('#'+names[index]).val();
			variables.value += names[index] + '=' + val;
		}
		var sampleTime = $('#sample_time').val();
		var sampleConsent = $('#sample_consent').val();
		variables.value += ',sampleTime=' + sampleTime +",";
		variables.value += 'sampleConsent=' + sampleConsent;
		return variables;
	}
	
	function addConsentId(id){
		 var consentGrp = $('#consent_group').val();
		if(consentGrp.trim().length == 0){
        $('#consent_group').val(id);			
		}else{
			 var temp = consentGrp.split(",");
			 temp[temp.length] = id;
			 var str = getIdInString(temp);
			 $('#consent_group').val(str);
		}
	}
	
	function getIdInString(temp){
	   var ids = '';
		 if(temp.length == 1){
			 ids = ''+temp[0];
		 }else{
			 for(var ind = 0; ind &lt; temp.length; ind++){
				 if(ind == 0){
					 ids = ids + temp[ind];
				 }else{
					 ids = ids + "#" + temp[ind];
				 }
			 }
		 }	
		return ids;
	}
	
	$scope.removeConsent = function(id){
		    $('#refresh').val('1');
			var $confirm = $('#icConfirmSubmitDiv');
			$confirm.modal('show');
			$('#messageIC').html("Are you sure you want to remove this Consent Group?");		
			$('#icYesConfirm').off('click').click(function() {
				//submit request
			 removeConsentGroup(id);
				$confirm.modal('hide');
			});
			$('#icNoConfirm').off('click').click(function() {
				$confirm.modal('hide');
			}); 
		
	}
	
	function removeConsentGroup(id){
		$('#consent_group').val(removeConsentGroupId(id));
		 //remove consent group from database.
		var request = {
				method: 'POST',
				url: '/api/naci/gds/saveICConsent',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: {id: id, method: 'remove'}
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
			var result = response.data.result;
       addOrUpdateICInfo();
			 var ic_id = $('#ic_id').val();
			 loadConsentData(ic_id);
		}
		function handleError(response){
			console.error(response);
			alert('ERROR');
		}	
	}
	
	function removeConsentGroupId(id){
		var idStr = $('#consent_group').val();
		var temp = idStr.split("#");
		if(temp.length == 1){
			return "";
		}else{
			var newIds = [];
			var index = 0;
			for(var i = 0; i &lt; temp.length; i++){
				if(temp[i] == id){
					continue;
				}else{
					newIds[index] = temp[i];
					index++;
				}
			}
			var newStr = getIdInString(newIds);
			return newStr;
		}
	}
	
	function getConsentGrpData(){
		var groupData = {};
		groupData.siteName = $('#branch').val();
		groupData.data_limit = $('#dataLimitation').val();
		groupData.data_field = $('#dataUseLimitation').val();
		groupData.dataModifier = $('#dataModifier').val();
		return groupData;
	}
	function validateConsentGrp(){
		var jData = {};
		var hasError = false;
		var error = '&lt;font color="red"&gt;';
		var groupData = getConsentGrpData();
		var siteName = groupData.siteName;
		var data_limit = groupData.data_limit;
		var data_field = groupData.data_field;
		var dataModifier = groupData.dataModifier;
		
		if(siteName == 'None'){
			error = error + "&lt;li&gt;Please select a Site Name&lt;/li&gt;";
			hasError = true;
		}
		if(data_limit == 'None'){
			error = error + "&lt;li&gt;Please select a Use Limitation&lt;/li&gt;";
			hasError = true;
		}
		if(data_limit == 'ds' &amp;&amp; (data_field == null || data_field.trim().length == 0)){
			error = error + "&lt;li&gt;Please enter Disease Name&lt;/li&gt;";
			hasError = true;
		}
		if(data_limit == 'other' &amp;&amp; (data_field == null || data_field.trim().length == 0)){
			error = error + "&lt;li&gt;Please enter Other Use Limitation&lt;/li&gt;";
			hasError = true;
		}
		if(dataModifier == null ){
			error = error + "&lt;li&gt;Please select Data Use Limitation Modifier&lt;/li&gt;";
			hasError = true;
		}
		error = error + "&lt;/font&gt;";
		jData.hasError = hasError;
		jData.message = error;
		
		return jData;
	}
	
	function resetConsentGrp(){
		$('#branch').val('None');
		$('#dataLimitation').val('None');
		$('#dataUseLimitation').val('');
		$('#useTextField').css('display', 'none');
		$('#useTextLabel').css('display', 'none');
		$('#dataModifier').select2("val", "");
		$('#consentErr').html("");
	  $('#consentErr').css('display', 'none');
	}	
	
	//this is the call back function from GDS Main Client Script.
	$('#ic_id').on('custom_action', function(value) {
		   var id = $('#ic_id').val();
		   if(id != null &amp;&amp; id.trim().length &gt; 0){
			   loadConsentData(id);
		   }
	});

	function loadConsentData(ic_id){
		if(ic_id == null || ic_id.trim().length == 0){
				c.data.consentTasks = [];
		}else{
				populateConsentGroupData(ic_id);
		}
	}
	
	function populateConsentGroupData(ic_id){
			var request = {
				method: 'POST',
				url: '/api/naci/gds/fetchConsnetGroupData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: {icID: ic_id}
			};
			$http(request).then(handleResp, handleErr);
			function handleResp(response){
				var result = response.data.result;
				c.data.consentTasks = result;
			}
			function handleErr(response){
				console.error(response);
				alert('ERROR');
			}			
	}
	
	function populateConsentGroupDataById(consentId){
			var request = {
				method: 'POST',
				url: '/api/naci/gds/fetchConsentGroupById',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: {consentID: consentId}
			};
			$http(request).then(handleResp, handleErr);
			function handleResp(response){
				var result = response.data.result;
				c.data.consentTasks = result;
			}
			function handleErr(response){
				console.error(response);
				alert('ERROR');
			}			
	}	

}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.modal-dialog1 {
    width: 1100px;
    margin: 30px auto;
    position: relative;
}

.modal-dialog2 {
    width: 1000px;
    margin: 30px auto;
    margin-top: 250px;
    position: relative;
}

.modal-dialog2 div {
  background-color: #f2f2f2;
}

.popover{
    width:400px !important;
    height:350px; 
  	overflow: auto;
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gfw&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS IC Form Widget&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	data.consentTasks = [];
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id
	};
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-06-27 17:23:24&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;2a1d6b2edb2f360054d8ff621f961976&lt;/sys_id&gt;&lt;sys_mod_count&gt;742&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS IC Form Widget&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_2a1d6b2edb2f360054d8ff621f961976&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-24 22:18:35&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
&lt;div id='icForm' class='modal fade' data-keyboard="false" data-backdrop="static" style="overflow-y:auto; overflow-x: auto;"&gt;
	&lt;div class="modal-dialog1"&gt;
  	&lt;div class="modal-content" style="height:900px;overflow-y:auto; overflow-x: hidden;"&gt;
       &lt;div class="modal-header"&gt;
               &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                   &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
               &lt;/button&gt;
               &lt;h4 class="modal-title"&gt;Institutional Certification Submission&lt;/h4&gt; &lt;br&gt;
               &lt;span id="icMessage"&gt;&lt;/span&gt;
       &lt;/div&gt;      
       &lt;div class="modal-body"&gt;   
          &lt;div class="row" id='icError' style="display:none"&gt;
            &lt;div class="col-md-5" id='icErr'&gt;
      	      &lt;font color='#B22222'&gt;&lt;li&gt;Please fill in all required fields&lt;/li&gt;&lt;/font&gt;  
            &lt;/div&gt;
         &lt;/div&gt;
          &lt;div class="row"&gt;
            &lt;div class="col-md-3"&gt;
              &lt;label&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Certification Date&lt;/label&gt;
            &lt;/div&gt;
            &lt;div class="col-md-3"&gt;
               &lt;div class='input-group date' id='datepicker'&gt;
                  &lt;input type="text" class="form-control" id="certification_date" size="20" name="certification_date" readonly='true' aria-labelledby="datepicker"&gt;
                  &lt;span class="input-group-addon"&gt;
                          &lt;span class="glyphicon glyphicon-calendar"&gt;&lt;/span&gt;
                  &lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div id='institutionDiv' class="col-md-3"&gt;
              &lt;label for="institution_name"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Name of Institution&lt;/label&gt;
            &lt;/div&gt;
            &lt;div id='institutionNameDiv' class="col-md-3"&gt;
              &lt;input type="text" class="form-control" id="institution_name" size="20"/&gt;
            &lt;/div&gt;
         &lt;/div&gt; 
         &lt;div class="row"&gt;&amp;nbsp;&lt;/div&gt;
      	 &lt;div class="row"&gt;
            &lt;div class="col-md-3"&gt;
              	&lt;label for="certification_to"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;GPA&lt;br/&gt;&amp;nbsp;(Genomic Program Administrator)&lt;/label&gt;
            &lt;/div&gt;
            &lt;div class="col-md-3"&gt;
              &lt;input type="text" class="form-control" id="certification_to" size="20"/&gt;
            &lt;/div&gt;
            &lt;div class="col-md-3"&gt;
              &lt;label for="gpa_organization"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Organization of GPA&lt;/label&gt;
            &lt;/div&gt;
            &lt;div class="col-md-3"&gt;
        				&lt;select id="gpa_organization" class="form-control" style="width:150px;"&gt;
                   &lt;option value="none"&gt;Select IC&lt;/option&gt;
                   &lt;option value="NCI"&gt;NCI&lt;/option&gt;
                   &lt;option value="NEI"&gt;NEI&lt;/option&gt;
                   &lt;option value="NHGRI"&gt;NHGRI&lt;/option&gt;
                   &lt;option value="NHLBI"&gt;NHLBI&lt;/option&gt;
                   &lt;option value="NIA"&gt;NIA&lt;/option&gt;
                   &lt;option value="NIAAA"&gt;NIAAA&lt;/option&gt;
                   &lt;option value="NIAID"&gt;NIAID&lt;/option&gt;
                   &lt;option value="NIAMS"&gt;NIAMS&lt;/option&gt;
                   &lt;option value="NIBIB"&gt;NIBIB&lt;/option&gt;
                   &lt;option value="NICHD"&gt;NICHD&lt;/option&gt;
                   &lt;option value="NIDA"&gt;NIDA&lt;/option&gt;
                   &lt;option value="NIDCD"&gt;NIDCD&lt;/option&gt;
                   &lt;option value="NIDCR"&gt;NIDCR&lt;/option&gt;
                   &lt;option value="NIDDK"&gt;NIDDK&lt;/option&gt;
                   &lt;option value="NIEHS"&gt;NIEHS&lt;/option&gt;
                   &lt;option value="NIGMS"&gt;NIGMS&lt;/option&gt;
                   &lt;option value="NIMH"&gt;NIMH&lt;/option&gt;
                   &lt;option value="NIMHD"&gt;NIMHD&lt;/option&gt;
                   &lt;option value="NINDS"&gt;NINDS&lt;/option&gt;
                   &lt;option value="NINR"&gt;NINR&lt;/option&gt;
                   &lt;option value="NLM"&gt;NLM&lt;/option&gt;
                   &lt;option value="CIT"&gt;CIT&lt;/option&gt;
                   &lt;option value="CSR"&gt;CSR&lt;/option&gt;
                   &lt;option value="FIC"&gt;FIC&lt;/option&gt;
                   &lt;option value="NCCIH"&gt;NCCIH&lt;/option&gt;
                   &lt;option value="NCATS"&gt;NCATS&lt;/option&gt;
                   &lt;option value="CC"&gt;CC&lt;/option&gt;
                   &lt;option value="OD"&gt;OD&lt;/option&gt;
                &lt;/select&gt;             
            &lt;/div&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
           &amp;nbsp;
         &lt;/div&gt;
         &lt;div class="row"&gt;
            &lt;div class="col-md-3"&gt;
              	&lt;label for="certification_from"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Signing Authority&lt;br/&gt;&amp;nbsp;(Scientific Director)&lt;/label&gt;
            &lt;/div&gt;
            &lt;div class="col-md-3"&gt;
              &lt;input type="text" class="form-control" id="certification_from" size="20"/&gt;
            &lt;/div&gt;
            &lt;div class="col-md-3"&gt;
              &lt;label for="sd_organization"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Organization of SD&lt;/label&gt;
            &lt;/div&gt;  
            &lt;div class="col-md-3"&gt;
						&lt;select id="sd_organization" class="form-control" style="width:150px;"&gt;
							&lt;option value="none"&gt;Select IC&lt;/option&gt;
							&lt;option value="NCI"&gt;NCI&lt;/option&gt;
							&lt;option value="NEI"&gt;NEI&lt;/option&gt;
							&lt;option value="NHGRI"&gt;NHGRI&lt;/option&gt;
							&lt;option value="NHLBI"&gt;NHLBI&lt;/option&gt;
							&lt;option value="NIA"&gt;NIA&lt;/option&gt;
							&lt;option value="NIAAA"&gt;NIAAA&lt;/option&gt;
							&lt;option value="NIAID"&gt;NIAID&lt;/option&gt;
							&lt;option value="NIAMS"&gt;NIAMS&lt;/option&gt;
							&lt;option value="NIBIB"&gt;NIBIB&lt;/option&gt;
							&lt;option value="NICHD"&gt;NICHD&lt;/option&gt;
							&lt;option value="NIDA"&gt;NIDA&lt;/option&gt;
							&lt;option value="NIDCD"&gt;NIDCD&lt;/option&gt;
							&lt;option value="NIDCR"&gt;NIDCR&lt;/option&gt;
							&lt;option value="NIDDK"&gt;NIDDK&lt;/option&gt;
							&lt;option value="NIEHS"&gt;NIEHS&lt;/option&gt;
							&lt;option value="NIGMS"&gt;NIGMS&lt;/option&gt;
							&lt;option value="NIMH"&gt;NIMH&lt;/option&gt;
							&lt;option value="NIMHD"&gt;NIMHD&lt;/option&gt;
							&lt;option value="NINDS"&gt;NINDS&lt;/option&gt;
							&lt;option value="NINR"&gt;NINR&lt;/option&gt;
							&lt;option value="NLM"&gt;NLM&lt;/option&gt;
							&lt;option value="CIT"&gt;CIT&lt;/option&gt;
							&lt;option value="CSR"&gt;CSR&lt;/option&gt;
							&lt;option value="FIC"&gt;FIC&lt;/option&gt;
							&lt;option value="NCCIH"&gt;NCCIH&lt;/option&gt;
							&lt;option value="NCATS"&gt;NCATS&lt;/option&gt;
							&lt;option value="CC"&gt;CC&lt;/option&gt;
							&lt;option value="OD"&gt;OD&lt;/option&gt;
						&lt;/select&gt;              
           &lt;/div&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
           &amp;nbsp;
         &lt;/div&gt;
         &lt;div class="row"&gt;
           &lt;div class="col-md-3"&gt;
             &lt;label for="study_name"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Original Study Name&lt;/label&gt;
           &lt;/div&gt;
           &lt;div class="col-md-9"&gt;
             &lt;input type="text" class="form-control" id="study_name" style="width:90%"/&gt;
           &lt;/div&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
           &amp;nbsp;
         &lt;/div&gt;
         &lt;div class="row"&gt;
           &lt;div class="col-md-3"&gt;
             &lt;label for="project_title"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;Project Title for Data to be submitted&lt;/label&gt;
           &lt;/div&gt;
           &lt;div class="col-md-9"&gt;
             &lt;input type="text" class="form-control" id="project_title" style="width:90%" readonly/&gt;
           &lt;/div&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
           &lt;div class="col-md-3"&gt;
             &lt;label id="dataAccessBox1"&gt;Data are made available through&lt;/label&gt;
           &lt;/div&gt;
           &lt;div class="col-md-3"&gt;
             &lt;input type="radio" id="dataAccessBox" name="dataAccessBox" value="unrestricted" aria-labelledby="dataAccessBox1"&gt;&amp;nbsp;Unrestricted
           &lt;/div&gt;
           &lt;div class="col-md-2"&gt;
             &lt;input type="radio" id="dataAccessBox" name="dataAccessBox" value="controlled-access" aria-labelledby="dataAccessBox1"&gt;&amp;nbsp;Controlled-access
           &lt;/div&gt;
         &lt;/div&gt;
         &lt;div class="row"&gt;
           &lt;div class="col-md-3"&gt;
             &lt;label id="dataUpload"&gt;Data is to upload&lt;/label&gt;
           &lt;/div&gt;
           &lt;div class="col-md-3"&gt;
             &lt;input type="checkbox" id="displayBox" aria-labelledby="dataUpload"&gt;&amp;nbsp;The display of variant alleles
           &lt;/div&gt;
           &lt;div class="col-md-6"&gt;
             &lt;input type="checkbox" id="frequenceBox" aria-labelledby="dataUpload"&gt;&amp;nbsp;Frequencies from this study in public variation archives (dbSNP and dbVar)
           &lt;/div&gt;
         &lt;/div&gt;         
         &lt;div class="panel panel-default"&gt;
               &lt;div class="panel-heading" id="consentGrpDiv"&gt;&lt;font color='#B22222'&gt;*&lt;/font&gt;The consent group(s) for each collaborating study site &lt;/div&gt;&lt;br&gt;
             &lt;div class="panel panel-success"&gt;
                      &lt;div class="panel-heading" id="heading_consent" style="padding-top: 5px; padding-bottom: 5px;" role="tab"&gt;
                          &lt;h4 class="panel-title" style="display: flex; justify-content: space-between; align-items: center;"&gt;
                              &lt;a aria-controls="collapseConsent" aria-expanded="true" data-target="#collapseConsent" data-toggle="collapse" role="button"&gt;
                            &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
                            Consent Groups&lt;span class="badge" id="ritm_count"&gt;{{ c.data.consentTasks.length }}&lt;/span&gt;&lt;/a&gt;
                        	  &lt;button type="button" class="btn btn-primary pull-right" style="width: 70px; text-align: center;" ng-click='addConsent()'&gt;Add&lt;/button&gt;
                        	&lt;/h4&gt;
                      &lt;/div&gt;
                      &lt;div aria-labelledby="heading_consent" class="panel-collapse collapse in" id="collapseConsent" role="tabpanel"&gt;
                            &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
                              &lt;thead&gt;
                              &lt;tr&gt;
                                &lt;th 
                                    ng-repeat="column in c.columns track by $index" 
                                    ng-click="c.toggleSort($index)" 
                                    style="cursor: pointer"&gt;
                                    {{ column.label }}
                                    &lt;span 
                                      class="glyphicon small" 
                                      ng-class="{
                                                  'glyphicon-chevron-up': column.sort === 'asc',
                                                  'glyphicon-chevron-down': column.sort === 'desc'
                                                }"&gt;
                                    &lt;/span&gt;
                                &lt;/th&gt;
                              &lt;/tr&gt;
                              &lt;/thead&gt;
                              &lt;tr ng-repeat="row in c.data.consentTasks track by $index"
                                  ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                                           $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"&gt;
                                &lt;td class="ritm_number"&gt;{{ row.site_name }}&lt;/td&gt;
                                &lt;td class="ritm_number"&gt;{{ row.use_limit }}&lt;/td&gt;
                                &lt;td class="ritm_number"&gt;{{ row.data_modifier }}&lt;/td&gt;
                                &lt;td&gt;
                                  &lt;button class="btn btn-sm btn-primary" ng-click="removeConsent(row.id)" style="width: 70px; text-align: center;"&gt;
                                    Remove
                                  &lt;/button&gt;
                                &lt;/td&gt;
                              &lt;/tr&gt;
                            &lt;/table&gt;
                    	&lt;/div&gt;
                                &lt;!-- select the page size --&gt;
                    &lt;form class="form-inline pull-right"&gt;
                      &lt;div class="pagination form-group"&gt;
                        &lt;label for="pageSize22"&gt;
                          Items per page
                        &lt;/label&gt;

                        &lt;select 
                          id="pageSize22" 
                          class="form-control"
                          style="display: inline"
                          ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                          ng-model="c.pagination.currentSize"
                          ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
                        &lt;/select&gt;
                      &lt;/div&gt;
                    &lt;/form&gt;  

                    &lt;!-- select the page index (offset) --&gt;
                    &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.consentTasks.length"&gt;
                      &lt;li
                        ng-repeat="index in c.getRange() track by $index"
                        ng-click="c.setPage($index)"
                        &gt;
                        &lt;a href=""&gt;
                          {{ $index + 1 }}
                        &lt;/a&gt;
                      &lt;/li&gt;
                    &lt;/ul&gt;   
               &lt;br&gt;&lt;br&gt;&lt;br&gt;
           	 &lt;/div&gt;
           &lt;/div&gt;
         &lt;/div&gt;  
         &lt;br&gt;
         &lt;div id="pre_comments_ic_div1" class="col-md-12" style="display:none;"&gt;
             &lt;fieldset class="scheduler-border"&gt;
                 &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Approval Status&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                 &lt;div id="commentReviewICId2"&gt;&lt;/div&gt;
             &lt;/fieldset&gt;
         &lt;/div&gt;    
         &lt;div id="regularICSubmit" class="modal-footer"&gt;
            &lt;button type="button" class="btn btn-primary" 
            style="width: 70px; text-align: center;" ng-click='submitIcForm()'&gt;Submit&lt;/button&gt;
             &lt;button type="button" class="btn btn-primary" 
            style="width: 70px; text-align: center;" ng-click='saveIcForm()'&gt;Save&lt;/button&gt;
           &lt;button type="button" class="btn btn-primary" 
            style="width: 70px; text-align: center;" ng-click='closeICForm()'&gt;Cancel&lt;/button&gt;
         &lt;/div&gt;
	       &lt;div id="resubmitIC" style="display:none;" class="modal-footer"&gt;
           &lt;input type="button" class="btn btn-primary btn-sm btn-form" name="submitBt" value="SUBMIT" ng-click="loadICResubmitConfirm()"/&gt; 
           &lt;input type="button" class="btn btn-primary btn-sm btn-form" name="cancelBt" value="CANCEL" ng-click="closeICForm()"/&gt;
    		 &lt;/div&gt;      
         &lt;input type="hidden" id="ic_id"/&gt;
         &lt;input type="hidden" id="sample_time"/&gt;
         &lt;input type="hidden" id="sample_consent"/&gt;
         &lt;input type='hidden' id='type'/&gt;
         &lt;input type='hidden' id='consent_group'/&gt;
         &lt;input type='hidden' id='consentGroupIds'/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt; 
&lt;/div&gt;
  
&lt;div id="icConfirmSubmitDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="messageIC"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="icYesConfirm" 
                type="button" class="btn btn-primary" 
                style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="icNoConfirm" 
                type="button" class="btn btn-default" 
                style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;  

&lt;div id="icConsentGroupDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog2"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;The consent group(s) for each collaborating study site&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
   					&lt;!--add consent information here--&gt;
               &lt;div id="consentErr"&gt; &lt;/div&gt;
               &lt;br&gt;
               &lt;div class="row"&gt;
                 &lt;div class="col-md-3"&gt;
                    &lt;label for="branch"&gt;Collaborating Site Name&lt;/label&gt;
                 &lt;/div&gt;
                 &lt;div class="col-md-9"&gt;
                   &lt;!--&lt;select id="branch" class="selectpicker" style="width: 100%;" &gt;
                   &lt;/select&gt;--&gt;
                   &lt;input id="branch" class="form-control" style="width:100%"&gt;
                 &lt;/div&gt;
               &lt;/div&gt;
               &lt;br&gt;
               &lt;div class="row"&gt;
                 &lt;div class="col-md-3"&gt;
                   &lt;label for="dataLimitation"&gt;Data Use Limitations&lt;/label&gt;&amp;nbsp;&lt;a href="" data-toggle="popover"  data-html="true" data-trigger="focus"  title="&lt;b&gt;Data Use Limitation&lt;/b&gt;" data-content="Data Use Limitions will be used in dbGaP to create Consent Groups. &lt;br/&gt; &lt;ul&gt;&lt;li&gt;&lt;b&gt;General Research Use[GRU]:&lt;/b&gt; &lt;br&gt; Use of data us limited only by the terms of the Data Use Certification; these data will be added to the dbGaP Collection.&lt;/li&gt;&lt;li&gt;&lt;b&gt;Health/Medical/Biomedical[HMB]:&lt;/b&gt;&lt;br&gt;Use of the data is limited to health/medical/biomedical purpose, does not include the study of population origins or ancestry.&lt;/li&gt;&lt;li&gt;&lt;b&gt;Disease-specific (list disease) [DS]: &lt;/b&gt; &lt;br&gt;Use of the data must be related to the specified disease.&lt;/li&gt;&lt;li&gt;&lt;b&gt;Other:&lt;/b&gt;&lt;br&gt;Enter customized text, if applicable.&lt;/li&gt;&lt;/ul&gt;"&gt;&lt;img src="contextual_help.png" width="20px" height="20px" Alt="Help" Title="Help"/&gt;&lt;/a&gt;
                 &lt;/div&gt;
                 &lt;div class="col-md-4"&gt;
                   &lt;select id="dataLimitation" class="form-control" style="width:80%;" onchange="toggleTextField()"&gt;
                      &lt;option value="None"&gt;Please select an item&lt;/option&gt;
                      &lt;option value="General Research User"&gt;General Research User&lt;/option&gt;
                      &lt;option value="Health/Medical/Biomedical"&gt;Health/Medical/Biomedical&lt;/option&gt;
                      &lt;option value="Disease-specific"&gt;Disease-specific&lt;/option&gt;
                      &lt;option value="other"&gt;Other&lt;/option&gt;
                   &lt;/select&gt;
                 &lt;/div&gt;
                 &lt;div class="col-md-1" id="useTextLabel"&gt;
                 &lt;/div&gt;
                 &lt;div class="col-md-4" id="useTextField" style="display:none;"&gt;
                   &lt;input type="text" size="40" class="form-control" id="dataUseLimitation" aria-labelledby="useTextLabel"/&gt;
                 &lt;/div&gt;
               &lt;/div&gt;
               &lt;br&gt;
               &lt;div class="row"&gt;
                  &lt;div class="col-md-3"&gt;
                    &lt;label for="dataModifier"&gt;Data Use Limitation Modifiers&lt;/label&gt;&amp;nbsp;&lt;a href="" data-toggle="popover"  data-html="true" data-trigger="focus"  title="&lt;b&gt;Data Use Limitation Modifier&lt;/b&gt;" data-content="Data Use Limitions Modifiers. &lt;br/&gt; &lt;ul&gt;&lt;li&gt;&lt;b&gt;IRB Approval Required[IRB]:&lt;/b&gt; &lt;br&gt;Requestor must provide document of local IRB approval.&lt;/li&gt;&lt;li&gt;&lt;b&gt;Publication Required[PUB]:&lt;/b&gt;&lt;br&gt;Requestor agrees to make results of studies using the data available to the large scientific community.&lt;/li&gt;&lt;li&gt;&lt;b&gt;Collaboration Required[COL]: &lt;/b&gt; &lt;br&gt;Requestor must provide a letter of collaboration with the primary study investigator(s).&lt;/li&gt;&lt;li&gt;&lt;b&gt;Not-for-profit Use Only[NPU]:&lt;/b&gt;&lt;br&gt;Use of the data is limited to not-for-profit organizations.&lt;/li&gt;&lt;li&gt;&lt;b&gt;Methods[MDS]:&lt;/b&gt;&lt;br&gt;Use of the data includes methods development research (e.g., development of software or algorithms).&lt;/li&gt;&lt;li&gt;&lt;b&gt;Genetic Studies Only[GSO]:&lt;/b&gt;&lt;br&gt;Use of the data is limited to genetic studies only.&lt;/li&gt;&lt;/ul&gt;"&gt;&lt;img src="contextual_help.png" width="20px" height="20px" Alt="Help" Title="Help"/&gt;&lt;/a&gt;
                 &lt;/div&gt; 
                 &lt;div class="col-md-9"&gt;
                   &lt;select id="dataModifier" class="selectpicker" multiple&gt;
                     &lt;option value="IRB"&gt;IRB&lt;/option&gt;
                     &lt;option value="PUB"&gt;PUB&lt;/option&gt;
                     &lt;option value="COL"&gt;COL&lt;/option&gt;
                     &lt;option value="NPU"&gt;NPU&lt;/option&gt;
                     &lt;option value="MDS"&gt;MDS&lt;/option&gt;
                     &lt;option value="GSO"&gt;GSO&lt;/option&gt;
                   &lt;/select&gt;
                 &lt;/div&gt;
               &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="consentSubmitConfirm" 
                type="button" class="btn btn-primary" 
                style="width: 70px; text-align: center;"&gt;Save&lt;/button&gt;
                &lt;button id="consentCancelConfirm" 
                type="button" class="btn btn-default" 
                style="width: 70px; text-align: center;"&gt;Cancel&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-501052301</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f8576a31db2b5b00b86770c08c961982</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce5f65c30000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS IC Form Widget</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>c0ff5bb0db2b5700e9eaa9c896cfdf88</update_guid>
<update_guid_history>c0ff5bb0db2b5700e9eaa9c896cfdf88:-501052301,d18b126b58df53009ba55e30a11577fa:-1261232205,f96b126bc8df53007ec8fd4afb621c1d:-61224752,b40b1e2b7fdf53008860988811709a13:-2061063493,8cca1a2b3cdf53001b26955864768fde:1198526843,ca8ad6e711df53008b2720a2a6332e7f:796002821,7c8a962b31df5300d2f745d12453ac97:1687941218,49d91ee7b6df530027260db0c19dcdf5:1614380227,61ace6d1d61b930054dc14aec68d979c:927478930,eef078350bfc1700193d310dbcff384f:-511521318,61ace6d1d61b930054dc14aec68d979c:927478930,61ace6d1d61b930054dc14aec68d979c:927478930,595be691731b9300dd2dc56cba61385f:-357149216,416956d5b8d793001fb508213725df73:-286727998,4515b0a0d4cfd700b225a4b209661041:-357149216,44f8d883922e1f005793b1b0e16db4bc:-216246762,eef078350bfc1700193d310dbcff384f:-511521318,3611b820a3b41700ac1abdeb27b79ff9:1242506465,9d6f646cd074170072d392b5165747c8:-960079799,7d1fac2cf7741700d2a22dd23043edf9:-1010502225,df801e8470f81300f92499f954b78874:-511521318,9dc2e42e89a743000e4b04b365ffcdc6:-1715254315,242dd06acfa74300a0cb771d47053b45:-1341500329,971d18e674a7430000f0a95f4dd3bb6f:-573685641,e21d906a71a74300edc4e2fd85416dc9:-1223764648,a10d506a1ea743002702c16ee71f88a9:-434626086,74fc106a56a743003ec572376e229a97:-761948285,19fa90e6f3a743000f0bc48192f373ad:1172428513,f478d8263fa74300202f25b742b15eb8:-93708570,f8681066b0a74300142a641c31adfd1f:968193701,75281c2696a74300eabe93f4d695d8c7:-248104231,8308542663a7430028e85f95b3053681:-1084204016,bde7142671a7430025e8d51b338f1bc9:-213484914,54eec0aea467430069c7dbf5bb3e25fc:449072307,629e88ae8c6743001e214fe32c614a95:-951166815,bc8e00ae4f674300c76013044622d80f:-651505509,247e846e48674300f87bafd5532bc48d:157239188,834e006e42674300cc774dcee9755809:-951166815,4d4dc06e51674300086f4dda338aa8b3:-1136156008,26bc44ea6f67430022ccfa8304206c1a:710763376,717b80aa2f674300c1136b8d7d5b7911:519761391,1f7365b979e7cf00cce8766c2a5de541:-504608143,5343e1bd70a7cf00942673e2b6f1b962:1725519728,b043257993e7cf00d6f5e6ae8c6f4059:-708959554,8e2c4db5eea7cf000f6f59921cb850c1:-1459640371,ca9d0c3df0a2070017b75a326a8c1bd8:-1600835327,3c983fe911620700c30e991c2fca37c3:-1550816664,ce18579fbbde830032bdc4fb8d5730e7:258920101,ce18579fbbde830032bdc4fb8d5730e7:258920101,ce18579fbbde830032bdc4fb8d5730e7:258920101,ce18579fbbde830032bdc4fb8d5730e7:258920101,ce18579fbbde830032bdc4fb8d5730e7:258920101</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_fac5b724dbe2ba00f59974131f9619bd</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, $http, spUtil, $window) {
  /* widget controller */
  var c = this;
	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	}; 
	c.state = $window.state;
	c.columns = [
		{
			key: 'gdsp_id',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'principal_investigator',
			label: 'Principal Investigator',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.approvalTasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.approvalTasks = c.data.approvalTasks.sort(compareRows);
		}
	};
	//for reviewed table
	c.pagination1 = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns1 = [
		{
			key: 'gdsp_id',
			label: 'GDSP ID',
			sort: 'asc'
		},
		{
			key: 'principal_investigator',
			label: 'Principal Investigator',
			sort: 'asc'
		},
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'submitted_by',
			label: 'Submitted By',
			sort: 'asc'
		},
		{
			key: 'submitted_date',
			label: 'Submitted Date',
			sort: 'asc'
		},
		{
			key: 'status',
			label: 'Status',
			sort: 'asc'
		},
		{
			key: 'last_update_date',
			label: 'Last Update Date',
			sort: 'asc'
		},
		{
			key: 'approval',
			label: 'Approval',
			sort: null
		},
		
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange1 = function() {
		var currentSize = c.pagination1.currentSize;
		var currentPage = c.pagination1.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.reviewedTasks.length / currentSize));
	};
	
	c.setPage1 = function(index) {
		c.pagination1.currentPage = index;
	};
	
	c.toggleSort1 = function(index) {
		var column = c.columns1[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.reviewedTasks = c.data.reviewedTasks.sort(compareRows);
		}
	};
	//start client JS 
  $('.collapse').on('shown.bs.collapse', function() {
      $(this).parent().find(".fa-plus-square").removeClass("fa-plus-square").addClass("fa-minus-square");
  }).on('hidden.bs.collapse', function() {
      $(this).parent().find(".fa-minus-square").removeClass("fa-minus-square").addClass("fa-plus-square");
  });	
	
	var names=['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther'];
	var textFields = ['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther']; 
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;
	var gpa = c.data.info.gpa;
	var sd = c.data.info.sd;
	
	c.view = function(doc_id, sys_id, state, stage, ticket_id){
		$('#refresh').val('0');
		fetchDetails(doc_id, sys_id, state, stage, ticket_id);
	}
	c.report = function(sys_id, gdsp_id){
	$('#refresh').val('0');
		window.open('$sp.do?id=gdsp_report_page&amp;itemId='+sys_id+'&amp;ticket='+gdsp_id, '_BLANK');
	}
	
function fetchDetails(number, approvalId, state, stage, ticket_id){
		var variables= {};
		data = {
			requestedid : number	
		};
    var request = {
			url: '/api/naci/gdspapi/fetchSubmittedRequestData',
			method: 'POST',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};
		$http(request).then(handleResponse, handleError);
		function handleResponse(response){
				var result = response.data.result;
			  var variables = result.variables;
			  var comments = "";
			  comments = result.comments;
			  var comment_str = parse(comments);
			  $('#displayRequestId').html(ticket_id);
			  resetRequestValue();
			  loadApprovalData(variables);
			  clearDiv();
				$('#commentReviewId1').empty();
				$('#commentReviewId1').append(comment_str);

				$('#commentId1').show();
				$('#commentId1Lable').show();

				if(comment_str .length &lt; 137){
							 $('#pre_comments_div').hide();
				 }else{
							 $('#pre_comments_div').show();
				 }
				$('#hiddenRequestId').val(approvalId);
				$('#hiddenRequestItemId').val(number);
			  $('#roleId').val('SD');
				$('#comments_div').show();
				if(state == 'approved' || state.indexOf('not_required') &gt;=0){
					 $('#comments_div').hide();
					 $('#submitButton').hide();
					 $('#closeButton').show();
				}else if(state == 'requested' || state == 'rejected'){
					 if((stage == 'Waiting for GPA Review' || stage == 'SD Rejected - Waiting for GPA Review') &amp;&amp; gpa){
							$('#comments_div').show();
							$('#sd_div').show();
							$('#submitButton').show();
							$('#closeButton').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; !sd){
							$('#comments_div').show();
							$('#sd_div').hide();
							$('#submitButton').show();
							$('#closeButton').hide();
					 }else if(stage == 'Waiting for SD Review' &amp;&amp; sd){
							$('#comments_div').show();
							$('#sd_div').hide();
							$('#submitButton').show();
							$('#closeButton').hide();
					 }else if(stage == 'SD Approved'){
								$('#comments_div').hide();
								$('#sd_div').hide();
								$('#submitButton').hide();
								$('#closeButton').show();
					 }else{
								$('#comments_div').hide();
								$('#sd_div').hide();
								$('#submitButton').hide();
								$('#closeButton').show();
					 }
				}else{
					 $('#comments_div').show();
					 $('#submitButton').show();
					 $('#closeButton').hide();
				}
				var ticketN = $('#'+number+'_ticket').val();
				$('#displayRequestId').html(ticketN);		
			  $('#displayRequests').modal('show').on('shown.bs.modal', function(){$('#displayRequests .modal-content').scrollTop(0);}); 
		}
		function handleError(response){
			console.error(response);
			alert('ERROR');
		}
		$('#hiddenStage').val(stage);
 }	
    function clearDiv(){
		$('#comments_div').hide();
		$('#sd_div').hide();
		$('#submitButton').hide();
		$('#closeButton').hide();
	}
	
	function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;table border="1" width="100%"&gt;&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 57,comments[i].indexOf('(Additional comments)') + 65);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 66, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
	 }
	 commentsblock = commentsblock + "&lt;/table&gt;";

	return commentsblock;
	}	
	
	function loadApprovalData(data){
	  for(key in data){
			var value = getValue(key, data[key]);
			$('#'+key+"1").html(value);
		}
	}
	
  function getValue(name, value){
     if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           return getConvertedValue(value, '1');
        }else{
           return value;
        }
     }else{
        if(value == "true"){
           return '&lt;input type="checkbox" id="'+ name +'1" checked="true" disabled="true"/&gt;';
        }else{
           return '&lt;input type="checkbox" id="' + name+ '1" disabled="true"/&gt;';
        }
        return value; 
     }
  }	
	
	function getConvertedValue(value, flag){
		 if(flag == '0'){
				var values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				var values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}	

 function resetRequestValue(){
    var i = 0;
    for( i = 0; i!= names.length; i++){
      if(textFields.indexOf(names[i]) != -1 ){ 
            $('#'+names[i] + "1").html('');
      }else{
				   $('#'+names[i] +"1").html('&lt;input type="checkbox" id="'+ names[i] +"1" + '" disabled="true"/&gt;');
           $('#'+names[i] + "1").prop('checked', false); 
		       $('#'+names[i] + "1").removeAttr("disabled");
      }
    }
  }	

spUtil.recordWatch($scope, "sysapproval_approver", "", function(name, data) {  
			spUtil.update($scope);
	});	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;.highlight {&amp;#13;
  background-color: yellow !important;&amp;#13;
}&amp;#13;
&amp;#13;
&amp;#13;
.form-control1 {&amp;#13;
    display: block;&amp;#13;
    width: 20%;&amp;#13;
    height: 30px;&amp;#13;
    padding: 6px 12px;&amp;#13;
    font-size: 14px;&amp;#13;
    line-height: 1.42857;&amp;#13;
    color: #555555;&amp;#13;
    background-color: #fff;&amp;#13;
    background-image: none;&amp;#13;
    border: 1px solid #ccc;&amp;#13;
    border-radius: 4px;&amp;#13;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);&amp;#13;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;&amp;#13;
}&amp;#13;
&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gds-sd-approval-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDS SD Approval Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.approvalTasks = [];
	data.reviewedTasks = [];
	data.info = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	var gr = gs.getUser(); 
	var gpa = gr.isMemberOf('CCR_GPA');
	var sd = gr.isMemberOf('CCR_SD');
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id,
		gpa: gpa,
		sd: sd
	};
	if(sd){
		var gr1 = new GlideRecord("sc_cat_item");
				gr1.addQuery("short_description", "CCR Genomic Data Sharing Plan");
				gr1.query();	
				gr1.next();
				var cat_item_id = gr1.getValue('sys_id');


			 var gr_approval_items = GlideRecord('sysapproval_approver');
			 var req_item = gr_approval_items.addJoinQuery('sc_req_item','document_id','sys_id');
			 req_item.addCondition('cat_item', cat_item_id);

			 gr_approval_items.addQuery('approver', my_sys_id); 
			 gr_approval_items.addQuery('source_table','sc_req_item');
			 gr_approval_items.orderByDesc('sys_updated_on');  
			 gr_approval_items.query();
			 while (gr_approval_items.next()){
				 var orginId = '';
				 var tickerNum = '';
				 var org_ticket_num = '';
				 var version = '';
				 var hasParent = '';
				 var selectedOrginId = '';

				 var docId = gr_approval_items.document_id;

				 selectedOrginId = gr_approval_items.document_id.contact_type;
				 if(selectedOrginId == '' || selectedOrginId === undefined || selectedOrginId == 'Web' ){
							orginId = gr_approval_items.document_id.sys_id;
							org_ticket_num = gr_approval_items.document_id.number;
							hasParent = 'false';
					}else{
						 var orgIds = selectedOrginId.split("=");
						 var gr_tracking_item = GlideRecord('u_ccr_tracking_t');
						 gr_tracking_item.addQuery('u_orgid',orgIds[0]);
						 gr_tracking_item.query();

						 if(gr_tracking_item.getRowCount() &gt; 0){
									gr_tracking_item.next();
									orginId = gr_tracking_item.u_orgid;
									org_ticket_num = gr_tracking_item.u_ticket_number;
									version = orgIds[1];
									hasParent = 'true';
						 }else {
									orginId = gr_approval_items.document_id.sys_id;
									org_ticket_num = gr_approval_items.document_id.number;
									hasParent = 'false';
						 }
					}

					var ticket_number = '';
					if(hasParent == 'true'){
							ticket_number = 'CCR_GDSP' + org_ticket_num.substring(8) + '-' + version;
					}else{
							ticket_number = "CCR_GDSP" + gr_approval_items.sysapproval.number.substring(8);
					}

					var stage_v = gr_approval_items.document_id.context.stage.name.toString();		
					//if(stage_v == 'Waiting for PI Resubmit'|| stage_v == 'Completed'|| (stage_v == 'Waiting for SD Review' &amp;&amp; gpa) || (stage_v == 'SD Rejected - Waiting for GPA Review' &amp;&amp; sd )){
						//	if (!((stage_v == 'SD Rejected - Waiting for PI Resubmit' || stage_v == 'SD Rejected - Waiting for GPA Review') &amp;&amp; gr_approval_items.state == 'approved')) {
							//	 if ((gr_approval_items.document_id.sys_created_by == gr_approval_items.sys_created_by)||(gr.isMemberOf('CCR_SD'))) {
									
							if( gr_approval_items.wf_activity.stage.name == 'Waiting for SD Review' &amp;&amp; (gr_approval_items.state == 'approved' || gr_approval_items.state == 'rejected') ){	
									if(stage_v == 'Completed' || stage_v == 'SD Rejected - Waiting for GPA Review'){	 //When record completed, there is no stage name for that, it will has two or three records in approval table, get GPA Review record
											var item = {};
											item.gdsp_id = ticket_number;
											item.principal_investigator = gr_approval_items.document_id.u_investigator.toString();
											item.project_name = gr_approval_items.document_id.u_project_name.toString();
											item.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
											item.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
											item.status = gr_approval_items.document_id.context.stage.name.toString(); 
											item.last_update_date = gr_approval_items.sys_updated_on.toString();
											item.stage = stage_v.toString();
											item.sys_id = gr_approval_items.sys_id.toString();
											item.doc_id = gr_approval_items.document_id.toString();
											item.state = gr_approval_items.state.toString();
											data.reviewedTasks.push(item);
									}
							}
							if (stage_v == 'Waiting for SD Review' &amp;&amp; gr_approval_items.wf_activity.stage.name == 'Waiting for SD Review' ) {
									var items = {};
									items.gdsp_id = ticket_number;
									items.principal_investigator = gr_approval_items.document_id.u_investigator.toString();
									items.project_name = gr_approval_items.document_id.u_project_name.toString();
									items.submitted_by = gr_approval_items.sysapproval.opened_by.name.toString();
									items.submitted_date = gr_approval_items.document_id.sys_created_on.toString();
									items.status = gr_approval_items.document_id.context.stage.name.toString();
									items.last_update_date = gr_approval_items.sys_updated_on.toString();
									items.stage = stage_v.toString();
									items.sys_id = gr_approval_items.sys_id.toString();
									items.doc_id = gr_approval_items.document_id.toString();
									items.state = gr_approval_items.state.toString();						
									data.approvalTasks.push(items);
							}

					//}
			 }
	}
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-05-02 19:50:51&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;fac5b724dbe2ba00f59974131f9619bd&lt;/sys_id&gt;&lt;sys_mod_count&gt;80&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDS SD Approval Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_fac5b724dbe2ba00f59974131f9619bd&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;yuw5@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-25 18:23:04&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
  &lt;div class="panel panel-success panel-area" ng-show="c.data.approvalTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_sdApprovalItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsesdApprovalItems" aria-expanded="true" data-target="#collapsesdApprovalItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Genomic Data Sharing Plans Waiting for SD Approval &lt;span class="badge" id="ritm_count"&gt;{{ c.data.approvalTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_sdApprovalItems" class="panel-collapse collapse in" id="collapsesdApprovalItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_savedGDSP_SD" class="label-hidden"&gt;Search:&lt;/label&gt;
          		&lt;input id="search_savedGDSP_SD" type="text" class="form-control1" ng-model="searchSavedGDSP" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns track by $index" 
              ng-click="c.toggleSort($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.approvalTasks | filter:searchSavedGDSP"
            ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                     $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"
            				 ng-class="{highlight: row.doc_id == c.state.id }"
          					 id="{{row.doc_id}}"&gt;
          &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.principal_investigator }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted"  title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.view(row.doc_id, row.sys_id, row.state, row.stage, row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.report(row.doc_id, row.gdsp_id)"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
        &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
          &lt;form class="form-inline"&gt;
            &lt;div class="pagination form-group"&gt;
              &lt;label for="pageSize4"&gt;
                Items per page
              &lt;/label&gt;

              &lt;select 
                id="pageSize4" 
                class="form-control"
                style="display: inline"
                ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
                ng-model="c.pagination.currentSize"
                ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
              &lt;/select&gt;
            &lt;/div&gt;
          &lt;/form&gt;  
    	&lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
      &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.approvalTasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange() track by $index"
          ng-click="c.setPage($index)"
          &gt;
          &lt;a href=""&gt;
            {{ $index + 1 }}
          &lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class="panel panel-success panel-area" ng-show="c.data.reviewedTasks.length &gt; 0"&gt;
    &lt;div class="panel-heading panel-header" id="heading_sdReviewedItems" role="tab"&gt;
      &lt;h4 class="panel-title"&gt;
        &lt;a aria-controls="collapsesdReviewedItems" aria-expanded="true" data-target="#collapsesdReviewedItems" data-toggle="collapse" role="button"&gt;
          &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-plus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
          Genomic Data Sharing Plans reviewed by SD &lt;span class="badge" id="ritm_count"&gt;{{ c.data.reviewedTasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div aria-labelledby="heading_sdReviewedItems" class="panel-collapse collapse" id="collapsesdReviewedItems" role="tabpanel"&gt;
      &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;td colspan="9"&gt;
      		&lt;form class="form-inline"&gt;
            	&lt;label for="search_submittedGDSP_SD" class="label-hidden"&gt;Search:&lt;/label&gt;
          		&lt;input id="search_submittedGDSP_SD" type="text" class="form-control1" ng-model="searchSubmittedGDSP" placeholder="Search"/&gt;
          &lt;/form&gt;  
          &lt;/td&gt;  
				&lt;/tr&gt;           
        &lt;tr&gt;
          &lt;th 
              ng-repeat="column in c.columns1 track by $index" 
              ng-click="c.toggleSort1($index)" 
              style="cursor: pointer"&gt;
              {{ column.label }}
              &lt;span 
                class="glyphicon small" 
                ng-class="{
                            'glyphicon-chevron-up': column.sort === 'asc',
                            'glyphicon-chevron-down': column.sort === 'desc'
                          }"&gt;
              &lt;/span&gt;
          &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tr ng-repeat="row in c.data.reviewedTasks | filter:searchSubmittedGDSP"
            ng-show="$index &gt;= c.pagination1.currentPage * c.pagination1.currentSize &amp;&amp;
                     $index &lt; (c.pagination1.currentPage + 1) * c.pagination1.currentSize"
            				 ng-class="{highlight: row.doc_id == c.state.id }"&gt;
          &lt;td class="ritm_number"&gt;{{ row.gdsp_id }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.principal_investigator }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_by }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.submitted_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.status }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;{{ row.last_update_date }}&lt;/td&gt;
          &lt;td class="ritm_number"&gt;
                &lt;span ng-switch on='row.stage'&gt;
                  &lt;span ng-switch-when='Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for SD Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for GPA Review'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_active.gifx" Alt="Waiting for GPA Review" title="Waiting for GPA Review"/&gt;&lt;img src="/images/workflow_pending.gifx" Alt="Waiting for SD Review" title="Waiting for SD Review"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-when='SD Rejected - Waiting for PI Resubmit'&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="SD Rejected" title="SD Rejected"/&gt;&lt;img src="/images/workflow_rejected.gifx" Alt="GPA Rejected" title="GPA Rejected"/&gt;&lt;/span&gt;
                  &lt;span ng-switch-default&gt;&lt;img src="/images/workflow_approved.gifx" Alt="Request Submitted" title="Request Submitted"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="GPA Approved" title="GPA Approved"/&gt;&lt;img src="/images/workflow_approved.gifx" Alt="SD Approved" title="SD Approved"/&gt;&lt;/span&gt;
            		&lt;/span&gt; 
          &lt;/td&gt;
          &lt;td style="white-space:nowrap;"&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.view(row.doc_id, row.sys_id, row.state, row.stage,row.gdsp_id)" style="width: 70px; text-align: center;"&gt;
              View
            &lt;/button&gt;
            &lt;button class="btn btn-sm btn-primary active" ng-click="c.report(row.doc_id, row.gdsp_id)"style="width: 70px; text-align: center;"&gt;
              Export
            &lt;/button&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
      &lt;!-- select the page size --&gt;
      &lt;div class="paging-bar"&gt;
        &lt;div class="paging-option"&gt;
      &lt;form class="form-inline"&gt;
        &lt;div class="pagination form-group"&gt;
          &lt;label for="pageSize5"&gt;
            Items per page
          &lt;/label&gt;

          &lt;select 
            id="pageSize5" 
            class="form-control"
            style="display: inline"
            ng-init="c.pagination1.currentSize = c.pagination1.pageSizes[1]"
            ng-model="c.pagination1.currentSize"
            ng-options="sizes for sizes in c.pagination1.pageSizes"&gt;
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/form&gt;  
        &lt;/div&gt;
      &lt;!-- select the page index (offset) --&gt;
       &lt;div class="paging-content"&gt;
      &lt;ul class="pagination" ng-show="c.pagination1.currentSize &lt; c.data.reviewedTasks.length"&gt;
        &lt;li
          ng-repeat="index in c.getRange1() track by $index"
          ng-click="c.setPage1($index)"
          &gt;
          &lt;a href=""&gt;
            {{ $index + 1 }}
          &lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;  
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>1271363601</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>f8576a31db2b5b00b86770c08c961985</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164d2ae23100000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDS SD Approval Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>7b93bfcd226797007293c271175ef921</update_guid>
<update_guid_history>7b93bfcd226797007293c271175ef921:1271363601,2100738d82679700bb19ab53a2ad0956:1134386076,b1d6af0911679700784b8e45a59da309:205113782,85255fb8dbe75700ad095b5d263efcfb:-562428931,40ac437090e7570031bf410c2569fe05:-141043103,b19c0f7038e75700831158a80fcbfb7b:-588853251,a28c43b04ce75700fa1d6fad44f6ec3a:-1966785709,508ccb702fe75700960b9fed3692f9bd:-58737081,2902aa308167570096f24c21795afe95:-1781207734,61e1e63c35275700dac7baf18df07b84:450837612,6e91aefc95275700e7f947bc745cc41d:1752259064,9a071da38d1f530020d573d4e25430be:831320521,5c071da33d1f5300edf4b5911c0f0871:2115424725,47f5e5533c5353006f81da3f9b7745cb:1597661667,f1f52193485353002fc90bbabdcb6f81:-1387825835,23e5a55327535300e3d08e059ba6f45b:1946250282,9975e553be535300c6096224a6896493:-714301020,f2f4a913275353006d74b14a65f804a9:-947751474,7ae6d843885b5300ab13ada2aa236c15:-1352028325,1e6b7a3f1de013001865a51bb06212f9:981209424,1e6b7a3f1de013001865a51bb06212f9:981209424,1e6b7a3f1de013001865a51bb06212f9:981209424,b2393e33252413007f2bb91f6c173b8d:-1739642950,5875fabf7ee0130008d547bbd901c083:1736938170,3255367f33e01300ab158e4ce48b5b90:-860417441,da92327fa0e01300bd3655cb33ea9133:-178021330,3e62723f1be0130012491d47d0399544:-855291758,71d1723f74e013003379f5ea1fec2066:-559180938,3721bebb51e013004f2ad144c71c81b4:-220042325,6a01f67bc1e0130084335905fdc268a3:-1197872598,20d0fabbd1e0130042c7f3c34f3fdcd2:-68298359,0cd0fabb21e0130015b2e70d7521eeb6:1356681577,101fea7bb9e013000c3f6afc2e7f7a0e:543590487,b9fea63b31e013000bf9098cc307b0bc:247479667,572ea63b85e01300075cef10d119b7e1:543590487,1ee6aab3a8e013004ffea6a42d61bdb5:-1380388045,aac622373fe01300194b867b456a2073:1728388037,426a49f5c9a7cf008b94b7762ddcce0c:543590487,557941b5dea7cf00e07aa5862893ab91:-806771157,d26941b52ca7cf00780440dbc018cd9a:-666380375,ed1caad62e2a8700f15ff36b8cb29535:1162854955,-850685108:-850685108,2059660583:2059660583,1891533140:1891533140,858868641:858868641,-1027158283:-1027158283</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_2d1413b8dbe7570054d8ff621f961903</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS GPA IC Approval Table">91dc809cdb284340f59974131f961938</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:26:49</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>2d1413b8dbe7570054d8ff621f961903</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS GPA IC Approval Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_2d1413b8dbe7570054d8ff621f961903</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:26:49</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1875731121</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>fc576a31db2b5b00b86770c08c961916</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2ffeaa0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS GPA IC Approval Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>251413b85be757004a16aec976047005</update_guid>
<update_guid_history>251413b85be757004a16aec976047005:-1875731121</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>m2m_sp_widget_dependency_9ad3db78dbe7570054d8ff621f961902</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="m2m_sp_widget_dependency"><m2m_sp_widget_dependency action="INSERT_OR_UPDATE"><sp_dependency display_value="CCRGDS_CSS_DEPEN">b01117f4dbe7570054d8ff621f961979</sp_dependency><sp_widget display_value="GDS GPA Approval Table">47a5f364dbe2ba00f59974131f96197a</sp_widget><sys_class_name>m2m_sp_widget_dependency</sys_class_name><sys_created_by>yuw5@nih.gov</sys_created_by><sys_created_on>2018-07-24 21:25:46</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>9ad3db78dbe7570054d8ff621f961902</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CCRGDS_CSS_DEPEN.GDS GPA Approval Table</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>m2m_sp_widget_dependency_9ad3db78dbe7570054d8ff621f961902</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:25:46</sys_updated_on></m2m_sp_widget_dependency></record_update>]]></payload>
<payload_hash>-1077823292</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>fc576a31db2b5b00b86770c08c961919</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce2f0a3e0000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>CCRGDS_CSS_DEPEN.GDS GPA Approval Table</target_name>
<type>Widget Dependency</type>
<update_domain>global</update_domain>
<update_guid>92d3db7814e7570070cbca3e9e846604</update_guid>
<update_guid_history>92d3db7814e7570070cbca3e9e846604:-1077823292</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_css_7085f2bddb2d720054d8ff621f9619d2</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_css"><sp_css action="INSERT_OR_UPDATE"><css>::-ms-clear {&#13;
  display: none;&#13;
}&#13;
&#13;
::-ms-reveal {&#13;
  display: none;&#13;
}&#13;
&#13;
body {&#13;
  height: 100%;&#13;
}&#13;
&#13;
#pageTitle {&#13;
  color: #FFFFFF;&#13;
}&#13;
&#13;
#pageTitle:hover {&#13;
  text-decoration: none;&#13;
}&#13;
&#13;
#navbar li {&#13;
  font-size: 120%;&#13;
}&#13;
&#13;
#feedbackButton { &#13;
  margin-left: -30px;&#13;
  height: 40px; &#13;
  width: 104px; &#13;
  position: fixed; &#13;
  top: 45%; &#13;
  z-index: 999;&#13;
  transform: rotate(-90deg);&#13;
  -webkit-transform: rotate(-90deg); &#13;
  -moz-transform: rotate(-90deg); &#13;
  -o-transform: rotate(-90deg); &#13;
  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);&#13;
}&#13;
&#13;
#feedbackButton a { &#13;
  display: block; &#13;
  //background: #f00; &#13;
  background-color: #EEEEEE;&#13;
  border-radius: 4px;&#13;
  height: 40px; &#13;
  width: 110px; &#13;
  padding: 8px 16px;&#13;
  color: #333333; &#13;
  //font-family: Arial, sans-serif; &#13;
  font-size: 17px; &#13;
  font-weight: bold; &#13;
  text-decoration: none; &#13;
  border-bottom: solid 1px #333;&#13;
  border-left: solid 1px #333;&#13;
  border-right: solid 1px #fff;&#13;
}&#13;
&#13;
#feedbackButton a:hover { &#13;
  opacity: 0.75; &#13;
}&#13;
&#13;
.fixedWidth {&#13;
   width:80%; &#13;
}&#13;
&#13;
.fa-mandatory {&#13;
  color: #D9534F;&#13;
}&#13;
&#13;
.well {&#13;
  padding-top: 0 !important;&#13;
}&#13;
&#13;
.panel {&#13;
  border: 0 !important;&#13;
}&#13;
&#13;
.alert a:not(.close) {&#13;
  text-decoration: underline;&#13;
}&#13;
&#13;
body .header {&#13;
  color: #EEEEEE;&#13;
}&#13;
&#13;
body .footer {&#13;
  color: #EEEEEE;&#13;
  //font-size: 110%;&#13;
}&#13;
&#13;
body .footer a {&#13;
  color: #EEEEEE;&#13;
}&#13;
&#13;
body .footer h2 u {&#13;
  color: #FFFFFF;&#13;
  font-weight: bold;&#13;
}&#13;
&#13;
.footer-column::before {&#13;
  position: absolute;&#13;
  content: "";&#13;
  border-left: 1px solid #666666;&#13;
  left: 0;&#13;
  top: 0;&#13;
  height: 160px;&#13;
}&#13;
&#13;
.tile-flip-off {&#13;
  display: none;&#13;
}&#13;
&#13;
.panel a:hover {&#13;
  text-decoration: none;&#13;
}&#13;
&#13;
.tile-home {&#13;
  border-radius: 4px;&#13;
}&#13;
&#13;
.tile-home-lg {&#13;
  color: #EEEEEE;&#13;
  height: 150px;&#13;
}&#13;
&#13;
#tile-home_getHelp {&#13;
  background-color: #D9534F;&#13;
}&#13;
&#13;
#tile-home_requestSomething {&#13;
  background-color: #5CB85C;&#13;
}&#13;
&#13;
#tile-home_checkStatus {&#13;
  background-color: #337AB7;&#13;
}&#13;
&#13;
.tile-home-sm {&#13;
  color: #333333;&#13;
  background-color: #EEEEEE;&#13;
  height: 100px;&#13;
}&#13;
&#13;
#filterAccordion #heading_main {&#13;
  border-bottom-left-radius: 3px;&#13;
  border-bottom-right-radius: 3px;&#13;
}&#13;
&#13;
#filterAccordion #a:hover {&#13;
  text-decoration: none;&#13;
}&#13;
&#13;
.tile-item .tile-request {&#13;
  background-color: #F5F5F5;&#13;
  color: #333333;&#13;
  border-radius: 4px;&#13;
  height: 100px;&#13;
  padding-right: 75px;&#13;
}&#13;
&#13;
.tile-item-help .tile-request-help {&#13;
  color: #F5F5F5;&#13;
  border-radius: 4px;&#13;
  height: 100px;&#13;
  background-image: url('list_cant_find.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: left;&#13;
  padding-left: 125px;&#13;
}&#13;
&#13;
.tile-item[category="Accounts and Systems Access"] .tile-request {&#13;
  background-image: url('grid_accounts.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: right;&#13;
}&#13;
&#13;
.tile-item[category="Network"] .tile-request {&#13;
  background-image: url('grid_network.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: right;&#13;
}&#13;
&#13;
.tile-item[category="Hardware"] .tile-request {&#13;
  background-image: url('grid_hardware.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: right;&#13;
}&#13;
&#13;
.tile-item[category="Scientific Software"] .tile-request {&#13;
  background-image: url('grid_software_yellow.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: right;&#13;
}&#13;
&#13;
.tile-item[category="Non-Scientific Software"] .tile-request {&#13;
  background-image: url('grid_software_violet.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: right;&#13;
}&#13;
&#13;
.tile-item[category="Telecommunications"] .tile-request {&#13;
  background-image: url('grid_telecommunications.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: right;&#13;
}&#13;
&#13;
.list-item .tile-request {&#13;
  padding-left: 125px;&#13;
  background-color: #F5F5F5;&#13;
}&#13;
&#13;
.list-item[category="Accounts and Systems Access"] .tile-request {&#13;
  background-image: url('list_accounts.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: left;&#13;
}&#13;
&#13;
.list-item[category="Network"] .tile-request {&#13;
  background-image: url('list_network.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: left;&#13;
}&#13;
&#13;
.list-item[category="Hardware"] .tile-request {&#13;
  background-image: url('list_hardware.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: left;&#13;
}&#13;
&#13;
.list-item[category="Scientific Software"] .tile-request {&#13;
  background-image: url('list_software_yellow.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: left;&#13;
}&#13;
&#13;
.list-item[category="Non-Scientific Software"] .tile-request {&#13;
  background-image: url('list_software_violet.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: left;&#13;
}&#13;
&#13;
.list-item[category="Telecommunications"] .tile-request {&#13;
  background-image: url('list_telecommunications.pngx');&#13;
  background-repeat: no-repeat;&#13;
  background-size: auto 100%;&#13;
  background-position: left;&#13;
}&#13;
&#13;
#orderVariables a {&#13;
  text-decoration: underline;&#13;
}&#13;
&#13;
.twitter-typeahead {&#13;
  width: 100%;&#13;
}&#13;
&#13;
.tt-hint {&#13;
  background-color: #F00;&#13;
}&#13;
&#13;
.tt-menu {&#13;
  background-color: #FFF;&#13;
  width: 345px;&#13;
  border: 1px solid black;&#13;
  box-shadow: 5px 5px 5px #BBB;&#13;
}&#13;
&#13;
.tt-suggestion:hover {&#13;
  background-color: #0BB;&#13;
}&#13;
&#13;
.tt-cursor {&#13;
  background-color: #D9EDF7;&#13;
}&#13;
.tools-owner-title {&#13;
    padding-top: 5px;&#13;
    padding-bottom: 5px;&#13;
    background-color: #F5FAFF;&#13;
    color: #0C5C97;&#13;
}&#13;
footer {&#13;
    text-align: center;&#13;
}&#13;
&#13;
.footer {&#13;
    bottom: 0;&#13;
    color: #444;&#13;
    padding:25px 0;&#13;
}&#13;
.footer ul {&#13;
    text-align: center;&#13;
}&#13;
.footer ul li a {&#13;
    color: #444;&#13;
}&#13;
.tools-section {&#13;
    padding: 0 20px 10px 20px;&#13;
/*&#13;
    padding-left: 20px;&#13;
    padding-right: 20px;&#13;
    padding-bottom: 10px;&#13;
*/&#13;
    text-align: justify;&#13;
/*&#13;
    font-size: 90%;&#13;
*/&#13;
}&#13;
fieldset.scheduler-border {&#13;
    border: 1px groove #ddd !important;&#13;
    padding: 0 1.4em 1.4em 1.4em !important;&#13;
    margin: 0 0 1.5em 0 !important;&#13;
    -webkit-box-shadow:  0px 0px 0px 0px #000;&#13;
            box-shadow:  0px 0px 0px 0px #000;&#13;
}&#13;
&#13;
legend.scheduler-border {&#13;
     width:inherit; /* Or auto */&#13;
    padding:0 10px; /* To give a bit of padding on the left and right */&#13;
    border-bottom:none;&#13;
&#13;
}&#13;
</css><name>Software Solution CSS override</name><sys_class_name>sp_css</sys_class_name><sys_created_by>zhoujim@nih.gov</sys_created_by><sys_created_on>2017-03-17 19:19:25</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>7085f2bddb2d720054d8ff621f9619d2</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Software Solution CSS override</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="Global">global</sys_scope><sys_update_name>sp_css_7085f2bddb2d720054d8ff621f9619d2</sys_update_name><sys_updated_by>yuw5@nih.gov</sys_updated_by><sys_updated_on>2018-07-24 21:17:47</sys_updated_on></sp_css></record_update>]]></payload>
<payload_hash>1705291861</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>fc576a31db2b5b00b86770c08c96191c</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164ce27b9140000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>Software Solution CSS override</target_name>
<type>Style Sheet</type>
<update_domain>global</update_domain>
<update_guid>c502d3b4f0e75700409df21fb5bf77bb</update_guid>
<update_guid_history>c502d3b4f0e75700409df21fb5bf77bb:1705291861,8f209b34a5e75700ec978ae2b38258df:-1887406059,6918579f3cde8300eec4ed09add92239:1705291861,6918579f3cde8300eec4ed09add92239:1705291861</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_01160574db12720054d8ff621f96192a</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope) {
  /* widget controller */
var c = this;
	var names=['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var textFields = ['investigator','pTitle','pBranch','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna']; 
var comment_str = parse(c.data.tasks.comments);
$('#numId').html(c.data.tasks.gdsp_id);
$('#numId2').html(c.data.tasks.gdsp_id);
loadApprovalData(c.data.tasks.variables);
if(comment_str.length &lt; 137){
    $('#pre_comments_div1').hide();
    $('#pre_comments_div2').hide();
    $('#pre_comments_div3').hide();
}else {
    $('#pre_comments_div1').show();
    $('#pre_comments_div2').show();
    $('#pre_comments_div3').show();
    $('#commentReviewId1').empty();
    $('#commentReviewId1').append(comment_str);   
    $('#commentReviewId2').empty();
    $('#commentReviewId2').append('&lt;table width="100%" border="1"&gt;' + comment_str + "&lt;/table&gt;");   
    $('#commentReviewId3').empty();
    $('#commentReviewId3').append('&lt;table width="60%" border="0" id="data8"&gt;' + comment_str + "&lt;/table&gt;");   
}
$('#printable3').hide();
$('#printable4').hide();	

		//start creating a PDF for the report	
		var doc = new jsPDF('p','pt','letter');	
    var page1 = $('#data1')[0];
    var gdspNum = $('#printable3')[0];
    var imgData = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAeAB4AAD/4RESRXhpZgAATU0AKgAAAAgABAE7AAIAAAAYAAAISodpAAQAAAABAAAIYpydAAEAAAAwAAAQ2uocAAcAAAgMAAAAPgAAAAAc6gAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFpob3UsIEppbSAoTklIL05DSSkgW0NdAAAFkAMAAgAAABQAABCwkAQAAgAAABQAABDEkpEAAgAAAAM3OQAAkpIAAgAAAAM3OQAA6hwABwAACAwAAAikAAAAABzqAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAxNjowNDoxMyAxNDozNjo1NQAyMDE2OjA0OjEzIDE0OjM2OjU1AAAAWgBoAG8AdQAsACAASgBpAG0AIAAoAE4ASQBIAC8ATgBDAEkAKQAgAFsAQwBdAAAA/+ELKmh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4NCjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iPjxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9InV1aWQ6ZmFmNWJkZDUtYmEzZC0xMWRhLWFkMzEtZDMzZDc1MTgyZjFiIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iLz48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+PHhtcDpDcmVhdGVEYXRlPjIwMTYtMDQtMTNUMTQ6MzY6NTUuNzkyPC94bXA6Q3JlYXRlRGF0ZT48L3JkZjpEZXNjcmlwdGlvbj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+PGRjOmNyZWF0b3I+PHJkZjpTZXEgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOmxpPlpob3UsIEppbSAoTklIL05DSSkgW0NdPC9yZGY6bGk+PC9yZGY6U2VxPg0KCQkJPC9kYzpjcmVhdG9yPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L3g6eG1wbWV0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0ndyc/Pv/bAEMABwUFBgUEBwYFBggHBwgKEQsKCQkKFQ8QDBEYFRoZGBUYFxseJyEbHSUdFxgiLiIlKCkrLCsaIC8zLyoyJyorKv/bAEMBBwgICgkKFAsLFCocGBwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKv/AABEIAF8DZwMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APpGqMuuaTDIY5tUs43HVXuEBH4ZrzH4weK7yC9j0CxlaGLyhLcMjYLkk4X6YGffNeS0AfUv/CQ6L/0F7D/wJT/Gj/hIdF/6C9h/4Ep/jXy1RQB9S/8ACQ6L/wBBew/8CU/xo/4SHRf+gvYf+BKf418tUUAfUv8AwkOi/wDQXsP/AAJT/Gj/AISHRf8AoL2H/gSn+NfLVFAH1L/wkOi/9Bew/wDAlP8AGj/hIdF/6C9h/wCBKf418tUUAfUv/CQ6L/0F7D/wJT/Gp7XVNPvpDHZX1tcOo3FYZlcgeuAa+U61/DGuzeG/EVrqUGSI2xIn99Dww/L9cUAfSV3rOmWEwiv9RtLaQjcEmnVGx64JqS01Gy1BS1heW90F6mGVXx+Rrzz4seGofFvg2DXtJAluLOPzkZBkywEZI49Oo/H1rwPTdSvNI1CK9024kt7iJsrJG2D9Pce1S5WZ9Dgcop43D+0hUtJdLH2RRXOeBfFUfi/wrb6gCouVHl3Ma/wyAc8eh6j610dUeFVpypTdOa1QUUUUGYUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAfP/xb/wCSg3P/AFxi/wDQa4mu2+Lf/JQbn/rjF/6DXFKCzADqTgUAJRXW6j8M/E2madNe3NpGYoF3v5cyswHc4FclQAUVb0zTbjV9TgsLJVaedtqBmwCfrWp4h8Gax4Xt4ZtXhjjSZiiFJA2SBntQBgUV0el+AvEutabFqGmab59rNnZJ58a5wSp4LA9QaxtN0+41bUoLCzUNPcPsjDHAJ+tAFWit/wAQ+C9Z8MW8M+rwxxpM5RCkobJxntWBQAUVqaB4e1DxLqDWWlRo8yxmUh3CjaCB1P1FO8QeG9R8M30dpq0aRyyR+aoRww25I7e4NAHpXwe8Ti4tZfDt824oDJbbucr/ABL+HX8680+JvhE+E/FsqQJixu8zWx7AE8r+B/TFVdL1GfSdUt7+0bbNbyB1Pr7fj0r3DxVpVt8S/hwlzp4BuQnn23qsgHzIfryPyqZK6PXyjG/VMQub4ZaP/P5Hknwl8X/8Iz4qW2upNthqBEUuTwjfwt+Zx9DX0tXxc6NHIyOpV1OGBGCDX0v8J/F//CT+FEgupN1/YARTZPLr/C/4jj6ilF9D2OIMFtioej/R/p9x3VFFFWfIBRRVE63pSzGJtTsxIG2lDcJkHpjGetBSjKWyL1FFNklSGJpJnWONAWZ2OAo9SaCR1FU7fV9Nu5lhtdQtZpW6JHOrMfwBq5QNxcdGgopskiRRtJKyoiAszMcBQOpJqrBrGmXUyw22o2k0rfdSOdWY9+ADQNRk1dIuUUVUuNW020mMV3qFrBIBkpLMqsPwJoEouTskW6Kz/wDhING/6C1j/wCBKf40f8JBo3/QWsf/AAJT/Ggv2c/5WaFFQWt7a30ZeyuYbhFOC0UgcA+nFQDXNJMnljVLLfnbt+0JnPpjNBPJJu1i9RRQTgZPSgkKKxbnxl4as5jFda9pscgOChukyPqM8VoWGq6fqsXm6ZfW15GOrW8quB+RoNJUqkVzOLS9C1RRUF1fWliqte3UNurHCmaQICfbNBCTbsieioLW9tb5GeyuYbhVOC0UgcA+nFT0A007MKKqXOq6dZzeVd39rBJjOyWZVOPXBNWIZ4riFZbeRJY2GVdGDKfoRQNxkldofRRVW51XT7KURXl9bW8hGQksyqceuCaBJOTsi1RUcE8N1Cs1tKk0TfdeNgyn6EVJQLYKKq3WqafZSiO9vra3kI3BZZlQkeuCfY1NBcQ3UCzWs0c0TZ2vGwZTzjgigrlkldokooooJCiiigAorKv/ABToOlymLUdZsLaUdY5LhQw/DOam07XtI1ckaVqdneEdRbzq5H1APFBo6VRR5nF29C/RRRQZhRVW51XT7KURXl9bW8hGQksyqceuCamgnhuoVmtpUmib7rxsGU/Qigpxkldokooqrdapp9lKI72+treQjcFlmVCR64J9jQJJt2RaoqOCeG5hWa2lSaJvuvGwZT9CKkoFsFFUZNb0qGVo5tTs45EJVka4QFT6EZq9nPSgpxkt0FFFY954u8O6fMYb3XNPhlHWN7lAw+ozkUDjCc3aKubFFUtP1nTNWUtpeo2t6q9TbzLJj64PFXaCZRcXZqwUVRk1zSYZWjl1SySRCVZWuEBUjqCM03/hING/6C1j/wCBKf40Fezn2ZoUVnjXtHZgq6rYkk4AFynP61dmmit4WlnkSKNBlndgAo9yaBOMlo0PorP/AOEg0b/oLWP/AIEp/jUkWsaZOwWHUbSQscAJOpz+tA/ZzXRlyiiiggKKKq3Wp2FjIEvb23t3YZCyyqhI9eTQNJt2RaoqO3uYLuETWs0c8R6PG4ZT+IqvPrGmWs7Q3Wo2kMq43JJOqsOM8gmgajJuyRcopqOssayRsrowBVlOQQe4NOoJCiqKa5pMkqxx6pZPIxCqq3CEk+gGavUFOMo7oKKqX+q6fpUYk1S/trNG6NcTLGD9MmqVn4v8OX8wis9d0+aU9EW5TcfoM80FKlUlHmUXb0NiiiqD67pEcjJJqlkjqcMrXCAg+h5oJUZS2RforP8A+Eg0b/oLWP8A4Ep/jR/wkGjf9Bax/wDAlP8AGgr2c/5WaFFQrd2z2n2pLiJrfaW84OCmB1O7piobfV9Nu5lhtdQtZpW6JHOrMfwBoJ5Zdi5RVW61TT7KUR3t9bW8hG4LLMqEj1wT7Gof+Eg0b/oLWP8A4Ep/jQNU5tXSNCis/wD4SDRv+gtY/wDgSn+NWLXULO+3/YbuC52Y3eTKH256ZweOhoBwmldosUVROuaSJTGdUshIDtKm4TOfTGavUCcZR3QUVBdXtrYor3tzDbqxwrTSBAT6c0Wt9aXys1ldQ3IU4YwyB8fXFAcsrXtoT0VnnXtHVirarYgg4INynH60f8JBo3/QWsf/AAJT/Ggr2c+zNCis/wD4SDRv+gtY/wDgSn+NWjeWy2n2priIW+3d5xcbMeu7pigThJbomorP/wCEg0b/AKC1j/4Ep/jR/wAJBo3/AEFrH/wJT/Ggfs5/ys0KKq22qafeymOzvra4kA3FIplY49cA1aoIacXZhRRRQI+f/i3/AMlBuf8ArjF/6DXGQ/65P94fzrs/i3/yUG5/64xf+g1xkP8Ark/3h/OgD6xcKylZApVuCG6H2r54+IfhQ+F/ETCBCLG6zJbnHA9V/DP5EV7B8SLqax8CXl3auY5oJIJI3HZhMmKoSLZ/FH4eArtS7AyP+mM6j+R/kaAPJfh9/wAlA0j/AK7/APspr0P43/8AIF0v/r4b/wBBrgfA9vNZfErTbe4QxzRXJR1YcggEGu++N/8AyBdL/wCvhv8A0GgDovhb/wAk10v/ALbf+jnrxfwF/wAj9o//AF8rXtHwt/5Jrpf/AG2/9HPXi/gL/kftH/6+VoA9H+N3/IC0z/r5b/0GvF6+ifiB4QufGGn2lvaXMVuYJTITKCc5GO1cH/wpHVv+grZ/98v/AIUAVPgx/wAjvP8A9eL/APoaVL8bP+Rusv8ArxX/ANGPXWeA/hzfeEvEEmoXd7bzo9u0QWMMDkspzz/u1yfxs/5G6y/68V/9GPQB5xXpnwf8UfYdTfQruT9xdndBk/dk9PxH6ivM6fDNJbzpNCxSSNgyMOoI5BoA6340eD/7F8QLrNlHiz1EkuFHCS9/z6/nXMeAvFUnhHxZb325vsznyrlAfvRnqfqOv4V7zbNafE/4bPDcbRLKnlyH/nlOo4P8j9DXzTqFjcaXqNxY3ieXPbyGORfQg4rOSs7n3mUYmONwjw9XVpWfmuh9jwypPCk0LB45FDIw6MCMg0+vK/gj4u/tPRX0C8fNzYLugJPLQ56f8BJx9CK9Uq07o+NxeGlha0qUun5BXyH4pOPGWskcH7fP/wCjGr68r5E8Srv8aasrcbtQmBx/10NTM+g4b/iVPRHt/wAI/iB/wkGnDRdVkH9pWqfu3Y8zxjv9R3rr/HH/ACIGvf8AYPn/APQDXzfrujat8O/GIjEjJNbuJbW5UYEi9m/oR9a9rHjC28ZfB7WryLCXUenTJdQ5/wBW/ln9D1FCfRkY/AxhWhiqGsJNfLX8meS/B/8A5KppX0m/9EvX05XzJ8Hsf8LT0rP92bH/AH5evpuiOxnxF/vcf8K/Nnmvxs8Sf2T4RXS4Hxcam2xgDyIhy358D8TXgek6nPo2sWuo2hxNayrIvvg9Px6V0fxK8Qt4p8d3MkBMkEDfZbYDuqk8j6sSfxrb+IHw6/4RnwXomoQp++SPyb8gdXYlgT9CSv4Cperue9gIUsFh6dCr8VS/5f8ADL1PfdJ1KDWNHtdRtDmG5iWRfbI6fh0ryf4j/DDxB4o8Zz6npYtfs7xRqPNm2tkLg8Yqf4EeJftOk3Xh+4fMlo3nW4P/ADzY/MPwbn/gVeuVe6PlZSq5VjJqnutNez1PknxT4R1PwffQ2msCHzJo/MTyn3DGSPT2rU8OfDDxB4o0ZNT0sWv2d2ZR5s21sg4PGK6f4/f8jVpn/Xl/7O1d78Fv+SZ2v/XeX/0Kpsr2Ppa+ZV6eXQxKtzN/Lr/kSfCrwhqfg/Q7211jyfNmufMTyX3DG0D09q+f0/5Hhf8AsIj/ANGV9dV8ip/yPC/9hEf+jKctLHHkteeIqV6s92l+p9bzzR21vJPcOscUSl3djgKoGST+FfNnj34lan4u1F7TTpJbbSlfbDBGSGm7ZfHXP93oM/jXr/xfv5LH4aX/AJJw1wyQE+zMM/oCPxryb4K6NBqvj0TXSCRLCA3CA/3wyhT+Gc/gKJb2OfJ6NKjh546or8uwaZ8E/FmoWazyrZ2O5dyx3UpD/iFU4/GsPV/D3if4eapDLcebZSE5huraTKPjsGH8j+VfVlc38QNFt9d8Danb3CBmigeeEn+CRFJU/wBPoTRyhh8+rTrKNZJxemxj/DD4g/8ACZ6bJbahtTVbQAyhRgSoTw4Hb0I+nrWD+0B/yLuk/wDX03/oFec/Ce/ksfiXpflnCzs0Dj1DKf6gH8K9F/aAz/wj+k+n2pv/AECi94mssJDC5vTVPZ6+m55l8P8AxrceDPECz5Z7GbCXUPqv94e4r6is7y31Cyhu7OVZoJkDxyKchga+UdO8KXeq+Eb7W7HMp0+YJPCBzsK53j6Ecj3rtvg/8Qf7Hvl8P6vLixuG/wBHlc8QyHsf9k/ofrSi7HTnOBjiYyr0fjjo1/XX9Ch8cP8Akox/684v/Zq9h+F3/JMtF/64t/6G1ePfHD/kox/684v/AGavYfhfj/hWWi4/54n/ANDamviOPMf+RVQ+X5M6qWVIIXllYJHGpZmPQAck18l+MfED+J/Fl9qjE+XJIVhB/hjHCj8v517p8ZvEn9i+C3sYH23OpkwjHUR/xn8R8v8AwKvMfhT4Gi8WXWpT6gmbSC3aFCR/y1dSAfqo5+uKJauxeSwhhcPPG1dtl/Xm/wAjrvgP4k82zvPD1w/zQn7Rbgnqp4YD6HB/E17FXydot/d+BfHkU0yskun3JjnT+8vKsPxGf0r6ugmjubeOeBg8cqB0YdwRkGnF6HDnuGVPEKtD4Z6/Pr/meAfHz/keLH/sHJ/6Mkr0z4P/APJK9K+s3/o568z+Pn/I8WP/AGDk/wDRklemfB//AJJXpX1m/wDRz0l8R147/kT0fVfkztqKKKs+VCvBvif8U7u81C40Tw5cNb2cLGOe5ibDzMDyAR0Xtx1+lexeK7+TTPB+r3sBxLBZyvGfRgpwfzr5k8C6RDr3jnS9Ou13wTTZkXONyqpYj9KiT6H0mSYak1PFVVdQ/wCHLWgfDfxR4ltRd2GnlbZz8s9w4jVvcZ5I9wMUzXfA3ijwcUvb60khjRgUu7aTcqN2+ZeVP1xX1UiLGipGoVVGFVRgAelMuLeG6t5Le5iSWGVSjxuuVYHqCKOVFriKv7S7guXt1+//AIBxXwo1vxBrvhT7R4iiyqtttrpuHnUcEkex/i78+mT28sqQQvLKwSONSzMegA5JpIoo4IUigRY441CoiDAUDgADsK4D4zeJP7F8FvYwPtudTJhGOoj/AIz+I+X/AIFVbI8dR+u4vlpx5eZ7LoeF+MfED+J/Fl9qjE+XJIVhB/hjHCj8v516p8B/Enm2d54euH+aE/aLcE9VPDAfQ4P4muR+FPgaLxZdalPqCZtILdoUJH/LV1IB+qjn64rntFv7vwL48immVkl0+5Mc6f3l5Vh+Iz+lZq6dz7XFU6OJozwVPeCVv0/4PqfWNfPvx8/5Hix/7Byf+jJK9/gmjubeOeBg8cqB0YdwRkGvAPj5n/hOrH0/s1P/AEbJVy2Pmch0xy9GRfCP4gf8I9qQ0bVJD/Zt0/yOTxBIe/0Pf86+hwQRkcg18l3/AIUu7TwdpfiOLMtne+YkhA/1MiyMoB9iFBB9cj0r134PfEH+1bNfD2sTZvbdf9Flc/66MD7p/wBofqPpSi+jO/OcDGqni6Gtm1L5aX/z+88h8cf8j/r3/YQn/wDQzX1hbkLZxFjgCMEk9uK+T/HH/I/69/2EJ/8A0M19FeP759O+F+qzwMVb7IIww6gOQn8moj1HnFN1YYWmuun38p5B8R/ile6/fz6bodw9tpMbbN0bFWuccEkj+E9h+foMbRPhb4s12zS7tdO8m3kGUkuZBHuHqFPzY98Yp3ws0S2134g2VvfIJLeENO8Z6PtGQD6jdjj0r6hpJc2rNsdjo5Uo4bDRV7Xbf9bnylrHhTxR4Fu4bu8t5rIq37q7t5MqG9mU8H2OK+gvhxq2ua14Pt7zxJbrFO5/dSdGnj7OV7Z/Xr3rpbyzttQtHtb6CO4gkGHilUMrd+QamAAAAGAOgFUo2PEx2afXaKjOC5l1Pkfxn/yPmv8A/YSuf/RrV0n/AApbxl/z523/AIErXN+M/wDkfNf/AOwlc/8Ao1q9S/4aEi/6Ft//AANH/wARUK3U+txFTGwo0vqkVLTW/ordV5nL2nwa8YRX0Ej2luFSRWJ+0r0Br2f4k/8AJN9b/wCvY/zFcx4U+MsfijxRZ6OuiNbG6LDzTdb9uELdNgz09a6f4k/8k31v/r2P8xVq1tD5vF1sXUxdGOLik01a3m/V9j5p8N+HL7xVrC6bpXl/aGRnHmvtGB15rqLv4MeMbWFpEtLe52jJWG4UsfoDjNQfCXVbHRvHkV3qt1Ha24t5FMkrYGSOBXuN58TvB9nbPM2uW8u0ZCQ5dm9gAKlJNant5jjsbQxChQhzKy6N/keG+AvHmq+FNft7e4uZn015BFcWsrEhATjIB+6R7elfTtfIRWTxH4uYWkTeZqN6THGOo3v0/DNfXtOJ5PENOEZ05pWk07/h/wAEK8C+P3/I26b/ANeP/tRq99rwL4/f8jbpv/Xj/wC1Gpy2OTIf9+j6P8j0L4M/8kwsP+us3/oxq8c+L3/JVdY/7Yf+iI69j+DP/JMLD/rrN/6MavHPi9/yVXWP+2H/AKIjpS+E9XLP+RtX/wC3v/Skdj8GviB5TJ4Y1iX5D/x5Sseh/wCeZ/p+Ve218m+IPC974bttJ1EMzWuo2kVzBcKMbXKBmTPYgn8sGvdPhb4+XxZo32PUJANWtFxJn/lsnZx79j7896IvozlzjAxa+uYfWL39e/8An5ngvhn/AJHzSP8AsJQ/+jRX094w10+GvCOoasqB3tosop6FiQq59skV8w+Gf+R80j/sJQ/+jRX0/wCL9EfxH4R1HSYmVJLmLCM3QMCCM/iBRHY6M85PrND2nw9fS6ufM2nWOvfELxQLdZ2u76fc7S3EmFRepJ9APQD6Cuj1X4J+LNOtjNAtpqAUZKWsp3j8GAz+HNctZXmueBvEgljSSw1C3yrJNH1B6gg9Qf8A9Vem6N8f3GE8QaOp9ZbJ8f8Ajjf/ABVSrdT1sXLHU3GWDjFwtt/X6G38FbTxJFpN3NrVxcLYb/LtrW4B3BgcMwzyAMYx659K5DXPg14q1DxDqN5biy8q4upZU3T4O1nJGePQ17ZoHiPS/E2mrfaNdLPEeGHRo2/usOoNadXZNHyn9qYihialSMVFvdW2t9x8ea3o114f1q40vUNn2i3YK/ltlckA8H6Guvsvg14p1DT7e8txZeVcRLKm6fB2sMjPHoaz/in/AMlP1n/rqn/ota+j/Cv/ACJ2jf8AXhB/6LWpSTZ9FmGZV8PhqVWFryWv3JnMf2NdeH/gXe6XqGz7Rb6ZcK/ltlckOeD9DXj/AMH/APkqmlfSb/0S9e/+OP8AkQNe/wCwfP8A+gGvAPg//wAlU0r6Tf8Aol6b3RwZdUdTA4qct3zP70z0X4p/DrXfF/ia2vtIFt5MVmsLebLtO4O56Y9GFeTeLPA+r+DPsn9s+R/pe/y/Jk3fd25zx/tCvrCvFv2hf+Ze/wC3n/2lRJLcjJsyryrU8K7cuvrs2cD4W+HOueL9MlvtI+zeTFMYW82XadwAPTHowr2H4S+B9X8Gf2t/bPkf6X5Pl+TJu+7vznj/AGhVX4B/8iPff9hF/wD0XHXqFEUtzHN8yryqVMK7ct/n0Z8j6n/yPl5/2En/APRpr64r5H1P/kfLz/sJP/6NNfXFETXiD4aPo/0PKPj9/wAirpn/AF+/+yNVX9n3/kG63/12i/k1Wvj9/wAirpn/AF+/+yNVX9n3/kG63/12i/k1H2gj/wAiN+v/ALccze/BTxZPf3E0YsdskrMubjsTn0rz/VdNuNH1a50682+fayGOTYcjI9DX2PXyf8QP+Sia7/1+yfzpSSR6GTZlXxdSUKlrJdDoIfgp4snt45oxY7ZFDLm47EZ9K9Q8Q6bcaN8B59OvNvn2unpHJsORkEZwa7bTP+QTZ/8AXBP/AEEVgfEz/kmut/8AXv8A+zCqskeHLMq+LxFOFS1lJbep80+H/D2oeJ9WXTtJjSS5ZC4V3CjA68mur/4Ut4y/587b/wACVrD8D+KR4O8TJqzWhuwsTx+UJNmdw65wa9K/4aEi/wChbf8A8DR/8RUK3U+pxtXMoVbYWCcbde/3om+Fnw78Q+FfFsl/rEEMdu1o8QKTKx3FlI4H0NewVyPgDx4vjq0vJ0082P2V1TBm8zdkE/3RjpXXVorW0Picxq16mIbxCtJaaf0wooopnnnz/wDFv/koNz/1xi/9BrjIf9cn+8P512fxb/5KDc/9cYv/AEGuMh/1yf7w/nQB9CfFQ4+G+pe5i/8ARq15R8OfFp8M+IVS5ciwuyI58nhD2f8ADv7V6v8AFP8A5JvqX1i/9GpXzxQB77rvhEf8LA0bxHp6Da04W7Cj/ZO1/wCh/Csn43/8gXS/+vhv/QaufCjxd/a+kf2ReyZvLJf3ZY8yR9vxHT8qp/G//kC6X/18N/6DQB0Xwt/5Jrpf/bb/ANHPXi/gL/kftH/6+Vr2j4W/8k10v/tt/wCjnrxfwF/yP2j/APXytAHsPxK8Vaj4V0uyn0ryt80xR/NTcMbc15z/AMLh8Uetn/34/wDr11nxu/5AWmf9fLf+g14vQB7R8OvH2teJ/Estjqht/JW2aUeXHtO4Mo659zXPfGz/AJG6y/68V/8ARj1F8GP+R3n/AOvF/wD0NKl+Nn/I3WX/AF4r/wCjHoA84qa0tJr68htbVDJNM4RFA6knFQ16r8HfC/nXEniG7TKREx2oI6t/E34dPzoA6y9ubP4X/DUldrTxJtQf89p27/TP6Cvme6uZr27lublzJNM5d3PViTkmu8+L3jD/AISPxQbG0k3WGnExpg8PJ/E39B9KzPht4SPi3xbDBMmbK2xNdH1UHhfxPH51nJ3dj77K8PDL8G69XRtXfp0R638GfCH9h+HDq15HtvdRAYBhykX8I/Hr+Vek0iqqKFRQqqMAAYAFLVrQ+JxWInia0qs92FfIviIY8b6qCc/8TGbn/toa+uq+Ytd8E+J7jxfqVxBoN+8Ml/K6OsDEMpkJBHtipke/w9UhCdTnaWi3Pc/iB4Lt/Gfh57fCpfQ/PazH+Fv7p9j0/I9q+bra/wBV8LXmpWOGgkmhks7uBxwQwIOR6jqD/Q19d15b8W/h0+vQDW9DgL6jENs0MY5nXsQP7w/UU5LqZ5NmEab+rV/ge1+j/wAv1PNvg8cfFPSuOqzf+iXr2z4neJP+Ea8D3c0T7bq6H2eDnncw5I+gya8r+F3hHxDpfxG0281HRr21toxLvllhKquYnAyT7kCtX4w2HiXxJ4khtdN0a/nsLGPCPHCxV3bliPXsPwNStEd+NhSxOaU7yXKopvVdG9DyC1uZbO7iubdtk0LiRGKg4YHIODxW9qfxA8Uazp0tjqerSXFtKAHjaNMHBz2Wvd/hR4Vk8MeD1+2wtFfXr+dOjDDIOiqfoP5mu4pqLsLFZ5QVZr2SlyvR3/LRnyV4M8QP4Y8XWGqKT5ccm2ZQfvRtww/I5+oFfWcUiTQpLEwdHUMrDoQehrwz4ufD/U7jxaNU0DTbi8jvk3TLbxltki8EnHqMH869E+F82rf8IXBZa/Y3NpdWR8lftEZUyJ/CRnrgcfhRHR2OXOJUsXQp4um1fZq+v9Jnmvx+/wCRq0z/AK8v/Z2rvfgt/wAkztf+u8v/AKFXK/Gvw3rWt+I9Pl0jS7q8jjtNrvBEWCneTjiuz+E2m3uk/D+3tNTtZbW4WaUmKVSrAFuODQviDFVIPJ6UE1e+33na18ip/wAjwv8A2ER/6Mr66r5iTwT4n/4S9bj+wb/yftwff5DY2+ZnP0xRIMgqQh7XmaWi/U91+I+iS+IPAOpWVshe4CCaJR1ZkIbH4gEfjXgPw18UR+E/GkF5dcWsym3nb+4rEfN+BAP0zX1NXkfxA+DZ1W8m1bws0cVxKS81m52q7dyh6An0PHuKcl1RllONoxpzwmI0jLqesW9xDd20dxaypNDKoZJEOQwPcGuE+LHjK10Dwtc6bHKr6jqERhWIN8yIwIZz7YyB7mvGV8MeP9EZre107XLcHhhaCQqfxTINX9F+E3i7X7wSX9s9hC5zJcXrYb/vn7xP1wPelzNnTSyrC4eoq1WsnFa+v4/kS/BjQ5dU8fQ3uwm301GmkbsGIKqPzJP/AAE1237QA/4p/STn/l6bj/gFegeFPCun+ENETTtNUnndLMw+aVvU/wBB2rjvjZoup63oemRaRYXF7JHcszrBGWKjbjJxRa0TKOPjis1hV2itFftZmb8AVWTQdZR1DK1wgYEZBBU8VxfxT8At4T1g32nRn+yrtyY8f8sH6lD7entx2r0P4JaHqmiaTqqavYXFk8s6FFnjKlgFPIzXoOtaPZ6/o9xpupRCS3nXaw7qexHoRRa6CpmDwmZzqRd4u1/uX5HyXq+tXmuTW82oyebNBbrbiQ9WVc4z6nBxn2r6W+F5z8MtF4x+5P8A6G1eE638MfE+l6xcWlrpN3fQRt+7uIIiyyL2OR39q9h0wazoHwRt4LXTbp9WW2aKO2WIl0ZnbkjtgHNKO53ZzKjXw9OFGS1kuvdP7jyL4q+JP+Ej8c3Jhfda2X+jQ4PB2n5m/Fs/gBWTo3jbxF4esTZ6NqT2sBcuUSNDlj3yQT2rqfh/8OdauvGtnLr2lXVrZW7faJHuIiocr0XnqScfhmvouhJvUrF5jhsFCGFjBVEl3Vvyep8canqd5rOoy3+pTefdTEGSTaF3EDHQADoK+gPgr4kGr+D/AOzZ3zc6Y3l4J5MZ5U/hyPwrpPHvhweKfBt7p6KDcbfNt/aReR+fT8a8f+GWkeKvC/jW2nuNC1GOzuP3FyTAwAU9GPHY4P507NMyrYmjmeAkklCUdlft226aC/Hz/keLH/sHJ/6Mkr0z4P8A/JK9K+s3/o564f40eGdb1rxhZ3Gk6Vd3kS2Co0kMRYBvMkOMjvgj864aHwp47t4hFb6XrUUa9ERJFA/AUtmWqNPGZbSouoota6/Pz8z6nor5k03w749TVbRpbDWxGJkLFhJgDcM5r6bq07nzmOwUcI4qNRSv2KOt6cNX0C/05jgXdtJDn03KRn9a+U9Gv7nwj4vt7uaAi4065xLC3ByDhl/mK+uq83+Ivwph8VzNqmjyR2uqYAkD8Rz49cdG9/z9aUlc7snx1Kg5Ua/wz/r8TudF1zTvEOmx3+kXSXEDjqp5U/3WHY+xql4o8X6T4R01rrVbgB8furdCDJKfRV/r0FfOc/gPxrotwdui6irjjfZqZM/jHmrOlfDDxjr94DNp09qrEb7i/Jjx74PzH8AaXMzr/sfBxl7SVdcny/O/6H0homt2HiHSYdS0qcTW8o4PdT3UjsR6V84fFXxJ/wAJH45uTC+61sv9GhweDtPzN+LZ/ACvXYfC7/Dv4c38HhyG51LVbhcF40JLyEYDBR0Cgk15r8P/AIc61deNbOXXtKurWyt2+0SPcRFQ5XovPUk4/DNErvQMrjhcPOrilK8Y3Ub7v5fgcto3jbxF4esTZ6NqT2sBcuUSNDlj3yQT2rM1PU7zWdRlv9Sm8+6mIMkm0LuIGOgAHQV9j1znj3w4PFPg2909FBuNvm2/tIvI/Pp+NHKzWjn1H2yboqN93fX8jm/gr4kGr+D/AOzZ3zc6Y3l4J5MZ5U/hyPwrhPj4P+K6sT/1DU/9GyUnwy0jxV4X8a209xoWox2dx+4uSYGACnox47HB/OtX40eGdb1rxhZ3Gk6Vd3kKWCo0kMRYBvMkOMjvgj86N4l0oUqGbc8ZLlkm918/xOu+GWnWmsfBiw0/UIVlt51nSRT3Bmfn2PvXinirw5qPw/8AFgijlkXy286zul4LKDwfqOhr374Xafd6X8OdNs9RtpLa5jMu+KVdrLmVyMj6EGrXjjwhbeMvD0llNhLlMvbTY/1b/wCB6Ghq6OHD5isLj6qlrTlJ3+/f+uh8tapqE2ratdahchRNdStNJtGBuY5OPxNfVPirSH1/wFf6dAP3txaful9XADKPzAFfOE3w98WwzyRHw/fOUYqWSEspweoI6j3r6qt1K20SsMEIAR+FETqz2vBOjKi0+W+3ysfKXgrxAfCXjOz1KeNjHC5jnTHOxgVbj1Gc49RX1Pp2pWWr2Ed7plzHdW0gyskbZB9vY+1ea/EP4QLr13Jq3ht47e+kJae3kO1Jj/eB7Mffg+3fymTwR410edlTRdUjfoWtY2cH/gSZBpaxNMRTwmbqNWNRQmlZp/0vvPojxX440Xwfbo+qT7pnYBLaHDSEZ5bGeABzk1s6fqFpqunw32nTpcW067o5EPBH+e3avm7RPhR4t168BurKSwhZv3lxe/KR/wABPzE/h+Ne/eEvCtn4P0GPTLB5JADvllkPMjnq2Og+g9B1qk2zxsfhMJhqajTqc0+ttv8AgHzH4z/5HzX/APsJXP8A6NavoT/hUPgb/oB/+Tc//wAXXjHivwT4nu/GetXFtoN/LDNqE8kciQMQ6mRiCD6EVW/4Rv4gf9A/XfykqVp0PpsTD6xSpqliOSy1s99uzWx75pPw38KaHqkOo6VpXkXcBJjk+0yttyCDwzEdCe1L8Sf+Sb63/wBex/mK8C/4Rv4gf9A/Xfykr3/xtZ3V98OtTtLWGSe5ktdqxINzM3HGKpbHgYnDyoYijOdb2l2uu1mvN9z5s8KeGbnxdryaVZTRQSujOHmztwoz2Bq54z8Cap4JuYI9RMc0VwpMc8OShI6ryBzXY/CXwpr+k+PobrU9IvLS3WCQGWaEqoJHAya9h8WeGbXxZ4duNMvAAXG6KTvG46MP89KlRuj2cXnDw+NjBNOnZXseW/Auw8PXLXF06M+u25OBKwKrGejIPXsc5/WvbK+ZNJ8L+OPCfiZL3T9EvnmtJSu6OJikq5wRkdVIr6R0y8bUNMt7qS2mtXlQM0E6lXjPcEVUdjxc7pr2/toz5oy8728vQtV4F8fv+Rt03/rx/wDajV77Xi3xq8Na1rXiawm0jS7q8iSz2M8ERYA72OOPrRLYyyScYY1OTsrM674M/wDJMLD/AK6zf+jGrxz4vf8AJVdY/wC2H/oiOvbPhTp15pXw9s7TUraW1uEklLRSqVYZckcfSvLPih4R8Q6p8SNUvNO0a9ubaTytksUJZWxCgOD9QRSex6eXVacc1rSclZ83/pSPVLDw9ZeKvhHpGl6gnyS6Zb7HA+aNxGuGHuD/AIV8/wA0Ws/DvxpgMYb2yk3K2PllT+qsK+mvCVvNZ+C9FtrqNopobCBJI3GCjBACCPXNYHxM8CJ4x0TzLRVXVLUE27H+Md0J9+3vTaujky/MI0MROjV1pyb+Xn6dz578Ktv8caMx/i1GA/8AkRa+stQv7XS9Pnvr+ZYLaBC8kjHhQK+afDPgjxPa+LNInuNBv44or6F3doGAVRICST6Yr6C8X+FbXxhoL6ZeTSwKWEiPE33WGcZHRhz0NKN7HTnk6NTEUk5e71a16mPpOv8Ag74mWZikt7e5mTINreRr5yD1Xvj3U1xXxJ+FOg6N4autb0aSSye32k27yb43BYDAzyDz6muR1r4S+LtBui9naNqESNmO4smy3t8v3gfw/GqT+F/H+vMkF5p2t3IVsIL3zAqn2MnA+tJvujqw+Fp0aiq4bE2p9U3+G/6XRufAzUJ7fx49nGzeRdWz+YgPGVwQx+nI/GvoivO/hh8NX8HCbUdVkjk1K4j8vbGcrCmQSM9ySBk+1eiVUdEeDnGIpYjFudLVWSv3Plv4p/8AJT9Z/wCuqf8Aota+j/Cv/InaN/14Qf8Aota8K+I3g/xFqXxC1W7sNFvri3lkUpLHCWVvkUcH6ivePDkEtt4W0qC4Ro5YrKFHRhgqwQAg/jSjud+bVISwWHUWm0l+SKnjj/kQNe/7B8//AKAa8A+D/wDyVTSvpN/6JevoPxhbTXngrWba1iaaeaxmSONBlmYoQAB614r8LvCPiHS/iNpt5qOjXtrbRiXfLLCVVcxOBkn3IFEt0PK6kI5fiIyaTaf5H0HXi37Qv/Mvf9vP/tKvaa8m+OOgatrn9h/2Pp1ze+T9o8zyIy2zPl4zj1wfypy2POyeUYY6EpOy1/Jln4B/8iPff9hF/wD0XHXqFed/BfR9R0XwfeW+rWU1nM9+zrHMhUlfLjGcHtkH8q9EprYyzOSljKji7q58meMbSXSPH2rREbWjvpJE47Ftyn8iK+odA1yz8RaJb6lp8qvHMgJAOSjd1PoQa4z4mfDEeL9upaU6Q6rGoRg5ws6joCexHr6cV463hDx1oc8kFvperxFuGNkrsrfimQajWLPoJrD5thqa9oozj3/E7n4969a3EunaLbSLJNAzTz7TnYSNqqff73H09a2PgHZSQ+FtRvHUhLi6CpnuFUZP5tj8K4Lw78IvE+vXiyanA+mWzNmSa6/1h9cJ1J+uK+htG0i00HR7bTNNj8u2t02oOpPck+5JJP1pq7dzmzCtQw2CjgqUuZ9X+P5l2vk/4gf8lE13/r9k/nX1hXzX428F+Jb7xzrF1Z6HfzQS3btHIkDFWGeoNEtiOHqkIV5ubtp19T6K0z/kE2f/AFwT/wBBFYHxM/5Jrrf/AF7/APswrodPRo9MtUdSrLCgYHsdorE+IFncah4A1e1soHuJ5YMJFGu5mO4dBVdDxcO0sVBv+ZfmeA/C3QtN8R+No7DWbb7TatBI5j8xk5A45Ug17b/wqHwN/wBAP/ybn/8Ai68Gg8E+MraTzLbQ9VhfGN0cLqfzFWf+Eb+IH/QP138pKhadD7PG0ZYirz0sTyK2yf8Akz6M8P8AhTRfCsM0Wg2f2VJ2DSDzXfcR0+8TjrWxXhfwu0XxdZePLabW7TVIrMRSB2ud+zO04znjrXulWj5HMKDo1rOpztq9/wCrhRRRTPPPn/4t/wDJQbn/AK4xf+g1xQJBBHBHSu2+Lf8AyUG4/wCuMX/oNcRQBtah4u1/VbF7PUNUuLi3kxvjcjBwcj9QKxaKKALNhqN3pV4l3p1xJbzpnbJGcEZ4NW9V8R6vrcUcerX810kbbkEh+6ay6KAOj0vx74l0XTYtP0zUvItYc7I/IjbGSWPJUnqTWHaXdxYXkd1ZytDPE25JF6qfWoKKANTVfEmsa3FHFq2oTXSRtuRZD0PrWXRRQBd0zV7/AEa6Nzpd1JazMhQvGeSpIOP0FLqms6hrVws+q3cl1KibFeQ8hck4/MmqNFAGhoekXGva1badaDMk7gE4+6O5P0Fey/EDXrf4f/D+LTdLIjuZo/s1sAeVGPmf/Pc1T+EvhtNL0abxDqKhJLhD5TP/AARDkt+OPyFeQ/EHxW/i7xZcXisfskX7q1Q9kHf6k81MnZHtZPgvrWIvJe7HV/ojmQGkcAAszHgDkk19Q/DPwkPCfhKKKZMX11ia5PcEjhfwH65ryT4N+EP7e8S/2peR7rLTWDYYZDy9VH4dfyr6LpRXU9PiDG3awsHtq/0X6hRRRVnyQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAeX/FfwTe6tPFrWkRNcSxxiKeBBlioyQwHfrgj6V49JbTxOUlgkRh1VkIIr6xooA+TPJk/55t/3yaPJk/55t/3ya+s6KAPkzyZP+ebf98mjyZP+ebf98mvrOigD5M8mT/nm3/fJo8mT/nm3/fJr6zooA+TPJk/55t/3yaPJk/55t/3ya+s6KAPkzyZP+ebf98mt3wf4Zm8S+JbewKOsH+snfH3UHX8+B+NfS1FAHlnxl8Tf2L4dg8N6SCkt4gEgQf6uAcY/4ERj6A14vofhbWfEV8ltpWnzTMxwZNhCIPVm6AV9d0VLjdnvYPOPqdD2VOnr3v19LfqYvhHw3B4U8M2ulW5DNGu6aQf8tJD95vz/AExW1RRVHiVJyqTc5O7YUUUUEBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//9k=';  
    doc.addImage(imgData, 'jpeg', 40, 20, 450, 45);
    doc.setFontSize(12);   

    var specialElementHandlers = {
         '#editor': function(element, renderer){
                return true;
        }
    };
   
    doc.fromHTML(gdspNum, 40, 70, {
       'width': 450, 
       'elementHandlers': specialElementHandlers
   });
    var projName = $('#projectName1').html();
    var vGap = 0;
    var sub1 = " ";
    var sub2 = " ";
	  var sub3 = " ";
	  var sub4 = " ";
	  //var sub5 = " ";
	  var position = 0;
	  
    addTableToPdf(doc, document.getElementById("data1"), 100);
	  if(projName.length &gt; 65){
			var lines = Math.ceil(projName.length);
      //projName = projName.substring(0,130);
			vGap = 20;
			sub1 =  projName.substring(0, 55);
			var step = 65;
			for(var i = 1; i &lt; lines; i++){
				if(i == 1){	sub2 = projName.substring(55, 110);	}
				if(i == 2){ sub3 = projName.substring(110, 165);}
				if(i == 3){sub4 = projName.substring(165, 220);}
				//if(i == 4){sub5 = projName.substring(220, 275);}
			}
      /*var bPoint = findBreakPoint(projName);
      if(bPoint == '-'){
         sub1 = projName.substring(0, 65) + '-';
         sub2 = projName.substring(65);
      }else{
         sub1 = projName.substring(0, bPoint);
         sub2 = projName.substring(bPoint);
      }*/
			for(var k = 0; k &lt; lines; k++){
				if(k == 0){
					$('#projectName15').attr('display', 'block');
					 $('#projectName15').html(sub1);
				}
				if(k == 1){
					$('#extra1').attr('display', 'block');
					 $('#extra1').html(sub2);					
				}
				if(k == 2){
					$('#extra2').attr('display', 'block');
					$('#extra2').html(sub3);				
				}
				if(k == 3){
					$('#extra3').attr('display', 'block');
					$('#extra3').html(sub4);			
				}
			 // if(k == 4){
				//	 $('#extra4').attr('display', 'block');
				//	 $('#extra4').html(sub5);				
				//}
			
			}
			$('#simpleSize15').html($('#simpleSize1').html());
      addTableToPdf(doc, document.getElementById("data25"), 255);
			position = 420;
    }else{
      addTableToPdf(doc, document.getElementById("data2"), 255);
			position = 385;
    }
    addTableToPdf(doc, document.getElementById("data3"), position + vGap);
	  setCheckMark(doc, 'page1', vGap)
	  doc.addPage();     
    addTableToPdf(doc, document.getElementById("data4"), 25 + vGap);
    setCheckMark(doc, 'page2', vGap)
    doc.addPage();
    addTableToPdf(doc, document.getElementById("data6"), 45);
    addTableToPdf(doc, document.getElementById("data7"), 350);
    setCheckMark(doc, 'page3', vGap);
    if(comment_str.length &gt; 137){
			 doc.addPage();
			 doc.text(40, 45, 'Approval Status');
       addTableToPdf1(doc, document.getElementById("data8"), 55);
    }
   
    doc.save('Report_' + c.data.tasks.gdsp_id + '.pdf');

  function findBreakPoint(str){
     var retVal = 0;
     var char1 = str.charAt(65);
     var substr = str.substring(0,65);
     if(char1 == ' '){
        return 65;
     }else{
       var count = 0;
       for(count = 65; count &gt; 57; count--){
           var ch = substr.charAt(count);
           if(ch == ' '){
              retVal = count;
              break;
           }
       } 
       if(retVal == 0){
          return '-';
       }else{
          return retVal;
       }
     }
  }

  function getImage(){
      var imgData = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAhCAYAAAAoNdCeAAAACXBIWXMAABJ0AAASdAHeZh94AAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAABVElEQVR42mL8//8/A70AEwMdwahlo5YNY8tuP3rOhkuOhVqWqMrJH/7PKvTrzt3zzjgV/f//n2KsLyt7mIFT+/7NF5/Z8KmjOBjtteQOMzAwMGw7tMFbTZznF17FlPgoxEL2MAOr4X3vlLapxKgn26J9qyb5STMw3JfVCT5MrB5Gckt9eTntw//ZOBke3TljS7QmcnzlIMlwn5GB/37/zCUBpOgj2aLj21ebQIIv7DCpegkq0LVy2Dxl7kIfGN9NU/awsazs4dvPv7FQ1bIZ5THNDAzS91U1nXb///+fYVJ3ZRoDh+b9+hnrEsgJfvxBtm6mGwOD9H0GJvn7XAwM97kZGe7L6nkfJjcFE1U6iDIw/GdgkPzPwCpzn5J8SbAEyctPmf2fgYGBgY3tQUB81AaKihtCrnl2/waHjqzsYVkF08OUlqGMo025UctGLRu1jGwAGAD/Nw2VQUWd1wAAAABJRU5ErkJggg==';
    return imgData;
  }


 function setCheckMark(doc, page, vGap){
    var data = c.data.tasks.variables;
   
    for(key in data){
			if(textFields.indexOf(key) &lt; 0 &amp;&amp; data[key] == 'true' ){
        if(page == 'page1'){
             locateMarkPage1(doc, key, vGap);
        }else if(page == 'page2'){
             locateMarkPage2(doc, key);
        }else if(page == 'page3'){
             locateMarkPage3(doc, key);  
        }
			}
    }
 }

function locateMarkPage1(doc, name, vGap){
	 var length = $('#projectName1').html().length;
	 var index = 0;
	 if(length &gt; 65){
		 index = 55;
	 }
   if(name == 'prospective'){
      doc.addImage(getImage(), 'jpeg', 270, 340 + index + vGap, 15, 15);
   }else if(name == 'restrospective'){
      doc.addImage(getImage(), 'jpeg', 270, 360 + index + vGap, 15, 15);
   }else if(name == 'human'){
      doc.addImage(getImage(), 'jpeg', 270, 411 + index + vGap, 15, 15);
   }else if( name == 'rat'){
	    doc.addImage(getImage(), 'jpeg', 270, 431 + index + vGap, 15, 15);
	 }else if(name == 'mouse'){
			doc.addImage(getImage(), 'jpeg', 270, 451 + index + vGap, 15, 15);
	 }else if(name == 'celegans'){
	    doc.addImage(getImage(), 'jpeg', 270, 471 + index + vGap, 15, 15);
	 }else if(name == 'drosophila'){
	    doc.addImage(getImage(), 'jpeg', 270, 491 + index + vGap, 15, 15);
	 }else if(name == 'yeast'){
	    doc.addImage(getImage(), 'jpeg', 270, 511 + index + vGap, 15, 15);
	 }else if(name == 'bacteria'){
	    doc.addImage(getImage(), 'jpeg', 270, 531 + index + vGap, 15, 15);
	 }else if(name == 'nonHuman'){
      doc.addImage(getImage(), 'jpeg', 270, 551 + index + vGap, 15, 15);
   }else if(name == 'germLine'){
      doc.addImage(getImage(), 'jpeg', 270, 571 + index + vGap, 15, 15);
   }else if(name == 'dnaType'){ 
      doc.addImage(getImage(), 'jpeg', 270, 591 + index + vGap, 15, 15);
   }else if(name == 'rnaType'){ 
      doc.addImage(getImage(), 'jpeg', 270, 611 + index + vGap, 15, 15);
   }else if(name == 'microbiome'){ 
      doc.addImage(getImage(), 'jpeg', 270, 631 + index + vGap, 15, 15);
   }else if(name == 'mitochrondria'){ 
      doc.addImage(getImage(), 'jpeg', 270, 651 + index + vGap, 15, 15);
   }else if(name == 'otherType'){ 
      doc.addImage(getImage(), 'jpeg', 270, 671 + index + vGap, 15, 15);
   }
}

function locateMarkPage2(doc, name){
	 if(name == 'snpArrayData'){ 
      doc.addImage(getImage(), 'jpeg', 270, 50, 15, 15);
   }else if(name == 'expressionArray'){ 
      doc.addImage(getImage(), 'jpeg', 270, 70 , 15, 15);
   }else if(name == 'methylationArray'){ 
      doc.addImage(getImage(), 'jpeg', 270, 90, 15, 15);
   }else if(name == 'arrayDerive'){ 
      doc.addImage(getImage(), 'jpeg', 270, 110, 15, 15);
   }else if(name == 'microarrayData'){ 
      doc.addImage(getImage(), 'jpeg', 270, 130, 15, 15);
   }else if(name == 'sequenceData'){ 
      doc.addImage(getImage(), 'jpeg', 270, 150, 15, 15);
   }else if(name == 'somaticSnv'){ 
      doc.addImage(getImage(), 'jpeg', 270, 170, 15, 15);
   }else if(name == 'arrayCgh'){ 
      doc.addImage(getImage(), 'jpeg', 270, 190, 15, 15);
   }else if(name == 'wholeGenome'){ 
      doc.addImage(getImage(), 'jpeg', 270, 210, 15, 15);
   }else if(name == 'wholeExome'){ 
      doc.addImage(getImage(), 'jpeg', 270, 230, 15, 15);
   }else if(name == 'targetGenome'){ 
      doc.addImage(getImage(), 'jpeg', 270, 250, 15, 15);
   }else if(name == 'targetExome'){ 
      doc.addImage(getImage(), 'jpeg', 270, 270, 15, 15);
   }else if(name == 'wholeTranscriptome'){ 
      doc.addImage(getImage(), 'jpeg', 270, 290, 15, 15);
   }else if(name == 'targetTrabscriptome'){ 
      doc.addImage(getImage(), 'jpeg', 270, 310, 15, 15);
   }else if(name == 'epigenomicMark'){ 
      doc.addImage(getImage(), 'jpeg', 270, 330, 15, 15);
   }else if(name == 'sanger'){ 
      doc.addImage(getImage(), 'jpeg', 270, 350, 15, 15);
   }else if(name == 'rrna'){ 
      doc.addImage(getImage(), 'jpeg', 270, 370, 15, 15);
   }else if(name == 'association'){ 
      doc.addImage(getImage(), 'jpeg', 270, 390, 15, 15);
   }else if(name == 'arrayDerivedExpression'){ 
      doc.addImage(getImage(), 'jpeg', 270, 410, 15, 15);
   }else if(name == 'rnaExpression'){ 
      doc.addImage(getImage(), 'jpeg', 270, 430, 15, 15);
   }else if(name == 'derivedMethylation'){ 
      doc.addImage(getImage(), 'jpeg', 270, 450, 15, 15);
   }else if(name == 'otherAnalysis'){ 
      doc.addImage(getImage(), 'jpeg', 270, 470, 15, 15);
   }else if(name == 'individual'){ 
      doc.addImage(getImage(), 'jpeg', 270, 490, 15, 15);
   }else if(name == 'aggregate'){ 
      doc.addImage(getImage(), 'jpeg', 270, 510, 15, 15);
   }else if(name == 'notApplicableDataForm'){ 
      doc.addImage(getImage(), 'jpeg', 270, 530, 15, 15);
   }else if(name == 'arrayExpress'){ 
      doc.addImage(getImage(), 'jpeg', 270, 550, 15, 15);
   }else if(name == 'cancerGenomics'){ 
      doc.addImage(getImage(), 'jpeg', 270, 570, 15, 15);
   }else if(name == 'clinVar'){ 
      doc.addImage(getImage(), 'jpeg', 270, 590, 15, 15);
   }else if(name == 'dbGap'){ 
      doc.addImage(getImage(), 'jpeg', 270, 610, 15, 15);
   }else if(name == 'dbSnp'){ 
      doc.addImage(getImage(), 'jpeg', 270, 630, 15, 15);
   }else if(name == 'dbVar'){ 
      doc.addImage(getImage(), 'jpeg', 270, 650, 15, 15);
   }else if(name == 'ena'){ 
      doc.addImage(getImage(), 'jpeg', 270, 670, 15, 15);
   }else if(name == 'geo'){ 
      doc.addImage(getImage(), 'jpeg', 270, 690, 15, 15);
   }else if(name == 'mgi'){ 
      doc.addImage(getImage(), 'jpeg', 270, 710, 15, 15);
   }
}

function locateMarkPage3(doc, name){
	 if(name == 'genBank'){ 
      doc.addImage(getImage(), 'jpeg', 270, 70, 15, 15);
   }else if(name == 'traceArchive'){ 
      doc.addImage(getImage(), 'jpeg', 270, 90, 15, 15);
   }else if(name == 'wormbase'){ 
      doc.addImage(getImage(), 'jpeg', 270, 110, 15, 15);
   }else if(name == 'sra'){ 
      doc.addImage(getImage(), 'jpeg', 270, 130, 15, 15);
   }else if(name == 'zfin'){ 
      doc.addImage(getImage(), 'jpeg', 270, 150, 15, 15);
   }else if(name == 'OtherRepository'){ 
      doc.addImage(getImage(), 'jpeg', 270, 170, 15, 15);
   }else if(name == 'phenotype'){ 
      doc.addImage(getImage(), 'jpeg', 270, 190, 15, 15);
   }else if(name == 'exposure'){ 
      doc.addImage(getImage(), 'jpeg', 270, 210, 15, 15);
   }else if(name == 'surveyTool'){ 
      doc.addImage(getImage(), 'jpeg', 270, 230, 15, 15); 
   }else if(name == 'clinicalData'){ 
      doc.addImage(getImage(), 'jpeg', 270, 250, 15, 15);
   }else if(name == 'protocol'){ 
      doc.addImage(getImage(), 'jpeg', 270, 270, 15, 15);
   }else if(name == 'instrument'){ 
      doc.addImage(getImage(), 'jpeg', 270, 290, 15, 15);
   }else if(name == 'otherCompanion'){ 
      doc.addImage(getImage(), 'jpeg', 270, 310, 15, 15);
   }else if(name == 'dataCheck'){ 
      doc.addImage(getImage(), 'jpeg', 270, 375, 15, 15);
   }else if(name == 'publication'){ 
      doc.addImage(getImage(), 'jpeg', 270, 395, 15, 15);
   }else if(name == 'otherSubmission'){ 
      doc.addImage(getImage(), 'jpeg', 270, 415, 15, 15);
   }else if(name == 'noHumanData'){ 
      doc.addImage(getImage(), 'jpeg', 270, 435, 15, 15);
   }else if(name == 'noLimitation'){ 
      doc.addImage(getImage(), 'jpeg', 270, 455, 15, 15);
   }else if(name == 'limitedOnly'){ 
      doc.addImage(getImage(), 'jpeg', 270, 475, 15, 15);
   }else if(name == 'limitedPurpose'){ 
      doc.addImage(getImage(), 'jpeg', 270, 495, 15, 15);
   }else if(name == 'relateToDisease'){ 
	    doc.addImage(getImage(), 'jpeg', 270, 535, 15, 15);
   }
}

function addTableToPdf(doc, data, height){
   var res = doc.autoTableHtmlToJson(data);
   doc.autoTable(res.columns, res.data, {startX:60, startY: height, headerStyles:{fillColor: [204, 204, 204], textColor: [0, 0, 25]}, styles:{overflow: 'visible'}, columnStyles: { 0: {columnWidth: 250},  1: {columnWidth: 280}}});
}

function addTableToPdf1(doc, data, height){
	 console.log(data); 
   var res = doc.autoTableHtmlToJson(data);
   doc.autoTable(res.columns, res.data, {startX:60, startY: height, headerStyles:{fillColor: [204, 204, 204], textColor: [0, 0, 25]}, styles:{overflow: 'linebreak', columnWidth: 'wrap'}, columnStyles: { 0: {columnWidth: 50}, 1: {columnWidth: 100}, 2: {columnWidth: 60}, 3: {columnWidth: 250}, 4: {columnWidth: 70}}});
}

	
	
	
function parse(allcomments) {
	 var comments = allcomments.split("ENDCOMMENTS");
	 var commentsblock = '&lt;tr&gt;&lt;th&gt;Role&lt;/th&gt;&lt;th&gt;Approver&lt;/th&gt;&lt;th&gt;Approval Status&lt;/th&gt;&lt;th&gt;Comments&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;/tr&gt;'
	 for(i = 0; i &lt; comments .length; i++){
			 if (comments[i].length &gt; 40) { 
				 if (comments[i][0] == '\n') {
						 var lastI = 0;
						 while (lastI &lt; comments[i].length &amp;&amp; comments[i][lastI] == '\n') 
									lastI ++;
						 comments[i] = comments[i].substring(lastI,comments[i].length);
				 }
				 var t = comments[i].substring(0,22);
					t = t.replace(/([\\n])/g, '');
				 var approver = comments[i].substring(comments[i].indexOf('(ENDROLE)')+9,comments[i].length);
				 var results = comments[i].substring(comments[i].indexOf('(Additional comments)') + 59,comments[i].indexOf('(Additional comments)') + 67);
				 var comm= comments[i].substring(comments[i].indexOf('(Additional comments)') + 68, comments[i].indexOf('(role)'));
				 var role = comments[i].substring(comments[i].indexOf('(role)') + 6, comments[i].indexOf('(ENDROLE)')); 
				 commentsblock = commentsblock + "&lt;tr&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + role + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + approver + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + results+ "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + comm + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;td&gt;" + t + "&lt;/td&gt;";
				 commentsblock = commentsblock + "&lt;/tr&gt;";
			 }
	 }
	return commentsblock;
}	

	function loadApprovalData(data){
    for(key in data){
			var value = getValue(key, data[key]);
			$('#'+key+"2").html(value);
			$('#'+key+"1").html(value);
		}
	}
	
  function getValue(name, value){
     if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           return getConvertedValue(value, '1');
        }else{
           return value;
        }
     }else{
			  if(value == "true"){
           return '&lt;img src="ico-complete.gif" height="16" width="16" alt="Selected"/&gt;';
        }else{
           return '&lt;img src="ico-notstarted.gif" height="12" width = "16" alt="Non-Selected"/&gt;';
        }
     }
  }	
	
	function getConvertedValue(value, flag){
		 if(flag == '0'){
				var values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				var values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css/&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description&gt;This is the report page for GDSP application&lt;/description&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gdps-report-page-content&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDSP Report Page Content&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	  
		data.tasks = {};
	  var id = $sp.getParameter('itemId');
	  var ticket = $sp.getParameter('ticket');
	  var gr_requested_item = new GlideRecord('sc_req_item');
    gr_requested_item.addQuery('sys_id',id);
	  var gr = gs.getUser();  
    if (! (gr.isMemberOf('CCR_GPA') || gr.isMemberOf('CCR_SD') || gr.isMemberOf('CCR_GPA_ASST') || gr.isMemberOf('CCR_PSO'))) {
       var it_rd = gr_requested_item.addQuery('opened_by',gs.getUserID() );
			 it_rd.addOrCondition('request.requested_for', gs.getUserID());
    }
	  gr_requested_item.query();
		var comments = '';
    var items = {};
		if (gr_requested_item.getRowCount() &gt; 0 ) {
				gr_requested_item.next();
				var variables = gr_requested_item.variables;
				for (key in variables) {
						items[key] = variables[key].toString(); 
				}
		 }
    comments =  gr_requested_item.comments.getJournalEntry(-1);
    comments = gs.escaper(comments);
	
	  data.tasks.variables = items;
	  data.tasks.comments = comments;
	  data.tasks.gdsp_id = ticket;
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-04-20 15:26:26&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;01160574db12720054d8ff621f96192a&lt;/sys_id&gt;&lt;sys_mod_count&gt;297&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDSP Report Page Content&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_01160574db12720054d8ff621f96192a&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-19 21:42:51&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt; 
  &lt;div class="row"&gt;
     &lt;img src="NCI-logo-full.jpg" height="50" alt="NCI LOGO"/&gt;
  &lt;/div&gt;
      &lt;div class="modal-header"&gt;
           &lt;div&gt;
                 &lt;font size="5"&gt;&lt;b&gt;Genomic Data Sharing Plan&lt;/b&gt;&lt;/font&gt;
           &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="modal-body"&gt;
         &lt;div id="sdErrorMessage" style="display:none;"&gt; &lt;/div&gt;
         &lt;div&gt;
             &lt;table width="100%" border="0"&gt;
               &lt;tr&gt;
                   &lt;td colspan="2"&gt;&amp;#160; &amp;#160;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;tr&gt;
                   &lt;td colspan="2"&gt;&lt;label&gt;&lt;b&gt;&lt;font size="3"&gt;GDSP Number - &lt;/font&gt;&lt;font size="2"&gt;&lt;span id='numId'&gt;&lt;/span&gt;&lt;/font&gt; &amp;#160; &amp;#160;&amp;#160; &amp;#160; &lt;/b&gt;&lt;/label&gt;&lt;/td&gt;
               &lt;/tr&gt;
               &lt;tr&gt;
                   &lt;td colspan="2"&gt;&amp;#160; &amp;#160;&lt;/td&gt;
               &lt;/tr&gt;

               &lt;tr&gt;
                  &lt;td colspan="2"&gt;
                     &lt;fieldset class="scheduler-border"&gt;
                        &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Demographics&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                          &lt;table width="100%" border="0"&gt;
                             &lt;tr&gt;
                               &lt;td width="60%" align="right"&gt;&lt;label&gt;Principal Investigator&lt;/label&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/td&gt;
                                 &lt;td width="40%" align="left"&gt;&lt;div id="investigator2"&gt;&lt;/div&gt;&lt;/td&gt;
                             &lt;/tr&gt;
                             &lt;tr&gt;
                                 &lt;td align="right"&gt;&lt;label&gt;Principal Investigator Title&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                 &lt;td align="left"&gt;&lt;div id="pTitle2"&gt;&lt;/div&gt;&lt;/td&gt;
                             &lt;/tr&gt;
                             &lt;tr&gt;
                                 &lt;td align="right"&gt;&lt;label&gt;Branch&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                 &lt;td align="left"&gt;&lt;div id="pBranch2"&gt;&lt;/div&gt;&lt;/td&gt;
                             &lt;/tr&gt;                            
                            &lt;tr&gt;
                                 &lt;td align="right"&gt;&lt;label&gt;Email&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                 &lt;td align="left"&gt;&lt;div id="email2"&gt;&lt;/div&gt;&lt;/td&gt;
                             &lt;/tr&gt;
                             &lt;tr&gt;
                                &lt;td align="right"&gt;&lt;label&gt;Phone&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                &lt;td align="left"&gt;&lt;div id="phone2"&gt;&lt;/div&gt;&lt;/td&gt;
                             &lt;/tr&gt;
                             &lt;tr&gt;
                                &lt;td align="right"&gt;&lt;label&gt;Plan Submission Date&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                &lt;td align="left"&gt;&lt;div id="date2"&gt;&lt;/div&gt;&lt;/td&gt;
                              &lt;/tr&gt;
                           &lt;/table&gt;   
                     &lt;/fieldset&gt;  
                  &lt;/td&gt;
               &lt;/tr&gt;
               &lt;tr&gt;
                  &lt;td colspan="2"&gt;
                      &lt;fieldset class="scheduler-border"&gt;
                        &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Project Information&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                          &lt;table width="100%" border="0"&gt;
                             &lt;tr&gt;
                                &lt;td width="60%" align="right"&gt;&lt;label&gt;Intramural Project (Z01), Grant, or Contract number (if available)&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                &lt;td width="40%" align="left" style="font-family:arial;font-size:10;"&gt;&lt;div id="projectNumber2"&gt;&lt;/div&gt;&lt;/td&gt;
                              &lt;/tr&gt;                            
                             &lt;tr&gt;
                                &lt;td width="60%" align="right"&gt;&lt;label&gt;Study Name&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                &lt;td width="40%" align="left" style="font-family:arial;font-size:10;"&gt;&lt;div id="projectName2"&gt;&lt;/div&gt;&lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                 &lt;td width="60%" align="right"&gt;&lt;label&gt;Plan enrollment/Sample Size&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                 &lt;td width="40%" align="left"&gt;&lt;div id="simpleSize2"&gt;&lt;/div&gt;&lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                &lt;td width="60%" align="right" valign="bottom"&gt;&lt;label&gt;Collection Type [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="prospective2"&gt;&lt;/span&gt;&amp;#160;&amp;#160;Prospective&lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                                &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="restrospective2"&gt;&lt;/span&gt;&amp;#160;&amp;#160;Retrospective&lt;/td&gt;
                              &lt;/tr&gt;
                          &lt;/table&gt;
                      &lt;/fieldset&gt;                  
                  &lt;/td&gt;
               &lt;/tr&gt;
                &lt;tr&gt;
                  &lt;td colspan="2"&gt;
                     &lt;fieldset class="scheduler-border"&gt;
                        &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Data&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                          &lt;table width="100%" border="0"&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&lt;label&gt;Source [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="human2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Human&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="rat2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Rat&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="mouse2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Mouse&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="celegans2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;C. elegans&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="drosophila2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Drosophila&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="yeast2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Yeast&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;(Species: &amp;nbsp;&lt;span id="yeastSpecies2"&gt;&lt;/span&gt;)&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="bacteria2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Bacteria&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;(Species: &amp;nbsp;&lt;span id="bacteriaSpecies2"&gt;&lt;/span&gt;)&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160;&lt;/td&gt;
                               &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="nonHuman2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;(Species: &amp;nbsp;&lt;span id="noHumanOther2"&gt;&lt;/span&gt;)&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;&lt;td colspan="3"&gt;&amp;#160; &amp;#160;&lt;/td&gt;&lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&lt;label&gt;Sample Types [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="germLine2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;GermLine&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="dnaType2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;DNA&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                           &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="rnaType2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;RNA &lt;/td&gt;
                             &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                           &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&lt;label&gt;&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="microbiome2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Microbiome&lt;/td&gt;
                             &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="mitochrondria2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Mitochrondria&lt;/td&gt;
                             &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                              &lt;td align="right"&gt;&amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="otherType2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="specifyOtherType2"&gt;&lt;/span&gt;&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&lt;/td&gt;
                            &lt;/tr&gt;
                          &lt;/table&gt;
                     &lt;/fieldset&gt;   
                  &lt;/td&gt;
               &lt;/tr&gt;
 
               &lt;tr&gt;
                  &lt;td colspan="2"&gt;
                     &lt;fieldset class="scheduler-border"&gt;
                        &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Type&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                          &lt;table width="100%" border="0"&gt;
                            &lt;tr&gt;
                              &lt;td width="60%" align="right" valign="bottom"&gt;&lt;label&gt;Array Data [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="snpArrayData2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;SNP Array&lt;/td&gt;
                              &lt;td width="20%" align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numSNP2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="expressionArray2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Expression Array&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numExpression2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&lt;label&gt;&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="methylationArray2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Methylation Array&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numMethylation2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;&lt;td colspan="3"&gt;&amp;#160; &amp;#160;&lt;/td&gt;&lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td  width="60%" align="right" valign="bottom"&gt;&lt;label&gt;Genotypes [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td  width="20%" align="left" style="white-space:nowrap;"&gt;&lt;span id="arrayDerive2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Derived Genotypes&lt;/td&gt;
                               &lt;td  width="20%" align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numDerivedGenotype2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="microarrayData2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;CNV calls from Microarray&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numMicroarrayData2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="sequenceData2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;CNV calls derived from Sequencing&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numSquenceData2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="somaticSnv2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Somatic SNV (.MAF)&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numSomaticSnv2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="arrayCgh2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array CGH CNVs&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numArrayCgh2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;&lt;td colspan="3"&gt;&amp;#160; &amp;#160;&lt;/td&gt;&lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&lt;label&gt;Sequence [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="wholeGenome2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Whole Genome&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numWholeGenome2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="wholeExome2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Whole Exome&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numWholeExome2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="targetGenome2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Targeted Genome&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numTargetGenome2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="targetExome2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Targeted Exome&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numTargetedExome2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="wholeTranscriptome2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Whole Transcriptome&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numWholeTranscriptome2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="targetTrabscriptome2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Targeted Transcriptome&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numTargetedTranscriptome2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="epigenomicMark2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Epigenomic Marks&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numEpigenomic2"&gt;&lt;/span&gt;&lt;/td&gt; 
                            &lt;/tr&gt;
                            &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="sanger2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Sanger&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numSanger2"&gt;&lt;/span&gt;&lt;/td&gt; 
                            &lt;/tr&gt;
                            &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="rrna2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;16S rRNA&lt;/td&gt;
                              &lt;td align="left" style="white-space:nowrap;"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples&amp;nbsp;&amp;nbsp;&lt;span id="numRrna2"&gt;&lt;/span&gt;&lt;/td&gt; 
                            &lt;/tr&gt;
                            &lt;tr&gt;&lt;td colspan="3"&gt;&amp;#160; &amp;#160; &lt;/td&gt;&lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&lt;label&gt;Analysis [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="association2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Association/Linkage&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="arrayDerivedExpression2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Derived Expression&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="rnaExpression2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;RNA Seq Derived Expression&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td align="left" style="white-space:nowrap;"&gt;&lt;span id="derivedMethylation2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Derived Methylation&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;&lt;td colspan="3"&gt;&amp;#160; &amp;#160; &lt;/td&gt;&lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="top"&gt;&lt;label&gt;Other&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="otherAnalysis2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="spcifiedOtherAnalysis2"&gt;&lt;/span&gt;&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;&lt;td colspan="3"&gt;&amp;#160; &amp;#160; &lt;/td&gt;&lt;/tr&gt;

                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&lt;label&gt;Data Form [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="individual2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Individual&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="aggregate2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Aggregate&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="notApplicableDataForm2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Not Applicable&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&lt;label&gt;Data Repository [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="arrayExpress2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Array Express&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="cancerGenomics2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Cancer Genomics Hub&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="clinVar2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;ClinVar&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="dbGap2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Database of Genotypes and Phenotypes (dbGaP)&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                             &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                             &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="dbSnp2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Database of Short Generic Variants (dbSNP)&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                              &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                              &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="dbVar2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Database of Genomic Structure Variation (dbVar)&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="ena2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;European Nucleotide Archive (ENA)&lt;/td&gt;
                           &lt;/tr&gt;
                           &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="geo2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Gene Expression Omnibus (GEO)&lt;/td&gt;
                            &lt;/tr&gt;
                           &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="mgi2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Mouse Genome Informatics (MGI)&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="genBank2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;GenBank&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="traceArchive2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Trace Archive&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="wormbase2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;WormBase&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="sra2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Sequence Read Archive (SRA)&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="zfin2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Zebrafish Model Organism Database (ZFIN)&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="OtherRepository2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="specifiedRepository2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;&lt;td colspan="3"&gt;&amp;#160; &amp;#160; &lt;/td&gt;&lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&lt;label&gt;Companion Information [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="phenotype2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Phenotype&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="exposure2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Exposure&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="surveyTool2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Survey Tool&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td align="right"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="clinicalData2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Clinic Data&amp;#160; &amp;#160;&lt;span id="specifiedClinicalData2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td align="right"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="protocol2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Study/Protocol&amp;#160; &amp;#160;&lt;span id="specifiedProtocol2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td align="right"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                                &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="instrument2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Data Collection instrument&amp;#160; &amp;#160;&lt;span id="specifiedInstrument2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                                &lt;td align="right"&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
                                &lt;td colspan="2" align="left" style="white-space:nowrap;"&gt;&lt;span id="otherCompanion2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="specifiedCompanion2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                          &lt;/table&gt;
                      &lt;/fieldset&gt; 
                  &lt;/td&gt;
               &lt;/tr&gt;
               &lt;tr&gt;
                  &lt;td colspan="2"&gt;
                     &lt;fieldset class="scheduler-border"&gt;
                        &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Submission Information&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                          &lt;table width="100%" border="0"&gt;
                            &lt;tr&gt;
                              &lt;td width="60%" align="right"&gt;&lt;label&gt;Data Submission and Release Timeline&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                              &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="dataCheck2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Following data cleaning, analysis, and quality checks&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="publication2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;At the time of publication&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="otherSubmission2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Other&amp;#160; &amp;#160;&lt;span id="psecifiedOtherSubmission2"&gt;&lt;/span&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;&lt;td colspan="2"&gt;&amp;#160; &amp;#160; &lt;/td&gt;&lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&lt;label&gt;Data Use Limitation [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="noHumanData2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Not Applicable, no human data&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="noLimitation2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;No data use limitations&lt;/td&gt;
                            &lt;/tr&gt;

                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="limitedOnly2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Limited only by the terms of the Data Use Certification&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="limitedPurpose2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Limited to health/medical/biomedical purposes&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt; &lt;span id=""&gt;&lt;/span&gt;&amp;#160; &amp;#160; &amp;#160; &amp;#160;&amp;#160;doesn't include the study of population origins or ancestry &lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr&gt;
                               &lt;td width="60%" align="right" valign="bottom"&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
                               &lt;td width="40%" align="left" style="white-space:nowrap;"&gt;&lt;span id="relateToDisease2"&gt;&lt;/span&gt;&amp;#160; &amp;#160;Must be related to the specified disease&lt;/td&gt;
                            &lt;/tr&gt;
                          &lt;/table&gt;
                     &lt;/fieldset&gt;
                  &lt;/td&gt;
               &lt;/tr&gt;

              
              &lt;tr&gt;
                  &lt;td colspan="2"&gt;
                     &lt;div id="pre_comments_div1"&gt;
                     &lt;fieldset class="scheduler-border"&gt;
                        &lt;legend class="scheduler-border"&gt;&lt;font size="3"&gt;&lt;b&gt;Approval Status&lt;/b&gt;&lt;/font&gt;&lt;/legend&gt;
                        &lt;div id="commentReviewId2"&gt;&lt;/div&gt;
                     &lt;/fieldset&gt;
                   &lt;/div&gt;
                  &lt;/td&gt;
               &lt;/tr&gt;
             &lt;/table&gt;  
          &lt;/div&gt;
       &lt;/div&gt;
      &lt;/div&gt;


&lt;div id="printable3"&gt;
 &lt;font size="4"&gt;&lt;b&gt;Genomic Data Sharing Plan - &lt;/b&gt;&lt;/font&gt;&lt;font size="4"&gt;&lt;span id='numId2'&gt;&lt;/span&gt;&lt;/font&gt;
&lt;/div&gt;
&lt;div id="printable4"&gt;
 &lt;table border="0" width="60%" id="data1"&gt;
      &lt;tr&gt;&lt;td width="50%"&gt;&lt;b&gt;Demographics&lt;/b&gt;&lt;/td&gt;&lt;td width="50%"&gt;&lt;/td&gt;&lt;/tr&gt;
       &lt;tr&gt; 
           &lt;td&gt;Principal Investigator&lt;/td&gt;
         	&lt;td&gt;&lt;span id="investigator1"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
           &lt;td&gt;&lt;label&gt;Principal Investigator Title&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
           &lt;td&gt;&lt;span id="pTitle1"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
           &lt;td&gt;&lt;label&gt;Branch&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
           &lt;td&gt;&lt;span id="pBranch1"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
           &lt;td&gt;&lt;label&gt;Email&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
           &lt;td&gt;&lt;span id="email1"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
           &lt;td&gt;&lt;label&gt;Phone&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
           &lt;td&gt;&lt;span id="phone1"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
           &lt;td&gt;&lt;label&gt;Plan Submission Date&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
           &lt;td&gt;&lt;span id="date1"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
 &lt;/table&gt;
 &lt;table border="0" width="60%" id="data2"&gt;
      &lt;tr&gt;&lt;td width="50%"&gt;&lt;b&gt;Project Information&lt;/b&gt;&lt;/td&gt;&lt;td width="50%"&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Intramural Project (Z01), Grant, or Contract number&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="projectNumber1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Study Name&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="projectName1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Plan enrollment/Sample Size&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="simpleSize1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;label&gt;Collection Type [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
        &lt;td&gt;&lt;span id="prospective1"&gt;&lt;/span&gt;Prospective&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&amp;#160;&lt;/td&gt;
        &lt;td&gt;&lt;span id="restrospective1"&gt;&lt;/span&gt;Retrospective&lt;/td&gt;
      &lt;/tr&gt;
 &lt;/table&gt;
 &lt;table border="0" width="60%" id="data25"&gt;
      &lt;tr&gt;&lt;td width="50%"&gt;&lt;b&gt;Project Information&lt;/b&gt;&lt;/td&gt;&lt;td width="50%"&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Intramural Project (Z01), Grant, or Contract number&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="projectNumber1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt; 
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Project Name&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="projectName15"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
       &lt;tr&gt;
          &lt;td&gt;&amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="extra1" style="display:none;"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt; 
         &lt;tr&gt;
          &lt;td&gt;&amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="extra2" style="display:none;"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt; 
        &lt;tr&gt;
          &lt;td&gt;&amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="extra3" style="display:none;"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
       &lt;!--tr&gt;
          &lt;td&gt;&amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="extra4" style="display:none;"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr--&gt; 
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Plan enrollment/Sample Size&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="simpleSize15"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;label&gt;Collection Type [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
        &lt;td&gt;&lt;span id="prospective15"&gt;&lt;/span&gt;Prospective&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&amp;#160;&lt;/td&gt;
        &lt;td&gt;&lt;span id="restrospective15"&gt;&lt;/span&gt;Retrospective&lt;/td&gt;
      &lt;/tr&gt;
 &lt;/table&gt;
 &lt;table border="0" width="60%" id="data3"&gt;
       &lt;tr&gt;&lt;td width="50%"&gt;&lt;b&gt;Data&lt;/b&gt;&lt;/td&gt;&lt;td width="50%"&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Source [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="human1"&gt;&lt;/span&gt;Human&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="rat1"&gt;&lt;/span&gt;Rat&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="mouse1"&gt;&lt;/span&gt;Mouse&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="celegans1"&gt;&lt;/span&gt;C. elegans&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="drosophila1"&gt;&lt;/span&gt;Drosophila&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160;&lt;/td&gt;
         &lt;td&gt;
           &lt;span id="yeast1"&gt;&lt;/span&gt;Yeast
           &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; (Species: &amp;nbsp;&amp;nbsp; &lt;span id="yeastSpecies1"&gt;&lt;/span&gt;)
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160;&lt;/td&gt;
         &lt;td&gt;
           &lt;span id="bacteria1"&gt;&lt;/span&gt;Bacteria
           &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; (Species: &amp;nbsp;&amp;nbsp; &lt;span id="bacteriaSpecies1"&gt;&lt;/span&gt;) 
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160;&lt;/td&gt;
         &lt;td&gt;
           &lt;span id="nonHuman1"&gt;&lt;/span&gt;Other
           &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; (Species: &amp;nbsp;&amp;nbsp; &lt;span id="noHumanOther1"&gt;&lt;/span&gt;)
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;label&gt;Sample Types [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="germLine1"&gt;&lt;/span&gt;GermLine&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="dnaType1"&gt;&lt;/span&gt;DNA&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="rnaType1"&gt;&lt;/span&gt;RNA &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;label&gt;&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
        &lt;td&gt;&lt;span id="microbiome1"&gt;&lt;/span&gt;Microbiome&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
        &lt;td&gt;&lt;span id="mitochrondria1"&gt;&lt;/span&gt;Mitochrondria&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&amp;#160; &amp;#160;&lt;/td&gt;
        &lt;td&gt;&lt;span id="otherType1"&gt;&lt;/span&gt;Other&amp;#160; &amp;#160;&lt;span id="specifyOtherType1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt; 
 &lt;/table&gt;
 &lt;table border="0" width="60%" id="data4"&gt;
     &lt;tr&gt;&lt;td width="50%"&gt;&lt;b&gt;Type&lt;/b&gt;&lt;/td&gt;&lt;td width="25%"&gt;&lt;/td&gt;&lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Array Data [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="snpArrayData1"&gt;&lt;/span&gt;SNP Array&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSNP1"&gt;&lt;/span&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="expressionArray1"&gt;&lt;/span&gt;Expression Array&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numExpression1"&gt;&lt;/span&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="methylationArray1"&gt;&lt;/span&gt;Methylation Array&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numMethylation1"&gt;&lt;/span&gt;&lt;/td&gt;
     &lt;/tr&gt;
    &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Genotypes [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="arrayDerive1"&gt;&lt;/span&gt;Array Derived Genotypes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numDerivedGenotype1"&gt;&lt;/span&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="microarrayData1"&gt;&lt;/span&gt;CNV calls from Microarray&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numMicroarrayData1"&gt;&lt;/span&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="sequenceData1"&gt;&lt;/span&gt;CNV calls derived from Sequencing&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSquenceData1"&gt;&lt;/span&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="somaticSnv1"&gt;&lt;/span&gt;Somatic SNV (.MAF)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSomaticSnv1"&gt;&lt;/span&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="arrayCgh1"&gt;&lt;/span&gt;Array CGH CNVs&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numArrayCgh1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Sequence [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="wholeGenome1"&gt;&lt;/span&gt;Whole Genome&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; # of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numWholeGenome1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="wholeExome1"&gt;&lt;/span&gt;Whole Exome&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numWholeExome1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="targetGenome1"&gt;&lt;/span&gt;Targeted Genome&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numTargetGenome1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="targetExome1"&gt;&lt;/span&gt;Targeted Exome&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numTargetedExome1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="wholeTranscriptome1"&gt;&lt;/span&gt;Whole Transcriptome&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numWholeTranscriptome1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="targetTrabscriptome1"&gt;&lt;/span&gt;Targeted Transcriptome&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numTargetedTranscriptome1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="epigenomicMark1"&gt;&lt;/span&gt;Epigenomic Marks&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numEpigenomic1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="sanger1"&gt;&lt;/span&gt;Sanger&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numSanger1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="rrna1"&gt;&lt;/span&gt;16S rRNA&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;# of Samples &amp;nbsp;&amp;nbsp;&lt;span id="numRrna1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Analysis [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="association1"&gt;&lt;/span&gt;Association/Linkage&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="arrayDerivedExpression1"&gt;&lt;/span&gt;Array Derived Expression&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="rnaExpression1"&gt;&lt;/span&gt;RNA Seq Derived Expression&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="derivedMethylation1"&gt;&lt;/span&gt;Array Derived Methylation&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;label&gt;Other&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="otherAnalysis1"&gt;&lt;/span&gt;Other&amp;#160; &amp;#160;&lt;span id="spcifiedOtherAnalysis1"&gt;&lt;/span&gt;&lt;/td&gt;
       &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td &gt;&lt;label&gt;Data Form [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
          &lt;td &gt;&lt;span id="individual1"&gt;&lt;/span&gt;Individual&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="aggregate1"&gt;&lt;/span&gt;Aggregate&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="notApplicableDataForm1"&gt;&lt;/span&gt;Not Applicable&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Data Repository [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="arrayExpress1"&gt;&lt;/span&gt;Array Express&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="cancerGenomics1"&gt;&lt;/span&gt;Cancer Genomics Hub&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="clinVar1"&gt;&lt;/span&gt;ClinVar&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="dbGap1"&gt;&lt;/span&gt;Database of Genotypes and Phenotypes (dbGaP)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="dbSnp1"&gt;&lt;/span&gt;Database of Short Generic Variants (dbSNP)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="dbVar1"&gt;&lt;/span&gt;Database of Genomic Structure Variation (dbVar)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="ena1"&gt;&lt;/span&gt;European Nucleotide Archive (ENA)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="geo1"&gt;&lt;/span&gt;Gene Expression Omnibus (GEO)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="mgi1"&gt;&lt;/span&gt;Mouse Genome Informatics (MGI)&lt;/td&gt;
      &lt;/tr&gt;

   &lt;/table&gt;
   &lt;table border="0" width="60%" id="data6"&gt;
      &lt;tr&gt;&lt;td width="50%"&gt;&lt;b&gt;Type&lt;/b&gt;&lt;/td&gt;&lt;td width="50%"&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="genBank1"&gt;&lt;/span&gt;GenBank&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="traceArchive1"&gt;&lt;/span&gt;Trace Archive&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="wormbase1"&gt;&lt;/span&gt;WormBase&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="sra1"&gt;&lt;/span&gt;Sequence Read Archive (SRA)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="zfin1"&gt;&lt;/span&gt;Zebrafish Model Organism Database (ZFIN)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="OtherRepository1"&gt;&lt;/span&gt;Other&amp;#160; &amp;#160;&lt;span id="specifiedRepository1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Companion Information [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="phenotype1"&gt;&lt;/span&gt;Phenotype&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="exposure1"&gt;&lt;/span&gt;Exposure&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="surveyTool1"&gt;&lt;/span&gt;Survey Tool&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
          &lt;td&gt;&lt;span id="clinicalData1"&gt;&lt;/span&gt;Clinic Data&amp;#160; &amp;#160;&lt;span id="specifiedClinicalData1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="protocol1"&gt;&lt;/span&gt;Study/Protocol&amp;#160; &amp;#160;&lt;span id="specifiedProtocol1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="instrument1"&gt;&lt;/span&gt;Data Collection instrument&amp;#160; &amp;#160;&lt;span id="specifiedInstrument1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160; &lt;/td&gt;
         &lt;td&gt;&lt;span id="otherCompanion1"&gt;&lt;/span&gt;Other&amp;#160; &amp;#160;&lt;span id="specifiedCompanion1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
   &lt;/table&gt;
   &lt;table width="60%" border="0" id="data7"&gt;
      &lt;tr&gt;&lt;td width="50%"&gt;&lt;b&gt;Submission Information&lt;/b&gt;&lt;/td&gt;&lt;td width="50%"&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Data Submission and Release Timeline&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="dataCheck1"&gt;&lt;/span&gt;Following data cleaning, analysis, and quality checks&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="publication1"&gt;&lt;/span&gt;At the time of publication&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="otherSubmission1"&gt;&lt;/span&gt;Other&amp;#160; &amp;#160;&lt;span id="psecifiedOtherSubmission1"&gt;&lt;/span&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&lt;label&gt;Data Use Limitation [Check all that apply]&lt;/label&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="noHumanData1"&gt;&lt;/span&gt;Not Applicable, no human data&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="noLimitation1"&gt;&lt;/span&gt;No data use limitations&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="limitedOnly1"&gt;&lt;/span&gt;Limited only by the terms of the Data Use Certification&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="limitedPurpose1"&gt;&lt;/span&gt;Limited to health/medical/biomedical purposes&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt; &lt;span id=""&gt;&lt;/span&gt;doesn't include the study of population origins or ancestry &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
         &lt;td&gt;&amp;#160; &amp;#160; &amp;#160;&lt;/td&gt;
         &lt;td&gt;&lt;span id="relateToDisease1"&gt;&lt;/span&gt;Must be related to the specified disease&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/table&gt;
 
  &lt;div id="commentReviewId3"&gt;&lt;/div&gt;
  &lt;br&gt;&lt;br&gt;&lt;br&gt;
 &lt;input type="hidden" name="img_val" id="img_val" value="" /&gt;       
 &lt;input type="hidden" name="pName" id="pName"/&gt;  
  
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1482954737</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>fc576a31db2b5b00b86770c08c961981</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b47ee0810000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP Report Page Content</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>67c7a1173e53530088df0ca7ea61d549</update_guid>
<update_guid_history>67c7a1173e53530088df0ca7ea61d549:-1482954737,31e6a1d33853530080157e6e596eefe0:-546678544,fd889f2acc1f13008bb94f45ff1d7d0d:1003537569,63a61726491f13002fea5c1504ffa6a9:-8668373,3b7d6255f81b93006a16113b42b5f91f:-358212309,c540ea28adfecb00aabde6c792de6370:-425565397,3b7d6255f81b93006a16113b42b5f91f:-358212309,3b7d6255f81b93006a16113b42b5f91f:-358212309,dc6d2e959e1b93009898f68ad8ce5c98:-1438422981,c540ea28adfecb00aabde6c792de6370:-425565397,5ebfd62894fecb0091323d64a41d4328:-1582142754,c29f5ae410fecb00e2a0850e6fe38700:5464300,b76f92a43afecb00b82211d0377485c2:-1582142754,035f5ee057fecb0076980e9083416573:248013622,8e4f56e432fecb0038656b0bfb56187d:-1582142754,3c2fd2a416fecb00c3ae99784c7ddf4a:-860288766,72ee12242dfecb00fd93e9e0e9e1fc73:-1582142754,767ed2a4b1fecb00f0b5388281922c44:-225020354,b26e56a4e9fecb00950716ed9b911e26:398604707,a41e922452fecb004494b21d51b58024:-1512505731,680e1e6498fecb00dc30673f2e6372ca:1494976188,0a5ddee030fecb00d74d329dd75ac4cd:235964874,-1427975039:-1427975039,1682068153:1682068153,316863321:316863321,-1135437227:-1135437227,1078112196:1078112196,-450566309:-450566309,207490811:207490811,1995293764:1995293764,207490811:207490811</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="Global">global</application>
<category>customer</category>
<comments/>
<name>sp_widget_a970b6f5db0e7a0054d8ff621f96194c</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[function($scope, spUtil, $http) {
  var c = this;

	c.pagination = {
		//pageDisplayLimit: 4,
		numPages: 0,
		//pageIndexes: ['first', 'previous', 'next', 'last'],
		pageSizes: [5, 10, 15, 20, 25],
		currentSize: 1,
		currentPage: 0
	};

	c.columns = [
		{
			key: 'project_name',
			label: 'Project Name',
			sort: 'asc'
		},
		{
			key: 'sys_create_on',
			label: 'Created Date',
			sort: 'asc'
		},
		{
			key: 'actions',
			label: 'Actions',
			sort: null
		}		
	];
	
	c.getRange = function() {
		var currentSize = c.pagination.currentSize;
		var currentPage = c.pagination.currentPage;
		
		var offset = currentSize * currentPage;
		
		return new Array(Math.ceil(c.data.tasks.length / currentSize));
	};
	
	c.setPage = function(index) {
		c.pagination.currentPage = index;
	};
	
	c.toggleSort = function(index) {
		var column = c.columns[index];
		var key = column.key;
		
		// if sorting is defined, then we can toggle this column
		if (column.sort !== null) {
			
			var sortAscending = column.sort === 'asc';
			
			column.sort = sortAscending ? 'desc' : 'asc';
			sortAscending = !sortAscending;
			
			var compareRows = function(a, b) {
				var keyA = a[key];
				var keyB = b[key];

				// use local-compare for strings
				if (isNaN(keyA) &amp;&amp; isNaN(keyB)) {
					return sortAscending ? keyA.localeCompare(keyB)
						: keyB.localeCompare(keyA);
				}

				// use normal comparison for numbers
				return sortAscending ? +keyA - +keyB : +keyB - +keyA;
			};
			
			c.data.tasks = c.data.tasks.sort(compareRows);
		}
	};
	//start client js
	var names=['investigator','email','phone', 'date', 'projectNumber', 'projectName', 'simpleSize','prospective', 'restrospective', 'human', 'nonHuman', 'germLine','somatic', 'dnaType', 'rnaType',  'microbiome', 'mitochrondria', 'otherType', 'specifyOtherType', 'snpArrayData', 'numSNP', 'expressionArray', 'numExpression','methylationArray', 'numMethylation','arrayDerive', 'microarrayData', 'sequenceData', 'somaticSnv', 'arrayCgh', 'wholeGenome', 'wholeExome', 'targetGenome', 'targetExome', 'wholeTranscriptome', 'targetTrabscriptome', 'epigenomicMark', 'sanger', 'rrna', 'association', 'arrayDerivedExpression', 'rnaExpression', 'derivedMethylation', 'otherAnalysis', 'spcifiedOtherAnalysis', 'individual', 'aggregate', 'notApplicableDataForm', 'arrayExpress', 'cancerGenomics', 'clinVar', 'dbGap', 'dbSnp', 'dbVar', 'ena', 'genBank', 'geo', 'mgi', 'sra', 'traceArchive', 'wormbase', 'zfin', 'OtherRepository', 'specifiedRepository','phenotype', 'exposure', 'clinicalData', 'specifiedClinicalData', 'protocol', 'specifiedProtocol', 'instrument', 'specifiedInstrument', 'surveyTool', 'otherCompanion', 'specifiedCompanion', 'dataCheck', 'publication', 'otherSubmission', 'psecifiedOtherSubmission', 'noHumanData', 'noLimitation','limitedOnly', 'limitedPurpose','relateToDisease','orginId', 'version','rat', 'mouse', 'celegans', 'drosophila', 'yeast', 'yeastSpecies', 'bacteria', 'bacteriaSpecies','noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna'];
	var textFields = ['investigator','email','phone', 'date', 'projectNumber','projectName', 'simpleSize','specifyOtherType','spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument','specifiedCompanion', 'psecifiedOtherSubmission', 'orginId', 'version','numSNP','numExpression','numMethylation', 'yeastSpecies', 'bacteriaSpecies', 'noHumanOther', 'numDerivedGenotype', 'numMicroarrayData', 'numSquenceData', 'numSomaticSnv', 'numArrayCgh','numWholeGenome', 'numWholeExome', 'numTargetGenome', 'numTargetedExome', 'numWholeTranscriptome', 'numTargetedTranscriptome', 'numEpigenomic', 'numSanger', 'numRrna']; 
	
	var sessionId = c.data.info.sessionId;
	var userId = c.data.info.userId;
	c.editItem = function(id){
		clearRequiredFieldBackColor();
		$('#errorMessage').html('');
		var data = {
			requested_id: id
		};
		var request = {
			method: 'POST',
			url: '/api/naci/gdspapi/fetchSavedRequestData',
			beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
			headers: {
				'Content-Type': 'application/json'
			},
			data: data
		};	
		$http(request).then(handleResponse, handleError);
		function handleResponse(response) {
			var result = response.data.result;
			showModal();
			$('#saved_id').val(id);
			loadRequestData(result[0].value);
			console.log(result);
		}
		function handleError(response) {
			console.error(response);
			alert('ERROR');
		}				
	};
	c.removeItem = function(id){
		var $confirm = $('#confirmDiv');
		$confirm.modal('show');
		$('#message').html("Are you sure you want to remove this record?");		
		$('#btnYesConfirmYesNo').off('click').click(function() {
			var data = {
				saved_id: id,
				action: 'DELETE'
			};
			var request = {
				method: 'POST',
				url: '/api/naci/gdspapi/saveRequestData',
				beforeSend: function(xhr){ xhr.setRequestHeader('X-UserToken', sessionId); },
				headers: {
					'Content-Type': 'application/json'
				},
				data: data
			};
			$http(request).then(handleResponse, handleError);
			function handleResponse(response) {
				var result = response.data.result;
				$confirm.modal('hide');
				console.log(result);
			}
			
			function handleError(response) {
				console.error(response);
				$confirm.modal('hide');
				alert('ERROR');
			}			
		});
		$('#btnNoConfirmYesNo').off('click').click(function(){			
			$confirm.modal('hide');
		});																						
	};
	
	function showModal(){
		var $dataEntry = $('#loadedRequests');
		$dataEntry.modal('show').on('shown.bs.modal', function(){
			$('#loadedRequests .modal-content').scrollTop(0);
		});
	}

 function loadRequestData(data){
    var namePair = data.split(",");
    var i = 0;
    for(i=0; i != namePair.length; i++){
         var item = namePair[i];
         if(item == '' || typeof item ==="undefined")
         {}else{  
           if(item.indexOf('=') != -1){
              var small = item.split('=');
              setRequestValue(small); 
           }
         }
     }
  }

  function setRequestValue(value){
     var name = value[0];
     var val = value[1];
     if(textFields.indexOf(name) != -1 ){ 
        if(name == 'date'){
           if (val==''||val ==="-undefined-undefined") {
             $('#'+name).val(''); 
           }
           else {
             $('#'+name).val(getConvertedValue(val, '1'));
           }
        }else{
           $('#'+name).val(val);
        }
     }else{
        if(val == "true"){
          $('#'+name).prop('checked', true); 
          if(name == 'noHumanData'){
             toggleNoHumanData();
          }
	      }else{
          $('#'+name).prop('checked', false); 
        }
				otherFieldWatcher(name, val);			 
     }
  }

	function otherFieldWatcher(name, value){
		var otherCheckbox = ['otherType', 'otherAnalysis', 'OtherRepository', 'clinicalData', 'protocol', 'instrument', 'otherCompanion', 'otherSubmission', 'yeast',  'bacteria', 'nonHuman', 'snpArrayData', 'expressionArray', 'methylationArray', 'arrayDerive','microarrayData','sequenceData','somaticSnv','arrayCgh','wholeGenome','wholeExome','targetGenome','targetExome','wholeTranscriptome','targetTrabscriptome','epigenomicMark','sanger','rrna'];
		var otherField = ['specifyOtherType', 'spcifiedOtherAnalysis', 'specifiedRepository', 'specifiedClinicalData', 'specifiedProtocol', 'specifiedInstrument', 'specifiedCompanion', 'psecifiedOtherSubmission', 'yeastSpecies', 'bacteriaSpecies','noHumanOther', 'numSNP', 'numExpression', 'numMethylation', 'numDerivedGenotype', 'numMicroarrayData','numSquenceData','numSomaticSnv','numArrayCgh','numWholeGenome','numWholeExome','numTargetGenome','numTargetedExome','numWholeTranscriptome','numTargetedTranscriptome','numEpigenomic','numSanger','numRrna'];
	  var index = otherCheckbox.indexOf(name);
		if( index &gt;= 0){
			if(value == 'true'){
				$('#'+otherField[index]).prop('disabled', false);
			}else{
				$('#'+otherField[index]).prop('disabled', true);
			}
		}
	}
	
	function getConvertedValue(value, flag){
		if(value == ''){
			return '';
		}
		var values = '';
		 if(flag == '0'){
				values = value.split('/');
				return values[0]+'-'+values[1] + '-' + values[2];
			}else {
				values = value.split('-');
				return values[0]+'/'+values[1] + '/' + values[2];
			}
	}

	function clearRequiredFieldBackColor(){
		$('#investigator').css("background-color", "");
		$('#email').css("background-color", "");
		$('#phone').css("background-color", "");
		$('#date').css("background-color", "");
		$('#projectName').css("background-color", "");
		$('#simpleSize').css("background-color", ""); 
		$('#collectionTypeId').css("background-color", "");
		$('#dataId').css("background-color", "");  
		$('#specifyOtherType').css("background-color", "");
		$('#data2Id').css("background-color", "");  
		$('#arrayDataId').css("background-color", ""); 
		$('#genotypesId').css("background-color", ""); 
		$('#sequenceId').css("background-color", ""); 
		$('#analysisId').css("background-color", "");
		$('#spcifiedOtherAnalysis').css("background-color", "");
		$('#dataFormId').css("background-color", "");
		$('#dataRepositoryId').css("background-color", "");
		$('#specifiedRepository').css("background-color", "");
		$('#companionInfoId').css("background-color", "");
		$('#specifiedClinicalData').css("background-color", "");
		$('#specifiedProtocol').css("background-color", "");
		$('#specifiedInstrument').css("background-color", "");
		$('#specifiedCompanion').css("background-color", "");
		$('#dataSubmissionId').css("background-color", "");
		$('#psecifiedOtherSubmission').css("background-color", "");
		$('#dataUseId').css("background-color", "");
	}	
	function toggleNoHumanData(){
		if($('#noHumanData').is(":checked")){
			  $('#noLimitation').attr("checked", false);
			  $('#noLimitation').attr("disabled", "disabled");
			  $('#limitedOnly').attr("checked", false);
			  $('#limitedOnly').attr("disabled", "disabled");
			  $('#limitedPurpose').attr("checked", false);
			  $('#limitedPurpose').attr("disabled", "disabled");
			  $('#relateToDisease').attr("checked", false);
			  $('#relateToDisease').attr("disabled", "disabled");
		}else{
			  $('#noLimitation').removeAttr("disabled");
			  $('#limitedOnly').removeAttr("disabled");
			  $('#limitedPurpose').removeAttr("disabled");
			  $('#relateToDisease').removeAttr("disabled");
		}		
	}
	
	spUtil.recordWatch($scope, "u_gdsp_user_submission", "", function(name, data) {  
			spUtil.update($scope);
	});	
}]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css/&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;gdsp-saved-table&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link/&gt;&lt;name&gt;GDSP Saved Table&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.tasks = [];
	data.info = [];
	var session_id = gs.getSessionToken();
	var my_sys_id = gs.getUserID();
	
	data.info = {
		userId: my_sys_id,
		sessionId: session_id
	};
	
	var gr_saved_items = new GlideRecord('u_gdsp_user_submission');
			gr_saved_items.addQuery('u_userid', my_sys_id);
	        gr_saved_items.addQuery('u_application', 'GDSP');
			gr_saved_items.orderByDesc('sys_updated_on');
			gr_saved_items.query();
	 while (gr_saved_items.next()){
			var item = {};
			item.project_name = gr_saved_items.getDisplayValue("u_project_name");
			item.sys_create_on = gr_saved_items.getValue('sys_created_on');	
		  item.sys_id = gr_saved_items.getDisplayValue("sys_id");
			data.tasks.push(item);
	 }
	
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;zhoujim@nih.gov&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-04-11 15:29:06&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;a970b6f5db0e7a0054d8ff621f96194c&lt;/sys_id&gt;&lt;sys_mod_count&gt;76&lt;/sys_mod_count&gt;&lt;sys_name&gt;GDSP Saved Table&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="Global"&gt;global&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_a970b6f5db0e7a0054d8ff621f96194c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;zhoujim@nih.gov&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-07-20 15:34:30&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div&gt;
&lt;br/&gt;
&lt;div class="panel panel-success" ng-show="c.data.tasks.length &gt; 0"&gt;
  &lt;div class="panel-heading" id="heading_savedItems" role="tab"&gt;
    &lt;h4 class="panel-title"&gt;
      &lt;a aria-controls="collapsesavedItems" aria-expanded="true" data-target="#collapsesavedItems" data-toggle="collapse" role="button"&gt;
        &lt;span class="accordion_icon"&gt;&lt;i class="fa fa-minus-square"&gt;&lt;/i&gt;&lt;/span&gt; 
        Draft GDSPs &lt;span class="badge" id="ritm_count"&gt;{{ c.data.tasks.length }}&lt;/span&gt;&lt;/a&gt;&lt;/h4&gt;
  &lt;/div&gt;
  
  &lt;div aria-labelledby="heading_savedItems" class="panel-collapse collapse in table-responsive" id="collapsesavedItems" role="tabpanel"&gt;
    &lt;table class="table table-bordered table-striped table-condensed table-hover"&gt;
			&lt;thead&gt;
      &lt;tr&gt;
        &lt;th 
            ng-repeat="column in c.columns track by $index" 
            ng-click="c.toggleSort($index)" 
            style="cursor: pointer"&gt;
        		{{ column.label }}
          	&lt;span 
            	class="glyphicon small" 
              ng-class="{
                        	'glyphicon-chevron-up': column.sort === 'asc',
                        	'glyphicon-chevron-down': column.sort === 'desc'
                        }"&gt;
          	&lt;/span&gt;
        &lt;/th&gt;
      &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tr ng-repeat="row in c.data.tasks track by $index"
          ng-show="$index &gt;= c.pagination.currentPage * c.pagination.currentSize &amp;&amp;
                   $index &lt; (c.pagination.currentPage + 1) * c.pagination.currentSize"&gt;
        &lt;td class="ritm_number"&gt;{{ row.project_name }}&lt;/td&gt;
        &lt;td class="ritm_number"&gt;{{ row.sys_create_on }}&lt;/td&gt;
        &lt;td&gt;
        	&lt;button class="btn btn-sm btn-primary" ng-click="c.editItem(row.sys_id)" style="width: 70px; text-align: center;"&gt;
          	Edit
         	&lt;/button&gt;
          &lt;button class="btn btn-sm btn-primary" ng-click="c.removeItem(row.sys_id)"style="width: 70px; text-align: center;"&gt;
            Remove
         	&lt;/button&gt;
       	&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/div&gt;

	&lt;!-- select the page size --&gt;
	&lt;form class="form-inline pull-right"&gt;
    &lt;div class="pagination form-group"&gt;
      &lt;label for="pageSize1"&gt;
      	Items per page
      &lt;/label&gt;
      
      &lt;select 
      	id="pageSize1" 
        class="form-control"
				style="display: inline"
        ng-init="c.pagination.currentSize = c.pagination.pageSizes[1]"
        ng-model="c.pagination.currentSize"
        ng-options="sizes for sizes in c.pagination.pageSizes"&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  &lt;/form&gt;  
  
  &lt;!-- select the page index (offset) --&gt;
  &lt;ul class="pagination" ng-show="c.pagination.currentSize &lt; c.data.tasks.length"&gt;
    &lt;li
      ng-repeat="index in c.getRange() track by $index"
      ng-click="c.setPage($index)"
      &gt;
      &lt;a href=""&gt;
      	{{ $index + 1 }}
      &lt;/a&gt;
    &lt;/li&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- confirm modal --&gt;
&lt;div id="confirmDiv" class="modal fade"&gt;
    &lt;div class="modal-dialog"&gt;
        &lt;div class="modal-content"&gt;
            &lt;div class="modal-header"&gt;
                &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt;
                    &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
                &lt;/button&gt;
                &lt;h4 id="lblTitleConfirmYesNo" class="modal-title"&gt;Confirmation&lt;/h4&gt;
            &lt;/div&gt;
            &lt;div class="modal-body"&gt;
                &lt;p align="center" id="message"&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="modal-footer"&gt;
                &lt;button id="btnYesConfirmYesNo" 
                type="button" class="btn btn-primary" 
                style="width: 70px; text-align: center;"&gt;Yes&lt;/button&gt;
                &lt;button id="btnNoConfirmYesNo" 
                type="button" class="btn btn-default" 
                style="width: 70px; text-align: center;"&gt;No&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1449703694</payload_hash>
<remote_update_set display_value="CCR_GDS_Patch_2_20180717">bc576a31db2b5b00b86770c08c961913</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>zhoujim@nih.gov</sys_created_by>
<sys_created_on>2018-07-27 20:45:11</sys_created_on>
<sys_id>fc576a31db2b5b00b86770c08c961984</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>164b853ffa70000001</sys_recorded_at>
<sys_updated_by>zhoujim@nih.gov</sys_updated_by>
<sys_updated_on>2018-07-27 20:45:11</sys_updated_on>
<table/>
<target_name>GDSP Saved Table</target_name>
<type>Widget</type>
<update_domain>global</update_domain>
<update_guid>e11d9da75e1f5300ace3d2102ce3a6fe</update_guid>
<update_guid_history>e11d9da75e1f5300ace3d2102ce3a6fe:-1449703694,120d91a7401f5300d6dcd189f28fd53c:413429325,bad49923001f53006476b98494fc5093:-1449703694,-1334118873:-1334118873,1992282241:1992282241,-1416138676:-1416138676</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
</unload>
